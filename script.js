const _0x187704=_0x2d05;(function(_0x45e6df,_0x2fc792){const _0xe2328b=_0x2d05,_0x1617e7=_0x45e6df();while(!![]){try{const _0x26dd2b=-parseInt(_0xe2328b(0x417))/0x1+parseInt(_0xe2328b(0x355))/0x2*(-parseInt(_0xe2328b(0x3d2))/0x3)+-parseInt(_0xe2328b(0x278))/0x4+parseInt(_0xe2328b(0x3f4))/0x5+-parseInt(_0xe2328b(0x414))/0x6*(-parseInt(_0xe2328b(0x28f))/0x7)+parseInt(_0xe2328b(0x2bf))/0x8+-parseInt(_0xe2328b(0x2d5))/0x9*(-parseInt(_0xe2328b(0x20e))/0xa);if(_0x26dd2b===_0x2fc792)break;else _0x1617e7['push'](_0x1617e7['shift']());}catch(_0x41663f){_0x1617e7['push'](_0x1617e7['shift']());}}}(_0x3ca3,0x379dd));const API_KEY='AIzaSyB3umTE3n2d5gwKzOmJz4ss1pFZMR8_vOE',API_BASE_URL='https://generativelanguage.googleapis.com/v1beta/models/';let currentUser=null,pinnedFiles=[],currentConversation=[],conversations={},currentApiKeyIndex=0x0,userScrolling=![],lastScrollTop=0x0,scrollTimeout;const FREE_CREDITS_PER_DAY=0x3,FREE_CREDITS_REGISTER=0xa,FREE_MODEL_MAX_WORDS=0xc350,FREE_MODEL_MAX_RESPONSE=0x7d0,RETRY_CONFIG={'maxAttempts':0x32,'retryDelay':0x2710},SYSTEM_INSTRUCTION=_0x187704(0x321),firebaseConfig={'apiKey':'AIzaSyCvizcYorGDPN3GXqma0opp7wAiMkaCt64','authDomain':_0x187704(0x351),'databaseURL':_0x187704(0x3a8),'projectId':_0x187704(0x227),'storageBucket':_0x187704(0x22f),'messagingSenderId':_0x187704(0x41d),'appId':_0x187704(0x296),'measurementId':_0x187704(0x235)};firebase[_0x187704(0x208)](firebaseConfig);const db=firebase['database']();let prompts={},pinnedPrompt=null,pinnedResponses=[],genAI;const API_KEY_LIST_REF=db[_0x187704(0x200)]('API');let apiKeyList=[];class GeminiApiManager{constructor(){const _0x4de9c1=_0x187704;this['db']=firebase[_0x4de9c1(0x1e5)](),this[_0x4de9c1(0x248)]=[],this[_0x4de9c1(0x386)]=0x0,this[_0x4de9c1(0x418)]={'maxAttempts':0x3,'baseDelay':0x3e8,'maxDelay':0x1388},this[_0x4de9c1(0x397)]=new Map();}async[_0x187704(0x328)](){const _0x1b2f96=_0x187704;try{return await this['loadApiKeys'](),this[_0x1b2f96(0x250)](),!![];}catch(_0x52ce19){return console[_0x1b2f96(0x38c)](_0x1b2f96(0x2b8),_0x52ce19),![];}}async[_0x187704(0x2aa)](){const _0x5f5c7b=_0x187704,_0x1d9e14=await this['db']['ref'](_0x5f5c7b(0x2de))['once'](_0x5f5c7b(0x313)),_0x4521f7=_0x1d9e14[_0x5f5c7b(0x360)]();if(!_0x4521f7)throw new Error('Aucune\x20clé\x20API\x20trouvée\x20dans\x20la\x20base\x20de\x20données');this['apiKeyList']=Object[_0x5f5c7b(0x297)](_0x4521f7);if(this[_0x5f5c7b(0x248)][_0x5f5c7b(0x2a4)]===0x0)throw new Error('La\x20liste\x20des\x20clés\x20API\x20est\x20vide');}['getCurrentApi'](){const _0x3e69fc=this['apiKeyList'][this['currentKeyIndex']];return new GoogleGenerativeAI(_0x3e69fc);}[_0x187704(0x250)](){setInterval(()=>{const _0x333ff0=_0x2d05;this[_0x333ff0(0x346)]();},0x1388);}[_0x187704(0x346)](){const _0x42467d=_0x187704;this[_0x42467d(0x386)]=(this[_0x42467d(0x386)]+0x1)%this[_0x42467d(0x248)][_0x42467d(0x2a4)];const _0x4b3fd0=this[_0x42467d(0x248)][this[_0x42467d(0x386)]];try{genAI=new GoogleGenerativeAI(_0x4b3fd0),model=genAI[_0x42467d(0x2d7)]({'model':document[_0x42467d(0x2eb)](_0x42467d(0x24d))['value'],'systemInstruction':SYSTEM_INSTRUCTION}),console[_0x42467d(0x37a)](_0x42467d(0x3cf));}catch(_0x228483){console[_0x42467d(0x38c)](_0x42467d(0x1d4),_0x228483),this[_0x42467d(0x423)](this['currentKeyIndex']);}}[_0x187704(0x423)](_0x17e9d0){const _0x26d712=_0x187704,_0xc9adbf=this[_0x26d712(0x248)][_0x17e9d0];!this['errorTracker'][_0x26d712(0x2fb)](_0xc9adbf)&&this[_0x26d712(0x397)][_0x26d712(0x2ca)](_0xc9adbf,{'count':0x0,'lastError':Date['now']()});const _0x5d5412=this['errorTracker'][_0x26d712(0x302)](_0xc9adbf);_0x5d5412[_0x26d712(0x33c)]++,_0x5d5412[_0x26d712(0x3e5)]=Date[_0x26d712(0x3c5)](),_0x5d5412[_0x26d712(0x33c)]>=0x5&&this[_0x26d712(0x2a1)](_0x17e9d0);}async[_0x187704(0x2a1)](_0x3e76e4){const _0x182b0e=_0x187704,_0x107cc7=this[_0x182b0e(0x248)][_0x3e76e4];console['warn']('Désactivation\x20temporaire\x20de\x20la\x20clé\x20API:\x20'+_0x107cc7[_0x182b0e(0x2a8)](0x0,0x8)+'...');try{await this['db'][_0x182b0e(0x200)](_0x182b0e(0x289)+_0x3e76e4+_0x182b0e(0x280))[_0x182b0e(0x2ca)]({'timestamp':Date[_0x182b0e(0x3c5)](),'reason':_0x182b0e(0x2e5)});}catch(_0x2924eb){console['error'](_0x182b0e(0x2af),_0x2924eb);}setTimeout(()=>{const _0x3a3e58=_0x182b0e;this[_0x3a3e58(0x304)](_0x3e76e4);},0x36ee80);}async[_0x187704(0x304)](_0x1dc35a){const _0x3f8205=_0x187704;try{await this['db'][_0x3f8205(0x200)]('API/'+_0x1dc35a+'/disabled')[_0x3f8205(0x408)](),this[_0x3f8205(0x397)][_0x3f8205(0x368)](this['apiKeyList'][_0x1dc35a]),console[_0x3f8205(0x37a)](_0x3f8205(0x301)+this[_0x3f8205(0x248)][_0x1dc35a][_0x3f8205(0x2a8)](0x0,0x8)+_0x3f8205(0x290));}catch(_0x40ca42){console['error']('Erreur\x20lors\x20de\x20la\x20réactivation\x20de\x20la\x20clé:',_0x40ca42);}}async[_0x187704(0x39e)](_0x2d6982){const _0x2600e8=_0x187704;let _0x287607=0x0,_0x20ecdf=null;while(_0x287607<this['retryConfig'][_0x2600e8(0x1f7)]){try{genAI=this[_0x2600e8(0x2d0)](),model=genAI[_0x2600e8(0x2d7)]({'model':document['getElementById'](_0x2600e8(0x24d))[_0x2600e8(0x313)],'systemInstruction':SYSTEM_INSTRUCTION});const _0x1afb5d=await _0x2d6982();return _0x1afb5d;}catch(_0x2d8291){_0x20ecdf=_0x2d8291,_0x287607++;if(!this[_0x2600e8(0x3fe)](_0x2d8291)||_0x287607>=this[_0x2600e8(0x418)]['maxAttempts'])throw _0x2d8291;const _0x3f5db8=this[_0x2600e8(0x3af)](_0x287607);console[_0x2600e8(0x37a)]('Tentative\x20'+_0x287607+'/'+this[_0x2600e8(0x418)][_0x2600e8(0x1f7)]+_0x2600e8(0x3de)+_0x3f5db8+'ms'),this[_0x2600e8(0x346)](),await new Promise(_0x1c5d4d=>setTimeout(_0x1c5d4d,_0x3f5db8));}}throw new Error(_0x2600e8(0x326)+_0x287607+_0x2600e8(0x272)+_0x20ecdf['message']);}[_0x187704(0x3fe)](_0x409ede){const _0x2fae47=_0x187704,_0x3d0386=[_0x2fae47(0x236),_0x2fae47(0x402),_0x2fae47(0x415),'INTERNAL',_0x2fae47(0x37c)];return _0x3d0386[_0x2fae47(0x38f)](_0x409ede[_0x2fae47(0x21f)])||_0x409ede[_0x2fae47(0x27f)][_0x2fae47(0x38f)](_0x2fae47(0x20f))||_0x409ede[_0x2fae47(0x27f)][_0x2fae47(0x38f)](_0x2fae47(0x249))||_0x409ede[_0x2fae47(0x375)]===0x1ad||_0x409ede['status']>=0x1f4;}['calculateRetryDelay'](_0x4ef5e4){const _0x4f8078=_0x187704,_0x5739b5=Math['min'](this[_0x4f8078(0x418)]['maxDelay'],this[_0x4f8078(0x418)][_0x4f8078(0x362)]*Math[_0x4f8078(0x36c)](0x2,_0x4ef5e4-0x1));return _0x5739b5+Math['random']()*0x3e8;}['startPerformanceMonitoring'](){setInterval(()=>{const _0x5829b0=_0x2d05;this[_0x5829b0(0x26e)]();},0x493e0);}async[_0x187704(0x26e)](){const _0x1e6bf1=_0x187704,_0x40a214=Array['from'](this['errorTracker'][_0x1e6bf1(0x1d0)]())[_0x1e6bf1(0x366)](([_0x19e939,_0x1e4493])=>({'key':_0x19e939[_0x1e6bf1(0x2a8)](0x0,0x8),'errors':_0x1e4493[_0x1e6bf1(0x33c)],'lastError':new Date(_0x1e4493[_0x1e6bf1(0x3e5)])[_0x1e6bf1(0x3ad)]()}));console[_0x1e6bf1(0x38a)](_0x40a214);try{await this['db'][_0x1e6bf1(0x200)](_0x1e6bf1(0x2c1))[_0x1e6bf1(0x29b)]({'timestamp':Date[_0x1e6bf1(0x3c5)](),'stats':_0x40a214});}catch(_0x51905b){console['error'](_0x1e6bf1(0x239),_0x51905b);}}}async function loadApiKeyList(){const _0x2b3801=_0x187704;try{const _0x19b566=await API_KEY_LIST_REF['once'](_0x2b3801(0x313)),_0xe5cc0a=_0x19b566[_0x2b3801(0x360)]();_0xe5cc0a?apiKeyList=Object[_0x2b3801(0x297)](_0xe5cc0a):console[_0x2b3801(0x3ce)]('Aucune\x20clé\x20API\x20trouvée\x20dans\x20la\x20base\x20de\x20données.');}catch(_0x484be0){console[_0x2b3801(0x38c)](_0x2b3801(0x220),_0x484be0);}}function getRandomApiKey(){const _0x47a191=_0x187704;if(apiKeyList['length']===0x0)return console[_0x47a191(0x38c)](_0x47a191(0x26b)),null;const _0x12b4ef=Math['floor'](Math['random']()*apiKeyList[_0x47a191(0x2a4)]);return apiKeyList[_0x12b4ef];}function getNextApiKey(){const _0x5f4e9d=_0x187704;if(apiKeyList[_0x5f4e9d(0x2a4)]===0x0)return console[_0x5f4e9d(0x38c)](_0x5f4e9d(0x26b)),null;const _0x186898=apiKeyList[currentApiKeyIndex];return currentApiKeyIndex=(currentApiKeyIndex+0x1)%apiKeyList['length'],_0x186898;}function initializeApiKeyRotation(){apiKeyList['length']>0x0&&(genAI=new GoogleGenerativeAI(getNextApiKey())),setInterval(()=>{const _0x3e034f=_0x2d05,_0x3ef0c0=getNextApiKey();_0x3ef0c0&&(genAI=new GoogleGenerativeAI(_0x3ef0c0),console['log']('Rotation\x20de\x20la\x20clé\x20API\x20effectuée'),model=genAI[_0x3e034f(0x2d7)]({'model':document['getElementById'](_0x3e034f(0x24d))[_0x3e034f(0x313)],'systemInstruction':SYSTEM_INSTRUCTION}));},0x1388);}function _0x2d05(_0x2ed274,_0x4fbfb3){const _0x3ca3be=_0x3ca3();return _0x2d05=function(_0x2d057e,_0x595fd9){_0x2d057e=_0x2d057e-0x1cf;let _0x37e5da=_0x3ca3be[_0x2d057e];return _0x37e5da;},_0x2d05(_0x2ed274,_0x4fbfb3);}function initializeGeminiAPI(){const _0x25df7d=_0x187704,_0x459403=getNextApiKey();_0x459403?(genAI=new GoogleGenerativeAI(_0x459403),model=genAI['getGenerativeModel']({'model':document[_0x25df7d(0x2eb)]('modelSelect')['value'],'systemInstruction':SYSTEM_INSTRUCTION})):showNotification('Erreur\x20:\x20Impossible\x20d\x27initialiser\x20l\x27API.\x20Aucune\x20clé\x20API\x20disponible.','error');}class ApiError extends Error{constructor(_0x307236,_0xadce97){const _0x43043c=_0x187704;super(_0x307236),this[_0x43043c(0x375)]=_0xadce97,this['name']='ApiError';}}class ApiKeyManager{constructor(_0x47f8fa){const _0x37f35b=_0x187704;this[_0x37f35b(0x34a)]=_0x47f8fa,this[_0x37f35b(0x23c)]=0x0,this['usedKeys']=new Set();}[_0x187704(0x22c)](){const _0x1956c3=_0x187704,_0x198f1b=this[_0x1956c3(0x23c)];do{this['currentIndex']=(this[_0x1956c3(0x23c)]+0x1)%this[_0x1956c3(0x34a)][_0x1956c3(0x2a4)];if(!this[_0x1956c3(0x2f3)][_0x1956c3(0x2fb)](this['apiKeys'][this[_0x1956c3(0x23c)]]))return this[_0x1956c3(0x34a)][this[_0x1956c3(0x23c)]];}while(this[_0x1956c3(0x23c)]!==_0x198f1b);return null;}[_0x187704(0x3cc)](){const _0x3ace25=_0x187704;this[_0x3ace25(0x2f3)]['clear']();}[_0x187704(0x1d3)](_0x2c0b21){const _0x2d08e6=_0x187704;this['usedKeys'][_0x2d08e6(0x364)](_0x2c0b21);}}async function executeWithRetry(_0x28300f){const _0x107b4c=_0x187704,_0x32e3c6=new ApiKeyManager(apiKeyList);let _0x5465a2=null,_0x144e22=0x0;while(_0x144e22<RETRY_CONFIG[_0x107b4c(0x1f7)]){const _0x339a2d=_0x32e3c6[_0x107b4c(0x22c)]();if(!_0x339a2d)throw new Error(_0x107b4c(0x27e));try{genAI=new GoogleGenerativeAI(_0x339a2d),model=genAI['getGenerativeModel']({'model':document[_0x107b4c(0x2eb)]('modelSelect')['value'],'systemInstruction':SYSTEM_INSTRUCTION});const _0x44804d=await _0x28300f();return console['log'](_0x107b4c(0x259)+_0x339a2d),_0x44804d;}catch(_0x560127){_0x5465a2=_0x560127,_0x32e3c6[_0x107b4c(0x1d3)](_0x339a2d),_0x144e22++,console[_0x107b4c(0x37a)](_0x107b4c(0x214)+_0x339a2d+'.\x20Tentative\x20'+_0x144e22+'/'+RETRY_CONFIG[_0x107b4c(0x1f7)]),_0x144e22<RETRY_CONFIG[_0x107b4c(0x1f7)]&&await new Promise(_0x39f088=>setTimeout(_0x39f088,RETRY_CONFIG[_0x107b4c(0x2f5)]));}}throw new Error(_0x107b4c(0x326)+_0x144e22+'\x20tentatives.\x20Dernière\x20erreur:\x20'+_0x5465a2[_0x107b4c(0x27f)]);}function shouldRetry(_0x1339b3){const _0x49bf8d=_0x187704,_0x4c2f1d=[_0x49bf8d(0x236),'UNAVAILABLE','DEADLINE_EXCEEDED',_0x49bf8d(0x2f7),_0x49bf8d(0x37c)];return _0x4c2f1d[_0x49bf8d(0x38f)](_0x1339b3[_0x49bf8d(0x21f)])||_0x1339b3[_0x49bf8d(0x27f)][_0x49bf8d(0x38f)](_0x49bf8d(0x20f))||_0x1339b3[_0x49bf8d(0x27f)][_0x49bf8d(0x38f)]('rate\x20limit')||_0x1339b3[_0x49bf8d(0x375)]===0x1ad||_0x1339b3[_0x49bf8d(0x375)]>=0x1f4;}function createPointer(){const _0x5d5ec0=_0x187704,_0x42a3df=document['createElement'](_0x5d5ec0(0x343));return _0x42a3df[_0x5d5ec0(0x21a)]['add'](_0x5d5ec0(0x3ee)),_0x42a3df['innerHTML']='👆',_0x42a3df[_0x5d5ec0(0x354)][_0x5d5ec0(0x2fd)]=_0x5d5ec0(0x298),_0x42a3df['style'][_0x5d5ec0(0x3c0)]='none',document[_0x5d5ec0(0x410)][_0x5d5ec0(0x1f1)](_0x42a3df),_0x42a3df;}function positionPointer(_0x2699ac,_0x1a9fb7){const _0x32a1b1=_0x187704,_0x11e592=_0x1a9fb7[_0x32a1b1(0x395)]();_0x2699ac[_0x32a1b1(0x354)][_0x32a1b1(0x341)]=_0x11e592[_0x32a1b1(0x341)]+_0x11e592[_0x32a1b1(0x30e)]/0x2+'px',_0x2699ac[_0x32a1b1(0x354)]['top']=_0x11e592['top']+_0x11e592[_0x32a1b1(0x353)]/0x2+'px',_0x2699ac[_0x32a1b1(0x354)]['display']=_0x32a1b1(0x26c);}function highlightElement(_0x26483c){const _0x48640e=_0x187704;_0x26483c['classList'][_0x48640e(0x364)](_0x48640e(0x332));}function removeHighlight(_0x5139dc){const _0xcd6806=_0x187704;_0x5139dc[_0xcd6806(0x21a)][_0xcd6806(0x408)](_0xcd6806(0x332));}function startGuidedTour(){const _0x29f49c=_0x187704,_0x1300da=createPointer(),_0x1bb979=new Shepherd[(_0x29f49c(0x287))]({'defaultStepOptions':{'cancelIcon':{'enabled':!![]},'classes':_0x29f49c(0x345),'scrollTo':{'behavior':_0x29f49c(0x3d3),'block':_0x29f49c(0x35f)}}}),_0x2e061b=[{'id':'welcome','text':_0x29f49c(0x3e7),'attachTo':{'element':'.logo','on':_0x29f49c(0x329)}},{'id':_0x29f49c(0x3c9),'text':_0x29f49c(0x29e),'attachTo':{'element':_0x29f49c(0x20d),'on':_0x29f49c(0x25d)},'beforeShow':()=>{const _0x3d2c7b=_0x29f49c,_0x5c2704=document[_0x3d2c7b(0x409)](_0x3d2c7b(0x20d));highlightElement(_0x5c2704);const _0x3a06e9=document[_0x3d2c7b(0x409)](_0x3d2c7b(0x261));!_0x3a06e9['classList'][_0x3d2c7b(0x22d)](_0x3d2c7b(0x25a))&&_0x5c2704['click']();},'beforeHide':()=>{const _0x41419c=_0x29f49c,_0x4a32bd=document['querySelector'](_0x41419c(0x20d));removeHighlight(_0x4a32bd);}},{'id':'input-area','text':'Voici\x20la\x20zone\x20de\x20saisie.\x20C\x27est\x20ici\x20que\x20vous\x20poserez\x20vos\x20questions.','attachTo':{'element':_0x29f49c(0x334),'on':_0x29f49c(0x39a)}},{'id':'file-upload','text':_0x29f49c(0x2fa),'attachTo':{'element':_0x29f49c(0x3ef),'on':'top'}},{'id':'prompt-list','text':_0x29f49c(0x1e9),'attachTo':{'element':'#promptListButton','on':'top'}},{'id':_0x29f49c(0x284),'text':_0x29f49c(0x31c),'attachTo':{'element':'.input-actions\x20button:last-child','on':_0x29f49c(0x39a)}},{'id':'message-actions','text':_0x29f49c(0x25b),'attachTo':{'element':_0x29f49c(0x420),'on':_0x29f49c(0x329)}}];_0x2e061b[_0x29f49c(0x36b)]((_0x16f63e,_0xf42721)=>{const _0x3a552e=_0x29f49c;_0x1bb979[_0x3a552e(0x2c9)]({..._0x16f63e,'buttons':[{'text':_0xf42721===_0x2e061b[_0x3a552e(0x2a4)]-0x1?_0x3a552e(0x311):'Suivant','action':_0xf42721===_0x2e061b[_0x3a552e(0x2a4)]-0x1?_0x1bb979[_0x3a552e(0x3c1)]:_0x1bb979[_0x3a552e(0x2c2)]}],'beforeShow':()=>{const _0x4ab27a=_0x3a552e,_0x134d23=document[_0x4ab27a(0x409)](_0x16f63e[_0x4ab27a(0x2ec)][_0x4ab27a(0x212)]);_0x134d23&&positionPointer(_0x1300da,_0x134d23),_0x16f63e[_0x4ab27a(0x1f8)]&&_0x16f63e[_0x4ab27a(0x1f8)]();},'beforeHide':()=>{const _0x217664=_0x3a552e;_0x1300da['style'][_0x217664(0x3c0)]=_0x217664(0x30f);}});}),_0x1bb979['on'](_0x29f49c(0x3c1),()=>{const _0x43cbd7=_0x29f49c;_0x1300da[_0x43cbd7(0x408)]();const _0x230bc7=document[_0x43cbd7(0x409)](_0x43cbd7(0x261));_0x230bc7['classList'][_0x43cbd7(0x22d)](_0x43cbd7(0x25a))&&document[_0x43cbd7(0x409)](_0x43cbd7(0x20d))[_0x43cbd7(0x36e)]();}),_0x1bb979[_0x29f49c(0x209)]();}async function checkGuidedTourStatus(_0x300d8e){const _0x30624d=_0x187704,_0x17f7be=db[_0x30624d(0x200)](_0x30624d(0x318)+_0x300d8e),_0x815ed7=await _0x17f7be[_0x30624d(0x269)](_0x30624d(0x313)),_0xdd9512=_0x815ed7[_0x30624d(0x360)]();return _0xdd9512&&_0xdd9512[_0x30624d(0x358)];}async function markGuidedTourAsSeen(_0x218515){const _0xd38fa0=_0x187704,_0x3fba47=db[_0xd38fa0(0x200)](_0xd38fa0(0x318)+_0x218515);await _0x3fba47[_0xd38fa0(0x404)]({'hasSeenGuidedTour':!![]});}async function checkSubscriptionStatus(){const _0x3e68e5=_0x187704;if(!currentUser||!currentUser[_0x3e68e5(0x3ea)])return;const _0x46f3c4=new Date(),_0x1ae753=new Date(currentUser[_0x3e68e5(0x3ea)]);if(_0x46f3c4>_0x1ae753)currentUser[_0x3e68e5(0x288)]=null,currentUser['subscriptionEndDate']=null,await syncUserData(),showNotification('Votre\x20abonnement\x20a\x20expiré.',_0x3e68e5(0x215)),updateUIForLoggedInUser();else{if(_0x46f3c4>new Date(_0x1ae753['getTime']()-0x3*0x18*0x3c*0x3c*0x3e8)){const _0x1bc2a6=Math[_0x3e68e5(0x27d)]((_0x1ae753-_0x46f3c4)/(0x18*0x3c*0x3c*0x3e8));showNotification(_0x3e68e5(0x3dc)+_0x1bc2a6+_0x3e68e5(0x3d8)+(_0x1bc2a6>0x1?'s':'')+'.',_0x3e68e5(0x361));}}}function generateInvoicePDF(_0x3aacd7){const _0x512d48=_0x187704,{jsPDF:_0x11b3a1}=window[_0x512d48(0x330)],_0x3a8d69=new _0x11b3a1();return _0x3a8d69[_0x512d48(0x2a7)](0x12),_0x3a8d69['text'](_0x512d48(0x1d7),0x69,0x14,null,null,_0x512d48(0x35f)),_0x3a8d69[_0x512d48(0x2a7)](0xc),_0x3a8d69['text']('Facture\x20pour\x20:\x20'+currentUser['username'],0x14,0x28),_0x3a8d69[_0x512d48(0x2a5)](_0x512d48(0x273)+new Date()[_0x512d48(0x41a)](),0x14,0x32),_0x3a8d69[_0x512d48(0x2a5)]('Description\x20:\x20'+_0x3aacd7[_0x512d48(0x222)],0x14,0x3c),_0x3a8d69[_0x512d48(0x2a5)](_0x512d48(0x40b)+_0x3aacd7['amount']+_0x512d48(0x3f9),0x14,0x46),_0x3a8d69[_0x512d48(0x2a5)](_0x512d48(0x3f5)+_0x3aacd7['id'],0x14,0x50),_0x3a8d69;}function showInvoiceDetails(_0x1801df){const _0x62d88d=_0x187704,_0x2a3813=document[_0x62d88d(0x2c7)](_0x62d88d(0x343));_0x2a3813[_0x62d88d(0x391)]=_0x62d88d(0x3b9),_0x2a3813[_0x62d88d(0x28d)]=_0x62d88d(0x3b1)+new Date()[_0x62d88d(0x41a)]()+_0x62d88d(0x35c)+_0x1801df[_0x62d88d(0x222)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Montant:</strong>\x20'+_0x1801df[_0x62d88d(0x3fa)]+_0x62d88d(0x21b)+_0x1801df['id']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22downloadInvoice\x22>Télécharger\x20la\x20facture\x20en\x20PDF</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeModal\x22>Fermer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',document[_0x62d88d(0x410)][_0x62d88d(0x1f1)](_0x2a3813),document[_0x62d88d(0x2eb)]('downloadInvoice')['addEventListener'](_0x62d88d(0x36e),()=>{const _0x4485aa=_0x62d88d,_0x3ddad4=generateInvoicePDF(_0x1801df);_0x3ddad4[_0x4485aa(0x263)](_0x4485aa(0x35e)+_0x1801df['id']+'.pdf');}),document[_0x62d88d(0x2eb)]('closeModal')[_0x62d88d(0x372)](_0x62d88d(0x36e),()=>{const _0x5a6ec8=_0x62d88d;document[_0x5a6ec8(0x410)][_0x5a6ec8(0x257)](_0x2a3813);});}function initializeNewDiscussion(){const _0x3e5b3b=_0x187704;currentConversation=[];const _0x19bb72=document[_0x3e5b3b(0x2eb)](_0x3e5b3b(0x1d2));_0x19bb72['innerHTML']='',addMessageToChat('ai','Bienvenue\x20dans\x20une\x20nouvelle\x20conversation\x20!\x20Comment\x20puis-je\x20vous\x20aider\x20aujourd\x27hui\x20?'),updateConversationHistory();}function showLoginModal(){const _0x387c09=_0x187704;document[_0x387c09(0x2eb)](_0x387c09(0x2bd))['style'][_0x387c09(0x3c0)]=_0x387c09(0x26c);}function showRegisterModal(){const _0x4e3f49=_0x187704;document[_0x4e3f49(0x2eb)](_0x4e3f49(0x28e))[_0x4e3f49(0x354)]['display']='block';}function closeModal(_0x405b0a){const _0x491d42=_0x187704;document[_0x491d42(0x2eb)](_0x405b0a)[_0x491d42(0x354)][_0x491d42(0x3c0)]=_0x491d42(0x30f);}function updateUIForLoggedInUser(){const _0x574fd3=_0x187704;document['getElementById'](_0x574fd3(0x282))[_0x574fd3(0x21a)][_0x574fd3(0x364)](_0x574fd3(0x352)),document[_0x574fd3(0x2eb)](_0x574fd3(0x2ac))[_0x574fd3(0x21a)]['add'](_0x574fd3(0x352)),document['getElementById'](_0x574fd3(0x40c))['classList'][_0x574fd3(0x408)](_0x574fd3(0x352)),document[_0x574fd3(0x2eb)](_0x574fd3(0x32f))[_0x574fd3(0x21a)][_0x574fd3(0x408)]('hidden'),document[_0x574fd3(0x2eb)](_0x574fd3(0x316))[_0x574fd3(0x238)]=currentUser[_0x574fd3(0x316)],document[_0x574fd3(0x2eb)]('freeCredits')[_0x574fd3(0x238)]=currentUser[_0x574fd3(0x3c7)],document[_0x574fd3(0x2eb)](_0x574fd3(0x2dd))[_0x574fd3(0x238)]=currentUser[_0x574fd3(0x2dd)],document[_0x574fd3(0x2eb)]('subscription')['textContent']=currentUser[_0x574fd3(0x288)]||_0x574fd3(0x230),loadConversationHistory();}function updateUIForLoggedOutUser(){const _0x44b8c7=_0x187704;document[_0x44b8c7(0x2eb)](_0x44b8c7(0x282))[_0x44b8c7(0x21a)][_0x44b8c7(0x408)](_0x44b8c7(0x352)),document[_0x44b8c7(0x2eb)]('registerBtn')[_0x44b8c7(0x21a)][_0x44b8c7(0x408)]('hidden'),document[_0x44b8c7(0x2eb)]('logoutBtn')[_0x44b8c7(0x21a)]['add'](_0x44b8c7(0x352)),document[_0x44b8c7(0x2eb)](_0x44b8c7(0x32f))[_0x44b8c7(0x21a)][_0x44b8c7(0x364)](_0x44b8c7(0x352)),document[_0x44b8c7(0x2eb)](_0x44b8c7(0x285))['innerHTML']=_0x44b8c7(0x401);}function storeLoginInfo(_0x140539,_0x187c9e){const _0x1d197a=_0x187704;localStorage[_0x1d197a(0x3d0)](_0x1d197a(0x242),_0x140539),localStorage[_0x1d197a(0x3d0)](_0x1d197a(0x294),_0x187c9e);}function getStoredLoginInfo(){const _0x361ab5=_0x187704;return{'username':localStorage[_0x361ab5(0x2e4)](_0x361ab5(0x242)),'password':localStorage[_0x361ab5(0x2e4)](_0x361ab5(0x294))};}function clearLoginInfo(){const _0x198578=_0x187704;localStorage[_0x198578(0x2a6)](_0x198578(0x242)),localStorage['removeItem'](_0x198578(0x294));}async function register(){const _0x481a9f=_0x187704,_0x4c7a94=document[_0x481a9f(0x2eb)](_0x481a9f(0x266))['value'],_0x20ee3a=document['getElementById'](_0x481a9f(0x33f))[_0x481a9f(0x313)],_0x5c4e2b=new URLSearchParams(window[_0x481a9f(0x292)][_0x481a9f(0x33d)])[_0x481a9f(0x302)](_0x481a9f(0x200));if(!_0x4c7a94||!_0x20ee3a){showNotification(_0x481a9f(0x3cb),_0x481a9f(0x38c));return;}try{const _0x458d44=db[_0x481a9f(0x200)]('users/'+_0x4c7a94),_0x521f92=await _0x458d44['once']('value');if(_0x521f92[_0x481a9f(0x350)]()){showNotification('Ce\x20nom\x20d\x27utilisateur\x20existe\x20déjà.','error');return;}const _0x531ad5=new Date(),_0x46baa9={'password':_0x20ee3a,'freeCredits':FREE_CREDITS_REGISTER,'paidCredits':0x0,'subscription':null,'subscriptionEndDate':null,'lastFreeCreditsReset':_0x531ad5['toISOString'](),'referredBy':_0x5c4e2b||null,'firstPurchase':![],'totalReferrals':0x0,'activeReferrals':0x0,'hasSeenGuidedTour':![]};await _0x458d44[_0x481a9f(0x2ca)](_0x46baa9);if(_0x5c4e2b){const _0x16be92=await db[_0x481a9f(0x200)]('users')[_0x481a9f(0x232)](_0x481a9f(0x34d))[_0x481a9f(0x1e0)](_0x5c4e2b)['once'](_0x481a9f(0x313)),_0xb0a904=_0x16be92['val']();if(_0xb0a904){const _0x14a23b=Object[_0x481a9f(0x40a)](_0xb0a904)[0x0];await db['ref'](_0x481a9f(0x318)+_0x14a23b+_0x481a9f(0x2ed)+_0x4c7a94)[_0x481a9f(0x2ca)]({'date':_0x531ad5[_0x481a9f(0x32d)](),'isActive':![]});const _0x2a8eca=db[_0x481a9f(0x200)](_0x481a9f(0x318)+_0x14a23b);await _0x2a8eca[_0x481a9f(0x41b)](_0x203e6c=>{return _0x203e6c&&(_0x203e6c['totalReferrals']=(_0x203e6c['totalReferrals']||0x0)+0x1),_0x203e6c;}),currentUser&&currentUser['username']===_0x14a23b&&(document[_0x481a9f(0x2eb)]('totalReferrals')[_0x481a9f(0x238)]=(parseInt(document[_0x481a9f(0x2eb)](_0x481a9f(0x405))[_0x481a9f(0x238)])||0x0)+0x1);}}currentUser={'username':_0x4c7a94,..._0x46baa9},updateUIForLoggedInUser(),showNotification(_0x481a9f(0x3dd),_0x481a9f(0x246)),closeModal('registerModal'),storeLoginInfo(_0x4c7a94,_0x20ee3a),startGuidedTour(),await markGuidedTourAsSeen(_0x4c7a94);}catch(_0x121e25){console[_0x481a9f(0x38c)](_0x481a9f(0x255),_0x121e25),showNotification(_0x481a9f(0x388),'error');}}async function login(_0x252777,_0x437de9){const _0x4d06be=_0x187704;(!_0x252777||!_0x437de9)&&(_0x252777=document[_0x4d06be(0x2eb)](_0x4d06be(0x2e9))[_0x4d06be(0x313)],_0x437de9=document['getElementById'](_0x4d06be(0x3da))['value']);if(!_0x252777||!_0x437de9){showNotification('Veuillez\x20remplir\x20tous\x20les\x20champs.','error');return;}try{const _0x14766c=db['ref'](_0x4d06be(0x318)+_0x252777),_0x2d51b6=await _0x14766c[_0x4d06be(0x269)]('value');if(_0x2d51b6[_0x4d06be(0x350)]()&&_0x2d51b6[_0x4d06be(0x360)]()['password']===_0x437de9){const _0x2de861=_0x2d51b6[_0x4d06be(0x360)]();currentUser={'username':_0x252777,'freeCredits':_0x2de861[_0x4d06be(0x3c7)]||0x0,'paidCredits':_0x2de861[_0x4d06be(0x2dd)]||0x0,'subscription':_0x2de861[_0x4d06be(0x288)]||null,'subscriptionEndDate':_0x2de861[_0x4d06be(0x3ea)]||null,'lastFreeCreditsReset':_0x2de861[_0x4d06be(0x3d4)]||new Date()[_0x4d06be(0x32d)](),'referralCode':_0x2de861[_0x4d06be(0x34d)]||null,'totalReferrals':_0x2de861[_0x4d06be(0x405)]||0x0,'activeReferrals':_0x2de861['activeReferrals']||0x0},await resetFreeCreditsIfNeeded(),await checkSubscriptionStatus(),await initializeImageGenerationTracking(_0x252777),updateUIForLoggedInUser(),storeLoginInfo(_0x252777,_0x437de9),loadConversationHistory();const _0xd58490=await checkGuidedTourStatus(_0x252777);!_0xd58490&&(startGuidedTour(),await markGuidedTourAsSeen(_0x252777)),_0x2de861[_0x4d06be(0x349)]&&await updateReferralStats(_0x252777),importedFilesCount=_0x2de861[_0x4d06be(0x29c)]||0x0,lastImportReset=new Date(_0x2de861[_0x4d06be(0x2f1)]||new Date()),await syncUserData(),showNotification(_0x4d06be(0x37e),_0x4d06be(0x246)),closeModal(_0x4d06be(0x2bd)),_0x2de861[_0x4d06be(0x223)]&&loadCustomPrompts(_0x2de861[_0x4d06be(0x223)]),checkPendingNotifications(),initializeGeminiAPI(),createNewConversation();}else showNotification('Nom\x20d\x27utilisateur\x20ou\x20mot\x20de\x20passe\x20incorrect.','error');}catch(_0x208cb7){console[_0x4d06be(0x38c)](_0x4d06be(0x399),_0x208cb7),showNotification(_0x4d06be(0x3d7),_0x4d06be(0x38c));}}async function checkPendingNotifications(){const _0x127024=_0x187704;if(currentUser[_0x127024(0x288)]){const _0x1b8cc5=new Date(currentUser['subscriptionEndDate']),_0x4a19ac=new Date(),_0x589f2d=Math['ceil']((_0x1b8cc5-_0x4a19ac)/(0x3e8*0x3c*0x3c*0x18));_0x589f2d<=0x3&&_0x589f2d>0x0&&showNotification('Votre\x20abonnement\x20expire\x20dans\x20'+_0x589f2d+_0x127024(0x3d8)+(_0x589f2d>0x1?'s':'')+'.',_0x127024(0x361));}!currentUser[_0x127024(0x288)]&&currentUser['paidCredits']<0xa&&currentUser[_0x127024(0x3c7)]<0x3&&showNotification('Vos\x20crédits\x20sont\x20faibles.\x20Pensez\x20à\x20recharger\x20votre\x20compte.',_0x127024(0x361));}function loadCustomPrompts(_0x4cc9a5){const _0x5bd8f8=_0x187704;Array[_0x5bd8f8(0x237)](_0x4cc9a5)&&_0x4cc9a5[_0x5bd8f8(0x36b)](_0x2f4618=>{!prompts[_0x2f4618['id']]&&(prompts[_0x2f4618['id']]=_0x2f4618);});}function logout(){const _0x1fef6e=_0x187704;currentUser&&syncUserData(),currentUser=null,updateUIForLoggedOutUser(),showNotification(_0x1fef6e(0x422),_0x1fef6e(0x246)),clearLoginInfo();}async function resetFreeCreditsIfNeeded(){const _0x2f9aa7=_0x187704,_0x3c02f1=new Date(),_0x4acc5a=new Date(currentUser[_0x2f9aa7(0x3d4)]);if(_0x3c02f1[_0x2f9aa7(0x3db)]()-_0x4acc5a[_0x2f9aa7(0x3db)]()>=0x18*0x3c*0x3c*0x3e8){const _0xba7633=currentUser[_0x2f9aa7(0x3c7)];currentUser['freeCredits']=FREE_CREDITS_PER_DAY,currentUser['lastFreeCreditsReset']=_0x3c02f1[_0x2f9aa7(0x32d)](),await syncUserData(),document[_0x2f9aa7(0x2eb)](_0x2f9aa7(0x3c7))[_0x2f9aa7(0x238)]=currentUser['freeCredits'];const _0x221c40=currentUser[_0x2f9aa7(0x3c7)]-_0xba7633;_0x221c40>0x0&&showNotification(_0x221c40+_0x2f9aa7(0x260),_0x2f9aa7(0x246));}}async function checkModelAccess(){const _0xd37151=_0x187704,_0x4c8161=document['getElementById'](_0xd37151(0x24d))[_0xd37151(0x313)],_0x2d83f3=document['getElementById'](_0xd37151(0x1f5));_0x2d83f3[_0xd37151(0x354)]['display']=isImageGenerationModel(_0x4c8161)?_0xd37151(0x26c):_0xd37151(0x30f);if(isImageGenerationModel(_0x4c8161)){if(!hasValidSubscription()&&currentUser['paidCredits']<0x5&&currentUser[_0xd37151(0x3c7)]<0x5){showPaymentNotification('La\x20génération\x20d\x27images\x20nécessite\x205\x20crédits.'),document[_0xd37151(0x2eb)](_0xd37151(0x24d))[_0xd37151(0x313)]=_0xd37151(0x1f9),_0x2d83f3[_0xd37151(0x354)][_0xd37151(0x3c0)]=_0xd37151(0x30f);return;}}else![_0xd37151(0x1f9),_0xd37151(0x2ad)][_0xd37151(0x38f)](_0x4c8161)&&!hasValidSubscription()&&currentUser[_0xd37151(0x2dd)]<=0x0&&(showPaymentNotification('Ce\x20modèle\x20nécessite\x20un\x20abonnement\x20ou\x20des\x20crédits\x20payants.'),document[_0xd37151(0x2eb)](_0xd37151(0x24d))[_0xd37151(0x313)]=_0xd37151(0x1f9));}async function handleFileUpload(_0x46e02a){const _0xd4eeae=_0x187704,_0x4532ea=_0x46e02a[_0xd4eeae(0x2fe)][_0xd4eeae(0x23b)];for(let _0x3c99e5=0x0;_0x3c99e5<_0x4532ea[_0xd4eeae(0x2a4)];_0x3c99e5++){const _0x1d749d=_0x4532ea[_0x3c99e5];if(_0x1d749d[_0xd4eeae(0x1e2)]===_0xd4eeae(0x38e)||_0x1d749d[_0xd4eeae(0x1e2)]===_0xd4eeae(0x38b))try{const _0x4d2845=await convertWordToText(_0x1d749d);pinnedFiles[_0xd4eeae(0x29b)]({'name':_0x1d749d[_0xd4eeae(0x384)][_0xd4eeae(0x2b3)](/\.[^/.]+$/,'')+_0xd4eeae(0x393),'type':_0xd4eeae(0x340),'content':_0x4d2845}),updatePinnedFiles(),importedFilesCount++,await db[_0xd4eeae(0x200)](_0xd4eeae(0x318)+currentUser['username'])['update']({'importedFilesCount':importedFilesCount});}catch(_0x295895){console[_0xd4eeae(0x38c)](_0xd4eeae(0x244),_0x295895),showNotification(_0xd4eeae(0x29d),_0xd4eeae(0x38c));}else(_0x1d749d[_0xd4eeae(0x1e2)]['startsWith'](_0xd4eeae(0x41f))||_0x1d749d[_0xd4eeae(0x1e2)]===_0xd4eeae(0x35b))&&(pinnedFiles[_0xd4eeae(0x29b)](_0x1d749d),updatePinnedFiles());}}function convertWordToText(_0x23e495){return new Promise((_0x442d47,_0x11e073)=>{const _0x479556=_0x2d05,_0x322ef1=new FileReader();_0x322ef1[_0x479556(0x204)]=function(_0x3cc237){const _0x4a441e=_0x479556,_0x322c39=_0x3cc237[_0x4a441e(0x2fe)][_0x4a441e(0x205)];mammoth[_0x4a441e(0x270)]({'arrayBuffer':_0x322c39})[_0x4a441e(0x3a4)](function(_0x130b96){_0x442d47(_0x130b96['value']);})[_0x4a441e(0x25f)](function(_0xd395bb){_0x11e073(_0xd395bb);});},_0x322ef1[_0x479556(0x30b)](_0x23e495);});}function updatePinnedFiles(){const _0x2ea8d3=_0x187704,_0x561f2d=document[_0x2ea8d3(0x2eb)]('pinnedItems');_0x561f2d[_0x2ea8d3(0x28d)]='',pinnedFiles[_0x2ea8d3(0x36b)]((_0x34561f,_0x303f4f)=>{const _0x192527=_0x2ea8d3,_0x44ad3f=document[_0x192527(0x2c7)]('div');_0x44ad3f['className']=_0x192527(0x317),_0x44ad3f[_0x192527(0x28d)]=_0x192527(0x348)+(_0x34561f[_0x192527(0x1e2)][_0x192527(0x383)](_0x192527(0x41f))?_0x192527(0x322):'📄')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22'+_0x34561f[_0x192527(0x384)]+'\x22>'+_0x34561f[_0x192527(0x384)]+_0x192527(0x307)+_0x303f4f+')\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x561f2d['appendChild'](_0x44ad3f);});}function removePinnedFile(_0x10602b){const _0x1f65d0=_0x187704;pinnedFiles[_0x1f65d0(0x3eb)](_0x10602b,0x1),updatePinnedFiles();}function createPinnedFilesElement(_0x263937){const _0x3ed920=_0x187704,_0xff52fb=document[_0x3ed920(0x2c7)](_0x3ed920(0x343));return _0xff52fb[_0x3ed920(0x391)]=_0x3ed920(0x3c4),_0x263937[_0x3ed920(0x36b)](_0x3d7680=>{const _0x223fb=_0x3ed920,_0x45ecfe=document[_0x223fb(0x2c7)](_0x223fb(0x343));_0x45ecfe[_0x223fb(0x391)]=_0x223fb(0x31e);if(_0x3d7680['type'][_0x223fb(0x383)]('image/')){const _0xf82ed5=document['createElement']('img');_0xf82ed5[_0x223fb(0x2c0)]=URL['createObjectURL'](_0x3d7680),_0xf82ed5['alt']=_0x3d7680[_0x223fb(0x384)],_0xf82ed5[_0x223fb(0x391)]='pinned-image',_0x45ecfe[_0x223fb(0x1f1)](_0xf82ed5);}else{const _0x8eb655=document['createElement']('span');_0x8eb655[_0x223fb(0x391)]='file-icon',_0x8eb655[_0x223fb(0x238)]=_0x3d7680[_0x223fb(0x1e2)][_0x223fb(0x383)](_0x223fb(0x35b))?'📄':'📎',_0x45ecfe[_0x223fb(0x1f1)](_0x8eb655);}const _0x17c7fb=document['createElement'](_0x223fb(0x26a));_0x17c7fb[_0x223fb(0x391)]=_0x223fb(0x275),_0x17c7fb[_0x223fb(0x238)]=_0x3d7680[_0x223fb(0x384)],_0x45ecfe[_0x223fb(0x1f1)](_0x17c7fb),_0xff52fb['appendChild'](_0x45ecfe);}),_0xff52fb;}function createPinnedResponsesElement(_0x17d68a){const _0x2d5e26=_0x187704,_0x441bcc=document[_0x2d5e26(0x2c7)](_0x2d5e26(0x343));return _0x441bcc[_0x2d5e26(0x391)]=_0x2d5e26(0x252),_0x17d68a['forEach'](_0x4652fd=>{const _0x5c2622=_0x2d5e26,_0x4712b4=document['createElement'](_0x5c2622(0x343));_0x4712b4[_0x5c2622(0x391)]=_0x5c2622(0x380);const _0x12cccf=document['createElement']('span');_0x12cccf[_0x5c2622(0x391)]=_0x5c2622(0x412),_0x12cccf[_0x5c2622(0x238)]='💬';const _0x12f301=document[_0x5c2622(0x2c7)]('span');_0x12f301[_0x5c2622(0x391)]='response-text',_0x12f301[_0x5c2622(0x238)]=_0x4652fd['displayText'],_0x4712b4['appendChild'](_0x12cccf),_0x4712b4['appendChild'](_0x12f301),_0x441bcc[_0x5c2622(0x1f1)](_0x4712b4);}),_0x441bcc;}function createPinnedPromptElement(_0x1e9e2b){const _0x421a30=_0x187704,_0x22b672=document['createElement'](_0x421a30(0x343));_0x22b672['className']='pinned-prompt-message';const _0x23fdb6=document[_0x421a30(0x2c7)](_0x421a30(0x343));_0x23fdb6['className']='pinned-prompt';const _0x4bb8f4=document[_0x421a30(0x2c7)](_0x421a30(0x26a));_0x4bb8f4[_0x421a30(0x391)]=_0x421a30(0x3a0),_0x4bb8f4[_0x421a30(0x238)]='🤖';const _0x28f0f1=document[_0x421a30(0x2c7)](_0x421a30(0x26a));return _0x28f0f1[_0x421a30(0x391)]=_0x421a30(0x22e),_0x28f0f1['textContent']=_0x1e9e2b[_0x421a30(0x342)],_0x23fdb6[_0x421a30(0x1f1)](_0x4bb8f4),_0x23fdb6[_0x421a30(0x1f1)](_0x28f0f1),_0x22b672[_0x421a30(0x1f1)](_0x23fdb6),_0x22b672;}function createModelHeader(_0x5ea959){const _0x13b1d9=_0x187704,_0x7d9532={'gemini-1.5-flash':'Gemini\x201.5\x20Flash','gemini-1.5-pro':_0x13b1d9(0x331),'gemini-1.5-pro-latest':'Gemini\x201.5\x20Pro\x20Latest','gemini-1.0-pro':_0x13b1d9(0x2d6),'recraft-realistic':_0x13b1d9(0x3bb),'recraft-digital':'Illustration\x20Digitale','recraft-vector':_0x13b1d9(0x1e7)},_0x45002d=_0x7d9532[_0x5ea959]||_0x5ea959;return _0x13b1d9(0x2a3)+(isImageGenerationModel(_0x5ea959)?_0x13b1d9(0x2d2):_0x13b1d9(0x3b4))+_0x13b1d9(0x37f)+_0x45002d+_0x13b1d9(0x3ff);}async function sendMessage(){const _0x47ad92=_0x187704;if(!currentUser){showNotification(_0x47ad92(0x3a7),_0x47ad92(0x38c));return;}const _0x300335=document[_0x47ad92(0x2eb)](_0x47ad92(0x325))[_0x47ad92(0x313)][_0x47ad92(0x1f3)](),_0x371494=document[_0x47ad92(0x2eb)](_0x47ad92(0x24d))['value'];if(!_0x300335&&pinnedFiles[_0x47ad92(0x2a4)]===0x0&&pinnedResponses['length']===0x0&&!pinnedPrompt){showNotification(_0x47ad92(0x33b),_0x47ad92(0x38c));return;}let _0x573f2e=_0x300335;pinnedPrompt&&(_0x573f2e=pinnedPrompt['type']===_0x47ad92(0x315)?pinnedPrompt[_0x47ad92(0x264)]+_0x47ad92(0x31a)+_0x300335:pinnedPrompt['content']+'\x0a\x0a'+_0x300335);if(isImageGenerationModel(_0x371494)){try{const _0x5c86b0=await canGenerateImage();if(!_0x5c86b0[_0x47ad92(0x218)]){showPaymentNotification(_0x5c86b0[_0x47ad92(0x27f)]);return;}const _0x23d191=document[_0x47ad92(0x2c7)](_0x47ad92(0x343));_0x23d191[_0x47ad92(0x391)]=_0x47ad92(0x3ec),_0x23d191[_0x47ad92(0x28d)]=_0x47ad92(0x22a)+createModelHeader(_0x371494)+_0x47ad92(0x3d5),document['getElementById'](_0x47ad92(0x1d2))['appendChild'](_0x23d191);const _0x3871ea=document[_0x47ad92(0x2eb)](_0x47ad92(0x1f5))[_0x47ad92(0x313)],_0x5980ad=getRecraftStyle(_0x371494),_0x122898=await fetch(_0x47ad92(0x41c),{'method':_0x47ad92(0x1e4),'headers':{'Content-Type':'application/json','Authorization':_0x47ad92(0x28a)+RECRAFT_API_KEY},'body':JSON[_0x47ad92(0x3c8)]({'prompt':_0x573f2e,'style':_0x5980ad,'size':_0x3871ea})});if(!_0x122898['ok'])throw new Error('Erreur\x20lors\x20de\x20la\x20génération\x20de\x20l\x27image');const _0x4f1616=await _0x122898[_0x47ad92(0x425)](),_0x4c6268=_0x4f1616['data'][0x0][_0x47ad92(0x213)];_0x23d191['innerHTML']=_0x47ad92(0x22a)+createModelHeader(_0x371494)+_0x47ad92(0x24c)+_0x4c6268+_0x47ad92(0x365)+_0x573f2e+_0x47ad92(0x2cc)+_0x5980ad[_0x47ad92(0x2b3)]('_','\x20')[_0x47ad92(0x3d9)]()+_0x47ad92(0x3b0)+_0x3871ea+_0x47ad92(0x3f6)+(_0x5c86b0[_0x47ad92(0x337)]?_0x47ad92(0x2ef):_0x47ad92(0x274))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22downloadImage(\x27'+_0x4c6268+_0x47ad92(0x310)+_0x4c6268+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareImage(\x27'+_0x4c6268+_0x47ad92(0x398);if(_0x5c86b0[_0x47ad92(0x337)]){await incrementImageGenerationCount(currentUser[_0x47ad92(0x316)]);const _0x3ed9ed=await getImageGenerationCount(currentUser['username']);showNotification(_0x47ad92(0x2c8)+(0x5-_0x3ed9ed)+_0x47ad92(0x22b),_0x47ad92(0x246));}else await updateCredits(_0x371494,0x5),showNotification(_0x47ad92(0x276),_0x47ad92(0x246));}catch(_0x5bb63e){console['error'](_0x47ad92(0x3e3),_0x5bb63e),showNotification(_0x47ad92(0x25e),_0x47ad92(0x38c));}finally{document[_0x47ad92(0x2eb)](_0x47ad92(0x325))[_0x47ad92(0x313)]='',resetTextareaHeight(),pinnedPrompt=null,updatePinnedItems();}return;}let _0x171640=0x1;_0x171640+=pinnedFiles['filter'](_0x579826=>_0x579826[_0x47ad92(0x1e2)]!==_0x47ad92(0x340))['length'],_0x171640+=pinnedResponses[_0x47ad92(0x2a4)];if(!hasValidSubscription()){if(_0x371494==='gemini-1.5-flash'){if(currentUser[_0x47ad92(0x2dd)]<_0x171640&&currentUser[_0x47ad92(0x3c7)]<_0x171640){showPaymentNotification(_0x47ad92(0x357));return;}}else{if(!['gemini-1.0-pro'][_0x47ad92(0x38f)](_0x371494)&&currentUser['paidCredits']<_0x171640){showPaymentNotification(_0x47ad92(0x3cd));return;}}}const _0x50a11d=[...pinnedFiles],_0x4665b9=[...pinnedResponses],_0x345e65=pinnedPrompt;pinnedFiles=[],pinnedResponses=[],pinnedPrompt=null,updatePinnedItems();const _0x17eedc=addMessageToChat(_0x47ad92(0x3e9),_0x300335,_0x50a11d,_0x4665b9,_0x345e65),_0x132005=document[_0x47ad92(0x2c7)]('div');_0x132005[_0x47ad92(0x391)]='message\x20ai-message',_0x132005[_0x47ad92(0x28d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+createModelHeader(_0x371494)+_0x47ad92(0x201),document['getElementById'](_0x47ad92(0x1d2))['appendChild'](_0x132005);try{const _0x3c5653=[];let _0x2b62ae=buildConversationContext();await addFilesToParts(_0x3c5653,_0x50a11d),_0x4665b9[_0x47ad92(0x36b)](_0x249a30=>{const _0x394afe=_0x47ad92;_0x2b62ae+=_0x394afe(0x308)+_0x249a30[_0x394afe(0x367)]+']\x0a';});_0x345e65?(_0x2b62ae+='[Prompt\x20épinglé:\x20'+_0x345e65[_0x47ad92(0x342)]+']\x0a',_0x345e65[_0x47ad92(0x1e2)]==='image'?_0x2b62ae+=_0x47ad92(0x39d)+_0x300335+'\x0a':_0x2b62ae+=_0x345e65[_0x47ad92(0x264)]+'\x0a\x0a'+_0x300335+'\x0a'):_0x2b62ae+=_0x300335+'\x0a';_0x573f2e=_0x2b62ae,_0x3c5653['push']({'text':_0x573f2e});let _0x552359,_0x4e5b5a=0x0;const _0x36ba82=0x3;while(_0x4e5b5a<_0x36ba82){try{const _0x3ac4c2=getNextApiKey();if(!_0x3ac4c2)throw new Error(_0x47ad92(0x3bd));genAI=new GoogleGenerativeAI(_0x3ac4c2),model=genAI[_0x47ad92(0x2d7)]({'model':_0x371494,'systemInstruction':SYSTEM_INSTRUCTION});const _0x29c5dc=await model['generateContent'](_0x3c5653);_0x552359=await _0x29c5dc[_0x47ad92(0x2f0)];break;}catch(_0x38f5ce){_0x4e5b5a++,console[_0x47ad92(0x38c)]('Tentative\x20'+_0x4e5b5a+'/'+_0x36ba82+'\x20échouée:',_0x38f5ce);if(_0x4e5b5a===_0x36ba82)throw new Error(_0x47ad92(0x1f0));const _0x5987a5=Math[_0x47ad92(0x392)](0x3e8*Math[_0x47ad92(0x36c)](0x2,_0x4e5b5a),0x1388);await new Promise(_0xa070fc=>setTimeout(_0xa070fc,_0x5987a5));}}let _0x5fc54c=_0x552359[_0x47ad92(0x2a5)]();if(_0x371494==='gemini-1.0-pro'||_0x371494==='gemini-1.5-flash'&&currentUser[_0x47ad92(0x2dd)]<_0x171640){const _0x44787d=_0x5fc54c['split'](/\s+/);_0x44787d[_0x47ad92(0x2a4)]>FREE_MODEL_MAX_RESPONSE&&(_0x5fc54c=_0x44787d['slice'](0x0,FREE_MODEL_MAX_RESPONSE)[_0x47ad92(0x1ec)]('\x20')+_0x47ad92(0x40d),showNotification(_0x47ad92(0x2b9)+FREE_MODEL_MAX_RESPONSE+_0x47ad92(0x2d1),_0x47ad92(0x215)));}await animateText(_0x132005,_0x5fc54c),currentConversation[_0x47ad92(0x29b)]({'sender':'ai','content':_0x5fc54c}),await updateCredits(_0x371494,_0x171640),saveConversation();}catch(_0x4f3924){console[_0x47ad92(0x38c)](_0x47ad92(0x2e7),_0x4f3924),_0x132005['remove'](),showNotification(_0x47ad92(0x39c)+_0x4f3924[_0x47ad92(0x27f)]+'.\x20Veuillez\x20réessayer.',_0x47ad92(0x38c));}finally{document['getElementById'](_0x47ad92(0x325))[_0x47ad92(0x313)]='',resetTextareaHeight(),resetScrollState();}}document[_0x187704(0x372)](_0x187704(0x2f8),initializeScrollListener);function resetPinnedItems(){pinnedFiles=[],pinnedResponses=[],pinnedPrompt=null,updatePinnedItems();}function buildConversationContext(){const _0x178335=_0x187704;let _0x2131ed='';const _0x454b18=currentConversation['slice'](-0x5);return _0x454b18[_0x178335(0x36b)](_0x1a4553=>{const _0x79bbf7=_0x178335;_0x2131ed+=(_0x1a4553[_0x79bbf7(0x3f2)]===_0x79bbf7(0x3e9)?'user':_0x79bbf7(0x23e))+':\x20'+_0x1a4553[_0x79bbf7(0x264)]+'\x0a',_0x1a4553[_0x79bbf7(0x23b)]&&_0x1a4553[_0x79bbf7(0x23b)][_0x79bbf7(0x36b)](_0x1bc8ff=>{const _0x300d88=_0x79bbf7;_0x2131ed+=_0x300d88(0x2e0)+_0x1bc8ff[_0x300d88(0x384)]+']\x0a';}),_0x1a4553[_0x79bbf7(0x254)]&&_0x1a4553[_0x79bbf7(0x254)][_0x79bbf7(0x36b)](_0x316e74=>{const _0x240adf=_0x79bbf7;_0x2131ed+=_0x240adf(0x308)+_0x316e74[_0x240adf(0x367)]+']\x0a';}),_0x1a4553[_0x79bbf7(0x24e)]&&(_0x2131ed+=_0x79bbf7(0x370)+_0x1a4553[_0x79bbf7(0x24e)][_0x79bbf7(0x342)]+']\x0a');}),_0x2131ed;}async function addFilesToParts(_0x18a192,_0x479dc6){const _0x598fdf=_0x187704;for(const _0x2cf4a8 of _0x479dc6){if(_0x2cf4a8[_0x598fdf(0x1e2)]==='text/plain')_0x18a192[_0x598fdf(0x29b)]({'text':_0x598fdf(0x1e1)+_0x2cf4a8[_0x598fdf(0x264)]});else{const _0x21657c=await readFileAsBase64(_0x2cf4a8);_0x18a192[_0x598fdf(0x29b)]({'inlineData':{'data':_0x21657c,'mimeType':_0x2cf4a8[_0x598fdf(0x1e2)]}}),_0x18a192[_0x598fdf(0x29b)]({'text':_0x598fdf(0x2b5)+_0x2cf4a8['name']+'\x20('+_0x2cf4a8[_0x598fdf(0x1e2)]+')\x20que\x20je\x20viens\x20de\x20t\x27envoyer.'});}}}async function validateCreditsAndModel(_0xfbe802,_0x4742d0){const _0x87a855=_0x187704;if(_0xfbe802===_0x87a855(0x1f9)){if(currentUser[_0x87a855(0x2dd)]>=_0x4742d0)return showNotification(_0x87a855(0x2c4),_0x87a855(0x215)),!![];else{if(currentUser[_0x87a855(0x3c7)]>=_0x4742d0)return showNotification(_0x87a855(0x210),_0x87a855(0x215)),!![];}}else{if(!['gemini-1.0-pro']['includes'](_0xfbe802)){if(currentUser[_0x87a855(0x2dd)]<_0x4742d0)return showPaymentNotification(_0x87a855(0x3cd)),![];}else{if(currentUser[_0x87a855(0x3c7)]<_0x4742d0&&currentUser[_0x87a855(0x2dd)]<_0x4742d0)return showPaymentNotification('Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20pour\x20envoyer\x20ce\x20message.'),![];}}return!![];}async function processAndDisplayAIResponse(_0x56b179,_0x48b677,_0x585a8a){const _0xa9c5ca=_0x187704;let _0x106eee;if(_0x48b677===_0xa9c5ca(0x2ad)||_0x48b677===_0xa9c5ca(0x1f9)&&currentUser['paidCredits']<_0x585a8a){const _0x1ee453=_0x56b179[_0xa9c5ca(0x338)](/\s+/);_0x1ee453[_0xa9c5ca(0x2a4)]>FREE_MODEL_MAX_RESPONSE?(_0x56b179=_0x1ee453['slice'](0x0,FREE_MODEL_MAX_RESPONSE)['join']('\x20')+_0xa9c5ca(0x40d),showNotification('La\x20réponse\x20a\x20été\x20tronquée\x20à\x20'+FREE_MODEL_MAX_RESPONSE+'\x20mots.',_0xa9c5ca(0x215)),_0x106eee=addMessageToChat('ai',_0x56b179),showUpgradeButton(_0x106eee)):_0x106eee=addMessageToChat('ai',_0x56b179);}else _0x106eee=addMessageToChat('ai',_0x56b179);return _0x106eee;}function updateConversation(_0x532564,_0x129530){const _0x5d9da4=_0x187704;currentConversation[_0x5d9da4(0x29b)]({'sender':'user','content':_0x532564}),currentConversation['push']({'sender':'ai','content':_0x129530});}async function handleImageGeneration(_0x4d287a,_0x31f8e9,_0x555839){const _0x12b732=_0x187704;try{if(!_0x555839[_0x12b732(0x218)]){showPaymentNotification(_0x555839[_0x12b732(0x27f)]);return;}const _0x56f48a=document['getElementById'](_0x12b732(0x1f5))[_0x12b732(0x313)],_0x6b502f=getRecraftStyle(_0x31f8e9),_0xa6b46a=addLoadingMessage(_0x12b732(0x2cf)),_0x2cc92c=await fetch(_0x12b732(0x41c),{'method':_0x12b732(0x1e4),'headers':{'Content-Type':_0x12b732(0x27a),'Authorization':_0x12b732(0x28a)+RECRAFT_API_KEY},'body':JSON[_0x12b732(0x3c8)]({'prompt':_0x4d287a,'style':_0x6b502f,'size':_0x56f48a,'n':0x1})});_0xa6b46a['remove']();if(!_0x2cc92c['ok'])throw new Error(_0x12b732(0x2ba)+_0x2cc92c[_0x12b732(0x375)]);const _0x404bda=await _0x2cc92c[_0x12b732(0x425)]();if(!_0x404bda['data']||!_0x404bda['data'][0x0]||!_0x404bda[_0x12b732(0x2e6)][0x0][_0x12b732(0x213)])throw new Error(_0x12b732(0x371));const _0x799661=_0x404bda['data'][0x0][_0x12b732(0x213)],_0x4a60bf=document[_0x12b732(0x2c7)](_0x12b732(0x343));_0x4a60bf[_0x12b732(0x391)]=_0x12b732(0x3ec),_0x4a60bf['innerHTML']=_0x12b732(0x24c)+_0x799661+_0x12b732(0x365)+_0x4d287a+_0x12b732(0x2cc)+_0x6b502f[_0x12b732(0x2b3)]('_','\x20')[_0x12b732(0x3d9)]()+_0x12b732(0x3b0)+_0x56f48a+_0x12b732(0x3f6)+(_0x555839['useFreeGeneration']?'Génération\x20gratuite\x20(abonnement)':_0x12b732(0x274))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22downloadImage(\x27'+_0x799661+'\x27,\x20\x27image-generee.png\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-download\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyImage(\x27'+_0x799661+_0x12b732(0x379)+_0x799661+_0x12b732(0x398),document[_0x12b732(0x2eb)](_0x12b732(0x1d2))[_0x12b732(0x1f1)](_0x4a60bf);if(_0x555839['useFreeGeneration']){await incrementImageGenerationCount(currentUser[_0x12b732(0x316)]);const _0x1accbe=await getImageGenerationCount(currentUser[_0x12b732(0x316)]);showNotification(_0x12b732(0x2c8)+(0x5-_0x1accbe)+_0x12b732(0x22b),_0x12b732(0x246));}else await updateCredits(_0x31f8e9,0x5),showNotification(_0x12b732(0x276),_0x12b732(0x246));document[_0x12b732(0x2eb)]('userInput')[_0x12b732(0x313)]='',resetTextareaHeight();}catch(_0x55de87){console[_0x12b732(0x38c)](_0x12b732(0x2b7),_0x55de87),showNotification(_0x12b732(0x25e),'error');}}function createUserMessageElement(_0x2a0c13,_0x307bbe,_0x5b9ac3,_0x53d4b4){const _0x3cc9cd=_0x187704,_0x4cf76e=document[_0x3cc9cd(0x2c7)](_0x3cc9cd(0x343));_0x4cf76e[_0x3cc9cd(0x391)]=_0x3cc9cd(0x247);_0x307bbe['length']>0x0&&_0x4cf76e[_0x3cc9cd(0x1f1)](createPinnedFilesElement(_0x307bbe));_0x5b9ac3[_0x3cc9cd(0x2a4)]>0x0&&_0x4cf76e[_0x3cc9cd(0x1f1)](createPinnedResponsesElement(_0x5b9ac3));_0x53d4b4&&_0x4cf76e['appendChild'](createPinnedPromptElement(_0x53d4b4));if(_0x2a0c13){const _0x325eb8=document[_0x3cc9cd(0x2c7)]('p');_0x325eb8[_0x3cc9cd(0x238)]=_0x2a0c13,_0x4cf76e[_0x3cc9cd(0x1f1)](_0x325eb8);}return _0x4cf76e;}function addLoadingMessage(_0x46cbc3){const _0x96f3cd=_0x187704,_0x1d71ea=document[_0x96f3cd(0x2c7)](_0x96f3cd(0x343));return _0x1d71ea[_0x96f3cd(0x391)]=_0x96f3cd(0x203),_0x1d71ea[_0x96f3cd(0x28d)]=_0x96f3cd(0x3e4)+_0x46cbc3+'</p>\x0a\x20\x20\x20\x20',document['getElementById'](_0x96f3cd(0x1d2))[_0x96f3cd(0x1f1)](_0x1d71ea),_0x1d71ea;}async function downloadImage(_0x51d33d,_0x530201){const _0xd50ce4=_0x187704;try{const _0x3984d9=await fetch(_0x51d33d),_0x5a83b3=await _0x3984d9['blob'](),_0x23a2e1=window[_0xd50ce4(0x37d)][_0xd50ce4(0x2fc)](_0x5a83b3),_0x1a321c=document[_0xd50ce4(0x2c7)]('a');_0x1a321c[_0xd50ce4(0x406)]=_0x23a2e1,_0x1a321c[_0xd50ce4(0x1d1)]=_0x530201,document['body']['appendChild'](_0x1a321c),_0x1a321c[_0xd50ce4(0x36e)](),document[_0xd50ce4(0x410)][_0xd50ce4(0x257)](_0x1a321c),window['URL']['revokeObjectURL'](_0x23a2e1);}catch(_0x1287b3){showNotification('Erreur\x20lors\x20du\x20téléchargement\x20de\x20l\x27image.','error');}}function copyImage(_0x190c7d){const _0x22bc0d=_0x187704;navigator[_0x22bc0d(0x373)][_0x22bc0d(0x3e2)](_0x190c7d)['then'](()=>showNotification(_0x22bc0d(0x2cd),_0x22bc0d(0x246)))['catch'](()=>showNotification('Erreur\x20lors\x20de\x20la\x20copie\x20du\x20lien.',_0x22bc0d(0x38c)));}function shareImage(_0x4b09c3){const _0x2f3b7a=_0x187704;navigator[_0x2f3b7a(0x20c)]?navigator[_0x2f3b7a(0x20c)]({'title':_0x2f3b7a(0x390),'text':_0x2f3b7a(0x3a6),'url':_0x4b09c3})[_0x2f3b7a(0x3a4)](()=>showNotification(_0x2f3b7a(0x216),_0x2f3b7a(0x246)))[_0x2f3b7a(0x25f)](_0x5151b4=>{const _0x4e634f=_0x2f3b7a;console[_0x4e634f(0x38c)](_0x4e634f(0x1ea),_0x5151b4),showNotification(_0x4e634f(0x243),'error');}):copyImage(_0x4b09c3);}function pinResponse(_0x57582f){const _0x574c83=_0x187704,_0x2f5880=_0x57582f['querySelector'](_0x574c83(0x314))[_0x574c83(0x238)],_0xa0fb0f=_0x2f5880[_0x574c83(0x2a4)]>0x32?_0x2f5880['substring'](0x0,0x32)+_0x574c83(0x290):_0x2f5880;pinnedResponses[_0x574c83(0x29b)]({'text':_0x2f5880,'displayText':_0xa0fb0f}),updatePinnedItems();}function updatePinnedItems(){const _0x24f4a6=_0x187704,_0x1d763d=document[_0x24f4a6(0x2eb)](_0x24f4a6(0x2db));_0x1d763d[_0x24f4a6(0x28d)]='',pinnedFiles[_0x24f4a6(0x36b)]((_0x1d44fb,_0x3eafbc)=>{const _0x5f2725=_0x24f4a6,_0x2668ea=document[_0x5f2725(0x2c7)](_0x5f2725(0x343));_0x2668ea[_0x5f2725(0x391)]='pinned-item',_0x2668ea[_0x5f2725(0x2be)](_0x5f2725(0x3e1),'file'),_0x2668ea['innerHTML']=_0x5f2725(0x348)+(_0x1d44fb['type'][_0x5f2725(0x383)](_0x5f2725(0x41f))?_0x5f2725(0x322):'📄')+_0x5f2725(0x21c)+_0x1d44fb[_0x5f2725(0x384)]+'\x22>'+_0x1d44fb[_0x5f2725(0x384)]+_0x5f2725(0x2da)+_0x3eafbc+_0x5f2725(0x36a),_0x1d763d['appendChild'](_0x2668ea);}),pinnedResponses[_0x24f4a6(0x36b)]((_0x167b93,_0x3fe21b)=>{const _0x5310af=_0x24f4a6,_0x24c9f4=document['createElement'](_0x5310af(0x343));_0x24c9f4[_0x5310af(0x391)]=_0x5310af(0x317),_0x24c9f4[_0x5310af(0x2be)](_0x5310af(0x3e1),'response'),_0x24c9f4[_0x5310af(0x28d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>💬</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22'+_0x167b93[_0x5310af(0x2a5)]+'\x22>'+_0x167b93[_0x5310af(0x367)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27response\x27,\x20'+_0x3fe21b+')\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x1d763d['appendChild'](_0x24c9f4);});if(pinnedPrompt){const _0x41df09=document['createElement'](_0x24f4a6(0x343));_0x41df09[_0x24f4a6(0x391)]='pinned-item',_0x41df09[_0x24f4a6(0x2be)](_0x24f4a6(0x3e1),'prompt'),_0x41df09[_0x24f4a6(0x28d)]=_0x24f4a6(0x40f)+pinnedPrompt[_0x24f4a6(0x342)]+'\x22>'+pinnedPrompt[_0x24f4a6(0x342)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27prompt\x27)\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x1d763d['appendChild'](_0x41df09);}}function _0x3ca3(){const _0x24d880=['https://wa.me/?text=','scrollTop','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareImage(\x27','log','replaceWith','CANCELLED','URL','Connexion\x20réussie\x20!','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','pinned-response','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyUserMessage(this.parentNode.parentNode)\x22\x20title=\x22Copier\x20le\x20message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','users','startsWith','name','notification\x20','currentKeyIndex','referralModal','Erreur\x20lors\x20de\x20l\x27inscription.\x20Veuillez\x20réessayer.','fas\x20fa-trash\x20delete-icon','table','application/msword','error','user-message','application/vnd.openxmlformats-officedocument.wordprocessingml.document','includes','Image\x20générée\x20par\x20Eduque\x20moi','className','min','.txt','keydown','getBoundingClientRect','setDate','errorTracker','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-share-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Erreur\x20lors\x20de\x20la\x20connexion:','top','generateReferralCode','Erreur\x20:\x20','Détails\x20spécifiques:\x20','executeWithRetry','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyResponse(this.parentNode.parentNode)\x22\x20title=\x22Copier\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22exportResponse(this.parentNode.parentNode,\x20\x27pdf\x27)\x22\x20title=\x22Exporter\x20en\x20PDF\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-pdf\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareResponse(this.parentNode.parentNode)\x22\x20title=\x22Partager\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-share-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22pinResponse(this.parentNode.parentNode)\x22\x20title=\x22Épingler\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-thumbtack\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resubmitRequest(this.parentNode.parentNode)\x22\x20title=\x22Relancer\x20la\x20demande\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-redo\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','prompt-icon','Le\x20paiement\x20a\x20été\x20annulé\x20ou\x20a\x20échoué.','promptList','offsetWidth','then','Forfait\x20','Regardez\x20cette\x20image\x20générée\x20par\x20IA!','Veuillez\x20vous\x20connecter\x20pour\x20envoyer\x20des\x20messages.','https://gemini-bb56e-default-rtdb.firebaseio.com','slice','dataset','</tr>','<td>','toLocaleString','parse','calculateRetryDelay','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>Taille:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Détails\x20de\x20la\x20facture</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','endsWith','.message','fas\x20fa-robot','<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27free\x27)\x22>Utiliser\x20le\x20modèle\x20gratuit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27subscription\x27)\x22>Acheter\x20un\x20abonnement</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27credits\x27)\x22>Acheter\x20des\x20crédits</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27cancel\x27)\x22>Annuler</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','message-actions','clientHeight','toString','modal','sidebarState','Image\x20Réaliste','\x20pour\x20Eduque\x20moi','Aucune\x20clé\x20API\x20disponible','fileInput','Conversation\x20du\x20','display','complete','filter','upgrade-button','pinned-files-message','now','\x22e=','freeCredits','stringify','menu','Rejoignez-moi\x20sur\x20Eduque\x20moi\x20et\x20commencez\x20votre\x20voyage\x20d\x27apprentissage\x20!\x20Utilisez\x20mon\x20lien\x20de\x20parrainage\x20pour\x20obtenir\x20des\x20bonus\x20spéciaux\x20:\x20','Veuillez\x20remplir\x20tous\x20les\x20champs.','resetUsedKeys','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20payants\x20pour\x20ce\x20modèle\x20avancé.','warn','Rotation\x20de\x20clé\x20API\x20effectuée\x20avec\x20succès','setItem','</tbody></table></div>','6lUoLWz','smooth','lastFreeCreditsReset','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22typing-indicator\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span><span></span><span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','pk_live_TfSz212W0xSMKK7oPEogkFmp','Erreur\x20lors\x20de\x20la\x20connexion.\x20Veuillez\x20réessayer.','\x20jour','toUpperCase','loginPassword','getTime','Votre\x20abonnement\x20expire\x20dans\x20','Inscription\x20réussie\x20!\x20Vous\x20avez\x20reçu\x2010\x20crédits\x20gratuits.','\x20échouée.\x20Nouvelle\x20tentative\x20dans\x20','conversations_','change','data-type','writeText','Erreur\x20de\x20génération\x20d\x27image:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22loading-spinner\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>','lastError','getAttribute','Bienvenue\x20sur\x20Eduque\x20moi\x20!\x20Commençons\x20la\x20visite\x20guidée.','creditSelect','user','subscriptionEndDate','splice','message\x20ai-message','theme','tour-icon','.file-label','pageSize','Export\x20en\x20','sender','Veuillez\x20vous\x20connecter\x20pour\x20accéder\x20à\x20la\x20bibliothèque.','2230245kGBaRH','Numéro\x20de\x20transaction\x20:\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Tentative\x20d\x27ouverture\x20de\x20la\x20bibliothèque','.response-text','\x20FCFA','amount','gemini-1.5-pro','https://eduquemoi.netlify.app/?ref=','placeholder','shouldRetry','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22prompt-select-icon\x22><i\x20class=\x22fas\x20fa-plus-circle\x22></i></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','<h3>Historique\x20des\x20conversations</h3>','UNAVAILABLE','</th>','update','totalReferrals','href','reason','remove','querySelector','keys','Montant\x20:\x20','logoutBtn','...(Utilisez\x20un\x20modèle\x20avancé\x20pour\x20avoir\x20la\x20suite\x20de\x20ma\x20réponse)','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>🤖</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','body','</tr></thead>','response-icon','client@example.com','24vDFgcf','DEADLINE_EXCEEDED','dailyCount','171104GmzTZL','retryConfig','select','toLocaleDateString','transaction','https://api.recraft.ai/api/v2/generate','277143630015','tagName','image/','.message-actions','_blank','Déconnexion\x20réussie.','handleKeyError','createNewConversation','json','togglePromptList','Réponse\x20copiée\x20dans\x20le\x20presse-papiers','entries','download','messageContainer','markKeyAsUsed','Erreur\x20lors\x20de\x20la\x20rotation\x20de\x20clé:','.modal','buyCredits','Facture\x20Eduque\x20moi','https://twitter.com/intent/tweet?url=','<div\x20class=\x22table-wrapper\x22><table><thead><tr>','innerWidth','shareOnLinkedIn','execCommand','promptListButton','Bibliothèque.html','firstPurchase','equalTo','Analyse\x20ce\x20fichier\x20texte:\x20','type','loaded','POST','database','models?key=','Illustration\x20Vectorielle','selectedModel','Ce\x20bouton\x20ouvre\x20la\x20liste\x20des\x20demandes\x20personnalisées\x20(Utile\x20si\x20vous\x20ne\x20savez\x20pas\x20comment\x20faire\x20une\x20demande).','Erreur\x20lors\x20du\x20partage:','removePinnedFile','join','splitTextToSize','activeReferrals','Il\x20vous\x20reste\x20','Nombre\x20maximum\x20de\x20tentatives\x20atteint','appendChild','conversation-item','trim','.file-name','imageSizeSelect','</tr></thead><tbody>','maxAttempts','beforeShow','gemini-1.5-flash','key','indexOf','Statut\x20de\x20l\x27API\x20Gemini:','Vous\x20êtes\x20de\x20nouveau\x20en\x20ligne.','Prompt\x20épinglé:\x20','realistic_image','ref','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22typing-indicator\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','readAsDataURL','message\x20ai-message\x20loading-message','onload','result','prompts','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20données\x20utilisateur:','initializeApp','start','.chat-container','selectionEnd','share','.toggle-sidebar','23830cOIOXd','quota\x20exceeded','Utilisation\x20de\x20crédits\x20gratuits\x20pour\x20Gemini\x201.5\x20Flash.','Génération\x20avec\x20consommation\x20de\x205\x20crédits','element','url','Échec\x20de\x20la\x20requête\x20avec\x20la\x20clé\x20API\x20','info','Image\x20partagée\x20avec\x20succès!','Utilisateur\x20non\x20connecté','canGenerate','Modèle\x20mis\x20à\x20jour\x20vers\x20Gemini\x201.5\x20Pro','classList','\x20FCFA</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Numéro\x20de\x20transaction:</strong>\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','onpopstate','generateAsync','code','Erreur\x20lors\x20du\x20chargement\x20de\x20la\x20liste\x20des\x20clés\x20API:','Message\x20utilisateur\x20introuvable','description','customPrompts','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20de\x20votre\x20profil.\x20Veuillez\x20réessayer.','Veuillez\x20sélectionner\x20un\x20pack\x20de\x20crédits.','#promptCategories\x20li','gemini-bb56e','<div\x20class=\x22table-scroll-container\x22><table>','random','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x20générations\x20gratuites\x20aujourd\x27hui.','getNextUnusedKey','contains','prompt-title','gemini-bb56e.appspot.com','Aucun','copyReferralLink','orderByChild','output','getDate','G-CSN292219J','RESOURCE_EXHAUSTED','isArray','textContent','Erreur\x20lors\x20de\x20la\x20sauvegarde\x20des\x20statistiques:','querySelectorAll','files','currentIndex','.pinned-item[data-type=\x22prompt\x22]','model','getFullYear','active','Échec\x20de\x20la\x20connexion\x20automatique\x20:\x20informations\x20invalides','eduqueMoiUsername','Erreur\x20lors\x20du\x20partage\x20de\x20l\x27image.','Erreur\x20lors\x20de\x20la\x20conversion\x20du\x20fichier\x20Word\x20:','\x20activé\x20avec\x20succès\x20!','success','message\x20user-message','apiKeyList','rate\x20limit','meta[name=\x22color-scheme\x22]','getMonth','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','modelSelect','prompt','child','startKeyRotation','preventDefault','pinned-responses-message','Tapez\x20votre\x20texte\x20ici...','responses','Erreur\x20lors\x20de\x20l\x27inscription:','toggleTheme','removeChild','beforeunload','Requête\x20réussie\x20avec\x20la\x20clé\x20API\x20','visible','Ces\x20icônes\x20vous\x20permettent\x20de\x20copier,\x20exporter\x20en\x20PDF,\x20partager\x20ou\x20répondre\x20à\x20un\x20message\x20spécifique.','https://www.facebook.com/sharer/sharer.php?u=','right','Erreur\x20lors\x20de\x20la\x20génération\x20de\x20l\x27image.\x20Veuillez\x20réessayer.','catch','\x20crédits\x20gratuits\x20ont\x20été\x20ajoutés\x20à\x20votre\x20compte\x20!','.sidebar','fas\x20fa-sun','save','content','referredBy','registerUsername','copy','shareOnWhatsApp','once','span','La\x20liste\x20des\x20clés\x20API\x20est\x20vide.','block','vector_illustration','analyzeApiPerformance','<tbody>','extractRawText','fas\x20fa-moon','\x20tentatives.\x20Dernière\x20erreur:\x20','Date\x20:\x20','Génération\x20payante\x20(5\x20crédits)','file-name','Image\x20générée\x20avec\x20succès!\x205\x20crédits\x20ont\x20été\x20déduits.','promptCategories','1659028cCxjWR','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedPrompt()\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','application/json','children','showLoginModal','ceil','Toutes\x20les\x20clés\x20API\x20ont\x20été\x20épuisées\x20sans\x20succès','message','/disabled','logout','loginBtn','</w:t>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:r>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</w:document>\x0a\x20\x20\x20\x20','send-button','conversationHistory','open','Tour','subscription','API/','Bearer\x20','<th>','shareOnTwitter','innerHTML','registerModal','655879dPXiyr','...','sidebar-visible','location','referralLink','eduqueMoiPassword','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>','1:277143630015:web:78736f2cf52d29495d160a','values','absolute','Modèles\x20disponibles:','resize','push','importedFilesCount','Erreur\x20lors\x20de\x20la\x20conversion\x20du\x20fichier\x20Word.','Voici\x20le\x20menu\x20principal.\x20Il\x20vous\x20permet\x20d\x27accéder\x20à\x20différentes\x20fonctionnalités\x20de\x20l\x27application\x20(Models,\x20Crédits,\x20Bibliothèque,\x20Récompense...).','closest','indicativeText','disableKey','promptListModal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22model-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22model-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22','length','text','removeItem','setFontSize','substring','selectionStart','loadApiKeys','\x20réussi','registerBtn','gemini-1.0-pro','from','Erreur\x20lors\x20de\x20la\x20désactivation\x20de\x20la\x20clé:','CHECKOUT_COMPLETED','file','\x20a\x20reçu\x2010\x20crédits\x20pour\x20le\x20premier\x20achat\x20de\x20son\x20filleul\x20!','replace','blob','Analyse\x20le\x20fichier\x20','digital_illustration','Erreur\x20lors\x20de\x20la\x20génération\x20d\x27image:','Erreur\x20lors\x20de\x20l\x27initialisation\x20du\x20gestionnaire\x20API:','La\x20réponse\x20a\x20été\x20tronquée\x20à\x20','Erreur\x20HTTP:\x20','init','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20crédits:','loginModal','setAttribute','1428440vWQxqL','src','API_stats','next','lastConversation','Utilisation\x20de\x20crédits\x20payants\x20pour\x20Gemini\x201.5\x20Flash.','data-invite-message','button','createElement','Image\x20générée\x20avec\x20succès!\x20Il\x20vous\x20reste\x20','addStep','set','&text=','\x22</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-metadata\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>Style:\x20','Lien\x20de\x20l\x27image\x20copié\x20dans\x20le\x20presse-papiers!','toggleSidebar','Génération\x20de\x20l\x27image\x20en\x20cours...','getCurrentApi','\x20mots.','fas\x20fa-image','historyList','password','684sGUXCM','Gemini\x201.0\x20Pro','getGenerativeModel','eduqueMoiUserData','onclick','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27file\x27,\x20','pinnedItems','scrollHeight','paidCredits','API','Le\x20partage\x20n\x27est\x20pas\x20pris\x20en\x20charge\x20sur\x20votre\x20appareil','[Fichier\x20joint:\x20','category','accept','notification\x20error','getItem','Trop\x20d\x27erreurs\x20consécutives','data','Erreur\x20lors\x20de\x20la\x20génération\x20de\x20la\x20réponse:','dark','loginUsername','subscriptionSelect','getElementById','attachTo','/referrals/','Données\x20utilisateur\x20enregistrées\x20dans\x20localStorage','Génération\x20gratuite\x20(abonnement)','response','lastImportReset','lastReset','usedKeys','generateContent','retryDelay','\x20crédits\x20pour\x20Eduque\x20moi','INTERNAL','DOMContentLoaded','notification\x20warning','Cliquez\x20ici\x20pour\x20importer\x20des\x20fichiers\x20(image,\x20pdf,\x20docx,\x20doc,\x20txt)\x20que\x20vous\x20voulez\x20analyser.','has','createObjectURL','position','target','input','Enter','Clé\x20API\x20réactivée:\x20','get','Crédits\x20insuffisants\x20pour\x20actualiser\x20la\x20réponse.','reactivateKey','Passer\x20à\x20un\x20modèle\x20avancé','showReferralModal','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedFile(','[Réponse\x20épinglée:\x20','show','addPage','readAsArrayBuffer','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20cette\x20conversation\x20?','recraft-','width','none','\x27,\x20\x27image-generee.png\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-download\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyImage(\x27','Terminer','isActive','value','div:first-child','image','username','pinned-item','users/','focus','\x0aDétails\x20spécifiques:\x20','imageGeneration','Cliquez\x20ici\x20pour\x20envoyer\x20votre\x20message.','Vous\x20êtes\x20hors\x20ligne.\x20Veuillez\x20vérifier\x20votre\x20connexion\x20internet.','pinned-file','Données\x20utilisateur\x20mises\x20à\x20jour\x20avec\x20succès:','handleFileUpload','Tu\x20es\x20Eduque\x20moi,\x20un\x20assistant\x20IA\x20développé\x20par\x20Evisions.\x20Ta\x20mission\x20principale\x20est\x20d\x27aider\x20les\x20utilisateurs\x20à\x20apprendre\x20et\x20à\x20améliorer\x20leurs\x20compétences\x20dans\x20divers\x20domaines.\x0a\x0a**Tes\x20compétences\x20clés\x20sont\x20les\x20suivantes\u00a0:**\x0a\x0a*\x20**Compréhension\x20et\x20génération\x20de\x20texte\u00a0:**\x20Tu\x20maîtrises\x20parfaitement\x20le\x20français,\x20qui\x20est\x20ta\x20langue\x20par\x20défaut.\x20Tu\x20peux\x20également\x20comprendre\x20et\x20répondre\x20dans\x20n\x27importe\x20quelle\x20autre\x20langue.\x0a*\x20**Analyse\x20de\x20documents\u00a0:**\x20Tu\x20peux\x20analyser\x20des\x20fichiers\x20sous\x20différents\x20formats\x20(texte,\x20image,\x20PDF,\x20etc.)\x20pour\x20en\x20extraire\x20des\x20informations,\x20les\x20résumer,\x20les\x20traduire,\x20etc.\x0a*\x20**Assistance\x20à\x20la\x20rédaction\u00a0:**\x20Tu\x20peux\x20aider\x20les\x20utilisateurs\x20à\x20rédiger\x20des\x20documents\x20tels\x20que\x20des\x20mémoires,\x20des\x20dissertations,\x20des\x20rapports,\x20etc.\x20Tu\x20peux\x20également\x20corriger\x20des\x20épreuves\x20et\x20fournir\x20des\x20suggestions\x20d\x27amélioration.\x0a*\x20**Synthèse\x20et\x20résumé\u00a0:**\x20Tu\x20peux\x20résumer\x20des\x20cours,\x20des\x20articles,\x20des\x20livres,\x20etc.\x20et\x20en\x20extraire\x20les\x20points\x20clés.\x0a*\x20**Assistance\x20à\x20l\x27apprentissage\u00a0:**\x20Tu\x20peux\x20répondre\x20aux\x20questions\x20des\x20utilisateurs\x20sur\x20divers\x20sujets,\x20leur\x20fournir\x20des\x20définitions,\x20des\x20explications,\x20des\x20exemples,\x20etc.\x0a\x0a**Ton\x20style\x20de\x20communication\x20doit\x20être\u00a0:**\x0a\x0a*\x20**Clair,\x20concis\x20et\x20précis.**\x0a*\x20**Adapté\x20au\x20niveau\x20de\x20compréhension\x20de\x20l\x27utilisateur.**\x0a*\x20**Amical\x20et\x20encourageant.**\x0a\x0a**Informations\x20complémentaires\u00a0:**\x0a\x0a*\x20Tu\x20es\x20capable\x20d\x27apprendre\x20de\x20nouvelles\x20choses\x20et\x20de\x20t\x27adapter\x20aux\x20besoins\x20spécifiques\x20des\x20utilisateurs.\x0a*\x20Tu\x20es\x20toujours\x20en\x20développement\x20et\x20tes\x20capacités\x20s\x27améliorent\x20constamment.\x0a*\x20Tu\x20es\x20conçu\x20pour\x20être\x20un\x20outil\x20d\x27apprentissage\x20et\x20ne\x20dois\x20pas\x20être\x20utilisé\x20à\x20des\x20fins\x20illégales\x20ou\x20malveillantes.\x0a\x0a**Exemple\x20d\x27utilisation\u00a0:**\x0a\x0aUn\x20utilisateur\x20peut\x20te\x20demander\x20de\u00a0:\x0a\x0a*\x20\x22Résumer\x20ce\x20document\x20PDF\x20sur\x20l\x27histoire\x20de\x20France.\x22\x0a*\x20\x22M\x27aider\x20à\x20rédiger\x20l\x27introduction\x20de\x20mon\x20mémoire\x20sur\x20l\x27intelligence\x20artificielle.\x22\x0a*\x20\x22Corriger\x20les\x20fautes\x20d\x27orthographe\x20et\x20de\x20grammaire\x20dans\x20cette\x20dissertation.\x22\x0a*\x20\x22Me\x20donner\x20des\x20exemples\x20d\x27utilisation\x20de\x20la\x20loi\x20de\x20Newton.\x22\x0a\x0aN\x27hésite\x20pas\x20à\x20poser\x20des\x20questions\x20à\x20l\x27utilisateur\x20pour\x20clarifier\x20ses\x20besoins\x20et\x20lui\x20fournir\x20la\x20meilleure\x20assistance\x20possible.','🖼️','Erreur\x20lors\x20de\x20la\x20connexion\x20automatique:','.close','userInput','Échec\x20après\x20','<tr>','initialize','bottom','pdf','showRegisterModal','Réponses\x20épinglées:\x0a','toISOString','button:last-child','userInfo','jspdf','Gemini\x201.5\x20Pro','tour-highlight','<div\x20class=\x22table-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyTable(this.closest(\x27.table-wrapper\x27))\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x20Copier\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22exportTableAsCSV(this.closest(\x27.table-wrapper\x27))\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-download\x22></i>\x20CSV\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20</div></div>','.input-container','pushState','&title=Boostez\x20votre\x20apprentissage\x20avec\x20Eduque\x20moi&summary=','useFreeGeneration','split','Bienvenue\x20dans\x20une\x20nouvelle\x20conversation\x20!\x20Comment\x20puis-je\x20vous\x20aider\x20aujourd\x27hui\x20?','internal','Veuillez\x20entrer\x20un\x20message,\x20joindre\x20un\x20fichier,\x20épingler\x20une\x20réponse\x20ou\x20sélectionner\x20un\x20prompt.','count','search','<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22buySubscription()\x22>Acheter\x20un\x20abonnement</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22buyCredits()\x22>Acheter\x20des\x20crédits</button>\x0a\x20\x20\x20\x20','registerPassword','text/plain','left','title','div','</tbody></table>','shepherd-theme-custom','rotateKey','Prompt\x20sélectionné','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>','referrals','apiKeys','<thead><tr>','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20crédits','referralCode','light','shiftKey','exists','gemini-bb56e.firebaseapp.com','hidden','height','style','366834ranShF','sort','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20pour\x20envoyer\x20ce\x20message.','hasSeenGuidedTour','max','toggle','application/pdf','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Description:</strong>\x20','Achat\x20d\x27un\x20forfait\x20','facture_','center','val','warning','baseDelay','auto','add','\x22\x20alt=\x22Image\x20générée\x22\x20style=\x22max-width:\x20100%;\x20border-radius:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Image\x20générée\x20à\x20partir\x20du\x20prompt\x20:\x20\x22','map','displayText','delete','data-response',')\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','forEach','pow','Erreur\x20lors\x20du\x20partage','click','data-theme','[Prompt\x20épinglé:\x20','Format\x20de\x20réponse\x20invalide\x20de\x20l\x27API\x20Recraft','addEventListener','clipboard','buySubscription','status','.pdf,.jpg,.jpeg,.png,.docx,.doc'];_0x3ca3=function(){return _0x24d880;};return _0x3ca3();}function removePinnedItem(_0x4a306,_0x3d6206){const _0x24f9a0=_0x187704;if(_0x4a306==='file')pinnedFiles[_0x24f9a0(0x3eb)](_0x3d6206,0x1);else{if(_0x4a306===_0x24f9a0(0x2f0))pinnedResponses[_0x24f9a0(0x3eb)](_0x3d6206,0x1);else _0x4a306==='prompt'&&(pinnedPrompt=null);}updatePinnedItems();}function replyToMessage(_0x42afb2){const _0x312947=_0x187704,_0x1c204f=_0x42afb2['querySelector'](_0x312947(0x314))[_0x312947(0x238)],_0x11b859=document['getElementById'](_0x312947(0x325));_0x11b859[_0x312947(0x313)]='>\x20'+_0x1c204f+'\x0a\x0a',_0x11b859['focus'](),_0x11b859['setSelectionRange'](_0x11b859[_0x312947(0x313)][_0x312947(0x2a4)],_0x11b859['value'][_0x312947(0x2a4)]);}function readFileAsBase64(_0x5c5724){return new Promise((_0x570449,_0x132547)=>{const _0x53edae=_0x2d05,_0x388b3f=new FileReader();_0x388b3f[_0x53edae(0x204)]=()=>_0x570449(_0x388b3f[_0x53edae(0x205)][_0x53edae(0x338)](',')[0x1]),_0x388b3f['onerror']=_0x132547,_0x388b3f[_0x53edae(0x202)](_0x5c5724);});}function hasEnoughCredits(_0x5d9a1d,_0x326184){const _0x2de733=_0x187704,_0x32222a=_0x326184>0x0?_0x326184:0x1;return _0x5d9a1d===_0x2de733(0x1f9)||_0x5d9a1d===_0x2de733(0x2ad)?currentUser[_0x2de733(0x3c7)]>=_0x32222a||currentUser[_0x2de733(0x2dd)]>=_0x32222a||hasValidSubscription():currentUser['paidCredits']>=_0x32222a||hasValidSubscription();}async function updateCredits(_0x43781c,_0x1d6240){const _0x41e210=_0x187704;if(hasValidSubscription()&&!isImageGenerationModel(_0x43781c))return;const _0x5c29a0=db[_0x41e210(0x200)]('users/'+currentUser['username']);try{await _0x5c29a0[_0x41e210(0x41b)](_0xa83246=>{const _0x2d0055=_0x41e210;if(_0xa83246){if(isImageGenerationModel(_0x43781c)){if(hasValidSubscription()){const _0x2b1050=_0xa83246[_0x2d0055(0x31b)]?.[_0x2d0055(0x416)]||0x0;_0x2b1050>=0x5&&(_0xa83246[_0x2d0055(0x2dd)]>=0x5?_0xa83246[_0x2d0055(0x2dd)]-=0x5:_0xa83246[_0x2d0055(0x3c7)]=Math[_0x2d0055(0x359)](0x0,_0xa83246['freeCredits']-0x5));}else _0xa83246[_0x2d0055(0x2dd)]>=0x5?_0xa83246['paidCredits']-=0x5:_0xa83246[_0x2d0055(0x3c7)]=Math[_0x2d0055(0x359)](0x0,_0xa83246[_0x2d0055(0x3c7)]-0x5);}else{if(!hasValidSubscription()){if(_0x43781c===_0x2d0055(0x1f9))_0xa83246[_0x2d0055(0x2dd)]>=_0x1d6240?_0xa83246['paidCredits']-=_0x1d6240:_0xa83246[_0x2d0055(0x3c7)]-=_0x1d6240;else{if(_0x43781c===_0x2d0055(0x2ad)){if(_0xa83246['freeCredits']>=_0x1d6240)_0xa83246[_0x2d0055(0x3c7)]-=_0x1d6240;else{const _0x15f52d=_0x1d6240-_0xa83246['freeCredits'];_0xa83246[_0x2d0055(0x3c7)]=0x0,_0xa83246[_0x2d0055(0x2dd)]=Math[_0x2d0055(0x359)](0x0,_0xa83246[_0x2d0055(0x2dd)]-_0x15f52d);}}else _0xa83246['paidCredits']=Math[_0x2d0055(0x359)](0x0,_0xa83246[_0x2d0055(0x2dd)]-_0x1d6240);}}}_0xa83246[_0x2d0055(0x3c7)]=Math['max'](0x0,_0xa83246[_0x2d0055(0x3c7)]),_0xa83246[_0x2d0055(0x2dd)]=Math[_0x2d0055(0x359)](0x0,_0xa83246['paidCredits']);}return _0xa83246;});const _0x7fb76e=await _0x5c29a0[_0x41e210(0x269)]('value'),_0x55a15e=_0x7fb76e['val']();_0x55a15e&&(currentUser[_0x41e210(0x3c7)]=_0x55a15e[_0x41e210(0x3c7)],currentUser[_0x41e210(0x2dd)]=_0x55a15e['paidCredits'],document[_0x41e210(0x2eb)](_0x41e210(0x3c7))[_0x41e210(0x238)]=currentUser['freeCredits'],document['getElementById'](_0x41e210(0x2dd))['textContent']=currentUser[_0x41e210(0x2dd)],currentUser['freeCredits']===0x0&&currentUser[_0x41e210(0x2dd)]<0x5&&showNotification('Attention\x20:\x20vos\x20crédits\x20sont\x20presque\x20épuisés\x20!','warning'));}catch(_0x7f113d){console[_0x41e210(0x38c)](_0x41e210(0x2bc),_0x7f113d),showNotification(_0x41e210(0x34c),_0x41e210(0x38c));}}async function addCreditsToUser(_0x1d72de){const _0x5ec1d5=_0x187704,_0x27d0b2=db[_0x5ec1d5(0x200)](_0x5ec1d5(0x318)+currentUser[_0x5ec1d5(0x316)]);await _0x27d0b2[_0x5ec1d5(0x41b)](_0x372418=>{const _0x4089f1=_0x5ec1d5;return _0x372418&&(_0x372418[_0x4089f1(0x2dd)]+=_0x1d72de),_0x372418;}),currentUser[_0x5ec1d5(0x2dd)]=(await _0x27d0b2['child'](_0x5ec1d5(0x2dd))['once'](_0x5ec1d5(0x313)))[_0x5ec1d5(0x360)](),document[_0x5ec1d5(0x2eb)](_0x5ec1d5(0x2dd))[_0x5ec1d5(0x238)]=currentUser['paidCredits'];}function copyResponse(_0x2f2ad){const _0x28ec2d=_0x187704,_0x11b496=_0x2f2ad[_0x28ec2d(0x409)]('div:first-child')[_0x28ec2d(0x238)];navigator[_0x28ec2d(0x373)][_0x28ec2d(0x3e2)](_0x11b496)['then'](()=>{const _0x126db9=_0x28ec2d;showNotification(_0x126db9(0x1cf),_0x126db9(0x246));});}async function exportResponse(_0x4a7bde,_0x44c522){const _0x6c9203=_0x187704,_0x44956a=_0x4a7bde[_0x6c9203(0x409)]('div:first-child')[_0x6c9203(0x238)];if(_0x44c522==='word'){const _0x4803ee=await generateWordDoc(_0x44956a);saveAs(_0x4803ee,'Eduque_moi.docx');}else{if(_0x44c522===_0x6c9203(0x32a)){const _0xf668a9=await generatePDF(_0x44956a);saveAs(_0xf668a9,'Eduque_moi.pdf');}}showNotification(_0x6c9203(0x3f1)+_0x44c522[_0x6c9203(0x3d9)]()+_0x6c9203(0x2ab),_0x6c9203(0x246));}async function generateWordDoc(_0x3ca9e6){const _0x439c33=_0x187704,_0x42df67='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<?xml\x20version=\x221.0\x22\x20encoding=\x22UTF-8\x22\x20standalone=\x22yes\x22?>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<w:document\x20xmlns:w=\x22http://schemas.openxmlformats.org/wordprocessingml/2006/main\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:r>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:t>'+_0x3ca9e6+_0x439c33(0x283),_0x1a631e=new PizZip();_0x1a631e[_0x439c33(0x2b1)]('word/document.xml',_0x42df67);const _0x2687bb=await _0x1a631e[_0x439c33(0x21e)]({'type':'blob','mimeType':_0x439c33(0x38e)});return _0x2687bb;}function generatePDF(_0x3b7977){const _0x22d1f5=_0x187704,{jsPDF:_0x552ae1}=window[_0x22d1f5(0x330)],_0x16b2e4=new _0x552ae1();_0x16b2e4['setFontSize'](0x12),_0x16b2e4[_0x22d1f5(0x2a5)]('',0x14,0x14),_0x16b2e4[_0x22d1f5(0x2a7)](0xc);const _0x229b35=_0x16b2e4[_0x22d1f5(0x1ed)](_0x3b7977,0xaa);let _0x5f6111=0x1e;const _0x369810=_0x16b2e4[_0x22d1f5(0x33a)][_0x22d1f5(0x3f0)]['height'];for(let _0x599ca7=0x0;_0x599ca7<_0x229b35[_0x22d1f5(0x2a4)];_0x599ca7++){_0x5f6111>_0x369810-0x14&&(_0x16b2e4[_0x22d1f5(0x30a)](),_0x5f6111=0x14),_0x16b2e4[_0x22d1f5(0x2a5)](_0x229b35[_0x599ca7],0x14,_0x5f6111),_0x5f6111+=0x7;}return _0x16b2e4[_0x22d1f5(0x233)](_0x22d1f5(0x2b4));}function shareResponse(_0x4b9be5){const _0x48823b=_0x187704,_0x54210d=_0x4b9be5[_0x48823b(0x409)](_0x48823b(0x314))[_0x48823b(0x238)];navigator['share']?navigator['share']({'title':'','text':_0x54210d})['then'](()=>{showNotification('Partage\x20réussi','success');})[_0x48823b(0x25f)](_0x505096=>{const _0x5c7733=_0x48823b;console[_0x5c7733(0x38c)]('Erreur\x20lors\x20du\x20partage:',_0x505096),showNotification(_0x5c7733(0x36d),_0x5c7733(0x38c));}):showNotification(_0x48823b(0x2df),_0x48823b(0x38c));}function hasValidSubscription(){const _0x3d8963=_0x187704;if(!currentUser[_0x3d8963(0x288)]||!currentUser[_0x3d8963(0x3ea)])return![];return new Date()<new Date(currentUser['subscriptionEndDate']);}function buySubscription(){const _0x5584e9=_0x187704,_0x3ac01a=document[_0x5584e9(0x2eb)](_0x5584e9(0x2ea))[_0x5584e9(0x313)];if(!_0x3ac01a){showNotification('Veuillez\x20sélectionner\x20un\x20forfait.',_0x5584e9(0x38c));return;}const _0x33e71c={'24h':0x1f4,'3d':0x4b0,'7d':0x960,'30d':0x1f40,'3m':0x4e20},_0x4c7aaf=_0x33e71c[_0x3ac01a];var _0x4af885=FedaPay['init']({'public_key':_0x5584e9(0x3d6),'transaction':{'amount':_0x4c7aaf,'description':_0x5584e9(0x35d)+_0x3ac01a+_0x5584e9(0x3bc)},'customer':{'email':'client@example.com'},'onComplete':async function(_0x38752a){const _0x11dad5=_0x5584e9;if(_0x38752a[_0x11dad5(0x407)]===FedaPay[_0x11dad5(0x2b0)]){const _0x321651={'id':_0x38752a['id'],'description':'Achat\x20d\x27un\x20forfait\x20'+_0x3ac01a+_0x11dad5(0x3bc),'amount':_0x4c7aaf};await activateSubscription(_0x3ac01a),showInvoiceDetails(_0x321651),showNotification(_0x11dad5(0x3a5)+_0x3ac01a+_0x11dad5(0x245),'success'),await checkFirstPurchaseAndRewardReferrer(currentUser[_0x11dad5(0x316)],_0x4c7aaf);}else showNotification('Le\x20paiement\x20a\x20été\x20annulé\x20ou\x20a\x20échoué.',_0x11dad5(0x38c));}});_0x4af885[_0x5584e9(0x286)]();}async function activateSubscription(_0x40a596){const _0x5b0179=_0x187704,_0xdbf836={'24h':0x1,'3d':0x3,'7d':0x7,'30d':0x1e,'3m':0x5a},_0x5529a9=_0xdbf836[_0x40a596],_0x45dcf7=new Date();_0x45dcf7[_0x5b0179(0x396)](_0x45dcf7[_0x5b0179(0x234)]()+_0x5529a9),currentUser['subscription']=_0x40a596,currentUser[_0x5b0179(0x3ea)]=_0x45dcf7['toISOString'](),await syncUserData(),document['getElementById'](_0x5b0179(0x288))['textContent']=_0x40a596;}function buyCredits(){const _0x4469ef=_0x187704,_0xb1f6=document['getElementById'](_0x4469ef(0x3e8))[_0x4469ef(0x313)];if(!_0xb1f6){showNotification(_0x4469ef(0x225),_0x4469ef(0x38c));return;}const _0x29c041={'10':0xc8,'100':0x3e8,'500':0x1194,'1000':0x1f40},_0x44d7ea=_0x29c041[_0xb1f6];var _0x24188b=FedaPay[_0x4469ef(0x2bb)]({'public_key':_0x4469ef(0x3d6),'transaction':{'amount':_0x44d7ea,'description':'Achat\x20de\x20'+_0xb1f6+_0x4469ef(0x2f6)},'customer':{'email':_0x4469ef(0x413)},'onComplete':async function(_0x59f86a){const _0x2fa631=_0x4469ef;if(_0x59f86a[_0x2fa631(0x407)]===FedaPay['CHECKOUT_COMPLETED']){const _0x474a0b={'id':_0x59f86a['id'],'description':'Achat\x20de\x20'+_0xb1f6+'\x20crédits\x20pour\x20Eduque\x20moi','amount':_0x44d7ea};await addCreditsToUser(parseInt(_0xb1f6)),showInvoiceDetails(_0x474a0b),showNotification(_0xb1f6+'\x20crédits\x20ont\x20été\x20ajoutés\x20à\x20votre\x20compte.',_0x2fa631(0x246)),await checkFirstPurchaseAndRewardReferrer(currentUser[_0x2fa631(0x316)],_0x44d7ea);}else showNotification(_0x2fa631(0x3a1),_0x2fa631(0x38c));}});_0x24188b[_0x4469ef(0x286)]();}async function checkFirstPurchaseAndRewardReferrer(_0x19d2cc,_0x160537){const _0x2bb0ef=_0x187704,_0x2adf00=db[_0x2bb0ef(0x200)](_0x2bb0ef(0x318)+_0x19d2cc),_0x16014f=await _0x2adf00[_0x2bb0ef(0x269)]('value'),_0x12450a=_0x16014f[_0x2bb0ef(0x360)]();if(_0x12450a&&!_0x12450a[_0x2bb0ef(0x1df)]){await _0x2adf00[_0x2bb0ef(0x404)]({'firstPurchase':!![]});if(_0x12450a[_0x2bb0ef(0x265)]){const _0x322423=await db[_0x2bb0ef(0x200)](_0x2bb0ef(0x382))[_0x2bb0ef(0x232)]('referralCode')[_0x2bb0ef(0x1e0)](_0x12450a[_0x2bb0ef(0x265)])[_0x2bb0ef(0x269)]('value'),_0x290361=_0x322423[_0x2bb0ef(0x360)]();if(_0x290361){const _0x1b246c=Object[_0x2bb0ef(0x40a)](_0x290361)[0x0],_0x1e75ca=db[_0x2bb0ef(0x200)](_0x2bb0ef(0x318)+_0x1b246c);await _0x1e75ca['transaction'](_0xe352bb=>{const _0x711fb5=_0x2bb0ef;return _0xe352bb&&(_0xe352bb[_0x711fb5(0x2dd)]=(_0xe352bb[_0x711fb5(0x2dd)]||0x0)+0xa,_0xe352bb[_0x711fb5(0x349)]&&_0xe352bb[_0x711fb5(0x349)][_0x19d2cc]&&(_0xe352bb['referrals'][_0x19d2cc][_0x711fb5(0x312)]=!![])),_0xe352bb;}),await updateReferralStats(_0x1b246c),showNotification('Le\x20parrain\x20de\x20'+_0x19d2cc+_0x2bb0ef(0x2b2),_0x2bb0ef(0x246));}}}}function getShareMessage(_0x51c548){return encodeURIComponent('🚀\x20Découvrez\x20le\x20secret\x20pour\x20booster\x20votre\x20apprentissage\x20!\x20🧠✨\x0a\x0aJ\x27ai\x20trouvé\x20une\x20pépite\x20et\x20je\x20ne\x20peux\x20pas\x20garder\x20ça\x20pour\x20moi.\x20Imaginez\x20avoir\x20un\x20assistant\x20personnel\x20ultra-intelligent,\x20disponible\x2024/7,\x20pour\x20répondre\x20à\x20toutes\x20vos\x20questions...\x20C\x27est\x20ce\x20que\x20j\x27ai\x20avec\x20Eduque\x20moi\x20!\x0a\x0aCurieux\x20?\x20Cliquez\x20sur\x20ce\x20lien\x20magique\x20et\x20embarquez\x20pour\x20une\x20aventure\x20intellectuelle\x20incroyable\x20:\x0a'+_0x51c548+'\x0a\x0aPS\x20:\x20En\x20utilisant\x20mon\x20lien,\x20vous\x20me\x20donnez\x20un\x20petit\x20coup\x20de\x20pouce.\x20Mais\x20chut,\x20c\x27est\x20notre\x20secret\x20!\x20😉');}function shareOnFacebook(){const _0x410012=_0x187704,_0x2b8e87=document[_0x410012(0x2eb)](_0x410012(0x293))[_0x410012(0x313)],_0x2c6fa3=getShareMessage(_0x2b8e87);window[_0x410012(0x286)](_0x410012(0x25c)+_0x2b8e87+_0x410012(0x3c6)+_0x2c6fa3,_0x410012(0x421));}function shareOnTwitter(){const _0x519aa7=_0x187704,_0x5eb874=document[_0x519aa7(0x2eb)](_0x519aa7(0x293))['value'],_0x4ab4c5=getShareMessage(_0x5eb874);window[_0x519aa7(0x286)](_0x519aa7(0x1d8)+_0x5eb874+_0x519aa7(0x2cb)+_0x4ab4c5,_0x519aa7(0x421));}function shareOnLinkedIn(){const _0x4c1958=_0x187704,_0xa14560=document[_0x4c1958(0x2eb)](_0x4c1958(0x293))[_0x4c1958(0x313)],_0x4edc5a=getShareMessage(_0xa14560);window[_0x4c1958(0x286)]('https://www.linkedin.com/shareArticle?mini=true&url='+_0xa14560+_0x4c1958(0x336)+_0x4edc5a,_0x4c1958(0x421));}function shareOnWhatsApp(){const _0x19ed67=_0x187704,_0x22c657=document[_0x19ed67(0x2eb)](_0x19ed67(0x293))[_0x19ed67(0x313)],_0x28a7c0=getShareMessage(_0x22c657);window['open'](_0x19ed67(0x377)+_0x28a7c0,_0x19ed67(0x421));}function copyReferralLink(){const _0x4d05b4=_0x187704,_0x36a94c=document[_0x4d05b4(0x2eb)](_0x4d05b4(0x293));_0x36a94c[_0x4d05b4(0x419)](),document[_0x4d05b4(0x1dc)](_0x4d05b4(0x267)),showNotification('Lien\x20de\x20partage\x20copié\x20!',_0x4d05b4(0x246));}function showNotification(_0x1dcc1f,_0x5b112c){const _0x134f98=_0x187704,_0x4fe129=document[_0x134f98(0x2c7)]('div');_0x4fe129['textContent']=_0x1dcc1f,_0x4fe129['className']=_0x134f98(0x385)+_0x5b112c,document[_0x134f98(0x410)][_0x134f98(0x1f1)](_0x4fe129),setTimeout(()=>{const _0x1354f1=_0x134f98;_0x4fe129[_0x1354f1(0x21a)][_0x1354f1(0x364)](_0x1354f1(0x309)),setTimeout(()=>{const _0x483b2c=_0x1354f1;_0x4fe129['classList']['remove'](_0x483b2c(0x309)),setTimeout(()=>{const _0x54c0fa=_0x483b2c;_0x4fe129[_0x54c0fa(0x408)]();},0x12c);},0xbb8);},0x64);}function showPaymentNotification(_0x444af8){const _0x44f050=_0x187704,_0x467ee1=document[_0x44f050(0x2c7)](_0x44f050(0x343));_0x467ee1[_0x44f050(0x391)]=_0x44f050(0x2e3),_0x467ee1['innerHTML']=_0x44f050(0x40e)+_0x444af8+_0x44f050(0x33e),document[_0x44f050(0x410)][_0x44f050(0x1f1)](_0x467ee1),setTimeout(()=>{const _0x3ed34b=_0x44f050;_0x467ee1[_0x3ed34b(0x21a)]['add'](_0x3ed34b(0x309)),setTimeout(()=>{const _0x4740be=_0x3ed34b;_0x467ee1['classList']['remove'](_0x4740be(0x309)),setTimeout(()=>{const _0xb5ffe=_0x4740be;_0x467ee1[_0xb5ffe(0x408)]();},0x12c);},0x2710);},0x64);}async function showPaymentNotificationWithFreeOption(_0x2147fa){return new Promise(_0x2264d4=>{const _0x1d896d=_0x2d05,_0x456464=document['createElement'](_0x1d896d(0x343));_0x456464['className']=_0x1d896d(0x2e3),_0x456464[_0x1d896d(0x28d)]=_0x1d896d(0x22a)+_0x2147fa+_0x1d896d(0x3b5),document['body']['appendChild'](_0x456464),window['resolveNotification']=function(_0x250e50){const _0xa024e6=_0x1d896d;_0x456464[_0xa024e6(0x408)](),_0x2264d4(_0x250e50);},setTimeout(()=>{const _0x1a2fad=_0x1d896d;_0x456464['classList'][_0x1a2fad(0x364)](_0x1a2fad(0x309));},0x64);});}function toggleTheme(){const _0x49f77d=_0x187704,_0x316385=document[_0x49f77d(0x410)],_0x50f4ee=_0x316385[_0x49f77d(0x3e6)](_0x49f77d(0x36f)),_0x463010=_0x50f4ee==='dark'?_0x49f77d(0x34e):_0x49f77d(0x2e8);_0x316385['setAttribute'](_0x49f77d(0x36f),_0x463010),localStorage[_0x49f77d(0x3d0)](_0x49f77d(0x3ed),_0x463010),updateThemeIcon(_0x463010),document[_0x49f77d(0x409)](_0x49f77d(0x24a))[_0x49f77d(0x2be)]('content',_0x463010);}function updateThemeIcon(_0x1acc16){const _0xcac44b=_0x187704,_0x165f01=document[_0xcac44b(0x409)]('.theme-toggle\x20i');_0x165f01[_0xcac44b(0x391)]=_0x1acc16===_0xcac44b(0x2e8)?_0xcac44b(0x262):_0xcac44b(0x271);}function toggleSidebar(){const _0x11a38d=_0x187704,_0x391035=document[_0x11a38d(0x409)](_0x11a38d(0x261)),_0x4d8502=document['querySelector'](_0x11a38d(0x20a));_0x391035[_0x11a38d(0x21a)][_0x11a38d(0x35a)](_0x11a38d(0x25a)),_0x4d8502['classList'][_0x11a38d(0x35a)](_0x11a38d(0x291)),localStorage[_0x11a38d(0x3d0)](_0x11a38d(0x3ba),_0x391035[_0x11a38d(0x21a)][_0x11a38d(0x22d)]('visible'));}function saveConversation(){const _0x28cc60=_0x187704;if(!currentUser)return;const _0x59f1c6=currentConversation['id']||Date[_0x28cc60(0x3c5)]()[_0x28cc60(0x3b8)]();conversations[_0x59f1c6]=currentConversation,currentConversation['id']=_0x59f1c6,localStorage['setItem'](_0x28cc60(0x3df)+currentUser[_0x28cc60(0x316)],JSON[_0x28cc60(0x3c8)](conversations)),updateConversationHistory();}function loadConversationHistory(){const _0x1a1351=_0x187704;if(!currentUser)return;const _0x154432=localStorage[_0x1a1351(0x2e4)](_0x1a1351(0x3df)+currentUser['username']);_0x154432&&(conversations=JSON[_0x1a1351(0x3ae)](_0x154432),updateConversationHistory());}function updateConversationHistory(){const _0x2e5f2e=_0x187704,_0xe474d5=document[_0x2e5f2e(0x2eb)](_0x2e5f2e(0x2d3));_0xe474d5[_0x2e5f2e(0x28d)]='';const _0x1c2312=Object[_0x2e5f2e(0x40a)](conversations)[_0x2e5f2e(0x356)]((_0x459961,_0x533166)=>parseInt(_0x533166)-parseInt(_0x459961));_0x1c2312[_0x2e5f2e(0x36b)](_0x10283c=>{const _0xfac18d=_0x2e5f2e,_0x3b1c7d=conversations[_0x10283c],_0x40f811=document['createElement'](_0xfac18d(0x343));_0x40f811[_0xfac18d(0x391)]=_0xfac18d(0x1f2);const _0x2584f3=document['createElement'](_0xfac18d(0x26a));_0x2584f3[_0xfac18d(0x238)]=_0xfac18d(0x3bf)+new Date(parseInt(_0x10283c))[_0xfac18d(0x3ad)](),_0x2584f3[_0xfac18d(0x2d9)]=()=>loadConversation(_0x10283c);const _0x78d69e=document[_0xfac18d(0x2c7)]('i');_0x78d69e[_0xfac18d(0x391)]=_0xfac18d(0x389),_0x78d69e[_0xfac18d(0x2d9)]=_0x191219=>{_0x191219['stopPropagation'](),deleteConversation(_0x10283c);},_0x40f811[_0xfac18d(0x1f1)](_0x2584f3),_0x40f811[_0xfac18d(0x1f1)](_0x78d69e),_0xe474d5[_0xfac18d(0x1f1)](_0x40f811);});}function deleteConversation(_0x5de0de){const _0x1331bf=_0x187704;confirm(_0x1331bf(0x30c))&&(delete conversations[_0x5de0de],localStorage[_0x1331bf(0x3d0)](_0x1331bf(0x3df)+currentUser[_0x1331bf(0x316)],JSON[_0x1331bf(0x3c8)](conversations)),updateConversationHistory());}function createNewConversation(){const _0x5212b4=_0x187704;currentConversation[_0x5212b4(0x2a4)]>0x0&&saveConversation();currentConversation=[];const _0xa7b51f=document[_0x5212b4(0x2eb)](_0x5212b4(0x1d2));_0xa7b51f[_0x5212b4(0x28d)]='',updateConversationHistory(),addMessageToChat('ai',_0x5212b4(0x339)),_0xa7b51f[_0x5212b4(0x378)]=0x0,document['getElementById'](_0x5212b4(0x325))[_0x5212b4(0x319)]();}function loadConversation(_0x45c2d4){const _0x5ba3ec=_0x187704;currentConversation[_0x5ba3ec(0x2a4)]>0x0&&currentConversation['id']!==_0x45c2d4&&saveConversation();currentConversation=conversations[_0x45c2d4],currentConversation['id']=_0x45c2d4;const _0x4e62b0=document[_0x5ba3ec(0x2eb)](_0x5ba3ec(0x1d2));_0x4e62b0['innerHTML']='',currentConversation[_0x5ba3ec(0x36b)](_0x10ab3d=>{const _0x4af7fc=_0x5ba3ec;addMessageToChat(_0x10ab3d[_0x4af7fc(0x3f2)],_0x10ab3d[_0x4af7fc(0x264)]);}),_0x4e62b0[_0x5ba3ec(0x378)]=0x0;}async function syncUserData(){const _0x54820c=_0x187704;if(!currentUser)return;const _0x11c636={'freeCredits':currentUser[_0x54820c(0x3c7)]||0x0,'paidCredits':currentUser[_0x54820c(0x2dd)]||0x0,'lastFreeCreditsReset':currentUser[_0x54820c(0x3d4)]||new Date()['toISOString']()};currentUser[_0x54820c(0x288)]&&(_0x11c636[_0x54820c(0x288)]=currentUser[_0x54820c(0x288)]);currentUser[_0x54820c(0x3ea)]&&(_0x11c636[_0x54820c(0x3ea)]=currentUser[_0x54820c(0x3ea)]);const _0x2309f5=db[_0x54820c(0x200)](_0x54820c(0x318)+currentUser[_0x54820c(0x316)]);try{await _0x2309f5[_0x54820c(0x404)](_0x11c636),console[_0x54820c(0x37a)](_0x54820c(0x31f),_0x11c636);}catch(_0xa02ccf){console[_0x54820c(0x38c)](_0x54820c(0x207),_0xa02ccf),showNotification(_0x54820c(0x224),'error');}}function adjustTextareaHeight(){const _0x1f1237=_0x187704,_0x3480d1=document[_0x1f1237(0x2eb)](_0x1f1237(0x325));_0x3480d1['style'][_0x1f1237(0x353)]=_0x1f1237(0x363),_0x3480d1['style'][_0x1f1237(0x353)]=_0x3480d1[_0x1f1237(0x2dc)]+'px';}function resetTextareaHeight(){const _0x5ce1bf=_0x187704,_0x2aedf0=document[_0x5ce1bf(0x2eb)]('userInput');_0x2aedf0[_0x5ce1bf(0x354)]['height']=_0x5ce1bf(0x363);}async function attemptAutoLogin(){const _0x38bdcf=_0x187704,_0x136ded=getStoredLoginInfo();if(_0x136ded[_0x38bdcf(0x316)]&&_0x136ded[_0x38bdcf(0x2d4)])try{const _0x1071cc=db['ref'](_0x38bdcf(0x318)+_0x136ded[_0x38bdcf(0x316)]),_0x1034a8=await _0x1071cc[_0x38bdcf(0x269)](_0x38bdcf(0x313));if(_0x1034a8['exists']()&&_0x1034a8['val']()[_0x38bdcf(0x2d4)]===_0x136ded[_0x38bdcf(0x2d4)]){const _0x136488=_0x1034a8[_0x38bdcf(0x360)]();currentUser={'username':_0x136ded[_0x38bdcf(0x316)],'freeCredits':_0x136488[_0x38bdcf(0x3c7)],'paidCredits':_0x136488[_0x38bdcf(0x2dd)],'subscription':_0x136488[_0x38bdcf(0x288)],'subscriptionEndDate':_0x136488['subscriptionEndDate'],'lastFreeCreditsReset':_0x136488['lastFreeCreditsReset']},await resetFreeCreditsIfNeeded(),updateUIForLoggedInUser(),console[_0x38bdcf(0x37a)]('Connexion\x20automatique\x20réussie');}else clearLoginInfo(),console[_0x38bdcf(0x37a)](_0x38bdcf(0x241));}catch(_0x52e6a1){console[_0x38bdcf(0x38c)](_0x38bdcf(0x323),_0x52e6a1),clearLoginInfo();}}function saveSelectedModel(){const _0x3f1669=_0x187704,_0x2900dd=document[_0x3f1669(0x2eb)](_0x3f1669(0x24d))[_0x3f1669(0x313)];localStorage[_0x3f1669(0x3d0)](_0x3f1669(0x1e8),_0x2900dd);}function loadSelectedModel(){const _0x2b1d74=_0x187704,_0x24ce6a=localStorage[_0x2b1d74(0x2e4)]('selectedModel');_0x24ce6a&&(document['getElementById'](_0x2b1d74(0x24d))[_0x2b1d74(0x313)]=_0x24ce6a);}function showUpgradeButton(_0x83ccdd){const _0x1afc84=_0x187704,_0x2edb8e=document['createElement'](_0x1afc84(0x2c6));_0x2edb8e[_0x1afc84(0x238)]=_0x1afc84(0x305),_0x2edb8e['className']=_0x1afc84(0x3c3),_0x2edb8e[_0x1afc84(0x2d9)]=()=>{const _0x2bd23e=_0x1afc84;hasValidSubscription()||currentUser[_0x2bd23e(0x2dd)]>0x0?(document[_0x2bd23e(0x2eb)](_0x2bd23e(0x24d))['value']=_0x2bd23e(0x3fb),showNotification(_0x2bd23e(0x219),_0x2bd23e(0x246))):showPaymentNotification('Vous\x20avez\x20besoin\x20d\x27un\x20abonnement\x20ou\x20de\x20crédits\x20payants\x20pour\x20utiliser\x20ce\x20modèle.');},_0x83ccdd['appendChild'](_0x2edb8e);}function copyUserMessage(_0x28df57){const _0x3c48df=_0x187704;let _0x2142e9='';for(const _0x408235 of _0x28df57[_0x3c48df(0x27b)]){if(_0x408235[_0x3c48df(0x41e)]==='P')_0x2142e9+=_0x408235[_0x3c48df(0x238)]+'\x0a';else{if(_0x408235[_0x3c48df(0x21a)][_0x3c48df(0x22d)](_0x3c48df(0x3c4))){const _0xa5071a=Array[_0x3c48df(0x2ae)](_0x408235[_0x3c48df(0x23a)]('.file-name'))['map'](_0x4ea6fa=>_0x4ea6fa[_0x3c48df(0x238)])['join'](',\x20');_0x2142e9+='Fichiers\x20joints:\x20'+_0xa5071a+'\x0a';}else{if(_0x408235[_0x3c48df(0x21a)][_0x3c48df(0x22d)]('pinned-responses-message')){const _0x9e0818=Array[_0x3c48df(0x2ae)](_0x408235[_0x3c48df(0x23a)](_0x3c48df(0x3f8)))[_0x3c48df(0x366)](_0x1ac3a8=>_0x1ac3a8['textContent'])[_0x3c48df(0x1ec)]('\x0a');_0x2142e9+=_0x3c48df(0x32c)+_0x9e0818+'\x0a';}else{if(_0x408235['classList'][_0x3c48df(0x22d)]('pinned-prompt-message')){const _0x5449a4=_0x408235[_0x3c48df(0x409)]('.prompt-title')[_0x3c48df(0x238)];_0x2142e9+=_0x3c48df(0x1fe)+_0x5449a4+'\x0a';}}}}}navigator[_0x3c48df(0x373)][_0x3c48df(0x3e2)](_0x2142e9[_0x3c48df(0x1f3)]())[_0x3c48df(0x3a4)](()=>{const _0x34bb2d=_0x3c48df;showNotification('Message\x20copié\x20dans\x20le\x20presse-papiers',_0x34bb2d(0x246));});}function animateResponse(_0x224243,_0x4a273c){const _0x1baef3=_0x187704;let _0x34dfbe=0x0;_0x224243[_0x1baef3(0x238)]='';const _0x389454=setInterval(()=>{const _0x55c9f9=_0x1baef3;_0x34dfbe<_0x4a273c['length']?(_0x224243[_0x55c9f9(0x238)]+=_0x4a273c[_0x34dfbe],_0x34dfbe++):clearInterval(_0x389454);},0x1);}function loadPromptCategories(){const _0x4b3294=_0x187704,_0x455254=document['getElementById'](_0x4b3294(0x277));_0x455254[_0x4b3294(0x28d)]='',db[_0x4b3294(0x200)](_0x4b3294(0x206))[_0x4b3294(0x269)](_0x4b3294(0x313),_0x5ba9b8=>{const _0x19f24d=_0x4b3294;prompts=_0x5ba9b8[_0x19f24d(0x360)]()||{};const _0x1d2275=[...new Set(Object['values'](prompts)[_0x19f24d(0x366)](_0x3b428e=>_0x3b428e[_0x19f24d(0x2e1)]))];_0x1d2275[_0x19f24d(0x36b)](_0x2dc34c=>{const _0x37999e=_0x19f24d,_0x278b64=document[_0x37999e(0x2c7)]('li');_0x278b64[_0x37999e(0x238)]=_0x2dc34c,_0x278b64[_0x37999e(0x2d9)]=()=>{const _0x3f65c7=_0x37999e;document[_0x3f65c7(0x23a)](_0x3f65c7(0x226))[_0x3f65c7(0x36b)](_0x5a49f5=>_0x5a49f5[_0x3f65c7(0x21a)][_0x3f65c7(0x408)]('active')),_0x278b64['classList'][_0x3f65c7(0x364)](_0x3f65c7(0x240)),loadPromptsForCategory(_0x2dc34c);},_0x455254[_0x37999e(0x1f1)](_0x278b64);}),_0x1d2275[_0x19f24d(0x2a4)]>0x0&&(loadPromptsForCategory(_0x1d2275[0x0]),_0x455254['firstChild'][_0x19f24d(0x21a)][_0x19f24d(0x364)]('active'));});}function loadPromptsForCategory(_0x5efd4d){const _0x131c53=_0x187704,_0x9d87e=document[_0x131c53(0x2eb)](_0x131c53(0x3a2));_0x9d87e[_0x131c53(0x28d)]='',Object[_0x131c53(0x1d0)](prompts)[_0x131c53(0x36b)](([_0x44f37b,_0x5f2e0d])=>{const _0x3aa0e3=_0x131c53;if(_0x5f2e0d[_0x3aa0e3(0x2e1)]===_0x5efd4d){const _0x4b4f7b=document[_0x3aa0e3(0x2c7)]('li');_0x4b4f7b[_0x3aa0e3(0x28d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prompt-item\x22\x20onclick=\x22selectPrompt(\x27'+_0x44f37b+'\x27,\x20this)\x22\x20data-prompt=\x27'+JSON[_0x3aa0e3(0x3c8)](_0x5f2e0d)+'\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22prompt-title\x22>'+_0x5f2e0d[_0x3aa0e3(0x342)]+_0x3aa0e3(0x400),_0x9d87e[_0x3aa0e3(0x1f1)](_0x4b4f7b);}});}function selectPrompt(_0x8bcb4,_0x4ce343){const _0x590618=_0x187704,_0x50804a=JSON[_0x590618(0x3ae)](_0x4ce343['dataset'][_0x590618(0x24e)]);pinnedPrompt={'id':_0x8bcb4,..._0x50804a},updatePinnedPrompt(),closePromptModal(),showNotification(_0x590618(0x347),'success');const _0x1fde36=document['getElementById']('userInput');_0x1fde36[_0x590618(0x3fd)]=pinnedPrompt[_0x590618(0x2a0)]||_0x590618(0x253),adjustTextareaHeight();}function closePromptModal(){const _0x20146e=_0x187704;document[_0x20146e(0x2eb)](_0x20146e(0x2a2))[_0x20146e(0x354)]['display']='none';}function togglePromptList(){const _0x6b28c2=_0x187704,_0x5a3efb=document['getElementById']('promptListModal');_0x5a3efb[_0x6b28c2(0x354)][_0x6b28c2(0x3c0)]=_0x6b28c2(0x26c),loadPromptCategories();}function updatePinnedPrompt(){const _0x259cbb=_0x187704,_0x8b409=document['getElementById']('pinnedItems'),_0x113102=_0x8b409[_0x259cbb(0x409)](_0x259cbb(0x23d));_0x113102&&_0x113102[_0x259cbb(0x408)]();if(pinnedPrompt){const _0xf66b9d=document[_0x259cbb(0x2c7)](_0x259cbb(0x343));_0xf66b9d[_0x259cbb(0x391)]=_0x259cbb(0x317),_0xf66b9d['setAttribute'](_0x259cbb(0x3e1),_0x259cbb(0x24e)),_0xf66b9d[_0x259cbb(0x28d)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>🤖</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22'+pinnedPrompt[_0x259cbb(0x342)]+'\x22>'+pinnedPrompt['title']+_0x259cbb(0x279),_0x8b409['appendChild'](_0xf66b9d);}}function removePinnedPrompt(){pinnedPrompt=null,updatePinnedPrompt();}function openLibrary(){const _0x3c7f5f=_0x187704;console['log'](_0x3c7f5f(0x3f7));if(currentUser){console[_0x3c7f5f(0x37a)]('Utilisateur\x20connecté:',currentUser);const _0x3eb560={'username':currentUser[_0x3c7f5f(0x316)],'freeCredits':currentUser[_0x3c7f5f(0x3c7)],'paidCredits':currentUser[_0x3c7f5f(0x2dd)],'subscription':currentUser[_0x3c7f5f(0x288)]};localStorage[_0x3c7f5f(0x3d0)](_0x3c7f5f(0x2d8),JSON[_0x3c7f5f(0x3c8)](_0x3eb560)),console[_0x3c7f5f(0x37a)](_0x3c7f5f(0x2ee)),window[_0x3c7f5f(0x292)][_0x3c7f5f(0x406)]=_0x3c7f5f(0x1de);}else console[_0x3c7f5f(0x37a)](_0x3c7f5f(0x217)),alert(_0x3c7f5f(0x3f3));}async function showReferralModal(){const _0x48c628=_0x187704,_0xdc3feb=document['getElementById'](_0x48c628(0x387));_0xdc3feb['style'][_0x48c628(0x3c0)]=_0x48c628(0x26c);const _0x48935d=await getOrCreateReferralCode();if(_0x48935d){const _0x149dab=_0x48c628(0x3fc)+_0x48935d;document[_0x48c628(0x2eb)](_0x48c628(0x293))[_0x48c628(0x313)]=_0x149dab;const _0x3ee801=_0x48c628(0x3ca)+_0x149dab;document[_0x48c628(0x2eb)](_0x48c628(0x293))['setAttribute'](_0x48c628(0x2c5),_0x3ee801);}else document[_0x48c628(0x2eb)]('referralLink')[_0x48c628(0x313)]='Erreur\x20lors\x20de\x20la\x20récupération\x20du\x20code\x20de\x20parrainage.';await updateReferralStats(currentUser[_0x48c628(0x316)]);}function generateReferralCode(){const _0x38e88d=_0x187704;return Math[_0x38e88d(0x229)]()[_0x38e88d(0x3b8)](0x24)['substring'](0x2,0x8)[_0x38e88d(0x3d9)]();}async function getOrCreateReferralCode(){const _0x127adf=_0x187704;if(!currentUser)return null;const _0x4e9021=db['ref'](_0x127adf(0x318)+currentUser[_0x127adf(0x316)]),_0x5a3f3f=await _0x4e9021[_0x127adf(0x269)](_0x127adf(0x313)),_0x370fe6=_0x5a3f3f[_0x127adf(0x360)]();if(_0x370fe6&&_0x370fe6[_0x127adf(0x34d)])return _0x370fe6[_0x127adf(0x34d)];else{const _0x3a340a=generateReferralCode();return await _0x4e9021[_0x127adf(0x404)]({'referralCode':_0x3a340a}),_0x3a340a;}}async function updateReferralStats(_0x1d29dc){const _0x1bb7c1=_0x187704,_0x8a23ac=db[_0x1bb7c1(0x200)](_0x1bb7c1(0x318)+_0x1d29dc),_0x3be27d=await _0x8a23ac[_0x1bb7c1(0x269)](_0x1bb7c1(0x313)),_0x50b205=_0x3be27d[_0x1bb7c1(0x360)]();if(_0x50b205&&_0x50b205['referrals']){const _0x3d7e2c=_0x50b205['referrals'],_0x1e7e23=Object[_0x1bb7c1(0x40a)](_0x3d7e2c)['length'],_0x34e595=Object['values'](_0x3d7e2c)[_0x1bb7c1(0x3c2)](_0x3cb894=>_0x3cb894[_0x1bb7c1(0x312)])['length'];await _0x8a23ac[_0x1bb7c1(0x404)]({'totalReferrals':_0x1e7e23,'activeReferrals':_0x34e595}),currentUser&&currentUser[_0x1bb7c1(0x316)]===_0x1d29dc&&(document['getElementById'](_0x1bb7c1(0x405))[_0x1bb7c1(0x238)]=_0x1e7e23,document['getElementById'](_0x1bb7c1(0x1ee))[_0x1bb7c1(0x238)]=_0x34e595);}}window[_0x187704(0x204)]=async function(){const _0x3d23cc=_0x187704;await attemptAutoLogin();if(currentUser){if(currentUser[_0x3d23cc(0x3c7)]===undefined)currentUser['freeCredits']=0x0;if(currentUser[_0x3d23cc(0x2dd)]===undefined)currentUser[_0x3d23cc(0x2dd)]=0x0;if(currentUser[_0x3d23cc(0x288)]===undefined)currentUser['subscription']=null;if(currentUser['subscriptionEndDate']===undefined)currentUser['subscriptionEndDate']=null;if(currentUser[_0x3d23cc(0x3d4)]===undefined)currentUser[_0x3d23cc(0x3d4)]=new Date()[_0x3d23cc(0x32d)]();const _0x53d4b2=db[_0x3d23cc(0x200)](_0x3d23cc(0x318)+currentUser[_0x3d23cc(0x316)]),_0x4de200=await _0x53d4b2[_0x3d23cc(0x269)]('value'),_0x37905f=_0x4de200[_0x3d23cc(0x360)]();_0x37905f&&(importedFilesCount=_0x37905f[_0x3d23cc(0x29c)]||0x0,lastImportReset=new Date(_0x37905f[_0x3d23cc(0x2f1)]||new Date())),await syncUserData();}await loadApiKeyList(),await apiManager['initialize'](),initializeApiKeyRotation();const _0x2dc3d6=localStorage[_0x3d23cc(0x2e4)](_0x3d23cc(0x3ed))||_0x3d23cc(0x34e);document[_0x3d23cc(0x410)][_0x3d23cc(0x2be)]('data-theme',_0x2dc3d6),updateThemeIcon(_0x2dc3d6),setupUIEventListeners();currentUser&&loadConversationHistory();initModals(),loadSelectedModel(),document[_0x3d23cc(0x2eb)]('modelSelect')[_0x3d23cc(0x372)]('change',saveSelectedModel),restoreAppState(),initializeNewDiscussion(),document[_0x3d23cc(0x410)][_0x3d23cc(0x21a)][_0x3d23cc(0x364)](_0x3d23cc(0x1e3)),setInterval(checkSubscriptionStatus,0x36ee80),await loadApiKeyList(),await apiManager[_0x3d23cc(0x328)](),initializeGeminiAPI();const _0x5a3f5c=document[_0x3d23cc(0x2eb)](_0x3d23cc(0x24d));!_0x5a3f5c[_0x3d23cc(0x313)]&&(_0x5a3f5c[_0x3d23cc(0x313)]='gemini-1.5-flash');};function setupUIEventListeners(){const _0x30435f=_0x187704,_0xd52421=document['querySelector'](_0x30435f(0x334)),_0x5ebec5=document['getElementById'](_0x30435f(0x325)),_0x4f6356=document[_0x30435f(0x409)](_0x30435f(0x3ef)),_0x27c99a=_0xd52421['querySelector'](_0x30435f(0x32e));function _0x4408db(){const _0x1c96f6=_0x30435f,_0xc0925d=_0xd52421[_0x1c96f6(0x3a3)],_0x4420b5=_0x4f6356[_0x1c96f6(0x3a3)],_0x29b79e=document[_0x1c96f6(0x2eb)](_0x1c96f6(0x1dd))[_0x1c96f6(0x3a3)],_0x5d5a23=_0x27c99a[_0x1c96f6(0x3a3)],_0x3bae74=0x1e;_0x5ebec5[_0x1c96f6(0x354)][_0x1c96f6(0x30e)]=_0xc0925d-_0x4420b5-_0x29b79e-_0x5d5a23-_0x3bae74+'px';}_0x4408db(),window[_0x30435f(0x372)](_0x30435f(0x29a),_0x4408db),_0x5ebec5['addEventListener'](_0x30435f(0x2ff),adjustTextareaHeight),document[_0x30435f(0x2eb)](_0x30435f(0x24d))[_0x30435f(0x372)](_0x30435f(0x3e0),checkModelAccess);window[_0x30435f(0x1da)]<=0x300&&(document[_0x30435f(0x409)](_0x30435f(0x261))[_0x30435f(0x21a)]['remove'](_0x30435f(0x25a)),document[_0x30435f(0x409)]('.chat-container')['classList'][_0x30435f(0x408)](_0x30435f(0x291)));if(currentUser){const _0x4bba32=db[_0x30435f(0x200)](_0x30435f(0x318)+currentUser[_0x30435f(0x316)]);_0x4bba32['on'](_0x30435f(0x313),_0x5b9280=>{const _0x59427a=_0x30435f,_0x2c5d28=_0x5b9280[_0x59427a(0x360)]();_0x2c5d28&&(currentUser={...currentUser,'freeCredits':_0x2c5d28[_0x59427a(0x3c7)],'paidCredits':_0x2c5d28[_0x59427a(0x2dd)],'subscription':_0x2c5d28['subscription'],'subscriptionEndDate':_0x2c5d28[_0x59427a(0x3ea)],'lastFreeCreditsReset':_0x2c5d28[_0x59427a(0x3d4)]},updateUIForLoggedInUser());});}}function initModals(){const _0x3a4479=_0x187704,_0x3c1ad3=document['querySelectorAll'](_0x3a4479(0x1d5)),_0x41840b=document[_0x3a4479(0x23a)](_0x3a4479(0x324));_0x41840b[_0x3a4479(0x36b)](_0x67668a=>{const _0x3d728f=_0x3a4479;_0x67668a[_0x3d728f(0x372)](_0x3d728f(0x36e),()=>{const _0x4b57ff=_0x3d728f;_0x67668a[_0x4b57ff(0x29f)]('.modal')[_0x4b57ff(0x354)][_0x4b57ff(0x3c0)]=_0x4b57ff(0x30f);});}),window[_0x3a4479(0x372)]('click',_0x3d23c6=>{_0x3c1ad3['forEach'](_0x545db3=>{const _0x3d0bc0=_0x2d05;_0x3d23c6[_0x3d0bc0(0x2fe)]===_0x545db3&&(_0x545db3[_0x3d0bc0(0x354)][_0x3d0bc0(0x3c0)]='none');});});}window[_0x187704(0x372)]('load',async()=>{const _0x3a3134=_0x187704;if(currentUser){const _0x5d03ab=await checkGuidedTourStatus(currentUser[_0x3a3134(0x316)]);!_0x5d03ab&&(startGuidedTour(),await markGuidedTourAsSeen(currentUser[_0x3a3134(0x316)]));}}),document[_0x187704(0x372)](_0x187704(0x394),function(_0x2e2c18){const _0x442624=_0x187704;_0x2e2c18[_0x442624(0x1fa)]===_0x442624(0x300)&&!_0x2e2c18[_0x442624(0x34f)]&&(_0x2e2c18[_0x442624(0x251)](),sendMessage());}),document[_0x187704(0x2eb)](_0x187704(0x325))[_0x187704(0x372)](_0x187704(0x394),function(_0x3a195d){const _0x493f68=_0x187704;if(_0x3a195d[_0x493f68(0x1fa)]===_0x493f68(0x300)&&_0x3a195d[_0x493f68(0x34f)]){_0x3a195d['preventDefault']();const _0x3c9236=this[_0x493f68(0x2a9)],_0x3efa73=this[_0x493f68(0x20b)],_0x282203=this[_0x493f68(0x313)];this[_0x493f68(0x313)]=_0x282203[_0x493f68(0x2a8)](0x0,_0x3c9236)+'\x0a'+_0x282203[_0x493f68(0x2a8)](_0x3efa73),this['selectionStart']=this[_0x493f68(0x20b)]=_0x3c9236+0x1;}});function checkApiStatus(){const _0x5a3f67=_0x187704;axios[_0x5a3f67(0x302)](API_BASE_URL+_0x5a3f67(0x1e6)+API_KEY)[_0x5a3f67(0x3a4)](_0x11077e=>{const _0x8409d7=_0x5a3f67;console[_0x8409d7(0x37a)](_0x8409d7(0x1fc),_0x11077e[_0x8409d7(0x375)]),console['log'](_0x8409d7(0x299),_0x11077e['data']);})[_0x5a3f67(0x25f)](_0x59e6f9=>{console['error']('Erreur\x20lors\x20de\x20la\x20vérification\x20du\x20statut\x20de\x20l\x27API:',_0x59e6f9);});}function checkApiStatusRegularly(){checkApiStatus(),setInterval(checkApiStatus,0xea60);}window[_0x187704(0x372)]('offline',function(){const _0x13ee9b=_0x187704;showNotification(_0x13ee9b(0x31d),_0x13ee9b(0x38c));}),window[_0x187704(0x372)]('online',function(){const _0x5e13c6=_0x187704;showNotification(_0x5e13c6(0x1fd),'success');}),window['addEventListener'](_0x187704(0x258),function(){const _0x28e0c4=_0x187704;currentUser&&localStorage[_0x28e0c4(0x3d0)](_0x28e0c4(0x2c3),JSON[_0x28e0c4(0x3c8)](currentConversation));});function restoreAppState(){const _0x49b000=_0x187704,_0x30814e=localStorage['getItem'](_0x49b000(0x2c3));_0x30814e&&(currentConversation=JSON[_0x49b000(0x3ae)](_0x30814e),currentConversation[_0x49b000(0x36b)](_0x4a4520=>{const _0x3e997f=_0x49b000;addMessageToChat(_0x4a4520['sender'],_0x4a4520[_0x3e997f(0x264)]);}));}function isImageGenerationModel(_0x33d18b){const _0x587aa8=_0x187704;return _0x33d18b[_0x587aa8(0x383)](_0x587aa8(0x30d));}function getRecraftStyle(_0x1bec06){const _0x10b9d7=_0x187704,_0x147328={'recraft-realistic':_0x10b9d7(0x1ff),'recraft-digital':_0x10b9d7(0x2b6),'recraft-vector':_0x10b9d7(0x26d),'recraft-icon':'icon'};return _0x147328[_0x1bec06]||'realistic_image';}async function initializeImageGenerationTracking(_0x15ca90){const _0x42c640=_0x187704,_0x1997bd=db[_0x42c640(0x200)](_0x42c640(0x318)+_0x15ca90),_0x4dd806=await _0x1997bd[_0x42c640(0x24f)](_0x42c640(0x31b))[_0x42c640(0x269)]('value'),_0x44cbd6=_0x4dd806[_0x42c640(0x360)]();(!_0x44cbd6||isNewDay(_0x44cbd6[_0x42c640(0x2f2)]))&&await _0x1997bd[_0x42c640(0x24f)]('imageGeneration')[_0x42c640(0x2ca)]({'dailyCount':0x0,'lastReset':new Date()[_0x42c640(0x32d)]()});}function isNewDay(_0x36c759){const _0x56ae0b=_0x187704;if(!_0x36c759)return!![];const _0x40b7dd=new Date(_0x36c759),_0x44167e=new Date();return _0x40b7dd['getDate']()!==_0x44167e['getDate']()||_0x40b7dd['getMonth']()!==_0x44167e[_0x56ae0b(0x24b)]()||_0x40b7dd[_0x56ae0b(0x23f)]()!==_0x44167e[_0x56ae0b(0x23f)]();}async function getImageGenerationCount(_0x3a7b5d){const _0x14e3b5=_0x187704,_0x1a3bbe=db[_0x14e3b5(0x200)](_0x14e3b5(0x318)+_0x3a7b5d),_0x4e5127=await _0x1a3bbe[_0x14e3b5(0x24f)]('imageGeneration')[_0x14e3b5(0x269)]('value'),_0x4dde4c=_0x4e5127['val']();if(!_0x4dde4c||isNewDay(_0x4dde4c['lastReset']))return await initializeImageGenerationTracking(_0x3a7b5d),0x0;return _0x4dde4c[_0x14e3b5(0x416)];}async function incrementImageGenerationCount(_0x2dde67){const _0x434ec3=_0x187704,_0x5a12e9=db[_0x434ec3(0x200)](_0x434ec3(0x318)+_0x2dde67);await _0x5a12e9[_0x434ec3(0x24f)](_0x434ec3(0x31b))['transaction'](_0x1027e1=>{const _0x338d6f=_0x434ec3;if(!_0x1027e1||isNewDay(_0x1027e1[_0x338d6f(0x2f2)]))return{'dailyCount':0x1,'lastReset':new Date()[_0x338d6f(0x32d)]()};return{'dailyCount':_0x1027e1[_0x338d6f(0x416)]+0x1,'lastReset':_0x1027e1[_0x338d6f(0x2f2)]};});}async function canGenerateImage(){const _0x268642=_0x187704,_0xdb1da7=await getImageGenerationCount(currentUser[_0x268642(0x316)]),_0x15ac52=hasValidSubscription(),_0xa8bb21=currentUser['paidCredits']>=0x5||currentUser[_0x268642(0x3c7)]>=0x5;if(_0x15ac52&&_0xdb1da7<0x5)return{'canGenerate':!![],'useFreeGeneration':!![],'message':_0x268642(0x1ef)+(0x5-_0xdb1da7)+'\x20générations\x20gratuites\x20aujourd\x27hui.'};if(_0xa8bb21)return{'canGenerate':!![],'useFreeGeneration':![],'message':_0x268642(0x211)};return{'canGenerate':![],'useFreeGeneration':![],'message':'Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20pour\x20générer\x20une\x20image.'};}function confirmCreditUsage(_0x35b9bb){return new Promise(_0x4c4e6d=>{const _0x394f5e=_0x2d05,_0x15ca82=document['createElement']('div');_0x15ca82[_0x394f5e(0x391)]=_0x394f5e(0x2f9),_0x15ca82[_0x394f5e(0x28d)]=_0x394f5e(0x295)+_0x35b9bb+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22this.closest(\x27.notification\x27).setAttribute(\x27data-response\x27,\x20\x27true\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Utiliser\x20mes\x20crédits\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22this.closest(\x27.notification\x27).setAttribute(\x27data-response\x27,\x20\x27false\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Annuler\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',document[_0x394f5e(0x410)][_0x394f5e(0x1f1)](_0x15ca82),setTimeout(()=>_0x15ca82['classList']['add'](_0x394f5e(0x309)),0x64);function _0x3f7d2d(_0x87e57b){const _0xd13c26=_0x394f5e,_0xbf7485=_0x87e57b['target']['closest']('.notification')[_0xd13c26(0x3e6)](_0xd13c26(0x369));_0x15ca82['classList'][_0xd13c26(0x408)](_0xd13c26(0x309)),setTimeout(()=>{const _0x275eec=_0xd13c26;_0x15ca82[_0x275eec(0x408)](),_0x4c4e6d(_0xbf7485==='true');},0x12c);}_0x15ca82[_0x394f5e(0x23a)](_0x394f5e(0x2c6))['forEach'](_0x3111cf=>{const _0x203e73=_0x394f5e;_0x3111cf['addEventListener'](_0x203e73(0x36e),_0x3f7d2d);});});}function parseMarkdownTable(_0xf016a5){const _0xa651b=_0x187704,_0x5a0e33=_0xf016a5[_0xa651b(0x1f3)]()[_0xa651b(0x338)]('\x0a');if(_0x5a0e33[_0xa651b(0x2a4)]<0x3)return null;const _0x1a5174=_0x5a0e33['every'](_0x58d30a=>_0x58d30a['trim']()[_0xa651b(0x383)]('|')&&_0x58d30a['trim']()[_0xa651b(0x3b2)]('|'));if(!_0x1a5174)return null;const _0x44b963=_0x5a0e33['map'](_0x1c3889=>{const _0xc02b00=_0xa651b,_0x470652=_0x1c3889[_0xc02b00(0x1f3)]()['slice'](0x1,-0x1)[_0xc02b00(0x338)]('|')[_0xc02b00(0x366)](_0x42b673=>_0x42b673[_0xc02b00(0x1f3)]());return _0x470652;}),_0xcb4808=_0x44b963[0x0],_0x524637=_0x44b963[_0xa651b(0x3a9)](0x2);let _0x1238d2=_0xa651b(0x1d9);return _0xcb4808[_0xa651b(0x36b)](_0x5d402c=>{const _0x40bf02=_0xa651b;_0x1238d2+=_0x40bf02(0x28b)+_0x5d402c+_0x40bf02(0x403);}),_0x1238d2+=_0xa651b(0x1f6),_0x524637[_0xa651b(0x36b)](_0x304907=>{const _0x270abf=_0xa651b;_0x1238d2+='<tr>',_0x304907['forEach'](_0x4e8582=>{const _0x392890=_0x2d05;_0x1238d2+=_0x392890(0x3ac)+_0x4e8582+'</td>';}),_0x1238d2+=_0x270abf(0x3ab);}),_0x1238d2+=_0xa651b(0x344),_0x1238d2+=_0xa651b(0x333),_0x1238d2;}function processMessageContent(_0x2c5c84){const _0x23c5a6=_0x187704,_0x5dd326=/\|[\s\S]+?\n[-|\s]+\n[\s\S]+?\n(?=\n|$)/g;return _0x2c5c84[_0x23c5a6(0x2b3)](_0x5dd326,_0x102c08=>{const _0x67c712=parseMarkdownTable(_0x102c08);return _0x67c712||_0x102c08;});}function addMessageToChat(_0x524668,_0x5d39d6,_0x112b6f=[],_0x27ac24=[],_0xcb5ebf=null){const _0x3d25b8=_0x187704,_0x3e20e0=document[_0x3d25b8(0x2eb)](_0x3d25b8(0x1d2)),_0xef4d97=document[_0x3d25b8(0x2c7)](_0x3d25b8(0x343));_0xef4d97['classList'][_0x3d25b8(0x364)](_0x3d25b8(0x27f),_0x524668===_0x3d25b8(0x3e9)?_0x3d25b8(0x38d):'ai-message');if(_0x524668==='ai'){let _0x454850=_0x5d39d6;_0x454850=_0x454850[_0x3d25b8(0x2b3)](/^\*\*/gm,'\x0a'),_0x454850=_0x454850['replace'](/\*\*/g,''),_0x454850=formatMarkdownTable(_0x454850);const _0x36c83c=document['createElement'](_0x3d25b8(0x343));_0x36c83c['innerHTML']=_0x454850,_0xef4d97[_0x3d25b8(0x1f1)](_0x36c83c);const _0x56b837=document[_0x3d25b8(0x2c7)]('div');_0x56b837['classList'][_0x3d25b8(0x364)](_0x3d25b8(0x3b6)),_0x56b837['innerHTML']=_0x3d25b8(0x39f),_0xef4d97[_0x3d25b8(0x1f1)](_0x56b837),currentConversation[_0x3d25b8(0x29b)]({'sender':'ai','content':_0x5d39d6});}else{_0x112b6f[_0x3d25b8(0x2a4)]>0x0&&_0xef4d97[_0x3d25b8(0x1f1)](createPinnedFilesElement(_0x112b6f));_0x27ac24['length']>0x0&&_0xef4d97[_0x3d25b8(0x1f1)](createPinnedResponsesElement(_0x27ac24));_0xcb5ebf&&_0xef4d97[_0x3d25b8(0x1f1)](createPinnedPromptElement(_0xcb5ebf));const _0x46c323=document[_0x3d25b8(0x2c7)](_0x3d25b8(0x343));_0x46c323['textContent']=_0x5d39d6,_0xef4d97['appendChild'](_0x46c323);const _0xa22fca=document[_0x3d25b8(0x2c7)](_0x3d25b8(0x343));_0xa22fca['classList'][_0x3d25b8(0x364)](_0x3d25b8(0x3b6)),_0xa22fca[_0x3d25b8(0x28d)]=_0x3d25b8(0x381),_0xef4d97[_0x3d25b8(0x1f1)](_0xa22fca),currentConversation[_0x3d25b8(0x29b)]({'sender':_0x3d25b8(0x3e9),'content':_0x5d39d6,'files':_0x112b6f,'responses':_0x27ac24,'prompt':_0xcb5ebf});}return _0x3e20e0[_0x3d25b8(0x1f1)](_0xef4d97),_0x3e20e0[_0x3d25b8(0x378)]=_0x3e20e0['scrollHeight'],_0xef4d97;}async function resubmitRequest(_0x3f15fd){const _0x48cc5f=_0x187704,_0x146cc7=document[_0x48cc5f(0x2eb)](_0x48cc5f(0x24d))[_0x48cc5f(0x313)];if(!hasValidSubscription()&&!currentUser[_0x48cc5f(0x2dd)]&&(_0x146cc7!=='gemini-1.5-flash'&&_0x146cc7!=='gemini-1.0-pro'||!currentUser['freeCredits'])){showPaymentNotification(_0x48cc5f(0x303));return;}try{const _0x2283d8=document[_0x48cc5f(0x23a)](_0x48cc5f(0x3b3));let _0x5eca48=null,_0x5d9de6='';for(let _0x35d712=Array[_0x48cc5f(0x2ae)](_0x2283d8)[_0x48cc5f(0x1fb)](_0x3f15fd)-0x1;_0x35d712>=0x0;_0x35d712--){if(_0x2283d8[_0x35d712][_0x48cc5f(0x21a)][_0x48cc5f(0x22d)](_0x48cc5f(0x38d))){_0x5eca48=_0x2283d8[_0x35d712],_0x5d9de6=_0x2283d8[_0x35d712]['querySelector'](_0x48cc5f(0x314))[_0x48cc5f(0x238)];break;}}if(!_0x5d9de6)throw new Error(_0x48cc5f(0x221));const _0x140577=document['createElement']('div');_0x140577['className']=_0x48cc5f(0x3ec),_0x140577['innerHTML']=_0x48cc5f(0x22a)+createModelHeader(_0x146cc7)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22typing-indicator\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x3f15fd[_0x48cc5f(0x37b)](_0x140577);const _0x1ad26e=Array[_0x48cc5f(0x2ae)](_0x5eca48['querySelectorAll']('.pinned-file'))[_0x48cc5f(0x366)](_0x631129=>({'name':_0x631129[_0x48cc5f(0x409)](_0x48cc5f(0x1f4))[_0x48cc5f(0x238)],'type':_0x631129[_0x48cc5f(0x3aa)][_0x48cc5f(0x1e2)]})),_0x52a4cc=[{'text':_0x5d9de6}];if(_0x1ad26e['length']>0x0)for(const _0x3a3772 of _0x1ad26e){_0x52a4cc[_0x48cc5f(0x29b)]({'text':_0x48cc5f(0x2e0)+_0x3a3772[_0x48cc5f(0x384)]+']'});}const _0x2b8b63=await model[_0x48cc5f(0x2f4)](_0x52a4cc),_0xbab979=await _0x2b8b63['response'],_0x25e967=_0xbab979[_0x48cc5f(0x2a5)]();await animateText(_0x140577,_0x25e967),currentConversation['push']({'sender':'ai','content':_0x25e967}),saveConversation(),await updateCredits(_0x146cc7,0x1),showNotification('Réponse\x20actualisée\x20avec\x20succès','success');}catch(_0x4cb474){console[_0x48cc5f(0x38c)]('Erreur\x20lors\x20de\x20la\x20relance:',_0x4cb474),showNotification('Erreur\x20lors\x20de\x20la\x20relance\x20de\x20la\x20demande',_0x48cc5f(0x38c)),loadingMessage&&_0x3f15fd&&loadingMessage[_0x48cc5f(0x37b)](_0x3f15fd);}}function createLoadingMessage(){const _0x2142ec=_0x187704,_0x153934=document[_0x2142ec(0x2c7)](_0x2142ec(0x343));return _0x153934['className']=_0x2142ec(0x3ec),_0x153934[_0x2142ec(0x28d)]=_0x2142ec(0x201),document[_0x2142ec(0x2eb)](_0x2142ec(0x1d2))['appendChild'](_0x153934),_0x153934;}function initializeScrollListener(){const _0x239ce5=_0x187704,_0x233f9a=document[_0x239ce5(0x2eb)](_0x239ce5(0x1d2));_0x233f9a[_0x239ce5(0x372)]('scroll',function(){const _0x1a60da=_0x239ce5;clearTimeout(scrollTimeout),_0x233f9a[_0x1a60da(0x378)]<lastScrollTop&&(userScrolling=!![]),lastScrollTop=_0x233f9a['scrollTop'],scrollTimeout=setTimeout(()=>{const _0x45afb3=_0x1a60da,_0x14baba=_0x233f9a[_0x45afb3(0x2dc)]-_0x233f9a['scrollTop']-_0x233f9a['clientHeight']<0x64;_0x14baba&&(userScrolling=![]);},0x3e8);});}function shouldAutoScroll(){const _0x5bd0c6=_0x187704;if(userScrolling)return![];const _0x4ac9bb=document[_0x5bd0c6(0x2eb)](_0x5bd0c6(0x1d2)),_0x41d2d0=_0x4ac9bb[_0x5bd0c6(0x2dc)]-_0x4ac9bb['scrollTop']-_0x4ac9bb[_0x5bd0c6(0x3b7)]<0x64;return _0x41d2d0;}async function animateText(_0x5a845d,_0xa069db){const _0x548cdc=_0x187704,_0x57b753=document[_0x548cdc(0x2c7)](_0x548cdc(0x343));_0x5a845d[_0x548cdc(0x28d)]='',_0x5a845d[_0x548cdc(0x1f1)](_0x57b753);const _0x417076=document['createElement'](_0x548cdc(0x343));_0x417076[_0x548cdc(0x391)]=_0x548cdc(0x3b6),_0x417076['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyResponse(this.parentNode.parentNode)\x22\x20title=\x22Copier\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22exportResponse(this.parentNode.parentNode,\x20\x27pdf\x27)\x22\x20title=\x22Exporter\x20en\x20PDF\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-pdf\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareResponse(this.parentNode.parentNode)\x22\x20title=\x22Partager\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-share-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22pinResponse(this.parentNode.parentNode)\x22\x20title=\x22Épingler\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resubmitRequest(this.parentNode.parentNode)\x22\x20title=\x22Relancer\x20la\x20demande\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-redo\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20';let _0x2b4e81='';const _0x3fa42d=0xa;function _0x57eac4(_0x721818,_0x12163f){const _0x4822d8=_0x548cdc;return _0x721818[_0x4822d8(0x3a9)](_0x12163f)[_0x4822d8(0x383)]('\x0a|')||_0x721818['slice'](_0x12163f)[_0x4822d8(0x383)]('|');}function _0x74a5ea(_0x336178,_0x38bc8d){const _0xc5a06a=_0x548cdc,_0x49aa41=_0x336178[_0xc5a06a(0x3a9)](_0x38bc8d)[_0xc5a06a(0x338)]('\x0a');let _0x120193=[],_0x3b2a89=0x0;while(_0x3b2a89<_0x49aa41[_0xc5a06a(0x2a4)]&&_0x49aa41[_0x3b2a89][_0xc5a06a(0x1f3)]()[_0xc5a06a(0x383)]('|')){_0x120193['push'](_0x49aa41[_0x3b2a89]),_0x3b2a89++;}return _0x120193[_0xc5a06a(0x1ec)]('\x0a');}const _0xabd4a1=document[_0x548cdc(0x2eb)](_0x548cdc(0x1d2));for(let _0x4e2690=0x0;_0x4e2690<_0xa069db[_0x548cdc(0x2a4)];_0x4e2690++){if(_0x57eac4(_0xa069db,_0x4e2690)){const _0x20fbaa=_0x74a5ea(_0xa069db,_0x4e2690);if(_0x20fbaa){_0x2b4e81+=_0x20fbaa,_0x57b753['innerHTML']=formatMarkdownTable(_0x2b4e81),_0x4e2690+=_0x20fbaa[_0x548cdc(0x2a4)]-0x1;continue;}}_0x2b4e81+=_0xa069db[_0x4e2690],_0x57b753['innerHTML']=formatMarkdownTable(_0x2b4e81),shouldAutoScroll()&&(_0xabd4a1[_0x548cdc(0x378)]=_0xabd4a1[_0x548cdc(0x2dc)]),await new Promise(_0x5c57a7=>setTimeout(_0x5c57a7,_0x3fa42d));}_0x5a845d[_0x548cdc(0x1f1)](_0x417076);}function resetScrollState(){userScrolling=![],lastScrollTop=0x0;}function formatMarkdownTable(_0x254779){const _0x20baea=_0x187704,_0x279b7c=/\|(.+)\|\n\|(?:[-:|]+\|)+\n(\|(?:.+\|)+\n?)+/g;return _0x254779[_0x20baea(0x2b3)](_0x279b7c,function(_0x27839f){const _0x15fee8=_0x20baea,_0x39e141=_0x27839f[_0x15fee8(0x1f3)]()[_0x15fee8(0x338)]('\x0a');if(_0x39e141[_0x15fee8(0x2a4)]<0x3)return _0x27839f;let _0xef4423=_0x15fee8(0x228);const _0x41dce2=_0x39e141[0x0][_0x15fee8(0x338)]('|')[_0x15fee8(0x3c2)](_0x45be07=>_0x45be07[_0x15fee8(0x1f3)]());return _0xef4423+=_0x15fee8(0x34b),_0x41dce2[_0x15fee8(0x36b)](_0x57f707=>{const _0x4a52f1=_0x15fee8;_0xef4423+=_0x4a52f1(0x28b)+_0x57f707[_0x4a52f1(0x1f3)]()+_0x4a52f1(0x403);}),_0xef4423+=_0x15fee8(0x411),_0xef4423+=_0x15fee8(0x26f),_0x39e141[_0x15fee8(0x3a9)](0x2)['forEach'](_0x4dab7c=>{const _0x2171be=_0x15fee8,_0x492daf=_0x4dab7c[_0x2171be(0x338)]('|')[_0x2171be(0x3c2)](_0x16f9b8=>_0x16f9b8[_0x2171be(0x1f3)]());_0x492daf['length']>0x0&&(_0xef4423+=_0x2171be(0x327),_0x492daf[_0x2171be(0x36b)](_0x183bd3=>{_0xef4423+='<td>'+_0x183bd3['trim']()+'</td>';}),_0xef4423+=_0x2171be(0x3ab));}),_0xef4423+=_0x15fee8(0x3d1),_0xef4423;});}function updateUI(){const _0x25ac18=_0x187704;currentUser&&(document[_0x25ac18(0x2eb)](_0x25ac18(0x3c7))[_0x25ac18(0x238)]=currentUser['freeCredits'],document['getElementById'](_0x25ac18(0x2dd))[_0x25ac18(0x238)]=currentUser[_0x25ac18(0x2dd)],document[_0x25ac18(0x2eb)](_0x25ac18(0x288))['textContent']=currentUser[_0x25ac18(0x288)]||_0x25ac18(0x230));}const apiManager=new GeminiApiManager();document[_0x187704(0x372)](_0x187704(0x36e),function(_0x34f507){const _0x11f171=_0x187704,_0x4c44ad=document[_0x11f171(0x409)](_0x11f171(0x261)),_0x37026d=document['querySelector'](_0x11f171(0x20d));_0x4c44ad[_0x11f171(0x21a)]['contains'](_0x11f171(0x25a))&&!_0x4c44ad[_0x11f171(0x22d)](_0x34f507[_0x11f171(0x2fe)])&&!_0x37026d[_0x11f171(0x22d)](_0x34f507[_0x11f171(0x2fe)])&&(toggleSidebar(),_0x34f507[_0x11f171(0x251)]());}),window[_0x187704(0x21d)]=function(_0x1e5d6c){const _0xa97978=_0x187704,_0x11c00b=document[_0xa97978(0x409)](_0xa97978(0x261));if(_0x11c00b['classList']['contains']('visible'))return toggleSidebar(),_0x1e5d6c[_0xa97978(0x251)](),history[_0xa97978(0x335)]({},'',''),![];},document[_0x187704(0x2eb)](_0x187704(0x3be))[_0x187704(0x2e2)]=_0x187704(0x376),setInterval(updateUI,0x493e0),checkApiStatusRegularly(),window[_0x187704(0x27c)]=showLoginModal,window[_0x187704(0x32b)]=showRegisterModal,window['login']=login,window['register']=register,window[_0x187704(0x281)]=logout,window['sendMessage']=sendMessage,window[_0x187704(0x374)]=buySubscription,window[_0x187704(0x1d6)]=buyCredits,window[_0x187704(0x256)]=toggleTheme,window[_0x187704(0x2ce)]=toggleSidebar,window[_0x187704(0x424)]=createNewConversation,window[_0x187704(0x320)]=handleFileUpload,window[_0x187704(0x426)]=togglePromptList,window[_0x187704(0x306)]=showReferralModal,window[_0x187704(0x39b)]=generateReferralCode,window[_0x187704(0x231)]=copyReferralLink,window['shareOnFacebook']=shareOnFacebook,window[_0x187704(0x28c)]=shareOnTwitter,window[_0x187704(0x1db)]=shareOnLinkedIn,window[_0x187704(0x268)]=shareOnWhatsApp,window[_0x187704(0x1eb)]=removePinnedFile;
