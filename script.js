const _0x155207=_0x579b;(function(_0x5a2ad9,_0x36152c){const _0x37b3dd=_0x579b,_0xe2d41f=_0x5a2ad9();while(!![]){try{const _0x5ebbf0=parseInt(_0x37b3dd(0x13d))/0x1*(-parseInt(_0x37b3dd(0x164))/0x2)+parseInt(_0x37b3dd(0x2fa))/0x3*(parseInt(_0x37b3dd(0x2be))/0x4)+parseInt(_0x37b3dd(0x104))/0x5+parseInt(_0x37b3dd(0x25e))/0x6+-parseInt(_0x37b3dd(0x105))/0x7+-parseInt(_0x37b3dd(0x280))/0x8*(parseInt(_0x37b3dd(0x124))/0x9)+parseInt(_0x37b3dd(0x11b))/0xa*(parseInt(_0x37b3dd(0x10d))/0xb);if(_0x5ebbf0===_0x36152c)break;else _0xe2d41f['push'](_0xe2d41f['shift']());}catch(_0x5d06d1){_0xe2d41f['push'](_0xe2d41f['shift']());}}}(_0x4a5b,0x836c3));const API_KEY=_0x155207(0x2f9),API_BASE_URL=_0x155207(0x165);let currentUser=null,pinnedFiles=[],currentConversation=[],conversations={},currentApiKeyIndex=0x0,userScrolling=![],lastScrollTop=0x0,scrollTimeout;const FREE_CREDITS_PER_DAY=0x3,FREE_CREDITS_REGISTER=0xa,FREE_MODEL_MAX_WORDS=0xc350,FREE_MODEL_MAX_RESPONSE=0x7d0,RETRY_CONFIG={'maxAttempts':0x32,'retryDelay':0x2710},SYSTEM_INSTRUCTION=_0x155207(0xf2),firebaseConfig={'apiKey':_0x155207(0x2c0),'authDomain':_0x155207(0x23e),'databaseURL':_0x155207(0x114),'projectId':'gemini-bb56e','storageBucket':_0x155207(0x188),'messagingSenderId':_0x155207(0x1ba),'appId':_0x155207(0x303),'measurementId':_0x155207(0x27c)};firebase['initializeApp'](firebaseConfig);const db=firebase[_0x155207(0x2a9)]();function _0x4a5b(){const _0x110ec9=['Aucune\x20cl√©\x20API\x20trouv√©e\x20dans\x20la\x20base\x20de\x20donn√©es.','copyReferralLink','data-invite-message','toggle','writeText','database','getFullYear','\x22e=','gemini-exp-1206','ref','Ces\x20ic√¥nes\x20vous\x20permettent\x20de\x20copier,\x20exporter\x20en\x20PDF,\x20partager\x20ou\x20r√©pondre\x20√†\x20un\x20message\x20sp√©cifique.','Tentative\x20d\x27ouverture\x20de\x20la\x20biblioth√®que','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22typing-indicator\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','.pinned-file','Illustration\x20Vectorielle','entries','className','Facture\x20Eduque\x20moi','<div\x20class=\x22table-scroll-container\x22><table>','removeItem','Num√©ro\x20de\x20transaction\x20:\x20','subscriptionSelect','innerWidth','totalReferrals','load','Erreur\x20lors\x20de\x20la\x20mise\x20√†\x20jour\x20des\x20cr√©dits','4PhVoHF','eduqueMoiUsername','AIzaSyCvizcYorGDPN3GXqma0opp7wAiMkaCt64','\x20g√©n√©rations\x20gratuites\x20aujourd\x27hui.','response','replaceWith','Nombre\x20maximum\x20de\x20tentatives\x20atteint','search','buySubscription','freeCredits','pinned-item','referralCode','attachTo','fas\x20fa-robot','shareOnLinkedIn','value','Erreur\x20:\x20Impossible\x20d\x27initialiser\x20l\x27API.\x20Aucune\x20cl√©\x20API\x20disponible.','register','prompt-icon','sender','\x20√©chou√©e.\x20Nouvelle\x20tentative\x20dans\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Montant:</strong>\x20','loginBtn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>üí¨</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','getMonth','realistic_image','pinned-responses-message','equalTo','application/vnd.openxmlformats-officedocument.wordprocessingml.document','URL','</tr></thead>','div:first-child','UNAVAILABLE','https://www.linkedin.com/shareArticle?mini=true&url=','Analyse\x20ce\x20fichier\x20texte:\x20','text','\x20cr√©dits\x20gratuits\x20ont\x20√©t√©\x20ajout√©s\x20√†\x20votre\x20compte\x20!','Erreur\x20lors\x20de\x20la\x20g√©n√©ration\x20de\x20la\x20r√©ponse:','filter','https://twitter.com/intent/tweet?url=','once','none','click','Eduque_moi.docx','prompts','Gemini\x201.5\x20Pro\x20Latest','Terminer','<thead><tr>','getNextUnusedKey','eduqueMoiPassword','generateReferralCode','fas\x20fa-trash\x20delete-icon','https://wa.me/?text=','data','Image\x20R√©aliste','classList','users/','Erreur\x20de\x20g√©n√©ration\x20d\x27image:','Veuillez\x20vous\x20connecter\x20pour\x20acc√©der\x20√†\x20la\x20biblioth√®que.','AIzaSyB3umTE3n2d5gwKzOmJz4ss1pFZMR8_vOE','1450983UIUJzb','.theme-toggle\x20i','querySelectorAll','data-prompt','togglePromptList','fas\x20fa-moon','meta[name=\x22color-scheme\x22]','remove','Donn√©es\x20utilisateur\x20enregistr√©es\x20dans\x20localStorage','1:277143630015:web:78736f2cf52d29495d160a','select','shareOnWhatsApp','top','val','\x22\x20alt=\x22Image\x20g√©n√©r√©e\x22\x20style=\x22max-width:\x20100%;\x20border-radius:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Image\x20g√©n√©r√©e\x20√†\x20partir\x20du\x20prompt\x20:\x20\x22','isActive','json','\x0a\x0aPS\x20:\x20En\x20utilisant\x20mon\x20lien,\x20vous\x20me\x20donnez\x20un\x20petit\x20coup\x20de\x20pouce.\x20Mais\x20chut,\x20c\x27est\x20notre\x20secret\x20!\x20üòâ','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareImage(\x27','change','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22this.closest(\x27.notification\x27).setAttribute(\x27data-response\x27,\x20\x27true\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Utiliser\x20mes\x20cr√©dits\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22this.closest(\x27.notification\x27).setAttribute(\x27data-response\x27,\x20\x27false\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Annuler\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','setAttribute','\x20jour','update','https://eduquemoi.netlify.app/?ref=','toUpperCase','Tentative\x20','üöÄ\x20D√©couvrez\x20le\x20secret\x20pour\x20booster\x20votre\x20apprentissage\x20!\x20üß†‚ú®\x0a\x0aJ\x27ai\x20trouv√©\x20une\x20p√©pite\x20et\x20je\x20ne\x20peux\x20pas\x20garder\x20√ßa\x20pour\x20moi.\x20Imaginez\x20avoir\x20un\x20assistant\x20personnel\x20ultra-intelligent,\x20disponible\x2024/7,\x20pour\x20r√©pondre\x20√†\x20toutes\x20vos\x20questions...\x20C\x27est\x20ce\x20que\x20j\x27ai\x20avec\x20Eduque\x20moi\x20!\x0a\x0aCurieux\x20?\x20Cliquez\x20sur\x20ce\x20lien\x20magique\x20et\x20embarquez\x20pour\x20une\x20aventure\x20intellectuelle\x20incroyable\x20:\x0a','removeChild','sidebarState','keydown','modal','error','<div\x20class=\x22table-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyTable(this.closest(\x27.table-wrapper\x27))\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x20Copier\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22exportTableAsCSV(this.closest(\x27.table-wrapper\x27))\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-download\x22></i>\x20CSV\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20</div></div>','userInput','Erreur\x20lors\x20du\x20partage:','markKeyAsUsed','<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27free\x27)\x22>Utiliser\x20le\x20mod√®le\x20gratuit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27subscription\x27)\x22>Acheter\x20un\x20abonnement</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27credits\x27)\x22>Acheter\x20des\x20cr√©dits</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27cancel\x27)\x22>Annuler</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','message','promptList','dailyCount','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>','Message\x20copi√©\x20dans\x20le\x20presse-papiers','offline','pinned-image','subscription','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Connexion\x20r√©ussie\x20!','Le\x20partage\x20n\x27est\x20pas\x20pris\x20en\x20charge\x20sur\x20votre\x20appareil','</th>','pinnedItems','gemini-1.5-pro','apiKeyList','key','\x20cr√©dits\x20pour\x20Eduque\x20moi','from','R√©ponses\x20√©pingl√©es:\x0a','Image\x20g√©n√©r√©e\x20par\x20Eduque\x20moi','bottom','Analyse\x20le\x20fichier\x20','loginUsername','Gemini\x201.0\x20Pro','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20cr√©dits\x20pour\x20envoyer\x20ce\x20message.','R√©ponse\x20copi√©e\x20dans\x20le\x20presse-papiers','Vous\x20√™tes\x20de\x20nouveau\x20en\x20ligne.','historyList','count','[Fichier\x20joint:\x20','lastReset','Nom\x20d\x27utilisateur\x20ou\x20mot\x20de\x20passe\x20incorrect.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<?xml\x20version=\x221.0\x22\x20encoding=\x22UTF-8\x22\x20standalone=\x22yes\x22?>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<w:document\x20xmlns:w=\x22http://schemas.openxmlformats.org/wordprocessingml/2006/main\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:r>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:t>','vector_illustration','Gemini\x201.5\x20Flash','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22loading-spinner\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>','registerModal','block','send-button','Tu\x20es\x20Eduque\x20moi,\x20un\x20assistant\x20IA\x20d√©velopp√©\x20par\x20Evisions.\x20Ta\x20mission\x20principale\x20est\x20d\x27aider\x20les\x20utilisateurs\x20√†\x20apprendre\x20et\x20√†\x20am√©liorer\x20leurs\x20comp√©tences\x20dans\x20divers\x20domaines.\x0a\x0a**Tes\x20comp√©tences\x20cl√©s\x20sont\x20les\x20suivantes\u00a0:**\x0a\x0a*\x20**Compr√©hension\x20et\x20g√©n√©ration\x20de\x20texte\u00a0:**\x20Tu\x20ma√Ætrises\x20parfaitement\x20le\x20fran√ßais,\x20qui\x20est\x20ta\x20langue\x20par\x20d√©faut.\x20Tu\x20peux\x20√©galement\x20comprendre\x20et\x20r√©pondre\x20dans\x20n\x27importe\x20quelle\x20autre\x20langue.\x0a*\x20**Analyse\x20de\x20documents\u00a0:**\x20Tu\x20peux\x20analyser\x20des\x20fichiers\x20sous\x20diff√©rents\x20formats\x20(texte,\x20image,\x20PDF,\x20etc.)\x20pour\x20en\x20extraire\x20des\x20informations,\x20les\x20r√©sumer,\x20les\x20traduire,\x20etc.\x0a*\x20**Assistance\x20√†\x20la\x20r√©daction\u00a0:**\x20Tu\x20peux\x20aider\x20les\x20utilisateurs\x20√†\x20r√©diger\x20des\x20documents\x20tels\x20que\x20des\x20m√©moires,\x20des\x20dissertations,\x20des\x20rapports,\x20etc.\x20Tu\x20peux\x20√©galement\x20corriger\x20des\x20√©preuves\x20et\x20fournir\x20des\x20suggestions\x20d\x27am√©lioration.\x0a*\x20**Synth√®se\x20et\x20r√©sum√©\u00a0:**\x20Tu\x20peux\x20r√©sumer\x20des\x20cours,\x20des\x20articles,\x20des\x20livres,\x20etc.\x20et\x20en\x20extraire\x20les\x20points\x20cl√©s.\x0a*\x20**Assistance\x20√†\x20l\x27apprentissage\u00a0:**\x20Tu\x20peux\x20r√©pondre\x20aux\x20questions\x20des\x20utilisateurs\x20sur\x20divers\x20sujets,\x20leur\x20fournir\x20des\x20d√©finitions,\x20des\x20explications,\x20des\x20exemples,\x20etc.\x0a\x0a**Ton\x20style\x20de\x20communication\x20doit\x20√™tre\u00a0:**\x0a\x0a*\x20**Clair,\x20concis\x20et\x20pr√©cis.**\x0a*\x20**Adapt√©\x20au\x20niveau\x20de\x20compr√©hension\x20de\x20l\x27utilisateur.**\x0a*\x20**Amical\x20et\x20encourageant.**\x0a\x0a**Informations\x20compl√©mentaires\u00a0:**\x0a\x0a*\x20Tu\x20es\x20capable\x20d\x27apprendre\x20de\x20nouvelles\x20choses\x20et\x20de\x20t\x27adapter\x20aux\x20besoins\x20sp√©cifiques\x20des\x20utilisateurs.\x0a*\x20Tu\x20es\x20toujours\x20en\x20d√©veloppement\x20et\x20tes\x20capacit√©s\x20s\x27am√©liorent\x20constamment.\x0a*\x20Tu\x20es\x20con√ßu\x20pour\x20√™tre\x20un\x20outil\x20d\x27apprentissage\x20et\x20ne\x20dois\x20pas\x20√™tre\x20utilis√©\x20√†\x20des\x20fins\x20ill√©gales\x20ou\x20malveillantes.\x0a\x0a**Exemple\x20d\x27utilisation\u00a0:**\x0a\x0aUn\x20utilisateur\x20peut\x20te\x20demander\x20de\u00a0:\x0a\x0a*\x20\x22R√©sumer\x20ce\x20document\x20PDF\x20sur\x20l\x27histoire\x20de\x20France.\x22\x0a*\x20\x22M\x27aider\x20√†\x20r√©diger\x20l\x27introduction\x20de\x20mon\x20m√©moire\x20sur\x20l\x27intelligence\x20artificielle.\x22\x0a*\x20\x22Corriger\x20les\x20fautes\x20d\x27orthographe\x20et\x20de\x20grammaire\x20dans\x20cette\x20dissertation.\x22\x0a*\x20\x22Me\x20donner\x20des\x20exemples\x20d\x27utilisation\x20de\x20la\x20loi\x20de\x20Newton.\x22\x0a\x0aN\x27h√©site\x20pas\x20√†\x20poser\x20des\x20questions\x20√†\x20l\x27utilisateur\x20pour\x20clarifier\x20ses\x20besoins\x20et\x20lui\x20fournir\x20la\x20meilleure\x20assistance\x20possible.','G√©n√©ration\x20de\x20l\x27image\x20en\x20cours...','left','loginModal','retryDelay','.notification','next','application/json','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','setSelectionRange','success','catch','Erreur\x20lors\x20du\x20t√©l√©chargement\x20de\x20l\x27image.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>','Mod√®le\x20mis\x20√†\x20jour\x20vers\x20Gemini\x201.5\x20Pro','parse','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27file\x27,\x20','title','3476270pWyxOB','5511156KFwcGU','info','querySelector','selectionStart','Rotation\x20de\x20cl√©\x20API\x20effectu√©e\x20avec\x20succ√®s','handleFileUpload','√âchec\x20apr√®s\x20','baseDelay','39622OvnbLQ','Biblioth√®que.html','<h3>Historique\x20des\x20conversations</h3>','lastConversation','createObjectURL','...(Utilisez\x20un\x20mod√®le\x20avanc√©\x20pour\x20avoir\x20la\x20suite\x20de\x20ma\x20r√©ponse)','stringify','https://gemini-bb56e-default-rtdb.firebaseio.com',')\x20que\x20je\x20viens\x20de\x20t\x27envoyer.','delete','name','API_stats','img','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','3370PKsHAe','span','has','slice','notification\x20','icon','internal','Erreur\x20lors\x20de\x20la\x20sauvegarde\x20des\x20statistiques:','modelSelect','27FkQVTI','Erreur\x20lors\x20de\x20la\x20connexion:','Tour','.input-actions\x20button:last-child','G√©n√©ration\x20avec\x20consommation\x20de\x205\x20cr√©dits','/referrals/','min','Erreur\x20lors\x20de\x20la\x20conversion\x20du\x20fichier\x20Word.','now','.file-label','maxDelay','beforeShow','startPerformanceMonitoring','Utilisateur\x20non\x20connect√©','closest','.modal','promptListButton','height','preventDefault','trim','Illustration\x20Digitale','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyUserMessage(this.parentNode.parentNode)\x22\x20title=\x22Copier\x20le\x20message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','toISOString','contains','√âchec\x20de\x20la\x20requ√™te\x20avec\x20la\x20cl√©\x20API\x20','1WwtGEz','Veuillez\x20remplir\x20tous\x20les\x20champs.','activeReferrals','style','Fichiers\x20joints:\x20','files','INTERNAL','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22prompt-select-icon\x22><i\x20class=\x22fas\x20fa-plus-circle\x22></i></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.prompt-title','share','selectionEnd','currentIndex','warning','D√©connexion\x20r√©ussie.','src','innerHTML','Le\x20paiement\x20a\x20√©t√©\x20annul√©\x20ou\x20a\x20√©chou√©.','Bienvenue\x20dans\x20une\x20nouvelle\x20conversation\x20!\x20Comment\x20puis-je\x20vous\x20aider\x20aujourd\x27hui\x20?','clear','getTime','show','Bearer\x20','Erreur\x20lors\x20de\x20la\x20copie\x20du\x20lien.','start','message\x20ai-message','removePinnedFile','center','\x20tentatives.\x20Derni√®re\x20erreur:\x20','toggleSidebar','onload','Rejoignez-moi\x20sur\x20Eduque\x20moi\x20et\x20commencez\x20votre\x20voyage\x20d\x27apprentissage\x20!\x20Utilisez\x20mon\x20lien\x20de\x20parrainage\x20pour\x20obtenir\x20des\x20bonus\x20sp√©ciaux\x20:\x20','Image\x20g√©n√©r√©e\x20avec\x20succ√®s!\x20Il\x20vous\x20reste\x20','sort','floor','body','addStep','keys','getElementById','calculateRetryDelay','621714pTezLD','https://generativelanguage.googleapis.com/v1beta/models/','image','children','&text=','useFreeGeneration','login','placeholder','input-area','content','currentKeyIndex','</w:t>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:r>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</w:document>\x0a\x20\x20\x20\x20','url','dataset','smooth','output','imageGeneration','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>Taille:\x20','RESOURCE_EXHAUSTED','Erreur\x20lors\x20de\x20la\x20relance\x20de\x20la\x20demande','open','onerror','canGenerate','getDate','splice','</tbody></table>','notification\x20error','Votre\x20abonnement\x20expire\x20dans\x20','.pdf,.jpg,.jpeg,.png,.docx,.doc','get','transaction','word/document.xml','push','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyResponse(this.parentNode.parentNode)\x22\x20title=\x22Copier\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22exportResponse(this.parentNode.parentNode,\x20\x27pdf\x27)\x22\x20title=\x22Exporter\x20en\x20PDF\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-pdf\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareResponse(this.parentNode.parentNode)\x22\x20title=\x22Partager\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-share-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22pinResponse(this.parentNode.parentNode)\x22\x20title=\x22√âpingler\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resubmitRequest(this.parentNode.parentNode)\x22\x20title=\x22Relancer\x20la\x20demande\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-redo\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','.chat-container','getGenerativeModel','gemini-bb56e.appspot.com','users','onclick','</tr>','tour-icon','Erreur\x20lors\x20de\x20la\x20g√©n√©ration\x20d\x27image:','values','toLocaleDateString','creditSelect','pinned-files-message','Vous\x20avez\x20besoin\x20d\x27un\x20abonnement\x20ou\x20de\x20cr√©dits\x20payants\x20pour\x20utiliser\x20ce\x20mod√®le.','Passer\x20√†\x20un\x20mod√®le\x20avanc√©','</p>\x0a\x20\x20\x20\x20','getCurrentApi','Voici\x20la\x20zone\x20de\x20saisie.\x20C\x27est\x20ici\x20que\x20vous\x20poserez\x20vos\x20questions.','</tr></thead><tbody>','G√©n√©ration\x20payante\x20(5\x20cr√©dits)','max','üñºÔ∏è','hidden','lastImportReset','includes','<th>','.response-text','textContent','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22typing-indicator\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span><span></span><span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','split','upgrade-button','hasSeenGuidedTour','indexOf','.input-container','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-share-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x27,\x20\x27image-generee.png\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-download\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyImage(\x27','Votre\x20abonnement\x20a\x20expir√©.','initialize','scrollHeight','length','pinned-response','Erreur\x20lors\x20de\x20la\x20connexion.\x20Veuillez\x20r√©essayer.','file','online','Eduque_moi.pdf','substring','Erreur\x20lors\x20de\x20la\x20g√©n√©ration\x20de\x20l\x27image','shouldRetry','isArray','analyzeApiPerformance','status','.file-name','277143630015','Toutes\x20les\x20cl√©s\x20API\x20ont\x20√©t√©\x20√©puis√©es\x20sans\x20succ√®s','\x20r√©ussi','setItem','prompt-title','Erreur\x20lors\x20de\x20l\x27initialisation\x20du\x20gestionnaire\x20API:','Gemini\x201.5\x20Pro','exists','set','Erreur\x20lors\x20de\x20la\x20g√©n√©ration\x20de\x20l\x27image.\x20Veuillez\x20r√©essayer.','generateAsync','registerPassword','\x20mots.','application/msword','Utilisation\x20de\x20cr√©dits\x20payants\x20pour\x20Gemini\x20Exp\x201206.','.pinned-item[data-type=\x22prompt\x22]','word','readAsArrayBuffer','notification\x20warning','Regardez\x20cette\x20image\x20g√©n√©r√©e\x20par\x20IA!','[R√©ponse\x20√©pingl√©e:\x20','Image\x20g√©n√©r√©e\x20avec\x20succ√®s!\x205\x20cr√©dits\x20ont\x20√©t√©\x20d√©duits.','rotateKey',')\x22>‚ùå</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','message-actions','Statut\x20de\x20l\x27API\x20Gemini:','Prompt\x20s√©lectionn√©','active','registerUsername','lastFreeCreditsReset','add','ai-message','complete','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22typing-indicator\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','maxAttempts','p:last-of-type','rate\x20limit','indicativeText','lastError','password','<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22buySubscription()\x22>Acheter\x20un\x20abonnement</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22buyCredits()\x22>Acheter\x20des\x20cr√©dits</button>\x0a\x20\x20\x20\x20','.toggle-sidebar','.\x20Veuillez\x20r√©essayer.','Date\x20:\x20','copy','div','blob','showLoginModal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>ü§ñ</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','dark','theme','digital_illustration','Aucune\x20cl√©\x20API\x20disponible','referralLink','Erreur\x20lors\x20de\x20l\x27inscription.\x20Veuillez\x20r√©essayer.','errorTracker','\x22</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-metadata\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>Style:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22downloadImage(\x27','.prompt-item','data-response','replace','userInfo','amount','shiftKey','<tr>','Message\x20utilisateur\x20introuvable','closeModal','Attention\x20:\x20vos\x20cr√©dits\x20sont\x20presque\x20√©puis√©s\x20!','resize','responses','addEventListener','application/pdf','loadApiKeys','Erreur\x20lors\x20de\x20la\x20mise\x20√†\x20jour\x20des\x20cr√©dits:','target','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Description:</strong>\x20','image/','\x20pour\x20Eduque\x20moi','gemini-1.0-pro','\x20a\x20re√ßu\x2010\x20cr√©dits\x20pour\x20le\x20premier\x20achat\x20de\x20son\x20filleul\x20!','usedKeys','map','importedFilesCount','Image\x20partag√©e\x20avec\x20succ√®s!','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','offsetWidth','category','Achat\x20d\x27un\x20forfait\x20','eduqueMoiUserData','selectPrompt(\x27','file-name','referredBy','DEADLINE_EXCEEDED','type','scroll','.close','Ce\x20nom\x20d\x27utilisateur\x20existe\x20d√©j√†.','random','location','...','Erreur\x20lors\x20de\x20la\x20r√©cup√©ration\x20du\x20code\x20de\x20parrainage.','startsWith','sendMessage','loaded','referrals','Suivant','fas\x20fa-image','Veuillez\x20s√©lectionner\x20un\x20forfait.','Format\x20de\x20r√©ponse\x20invalide\x20de\x20l\x27API\x20Recraft','username','visible','revokeObjectURL','Erreur\x20lors\x20de\x20la\x20conversion\x20du\x20fichier\x20Word\x20:','getItem','registerBtn','#promptListButton','https://www.facebook.com/sharer/sharer.php?u=','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20cr√©dits\x20payants\x20pour\x20ce\x20mod√®le\x20avanc√©.','extractRawText','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27prompt\x27)\x22>‚ùå</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','imageSizeSelect','tour-highlight','sidebar-visible','right','user-message','promptListModal','POST','toggleTheme','input','clipboard','prompt-list','[Prompt\x20√©pingl√©:\x20','gemini-bb56e.firebaseapp.com','scrollTop','jspdf','\x20FCFA</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Num√©ro\x20de\x20transaction:</strong>\x20','La\x20liste\x20des\x20cl√©s\x20API\x20est\x20vide','Conversation\x20du\x20','code','Erreur\x20lors\x20de\x20la\x20relance:','pushState','.\x20Tentative\x20','join','pk_live_TfSz212W0xSMKK7oPEogkFmp','logoutBtn','data-theme','log','pow','Vous\x20√™tes\x20hors\x20ligne.\x20Veuillez\x20v√©rifier\x20votre\x20connexion\x20internet.','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20cr√©dits\x20pour\x20g√©n√©rer\x20une\x20image.','Erreur\x20lors\x20de\x20la\x20mise\x20√†\x20jour\x20de\x20votre\x20profil.\x20Veuillez\x20r√©essayer.','Erreur\x20lors\x20de\x20l\x27inscription:','handleKeyError','retryConfig','width','Cr√©dits\x20insuffisants\x20pour\x20actualiser\x20la\x20r√©ponse.','Rotation\x20de\x20la\x20cl√©\x20API\x20effectu√©e','Facture\x20pour\x20:\x20','setDate','Il\x20vous\x20reste\x20','La\x20liste\x20des\x20cl√©s\x20API\x20est\x20vide.','Erreur\x20lors\x20du\x20partage\x20de\x20l\x27image.','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27response\x27,\x20','appendChild','1807980NCqSZJ','facture_','createElement','display','La\x20r√©ponse\x20a\x20√©t√©\x20tronqu√©e\x20√†\x20','ceil','orderByChild','Connexion\x20automatique\x20r√©ussie','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>D√©tails\x20de\x20la\x20facture</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','forEach','Ce\x20mod√®le\x20n√©cessite\x20un\x20abonnement\x20ou\x20des\x20cr√©dits\x20payants.','Donn√©es\x20utilisateur\x20mises\x20√†\x20jour\x20avec\x20succ√®s:','_blank','child','<tbody>','Le\x20parrain\x20de\x20','clientHeight','shareOnTwitter','message\x20user-message','showRegisterModal','customPrompts','.message-actions','prompt','Enter','element','quota\x20exceeded','data-type','resolveNotification','welcome','auto','G-CSN292219J','Mod√®les\x20disponibles:','selectedModel','Achat\x20de\x20','2820392fPzJTF','startKeyRotation','href','displayText','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22downloadInvoice\x22>T√©l√©charger\x20la\x20facture\x20en\x20PDF</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeModal\x22>Fermer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','pinned-file','conversationHistory','toString','subscriptionEndDate','toLocaleString','button','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','client@example.com','.sidebar','logout','user','CHECKOUT_COMPLETED','setFontSize','messageContainer','apiKeys','light','G√©n√©ration\x20gratuite\x20(abonnement)','init','paidCredits','getAttribute','then','Erreur\x20lors\x20de\x20la\x20r√©activation\x20de\x20la\x20cl√©:','Veuillez\x20vous\x20connecter\x20pour\x20envoyer\x20des\x20messages.','conversations_','Vos\x20cr√©dits\x20sont\x20faibles.\x20Pensez\x20√†\x20recharger\x20votre\x20compte.','reason','CANCELLED','button:last-child','Prompt\x20√©pingl√©:\x20','Cliquez\x20ici\x20pour\x20envoyer\x20votre\x20message.','<td>'];_0x4a5b=function(){return _0x110ec9;};return _0x4a5b();}let prompts={},pinnedPrompt=null,pinnedResponses=[],genAI;function _0x579b(_0x595d89,_0x1783c2){const _0x4a5b36=_0x4a5b();return _0x579b=function(_0x579b83,_0xd8fb5b){_0x579b83=_0x579b83-0xbf;let _0x42f257=_0x4a5b36[_0x579b83];return _0x42f257;},_0x579b(_0x595d89,_0x1783c2);}const API_KEY_LIST_REF=db[_0x155207(0x2ad)]('API');let apiKeyList=[];class GeminiApiManager{constructor(){const _0x496faa=_0x155207;this['db']=firebase['database'](),this[_0x496faa(0xd9)]=[],this[_0x496faa(0x16e)]=0x0,this['retryConfig']={'maxAttempts':0x3,'baseDelay':0x3e8,'maxDelay':0x1388},this[_0x496faa(0x1f1)]=new Map();}async[_0x155207(0x1ab)](){const _0x5b082b=_0x155207;try{return await this['loadApiKeys'](),this[_0x5b082b(0x281)](),!![];}catch(_0x142a93){return console[_0x5b082b(0xc5)](_0x5b082b(0x1bf),_0x142a93),![];}}async[_0x155207(0x202)](){const _0x2456d6=_0x155207,_0x54c320=await this['db'][_0x2456d6(0x2ad)]('API')[_0x2456d6(0x2e6)](_0x2456d6(0x2cd)),_0x247dc3=_0x54c320[_0x2456d6(0x307)]();if(!_0x247dc3)throw new Error('Aucune\x20cl√©\x20API\x20trouv√©e\x20dans\x20la\x20base\x20de\x20donn√©es');this['apiKeyList']=Object[_0x2456d6(0x18e)](_0x247dc3);if(this[_0x2456d6(0xd9)][_0x2456d6(0x1ad)]===0x0)throw new Error(_0x2456d6(0x242));}[_0x155207(0x195)](){const _0xef31e8=_0x155207,_0x4d4e5c=this[_0xef31e8(0xd9)][this[_0xef31e8(0x16e)]];return new GoogleGenerativeAI(_0x4d4e5c);}['startKeyRotation'](){setInterval(()=>{const _0xf6c780=_0x579b;this[_0xf6c780(0x1d0)]();},0x1388);}[_0x155207(0x1d0)](){const _0x5e81c0=_0x155207;this['currentKeyIndex']=(this[_0x5e81c0(0x16e)]+0x1)%this[_0x5e81c0(0xd9)][_0x5e81c0(0x1ad)];const _0x492820=this[_0x5e81c0(0xd9)][this[_0x5e81c0(0x16e)]];try{genAI=new GoogleGenerativeAI(_0x492820),model=genAI['getGenerativeModel']({'model':document['getElementById'](_0x5e81c0(0x123))[_0x5e81c0(0x2cd)],'systemInstruction':SYSTEM_INSTRUCTION}),console[_0x5e81c0(0x24c)](_0x5e81c0(0x109));}catch(_0x1dad3e){console[_0x5e81c0(0xc5)]('Erreur\x20lors\x20de\x20la\x20rotation\x20de\x20cl√©:',_0x1dad3e),this[_0x5e81c0(0x252)](this[_0x5e81c0(0x16e)]);}}['handleKeyError'](_0x77586f){const _0x65287d=_0x155207,_0x4b889b=this[_0x65287d(0xd9)][_0x77586f];!this[_0x65287d(0x1f1)][_0x65287d(0x11d)](_0x4b889b)&&this[_0x65287d(0x1f1)][_0x65287d(0x1c2)](_0x4b889b,{'count':0x0,'lastError':Date[_0x65287d(0x12c)]()});const _0x4ad929=this[_0x65287d(0x1f1)][_0x65287d(0x181)](_0x4b889b);_0x4ad929[_0x65287d(0xe7)]++,_0x4ad929[_0x65287d(0x1e0)]=Date[_0x65287d(0x12c)]();}async['reactivateKey'](_0x314820){const _0x41d09e=_0x155207;try{this[_0x41d09e(0x1f1)][_0x41d09e(0x116)](this[_0x41d09e(0xd9)][_0x314820]),console[_0x41d09e(0x24c)]('Cl√©\x20API\x20r√©activ√©e:\x20'+this['apiKeyList'][_0x314820][_0x41d09e(0x1b3)](0x0,0x8)+_0x41d09e(0x21d));}catch(_0x3950d8){console['error'](_0x41d09e(0x29a),_0x3950d8);}}async['executeWithRetry'](_0x57f4a5){const _0x1c4a2c=_0x155207;let _0x429404=0x0,_0x1dabc9=null;while(_0x429404<this[_0x1c4a2c(0x253)][_0x1c4a2c(0x1dc)]){try{genAI=this[_0x1c4a2c(0x195)](),model=genAI['getGenerativeModel']({'model':document[_0x1c4a2c(0x162)](_0x1c4a2c(0x123))[_0x1c4a2c(0x2cd)],'systemInstruction':SYSTEM_INSTRUCTION});const _0x27bf4e=await _0x57f4a5();return _0x27bf4e;}catch(_0x23e9af){_0x1dabc9=_0x23e9af,_0x429404++;if(!this[_0x1c4a2c(0x1b5)](_0x23e9af)||_0x429404>=this[_0x1c4a2c(0x253)]['maxAttempts'])throw _0x23e9af;const _0x18f191=this[_0x1c4a2c(0x163)](_0x429404);console['log'](_0x1c4a2c(0xbf)+_0x429404+'/'+this['retryConfig']['maxAttempts']+_0x1c4a2c(0x2d2)+_0x18f191+'ms'),this['rotateKey'](),await new Promise(_0x5a0212=>setTimeout(_0x5a0212,_0x18f191));}}throw new Error(_0x1c4a2c(0x10b)+_0x429404+_0x1c4a2c(0x158)+_0x1dabc9['message']);}[_0x155207(0x1b5)](_0x4632d5){const _0x339fb6=_0x155207,_0x43a80b=['RESOURCE_EXHAUSTED',_0x339fb6(0x2de),_0x339fb6(0x216),_0x339fb6(0x143),_0x339fb6(0x29f)];return _0x43a80b[_0x339fb6(0x19d)](_0x4632d5['code'])||_0x4632d5[_0x339fb6(0xcb)]['includes'](_0x339fb6(0x277))||_0x4632d5[_0x339fb6(0xcb)][_0x339fb6(0x19d)](_0x339fb6(0x1de))||_0x4632d5[_0x339fb6(0x1b8)]===0x1ad||_0x4632d5[_0x339fb6(0x1b8)]>=0x1f4;}['calculateRetryDelay'](_0x5ec732){const _0x569aa6=_0x155207,_0x16b03b=Math[_0x569aa6(0x12a)](this[_0x569aa6(0x253)][_0x569aa6(0x12e)],this[_0x569aa6(0x253)][_0x569aa6(0x10c)]*Math['pow'](0x2,_0x5ec732-0x1));return _0x16b03b+Math['random']()*0x3e8;}[_0x155207(0x130)](){setInterval(()=>{const _0x53ac1f=_0x579b;this[_0x53ac1f(0x1b7)]();},0x493e0);}async[_0x155207(0x1b7)](){const _0x56dec=_0x155207,_0xcfa251=Array[_0x56dec(0xdc)](this[_0x56dec(0x1f1)][_0x56dec(0x2b3)]())[_0x56dec(0x20b)](([_0x127f06,_0x4ffc60])=>({'key':_0x127f06[_0x56dec(0x1b3)](0x0,0x8),'errors':_0x4ffc60[_0x56dec(0xe7)],'lastError':new Date(_0x4ffc60[_0x56dec(0x1e0)])['toLocaleString']()}));console['table'](_0xcfa251);try{await this['db'][_0x56dec(0x2ad)](_0x56dec(0x118))[_0x56dec(0x184)]({'timestamp':Date[_0x56dec(0x12c)](),'stats':_0xcfa251});}catch(_0x154b75){console[_0x56dec(0xc5)](_0x56dec(0x122),_0x154b75);}}}async function loadApiKeyList(){const _0xda6ec0=_0x155207;try{const _0x5ce5ce=await API_KEY_LIST_REF[_0xda6ec0(0x2e6)](_0xda6ec0(0x2cd)),_0x1103e1=_0x5ce5ce[_0xda6ec0(0x307)]();_0x1103e1?apiKeyList=Object[_0xda6ec0(0x18e)](_0x1103e1):console['warn'](_0xda6ec0(0x2a4));}catch(_0xa7eda7){console[_0xda6ec0(0xc5)]('Erreur\x20lors\x20du\x20chargement\x20de\x20la\x20liste\x20des\x20cl√©s\x20API:',_0xa7eda7);}}function getRandomApiKey(){const _0x17235f=_0x155207;if(apiKeyList[_0x17235f(0x1ad)]===0x0)return console[_0x17235f(0xc5)](_0x17235f(0x25a)),null;const _0x450d99=Math[_0x17235f(0x15e)](Math[_0x17235f(0x21b)]()*apiKeyList[_0x17235f(0x1ad)]);return apiKeyList[_0x450d99];}function getNextApiKey(){const _0x35771c=_0x155207;if(apiKeyList['length']===0x0)return console[_0x35771c(0xc5)](_0x35771c(0x25a)),null;const _0x2b39f5=apiKeyList[currentApiKeyIndex];return currentApiKeyIndex=(currentApiKeyIndex+0x1)%apiKeyList[_0x35771c(0x1ad)],_0x2b39f5;}function initializeApiKeyRotation(){const _0x21e2c0=_0x155207;apiKeyList[_0x21e2c0(0x1ad)]>0x0&&(genAI=new GoogleGenerativeAI(getNextApiKey())),setInterval(()=>{const _0x3e06cd=_0x21e2c0,_0x273168=getNextApiKey();_0x273168&&(genAI=new GoogleGenerativeAI(_0x273168),console[_0x3e06cd(0x24c)](_0x3e06cd(0x256)),model=genAI[_0x3e06cd(0x187)]({'model':document['getElementById'](_0x3e06cd(0x123))['value'],'systemInstruction':SYSTEM_INSTRUCTION}));},0x1388);}function initializeGeminiAPI(){const _0x263d6d=_0x155207,_0x1a3379=getNextApiKey();_0x1a3379?(genAI=new GoogleGenerativeAI(_0x1a3379),model=genAI[_0x263d6d(0x187)]({'model':document[_0x263d6d(0x162)](_0x263d6d(0x123))[_0x263d6d(0x2cd)],'systemInstruction':SYSTEM_INSTRUCTION})):showNotification(_0x263d6d(0x2ce),'error');}class ApiError extends Error{constructor(_0x55c43a,_0x5e0ed5){super(_0x55c43a),this['status']=_0x5e0ed5,this['name']='ApiError';}}class ApiKeyManager{constructor(_0x46b5f6){const _0x599d41=_0x155207;this[_0x599d41(0x293)]=_0x46b5f6,this['currentIndex']=0x0,this[_0x599d41(0x20a)]=new Set();}[_0x155207(0x2ee)](){const _0x1d93c8=_0x155207,_0xb5c37=this[_0x1d93c8(0x148)];do{this[_0x1d93c8(0x148)]=(this[_0x1d93c8(0x148)]+0x1)%this[_0x1d93c8(0x293)][_0x1d93c8(0x1ad)];if(!this[_0x1d93c8(0x20a)]['has'](this['apiKeys'][this[_0x1d93c8(0x148)]]))return this[_0x1d93c8(0x293)][this[_0x1d93c8(0x148)]];}while(this[_0x1d93c8(0x148)]!==_0xb5c37);return null;}['resetUsedKeys'](){const _0x32be28=_0x155207;this[_0x32be28(0x20a)][_0x32be28(0x14f)]();}['markKeyAsUsed'](_0x3d24f6){const _0x1596e0=_0x155207;this['usedKeys'][_0x1596e0(0x1d8)](_0x3d24f6);}}async function executeWithRetry(_0x2eaa1f){const _0x207b23=_0x155207,_0xf68a91=new ApiKeyManager(apiKeyList);let _0x2c8d50=null,_0x2d918c=0x0;while(_0x2d918c<RETRY_CONFIG[_0x207b23(0x1dc)]){const _0x3b8cb0=_0xf68a91['getNextUnusedKey']();if(!_0x3b8cb0)throw new Error(_0x207b23(0x1bb));try{genAI=new GoogleGenerativeAI(_0x3b8cb0),model=genAI[_0x207b23(0x187)]({'model':document[_0x207b23(0x162)](_0x207b23(0x123))[_0x207b23(0x2cd)],'systemInstruction':SYSTEM_INSTRUCTION});const _0x3d8113=await _0x2eaa1f();return console['log']('Requ√™te\x20r√©ussie\x20avec\x20la\x20cl√©\x20API\x20'+_0x3b8cb0),_0x3d8113;}catch(_0x1b883c){_0x2c8d50=_0x1b883c,_0xf68a91[_0x207b23(0xc9)](_0x3b8cb0),_0x2d918c++,console[_0x207b23(0x24c)](_0x207b23(0x13c)+_0x3b8cb0+_0x207b23(0x247)+_0x2d918c+'/'+RETRY_CONFIG['maxAttempts']),_0x2d918c<RETRY_CONFIG[_0x207b23(0x1dc)]&&await new Promise(_0x435885=>setTimeout(_0x435885,RETRY_CONFIG[_0x207b23(0xf6)]));}}throw new Error(_0x207b23(0x10b)+_0x2d918c+_0x207b23(0x158)+_0x2c8d50['message']);}function shouldRetry(_0x38f336){const _0x4c0bac=_0x155207,_0x379da6=[_0x4c0bac(0x176),'UNAVAILABLE','DEADLINE_EXCEEDED',_0x4c0bac(0x143),_0x4c0bac(0x29f)];return _0x379da6[_0x4c0bac(0x19d)](_0x38f336[_0x4c0bac(0x244)])||_0x38f336[_0x4c0bac(0xcb)]['includes'](_0x4c0bac(0x277))||_0x38f336[_0x4c0bac(0xcb)][_0x4c0bac(0x19d)]('rate\x20limit')||_0x38f336[_0x4c0bac(0x1b8)]===0x1ad||_0x38f336['status']>=0x1f4;}function createPointer(){const _0xd1ad29=_0x155207,_0x4bd4da=document[_0xd1ad29(0x260)](_0xd1ad29(0x1e7));return _0x4bd4da['classList'][_0xd1ad29(0x1d8)](_0xd1ad29(0x18c)),_0x4bd4da[_0xd1ad29(0x14c)]='üëÜ',_0x4bd4da[_0xd1ad29(0x140)]['position']='absolute',_0x4bd4da[_0xd1ad29(0x140)][_0xd1ad29(0x261)]=_0xd1ad29(0x2e7),document[_0xd1ad29(0x15f)][_0xd1ad29(0x25d)](_0x4bd4da),_0x4bd4da;}function positionPointer(_0x5e7915,_0x4d3600){const _0x2113b7=_0x155207,_0x552a62=_0x4d3600['getBoundingClientRect']();_0x5e7915[_0x2113b7(0x140)][_0x2113b7(0xf4)]=_0x552a62[_0x2113b7(0xf4)]+_0x552a62[_0x2113b7(0x254)]/0x2+'px',_0x5e7915['style'][_0x2113b7(0x306)]=_0x552a62[_0x2113b7(0x306)]+_0x552a62[_0x2113b7(0x135)]/0x2+'px',_0x5e7915[_0x2113b7(0x140)][_0x2113b7(0x261)]=_0x2113b7(0xf0);}function highlightElement(_0x4a2703){const _0x4dddb4=_0x155207;_0x4a2703['classList'][_0x4dddb4(0x1d8)](_0x4dddb4(0x233));}function removeHighlight(_0x558deb){const _0x25d13=_0x155207;_0x558deb[_0x25d13(0x2f5)]['remove'](_0x25d13(0x233));}function startGuidedTour(){const _0x574718=_0x155207,_0x2932bb=createPointer(),_0x57208c=new Shepherd[(_0x574718(0x126))]({'defaultStepOptions':{'cancelIcon':{'enabled':!![]},'classes':'shepherd-theme-custom','scrollTo':{'behavior':_0x574718(0x172),'block':_0x574718(0x157)}}}),_0x318fb4=[{'id':_0x574718(0x27a),'text':'Bienvenue\x20sur\x20Eduque\x20moi\x20!\x20Commen√ßons\x20la\x20visite\x20guid√©e.','attachTo':{'element':'.logo','on':_0x574718(0xdf)}},{'id':'menu','text':'Voici\x20le\x20menu\x20principal.\x20Il\x20vous\x20permet\x20d\x27acc√©der\x20√†\x20diff√©rentes\x20fonctionnalit√©s\x20de\x20l\x27application\x20(Models,\x20Cr√©dits,\x20Biblioth√®que,\x20R√©compense...).','attachTo':{'element':'.toggle-sidebar','on':_0x574718(0x235)},'beforeShow':()=>{const _0x4ce5ed=_0x574718,_0x22b849=document[_0x4ce5ed(0x107)]('.toggle-sidebar');highlightElement(_0x22b849);const _0x39d7d7=document[_0x4ce5ed(0x107)](_0x4ce5ed(0x28d));!_0x39d7d7[_0x4ce5ed(0x2f5)][_0x4ce5ed(0x13b)]('visible')&&_0x22b849[_0x4ce5ed(0x2e8)]();},'beforeHide':()=>{const _0x2801bf=_0x574718,_0x5361fe=document[_0x2801bf(0x107)]('.toggle-sidebar');removeHighlight(_0x5361fe);}},{'id':_0x574718(0x16c),'text':_0x574718(0x196),'attachTo':{'element':_0x574718(0x1a7),'on':_0x574718(0x306)}},{'id':'file-upload','text':'Cliquez\x20ici\x20pour\x20importer\x20des\x20fichiers\x20(image,\x20pdf,\x20docx,\x20doc,\x20txt)\x20que\x20vous\x20voulez\x20analyser.','attachTo':{'element':_0x574718(0x12d),'on':_0x574718(0x306)}},{'id':_0x574718(0x23c),'text':'Ce\x20bouton\x20ouvre\x20la\x20liste\x20des\x20demandes\x20personnalis√©es\x20(Utile\x20si\x20vous\x20ne\x20savez\x20pas\x20comment\x20faire\x20une\x20demande).','attachTo':{'element':_0x574718(0x22d),'on':_0x574718(0x306)}},{'id':_0x574718(0xf1),'text':_0x574718(0x2a2),'attachTo':{'element':_0x574718(0x127),'on':_0x574718(0x306)}},{'id':_0x574718(0x1d2),'text':_0x574718(0x2ae),'attachTo':{'element':_0x574718(0x273),'on':_0x574718(0xdf)}}];_0x318fb4[_0x574718(0x267)]((_0x21b17d,_0x23e75a)=>{const _0x31352f=_0x574718;_0x57208c[_0x31352f(0x160)]({..._0x21b17d,'buttons':[{'text':_0x23e75a===_0x318fb4[_0x31352f(0x1ad)]-0x1?_0x31352f(0x2ec):_0x31352f(0x223),'action':_0x23e75a===_0x318fb4['length']-0x1?_0x57208c['complete']:_0x57208c[_0x31352f(0xf8)]}],'beforeShow':()=>{const _0x12e469=_0x31352f,_0x15e270=document[_0x12e469(0x107)](_0x21b17d[_0x12e469(0x2ca)][_0x12e469(0x276)]);_0x15e270&&positionPointer(_0x2932bb,_0x15e270),_0x21b17d[_0x12e469(0x12f)]&&_0x21b17d[_0x12e469(0x12f)]();},'beforeHide':()=>{const _0xd1522e=_0x31352f;_0x2932bb['style'][_0xd1522e(0x261)]=_0xd1522e(0x2e7);}});}),_0x57208c['on'](_0x574718(0x1da),()=>{const _0x579c12=_0x574718;_0x2932bb[_0x579c12(0x301)]();const _0x56a98f=document['querySelector'](_0x579c12(0x28d));_0x56a98f['classList'][_0x579c12(0x13b)](_0x579c12(0x228))&&document['querySelector'](_0x579c12(0x1e3))[_0x579c12(0x2e8)]();}),_0x57208c[_0x574718(0x154)]();}async function checkGuidedTourStatus(_0x3bf2ca){const _0x2ea75d=_0x155207,_0x2c8190=db[_0x2ea75d(0x2ad)](_0x2ea75d(0x2f6)+_0x3bf2ca),_0x2f534a=await _0x2c8190[_0x2ea75d(0x2e6)](_0x2ea75d(0x2cd)),_0x443f3d=_0x2f534a[_0x2ea75d(0x307)]();return _0x443f3d&&_0x443f3d[_0x2ea75d(0x1a5)];}async function markGuidedTourAsSeen(_0x413574){const _0xeb18af=_0x155207,_0x55556f=db[_0xeb18af(0x2ad)](_0xeb18af(0x2f6)+_0x413574);await _0x55556f[_0xeb18af(0x311)]({'hasSeenGuidedTour':!![]});}async function checkSubscriptionStatus(){const _0x35379a=_0x155207;if(!currentUser||!currentUser[_0x35379a(0x288)])return;const _0x4030e0=new Date(),_0x4cdff1=new Date(currentUser[_0x35379a(0x288)]);if(_0x4030e0>_0x4cdff1)currentUser[_0x35379a(0xd2)]=null,currentUser[_0x35379a(0x288)]=null,await syncUserData(),showNotification(_0x35379a(0x1aa),'info'),updateUIForLoggedInUser();else{if(_0x4030e0>new Date(_0x4cdff1[_0x35379a(0x150)]()-0x3*0x18*0x3c*0x3c*0x3e8)){const _0x29ca91=Math[_0x35379a(0x263)]((_0x4cdff1-_0x4030e0)/(0x18*0x3c*0x3c*0x3e8));showNotification(_0x35379a(0x17f)+_0x29ca91+'\x20jour'+(_0x29ca91>0x1?'s':'')+'.',_0x35379a(0x149));}}}function generateInvoicePDF(_0x225afa){const _0x5b8a0d=_0x155207,{jsPDF:_0x41cbeb}=window[_0x5b8a0d(0x240)],_0x46b9c4=new _0x41cbeb();return _0x46b9c4[_0x5b8a0d(0x291)](0x12),_0x46b9c4[_0x5b8a0d(0x2e1)](_0x5b8a0d(0x2b5),0x69,0x14,null,null,'center'),_0x46b9c4[_0x5b8a0d(0x291)](0xc),_0x46b9c4['text'](_0x5b8a0d(0x257)+currentUser[_0x5b8a0d(0x227)],0x14,0x28),_0x46b9c4[_0x5b8a0d(0x2e1)](_0x5b8a0d(0x1e5)+new Date()[_0x5b8a0d(0x18f)](),0x14,0x32),_0x46b9c4[_0x5b8a0d(0x2e1)]('Description\x20:\x20'+_0x225afa['description'],0x14,0x3c),_0x46b9c4['text']('Montant\x20:\x20'+_0x225afa[_0x5b8a0d(0x1f8)]+'\x20FCFA',0x14,0x46),_0x46b9c4['text'](_0x5b8a0d(0x2b8)+_0x225afa['id'],0x14,0x50),_0x46b9c4;}function showInvoiceDetails(_0x451c19){const _0x389827=_0x155207,_0x11c2b9=document['createElement']('div');_0x11c2b9['className']=_0x389827(0xc4),_0x11c2b9['innerHTML']=_0x389827(0x266)+new Date()[_0x389827(0x18f)]()+_0x389827(0x205)+_0x451c19['description']+_0x389827(0x2d3)+_0x451c19[_0x389827(0x1f8)]+_0x389827(0x241)+_0x451c19['id']+_0x389827(0x284),document[_0x389827(0x15f)][_0x389827(0x25d)](_0x11c2b9),document[_0x389827(0x162)]('downloadInvoice')[_0x389827(0x200)]('click',()=>{const _0x89aea7=_0x389827,_0x15e8e4=generateInvoicePDF(_0x451c19);_0x15e8e4['save'](_0x89aea7(0x25f)+_0x451c19['id']+'.pdf');}),document[_0x389827(0x162)](_0x389827(0x1fc))[_0x389827(0x200)]('click',()=>{const _0x23220f=_0x389827;document['body'][_0x23220f(0xc1)](_0x11c2b9);});}function initializeNewDiscussion(){const _0x4d6cb2=_0x155207;currentConversation=[];const _0x575163=document[_0x4d6cb2(0x162)](_0x4d6cb2(0x292));_0x575163[_0x4d6cb2(0x14c)]='',addMessageToChat('ai',_0x4d6cb2(0x14e)),updateConversationHistory();}function showLoginModal(){const _0x249c05=_0x155207;document[_0x249c05(0x162)](_0x249c05(0xf5))[_0x249c05(0x140)][_0x249c05(0x261)]='block';}function showRegisterModal(){const _0x191530=_0x155207;document[_0x191530(0x162)]('registerModal')[_0x191530(0x140)][_0x191530(0x261)]=_0x191530(0xf0);}function closeModal(_0x94d492){const _0x5551b7=_0x155207;document['getElementById'](_0x94d492)[_0x5551b7(0x140)][_0x5551b7(0x261)]=_0x5551b7(0x2e7);}function updateUIForLoggedInUser(){const _0x2e9203=_0x155207;document['getElementById']('loginBtn')['classList']['add'](_0x2e9203(0x19b)),document[_0x2e9203(0x162)](_0x2e9203(0x22c))[_0x2e9203(0x2f5)][_0x2e9203(0x1d8)](_0x2e9203(0x19b)),document[_0x2e9203(0x162)](_0x2e9203(0x24a))[_0x2e9203(0x2f5)][_0x2e9203(0x301)](_0x2e9203(0x19b)),document[_0x2e9203(0x162)](_0x2e9203(0x1f7))[_0x2e9203(0x2f5)]['remove'](_0x2e9203(0x19b)),document[_0x2e9203(0x162)](_0x2e9203(0x227))[_0x2e9203(0x1a0)]=currentUser[_0x2e9203(0x227)],document[_0x2e9203(0x162)](_0x2e9203(0x2c7))[_0x2e9203(0x1a0)]=currentUser['freeCredits'],document[_0x2e9203(0x162)](_0x2e9203(0x297))[_0x2e9203(0x1a0)]=currentUser[_0x2e9203(0x297)],document[_0x2e9203(0x162)]('subscription')[_0x2e9203(0x1a0)]=currentUser[_0x2e9203(0xd2)]||'Aucun',loadConversationHistory();}function updateUIForLoggedOutUser(){const _0x25c729=_0x155207;document[_0x25c729(0x162)](_0x25c729(0x2d4))['classList']['remove'](_0x25c729(0x19b)),document[_0x25c729(0x162)](_0x25c729(0x22c))[_0x25c729(0x2f5)]['remove']('hidden'),document[_0x25c729(0x162)](_0x25c729(0x24a))[_0x25c729(0x2f5)][_0x25c729(0x1d8)](_0x25c729(0x19b)),document[_0x25c729(0x162)](_0x25c729(0x1f7))[_0x25c729(0x2f5)][_0x25c729(0x1d8)](_0x25c729(0x19b)),document[_0x25c729(0x162)](_0x25c729(0x286))[_0x25c729(0x14c)]=_0x25c729(0x10f);}function storeLoginInfo(_0x5bb149,_0xe84950){const _0x49aadc=_0x155207;localStorage[_0x49aadc(0x1bd)](_0x49aadc(0x2bf),_0x5bb149),localStorage[_0x49aadc(0x1bd)](_0x49aadc(0x2ef),_0xe84950);}function getStoredLoginInfo(){const _0x4978e5=_0x155207;return{'username':localStorage[_0x4978e5(0x22b)](_0x4978e5(0x2bf)),'password':localStorage['getItem']('eduqueMoiPassword')};}function clearLoginInfo(){const _0x417f33=_0x155207;localStorage['removeItem']('eduqueMoiUsername'),localStorage[_0x417f33(0x2b7)]('eduqueMoiPassword');}async function register(){const _0x1888d0=_0x155207,_0x410361=document['getElementById'](_0x1888d0(0x1d6))[_0x1888d0(0x2cd)],_0xff316e=document['getElementById'](_0x1888d0(0x1c5))[_0x1888d0(0x2cd)],_0x553fd3=new URLSearchParams(window[_0x1888d0(0x21c)][_0x1888d0(0x2c5)])[_0x1888d0(0x181)](_0x1888d0(0x2ad));if(!_0x410361||!_0xff316e){showNotification(_0x1888d0(0x13e),_0x1888d0(0xc5));return;}try{const _0xb00c6=db[_0x1888d0(0x2ad)]('users/'+_0x410361),_0x543fb7=await _0xb00c6[_0x1888d0(0x2e6)](_0x1888d0(0x2cd));if(_0x543fb7[_0x1888d0(0x1c1)]()){showNotification(_0x1888d0(0x21a),_0x1888d0(0xc5));return;}const _0x2582a8=new Date(),_0xf6f3bf={'password':_0xff316e,'freeCredits':FREE_CREDITS_REGISTER,'paidCredits':0x0,'subscription':null,'subscriptionEndDate':null,'lastFreeCreditsReset':_0x2582a8['toISOString'](),'referredBy':_0x553fd3||null,'firstPurchase':![],'totalReferrals':0x0,'activeReferrals':0x0,'hasSeenGuidedTour':![]};await _0xb00c6[_0x1888d0(0x1c2)](_0xf6f3bf);if(_0x553fd3){const _0x364b29=await db['ref'](_0x1888d0(0x189))[_0x1888d0(0x264)](_0x1888d0(0x2c9))[_0x1888d0(0x2d9)](_0x553fd3)[_0x1888d0(0x2e6)](_0x1888d0(0x2cd)),_0x47144d=_0x364b29[_0x1888d0(0x307)]();if(_0x47144d){const _0x437db1=Object[_0x1888d0(0x161)](_0x47144d)[0x0];await db[_0x1888d0(0x2ad)](_0x1888d0(0x2f6)+_0x437db1+_0x1888d0(0x129)+_0x410361)[_0x1888d0(0x1c2)]({'date':_0x2582a8[_0x1888d0(0x13a)](),'isActive':![]});const _0x49858e=db[_0x1888d0(0x2ad)](_0x1888d0(0x2f6)+_0x437db1);await _0x49858e['transaction'](_0x391a5f=>{const _0x39604f=_0x1888d0;return _0x391a5f&&(_0x391a5f[_0x39604f(0x2bb)]=(_0x391a5f[_0x39604f(0x2bb)]||0x0)+0x1),_0x391a5f;}),currentUser&&currentUser[_0x1888d0(0x227)]===_0x437db1&&(document[_0x1888d0(0x162)](_0x1888d0(0x2bb))[_0x1888d0(0x1a0)]=(parseInt(document[_0x1888d0(0x162)](_0x1888d0(0x2bb))[_0x1888d0(0x1a0)])||0x0)+0x1);}}currentUser={'username':_0x410361,..._0xf6f3bf},updateUIForLoggedInUser(),showNotification('Inscription\x20r√©ussie\x20!\x20Vous\x20avez\x20re√ßu\x2010\x20cr√©dits\x20gratuits.',_0x1888d0(0xfc)),closeModal(_0x1888d0(0xef)),storeLoginInfo(_0x410361,_0xff316e),startGuidedTour(),await markGuidedTourAsSeen(_0x410361);}catch(_0x4a053e){console[_0x1888d0(0xc5)](_0x1888d0(0x251),_0x4a053e),showNotification(_0x1888d0(0x1f0),_0x1888d0(0xc5));}}async function login(_0x546d47,_0x4a682c){const _0x48a4d4=_0x155207;(!_0x546d47||!_0x4a682c)&&(_0x546d47=document['getElementById'](_0x48a4d4(0xe1))[_0x48a4d4(0x2cd)],_0x4a682c=document[_0x48a4d4(0x162)]('loginPassword')[_0x48a4d4(0x2cd)]);if(!_0x546d47||!_0x4a682c){showNotification(_0x48a4d4(0x13e),_0x48a4d4(0xc5));return;}try{const _0x2f4b1c=db[_0x48a4d4(0x2ad)](_0x48a4d4(0x2f6)+_0x546d47),_0x3e68d2=await _0x2f4b1c[_0x48a4d4(0x2e6)](_0x48a4d4(0x2cd));if(_0x3e68d2['exists']()&&_0x3e68d2['val']()[_0x48a4d4(0x1e1)]===_0x4a682c){const _0x4a9945=_0x3e68d2[_0x48a4d4(0x307)]();currentUser={'username':_0x546d47,'freeCredits':_0x4a9945[_0x48a4d4(0x2c7)]||0x0,'paidCredits':_0x4a9945[_0x48a4d4(0x297)]||0x0,'subscription':_0x4a9945['subscription']||null,'subscriptionEndDate':_0x4a9945[_0x48a4d4(0x288)]||null,'lastFreeCreditsReset':_0x4a9945[_0x48a4d4(0x1d7)]||new Date()['toISOString'](),'referralCode':_0x4a9945['referralCode']||null,'totalReferrals':_0x4a9945[_0x48a4d4(0x2bb)]||0x0,'activeReferrals':_0x4a9945[_0x48a4d4(0x13f)]||0x0},await resetFreeCreditsIfNeeded(),await checkSubscriptionStatus(),await initializeImageGenerationTracking(_0x546d47),updateUIForLoggedInUser(),storeLoginInfo(_0x546d47,_0x4a682c),loadConversationHistory();const _0x160d62=await checkGuidedTourStatus(_0x546d47);!_0x160d62&&(startGuidedTour(),await markGuidedTourAsSeen(_0x546d47)),_0x4a9945['referrals']&&await updateReferralStats(_0x546d47),importedFilesCount=_0x4a9945['importedFilesCount']||0x0,lastImportReset=new Date(_0x4a9945[_0x48a4d4(0x19c)]||new Date()),await syncUserData(),showNotification(_0x48a4d4(0xd4),_0x48a4d4(0xfc)),closeModal(_0x48a4d4(0xf5)),_0x4a9945['customPrompts']&&loadCustomPrompts(_0x4a9945[_0x48a4d4(0x272)]),checkPendingNotifications(),initializeGeminiAPI(),createNewConversation();}else showNotification(_0x48a4d4(0xea),_0x48a4d4(0xc5));}catch(_0xc5171a){console[_0x48a4d4(0xc5)](_0x48a4d4(0x125),_0xc5171a),showNotification(_0x48a4d4(0x1af),_0x48a4d4(0xc5));}}async function checkPendingNotifications(){const _0x20443d=_0x155207;if(currentUser[_0x20443d(0xd2)]){const _0xbf6cb5=new Date(currentUser[_0x20443d(0x288)]),_0x287cb6=new Date(),_0x177823=Math[_0x20443d(0x263)]((_0xbf6cb5-_0x287cb6)/(0x3e8*0x3c*0x3c*0x18));_0x177823<=0x3&&_0x177823>0x0&&showNotification(_0x20443d(0x17f)+_0x177823+_0x20443d(0x310)+(_0x177823>0x1?'s':'')+'.',_0x20443d(0x149));}!currentUser[_0x20443d(0xd2)]&&currentUser[_0x20443d(0x297)]<0xa&&currentUser[_0x20443d(0x2c7)]<0x3&&showNotification(_0x20443d(0x29d),'warning');}function loadCustomPrompts(_0x21bd07){const _0x13976f=_0x155207;Array[_0x13976f(0x1b6)](_0x21bd07)&&_0x21bd07[_0x13976f(0x267)](_0x2c4b96=>{!prompts[_0x2c4b96['id']]&&(prompts[_0x2c4b96['id']]=_0x2c4b96);});}function logout(){const _0x49d6d3=_0x155207;currentUser&&syncUserData(),currentUser=null,updateUIForLoggedOutUser(),showNotification(_0x49d6d3(0x14a),_0x49d6d3(0xfc)),clearLoginInfo();}async function resetFreeCreditsIfNeeded(){const _0x4a801c=_0x155207,_0x3201b4=new Date(),_0x1fbca9=new Date(currentUser[_0x4a801c(0x1d7)]);if(_0x3201b4[_0x4a801c(0x150)]()-_0x1fbca9[_0x4a801c(0x150)]()>=0x18*0x3c*0x3c*0x3e8){const _0x8b0e8b=currentUser['freeCredits'];currentUser[_0x4a801c(0x2c7)]=FREE_CREDITS_PER_DAY,currentUser[_0x4a801c(0x1d7)]=_0x3201b4['toISOString'](),await syncUserData(),document['getElementById'](_0x4a801c(0x2c7))[_0x4a801c(0x1a0)]=currentUser[_0x4a801c(0x2c7)];const _0x3a85a2=currentUser[_0x4a801c(0x2c7)]-_0x8b0e8b;_0x3a85a2>0x0&&showNotification(_0x3a85a2+_0x4a801c(0x2e2),_0x4a801c(0xfc));}}async function checkModelAccess(){const _0x22e4a3=_0x155207,_0x452057=document[_0x22e4a3(0x162)]('modelSelect')[_0x22e4a3(0x2cd)],_0xce35c5=document[_0x22e4a3(0x162)](_0x22e4a3(0x232));_0xce35c5[_0x22e4a3(0x140)]['display']=isImageGenerationModel(_0x452057)?_0x22e4a3(0xf0):'none';if(isImageGenerationModel(_0x452057)){if(!hasValidSubscription()&&currentUser['paidCredits']<0x5&&currentUser[_0x22e4a3(0x2c7)]<0x5){showPaymentNotification('La\x20g√©n√©ration\x20d\x27images\x20n√©cessite\x205\x20cr√©dits.'),document[_0x22e4a3(0x162)](_0x22e4a3(0x123))['value']='gemini-exp-1206',_0xce35c5[_0x22e4a3(0x140)][_0x22e4a3(0x261)]=_0x22e4a3(0x2e7);return;}}else!['gemini-exp-1206',_0x22e4a3(0x208)]['includes'](_0x452057)&&!hasValidSubscription()&&currentUser[_0x22e4a3(0x297)]<=0x0&&(showPaymentNotification(_0x22e4a3(0x268)),document[_0x22e4a3(0x162)](_0x22e4a3(0x123))['value']='gemini-exp-1206');}async function handleFileUpload(_0x40b2b8){const _0x57fe3d=_0x155207,_0x56e27b=_0x40b2b8[_0x57fe3d(0x204)]['files'];for(let _0x4dbd76=0x0;_0x4dbd76<_0x56e27b[_0x57fe3d(0x1ad)];_0x4dbd76++){const _0x1ad5da=_0x56e27b[_0x4dbd76];if(_0x1ad5da[_0x57fe3d(0x217)]==='application/vnd.openxmlformats-officedocument.wordprocessingml.document'||_0x1ad5da[_0x57fe3d(0x217)]===_0x57fe3d(0x1c7))try{const _0x290baa=await convertWordToText(_0x1ad5da);pinnedFiles[_0x57fe3d(0x184)]({'name':_0x1ad5da[_0x57fe3d(0x117)][_0x57fe3d(0x1f6)](/\.[^/.]+$/,'')+'.txt','type':'text/plain','content':_0x290baa}),updatePinnedFiles(),importedFilesCount++,await db[_0x57fe3d(0x2ad)]('users/'+currentUser[_0x57fe3d(0x227)])[_0x57fe3d(0x311)]({'importedFilesCount':importedFilesCount});}catch(_0x8ba13f){console[_0x57fe3d(0xc5)](_0x57fe3d(0x22a),_0x8ba13f),showNotification(_0x57fe3d(0x12b),_0x57fe3d(0xc5));}else(_0x1ad5da[_0x57fe3d(0x217)]['startsWith']('image/')||_0x1ad5da[_0x57fe3d(0x217)]===_0x57fe3d(0x201))&&(pinnedFiles[_0x57fe3d(0x184)](_0x1ad5da),updatePinnedFiles());}}function convertWordToText(_0x4f5168){return new Promise((_0x2b2037,_0x3786e5)=>{const _0x23b115=_0x579b,_0x4ef556=new FileReader();_0x4ef556[_0x23b115(0x15a)]=function(_0x12935c){const _0x3eb91d=_0x23b115,_0x4e6375=_0x12935c[_0x3eb91d(0x204)]['result'];mammoth[_0x3eb91d(0x230)]({'arrayBuffer':_0x4e6375})[_0x3eb91d(0x299)](function(_0x512eea){const _0x32d107=_0x3eb91d;_0x2b2037(_0x512eea[_0x32d107(0x2cd)]);})[_0x3eb91d(0xfd)](function(_0x519227){_0x3786e5(_0x519227);});},_0x4ef556[_0x23b115(0x1cb)](_0x4f5168);});}function updatePinnedFiles(){const _0x2ec76e=_0x155207,_0x51f7dc=document['getElementById'](_0x2ec76e(0xd7)),_0x366cf9=_0x51f7dc[_0x2ec76e(0x107)](_0x2ec76e(0x1c9));_0x51f7dc[_0x2ec76e(0x14c)]='',_0x366cf9&&_0x51f7dc['appendChild'](_0x366cf9),pinnedFiles[_0x2ec76e(0x267)]((_0x4f27fa,_0x2259b3)=>{const _0x3e4d78=_0x2ec76e,_0x2f4fe8=document[_0x3e4d78(0x260)]('div');_0x2f4fe8[_0x3e4d78(0x2b4)]=_0x3e4d78(0x2c8),_0x2f4fe8[_0x3e4d78(0x30f)](_0x3e4d78(0x278),_0x3e4d78(0x1b0)),_0x2f4fe8['innerHTML']=_0x3e4d78(0xff)+(_0x4f27fa[_0x3e4d78(0x217)][_0x3e4d78(0x21f)](_0x3e4d78(0x206))?'üñºÔ∏è':'üìÑ')+_0x3e4d78(0x11a)+_0x4f27fa[_0x3e4d78(0x117)]+'\x22>'+_0x4f27fa[_0x3e4d78(0x117)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedFile('+_0x2259b3+_0x3e4d78(0x1d1),_0x51f7dc[_0x3e4d78(0x25d)](_0x2f4fe8);});}function removePinnedFile(_0x5de238){const _0xcf16f7=_0x155207;pinnedFiles[_0xcf16f7(0x17c)](_0x5de238,0x1),updatePinnedFiles();}function createPinnedFilesElement(_0x549e1a){const _0x4ec61f=_0x155207,_0xb740b8=document['createElement']('div');return _0xb740b8[_0x4ec61f(0x2b4)]=_0x4ec61f(0x191),_0x549e1a[_0x4ec61f(0x267)](_0x5610bb=>{const _0x19f5e5=_0x4ec61f,_0x1468ea=document[_0x19f5e5(0x260)]('div');_0x1468ea['className']=_0x19f5e5(0x285);if(_0x5610bb[_0x19f5e5(0x217)][_0x19f5e5(0x21f)](_0x19f5e5(0x206))){const _0x24cc1b=document[_0x19f5e5(0x260)](_0x19f5e5(0x119));_0x24cc1b[_0x19f5e5(0x14b)]=URL['createObjectURL'](_0x5610bb),_0x24cc1b['alt']=_0x5610bb[_0x19f5e5(0x117)],_0x24cc1b[_0x19f5e5(0x2b4)]=_0x19f5e5(0xd1),_0x1468ea['appendChild'](_0x24cc1b);}else{const _0x3de0b8=document[_0x19f5e5(0x260)](_0x19f5e5(0x11c));_0x3de0b8[_0x19f5e5(0x2b4)]='file-icon',_0x3de0b8[_0x19f5e5(0x1a0)]=_0x5610bb[_0x19f5e5(0x217)]['startsWith'](_0x19f5e5(0x201))?'üìÑ':'üìé',_0x1468ea[_0x19f5e5(0x25d)](_0x3de0b8);}const _0x558003=document[_0x19f5e5(0x260)](_0x19f5e5(0x11c));_0x558003[_0x19f5e5(0x2b4)]=_0x19f5e5(0x214),_0x558003[_0x19f5e5(0x1a0)]=_0x5610bb['name'],_0x1468ea[_0x19f5e5(0x25d)](_0x558003),_0xb740b8[_0x19f5e5(0x25d)](_0x1468ea);}),_0xb740b8;}function createPinnedResponsesElement(_0x3ed15c){const _0x20b0ba=_0x155207,_0x4093f6=document[_0x20b0ba(0x260)](_0x20b0ba(0x1e7));return _0x4093f6[_0x20b0ba(0x2b4)]=_0x20b0ba(0x2d8),_0x3ed15c[_0x20b0ba(0x267)](_0x4a51cd=>{const _0x5f09f6=_0x20b0ba,_0x5e9ed9=document[_0x5f09f6(0x260)](_0x5f09f6(0x1e7));_0x5e9ed9[_0x5f09f6(0x2b4)]=_0x5f09f6(0x1ae);const _0x46d753=document[_0x5f09f6(0x260)](_0x5f09f6(0x11c));_0x46d753[_0x5f09f6(0x2b4)]='response-icon',_0x46d753[_0x5f09f6(0x1a0)]='üí¨';const _0x2f5b6c=document[_0x5f09f6(0x260)](_0x5f09f6(0x11c));_0x2f5b6c[_0x5f09f6(0x2b4)]='response-text',_0x2f5b6c[_0x5f09f6(0x1a0)]=_0x4a51cd[_0x5f09f6(0x283)],_0x5e9ed9[_0x5f09f6(0x25d)](_0x46d753),_0x5e9ed9[_0x5f09f6(0x25d)](_0x2f5b6c),_0x4093f6['appendChild'](_0x5e9ed9);}),_0x4093f6;}function createPinnedPromptElement(_0x4d48f7){const _0x5d19c7=_0x155207,_0x424cf9=document[_0x5d19c7(0x260)](_0x5d19c7(0x1e7));_0x424cf9[_0x5d19c7(0x2b4)]='pinned-prompt-message';const _0x230781=document[_0x5d19c7(0x260)](_0x5d19c7(0x1e7));_0x230781[_0x5d19c7(0x2b4)]='pinned-prompt';const _0x412f76=document[_0x5d19c7(0x260)](_0x5d19c7(0x11c));_0x412f76[_0x5d19c7(0x2b4)]=_0x5d19c7(0x2d0),_0x412f76[_0x5d19c7(0x1a0)]='ü§ñ';const _0x404e92=document[_0x5d19c7(0x260)](_0x5d19c7(0x11c));return _0x404e92[_0x5d19c7(0x2b4)]=_0x5d19c7(0x1be),_0x404e92['textContent']=_0x4d48f7[_0x5d19c7(0x103)],_0x230781[_0x5d19c7(0x25d)](_0x412f76),_0x230781[_0x5d19c7(0x25d)](_0x404e92),_0x424cf9[_0x5d19c7(0x25d)](_0x230781),_0x424cf9;}function createModelHeader(_0x10da9f){const _0x31ef55=_0x155207,_0x3ad2d5={'gemini-1.5-flash':_0x31ef55(0xed),'gemini-1.5-pro':_0x31ef55(0x1c0),'gemini-1.5-pro-latest':_0x31ef55(0x2eb),'gemini-1.0-pro':_0x31ef55(0xe2),'recraft-realistic':_0x31ef55(0x2f4),'recraft-digital':_0x31ef55(0x138),'recraft-vector':_0x31ef55(0x2b2)},_0x18f928=_0x3ad2d5[_0x10da9f]||_0x10da9f;return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22model-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22model-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22'+(isImageGenerationModel(_0x10da9f)?_0x31ef55(0x224):_0x31ef55(0x2cb))+_0x31ef55(0x20e)+_0x18f928+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';}async function sendMessage(){const _0x63c10f=_0x155207;if(!currentUser){showNotification(_0x63c10f(0x29b),'error');return;}const _0x57cc1a=document[_0x63c10f(0x162)](_0x63c10f(0xc7))[_0x63c10f(0x2cd)][_0x63c10f(0x137)](),_0x58fd0d=document[_0x63c10f(0x162)]('modelSelect')[_0x63c10f(0x2cd)];if(!_0x57cc1a&&pinnedFiles[_0x63c10f(0x1ad)]===0x0&&pinnedResponses[_0x63c10f(0x1ad)]===0x0&&!pinnedPrompt){showNotification('Veuillez\x20entrer\x20un\x20message,\x20joindre\x20un\x20fichier,\x20√©pingler\x20une\x20r√©ponse\x20ou\x20s√©lectionner\x20un\x20prompt.',_0x63c10f(0xc5));return;}let _0x4ab7d5=_0x57cc1a;pinnedPrompt&&(_0x4ab7d5=pinnedPrompt[_0x63c10f(0x217)]===_0x63c10f(0x166)?pinnedPrompt[_0x63c10f(0x16d)]+'\x0aD√©tails\x20sp√©cifiques:\x20'+_0x57cc1a:pinnedPrompt[_0x63c10f(0x16d)]+'\x0a\x0a'+_0x57cc1a);if(isImageGenerationModel(_0x58fd0d)){try{const _0x1de58a=await canGenerateImage();if(!_0x1de58a[_0x63c10f(0x17a)]){showPaymentNotification(_0x1de58a[_0x63c10f(0xcb)]);return;}const _0x4c871d=document[_0x63c10f(0x260)]('div');_0x4c871d[_0x63c10f(0x2b4)]=_0x63c10f(0x155),_0x4c871d['innerHTML']=_0x63c10f(0xd3)+createModelHeader(_0x58fd0d)+_0x63c10f(0x1a1),document[_0x63c10f(0x162)](_0x63c10f(0x292))[_0x63c10f(0x25d)](_0x4c871d);const _0x4d4d8f=document['getElementById'](_0x63c10f(0x232))[_0x63c10f(0x2cd)],_0x1507fc=getRecraftStyle(_0x58fd0d),_0x1ef6e5=await fetch('https://api.recraft.ai/api/v2/generate',{'method':_0x63c10f(0x238),'headers':{'Content-Type':_0x63c10f(0xf9),'Authorization':_0x63c10f(0x152)+RECRAFT_API_KEY},'body':JSON[_0x63c10f(0x113)]({'prompt':_0x4ab7d5,'style':_0x1507fc,'size':_0x4d4d8f})});if(!_0x1ef6e5['ok'])throw new Error(_0x63c10f(0x1b4));const _0xed12a4=await _0x1ef6e5[_0x63c10f(0x30a)](),_0x59005b=_0xed12a4['data'][0x0][_0x63c10f(0x170)];_0x4c871d[_0x63c10f(0x14c)]=_0x63c10f(0xd3)+createModelHeader(_0x58fd0d)+_0x63c10f(0xfa)+_0x59005b+_0x63c10f(0x308)+_0x4ab7d5+'\x22</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-metadata\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>Style:\x20'+_0x1507fc[_0x63c10f(0x1f6)]('_','\x20')[_0x63c10f(0x313)]()+_0x63c10f(0x175)+_0x4d4d8f+_0x63c10f(0x28b)+(_0x1de58a[_0x63c10f(0x169)]?'G√©n√©ration\x20gratuite\x20(abonnement)':_0x63c10f(0x198))+_0x63c10f(0x1f3)+_0x59005b+_0x63c10f(0x1a9)+_0x59005b+_0x63c10f(0x30c)+_0x59005b+_0x63c10f(0x1a8);if(_0x1de58a[_0x63c10f(0x169)]){await incrementImageGenerationCount(currentUser[_0x63c10f(0x227)]);const _0x412a47=await getImageGenerationCount(currentUser['username']);showNotification('Image\x20g√©n√©r√©e\x20avec\x20succ√®s!\x20Il\x20vous\x20reste\x20'+(0x5-_0x412a47)+'\x20g√©n√©rations\x20gratuites\x20aujourd\x27hui.','success');}else await updateCredits(_0x58fd0d,0x5),showNotification(_0x63c10f(0x1cf),'success');}catch(_0xcb8cc3){console['error'](_0x63c10f(0x2f7),_0xcb8cc3),showNotification(_0x63c10f(0x1c3),_0x63c10f(0xc5));}finally{document[_0x63c10f(0x162)](_0x63c10f(0xc7))[_0x63c10f(0x2cd)]='',resetTextareaHeight(),pinnedPrompt=null,updatePinnedItems();}return;}let _0x541f1b=0x1;_0x541f1b+=pinnedFiles[_0x63c10f(0x2e4)](_0x5e6c80=>_0x5e6c80[_0x63c10f(0x217)]!=='text/plain')['length'],_0x541f1b+=pinnedResponses[_0x63c10f(0x1ad)];if(!hasValidSubscription()){if(_0x58fd0d==='gemini-exp-1206'){if(currentUser['paidCredits']<_0x541f1b&&currentUser[_0x63c10f(0x2c7)]<_0x541f1b){showPaymentNotification(_0x63c10f(0xe3));return;}}else{if(!['gemini-1.0-pro'][_0x63c10f(0x19d)](_0x58fd0d)&&currentUser['paidCredits']<_0x541f1b){showPaymentNotification(_0x63c10f(0x22f));return;}}}const _0x13b2c9=[...pinnedFiles],_0x503ce2=[...pinnedResponses],_0x319d23=pinnedPrompt;pinnedFiles=[],pinnedResponses=[],pinnedPrompt=null,updatePinnedItems();const _0xa66ce2=addMessageToChat(_0x63c10f(0x28f),_0x57cc1a,_0x13b2c9,_0x503ce2,_0x319d23),_0x5d500a=document['createElement'](_0x63c10f(0x1e7));_0x5d500a[_0x63c10f(0x2b4)]=_0x63c10f(0x155),_0x5d500a[_0x63c10f(0x14c)]=_0x63c10f(0x1a2)+createModelHeader(_0x58fd0d)+_0x63c10f(0x1db),document[_0x63c10f(0x162)](_0x63c10f(0x292))['appendChild'](_0x5d500a);try{const _0x14c12c=[];let _0x247269=buildConversationContext();await addFilesToParts(_0x14c12c,_0x13b2c9),_0x503ce2[_0x63c10f(0x267)](_0x146ed2=>{const _0x5c6e4b=_0x63c10f;_0x247269+=_0x5c6e4b(0x1ce)+_0x146ed2[_0x5c6e4b(0x283)]+']\x0a';});_0x319d23?(_0x247269+=_0x63c10f(0x23d)+_0x319d23[_0x63c10f(0x103)]+']\x0a',_0x319d23[_0x63c10f(0x217)]===_0x63c10f(0x166)?_0x247269+='D√©tails\x20sp√©cifiques:\x20'+_0x57cc1a+'\x0a':_0x247269+=_0x319d23[_0x63c10f(0x16d)]+'\x0a\x0a'+_0x57cc1a+'\x0a'):_0x247269+=_0x57cc1a+'\x0a';_0x4ab7d5=_0x247269,_0x14c12c[_0x63c10f(0x184)]({'text':_0x4ab7d5});let _0x26fc17,_0x4faeb4=0x0;const _0x1850cb=0x3;while(_0x4faeb4<_0x1850cb){try{const _0x3587c2=getNextApiKey();if(!_0x3587c2)throw new Error(_0x63c10f(0x1ee));genAI=new GoogleGenerativeAI(_0x3587c2),model=genAI[_0x63c10f(0x187)]({'model':_0x58fd0d,'systemInstruction':SYSTEM_INSTRUCTION});const _0x122afa=await model['generateContent'](_0x14c12c);_0x26fc17=await _0x122afa['response'];break;}catch(_0x48db78){_0x4faeb4++,console['error']('Tentative\x20'+_0x4faeb4+'/'+_0x1850cb+'\x20√©chou√©e:',_0x48db78);if(_0x4faeb4===_0x1850cb)throw new Error(_0x63c10f(0x2c4));const _0x2a0e28=Math[_0x63c10f(0x12a)](0x3e8*Math[_0x63c10f(0x24d)](0x2,_0x4faeb4),0x1388);await new Promise(_0x1f7bee=>setTimeout(_0x1f7bee,_0x2a0e28));}}let _0xf1b180=_0x26fc17[_0x63c10f(0x2e1)]();if(_0x58fd0d===_0x63c10f(0x208)||_0x58fd0d==='gemini-exp-1206'&&currentUser[_0x63c10f(0x297)]<_0x541f1b){const _0x2c9cd1=_0xf1b180[_0x63c10f(0x1a3)](/\s+/);_0x2c9cd1[_0x63c10f(0x1ad)]>FREE_MODEL_MAX_RESPONSE&&(_0xf1b180=_0x2c9cd1[_0x63c10f(0x11e)](0x0,FREE_MODEL_MAX_RESPONSE)[_0x63c10f(0x248)]('\x20')+_0x63c10f(0x112),showNotification('La\x20r√©ponse\x20a\x20√©t√©\x20tronqu√©e\x20√†\x20'+FREE_MODEL_MAX_RESPONSE+_0x63c10f(0x1c6),_0x63c10f(0x106)));}await animateText(_0x5d500a,_0xf1b180),currentConversation['push']({'sender':'ai','content':_0xf1b180}),await updateCredits(_0x58fd0d,_0x541f1b),saveConversation();}catch(_0x29f781){console[_0x63c10f(0xc5)](_0x63c10f(0x2e3),_0x29f781),_0x5d500a[_0x63c10f(0x301)](),showNotification('Erreur\x20:\x20'+_0x29f781[_0x63c10f(0xcb)]+_0x63c10f(0x1e4),_0x63c10f(0xc5));}finally{document[_0x63c10f(0x162)](_0x63c10f(0xc7))[_0x63c10f(0x2cd)]='',resetTextareaHeight(),resetScrollState();}}document['addEventListener']('DOMContentLoaded',initializeScrollListener);function resetPinnedItems(){pinnedFiles=[],pinnedResponses=[],pinnedPrompt=null,updatePinnedItems();}function buildConversationContext(){const _0x18ee95=_0x155207;let _0x38203f='';const _0x4e5c38=currentConversation['slice'](-0x5);return _0x4e5c38[_0x18ee95(0x267)](_0x46e50f=>{const _0x231554=_0x18ee95;_0x38203f+=(_0x46e50f[_0x231554(0x2d1)]==='user'?_0x231554(0x28f):'model')+':\x20'+_0x46e50f[_0x231554(0x16d)]+'\x0a',_0x46e50f[_0x231554(0x142)]&&_0x46e50f[_0x231554(0x142)]['forEach'](_0xc979e7=>{const _0x51c039=_0x231554;_0x38203f+='[Fichier\x20joint:\x20'+_0xc979e7[_0x51c039(0x117)]+']\x0a';}),_0x46e50f[_0x231554(0x1ff)]&&_0x46e50f[_0x231554(0x1ff)][_0x231554(0x267)](_0x13db35=>{const _0x4dd5c1=_0x231554;_0x38203f+=_0x4dd5c1(0x1ce)+_0x13db35['displayText']+']\x0a';}),_0x46e50f['prompt']&&(_0x38203f+=_0x231554(0x23d)+_0x46e50f[_0x231554(0x274)][_0x231554(0x103)]+']\x0a');}),_0x38203f;}async function addFilesToParts(_0x2a43f1,_0x46c5ac){const _0x4fa534=_0x155207;for(const _0x8d96e1 of _0x46c5ac){if(_0x8d96e1[_0x4fa534(0x217)]==='text/plain')_0x2a43f1[_0x4fa534(0x184)]({'text':_0x4fa534(0x2e0)+_0x8d96e1[_0x4fa534(0x16d)]});else{const _0x25d99d=await readFileAsBase64(_0x8d96e1);_0x2a43f1[_0x4fa534(0x184)]({'inlineData':{'data':_0x25d99d,'mimeType':_0x8d96e1[_0x4fa534(0x217)]}}),_0x2a43f1[_0x4fa534(0x184)]({'text':_0x4fa534(0xe0)+_0x8d96e1[_0x4fa534(0x117)]+'\x20('+_0x8d96e1['type']+_0x4fa534(0x115)});}}}async function validateCreditsAndModel(_0x2a4e93,_0x2902cf){const _0x4fc13c=_0x155207;if(_0x2a4e93===_0x4fc13c(0x2ac)){if(currentUser[_0x4fc13c(0x297)]>=_0x2902cf)return showNotification(_0x4fc13c(0x1c8),_0x4fc13c(0x106)),!![];else{if(currentUser[_0x4fc13c(0x2c7)]>=_0x2902cf)return showNotification('Utilisation\x20de\x20cr√©dits\x20gratuits\x20pour\x20Gemini\x20Exp\x201206.',_0x4fc13c(0x106)),!![];}}else{if(!['gemini-1.0-pro'][_0x4fc13c(0x19d)](_0x2a4e93)){if(currentUser['paidCredits']<_0x2902cf)return showPaymentNotification(_0x4fc13c(0x22f)),![];}else{if(currentUser[_0x4fc13c(0x2c7)]<_0x2902cf&&currentUser[_0x4fc13c(0x297)]<_0x2902cf)return showPaymentNotification(_0x4fc13c(0xe3)),![];}}return!![];}async function processAndDisplayAIResponse(_0x437fa1,_0x294e5b,_0x6318ff){const _0x3a67b6=_0x155207;let _0x24f83d;if(_0x294e5b==='gemini-1.0-pro'||_0x294e5b===_0x3a67b6(0x2ac)&&currentUser['paidCredits']<_0x6318ff){const _0x5d9ee9=_0x437fa1[_0x3a67b6(0x1a3)](/\s+/);_0x5d9ee9['length']>FREE_MODEL_MAX_RESPONSE?(_0x437fa1=_0x5d9ee9['slice'](0x0,FREE_MODEL_MAX_RESPONSE)[_0x3a67b6(0x248)]('\x20')+_0x3a67b6(0x112),showNotification(_0x3a67b6(0x262)+FREE_MODEL_MAX_RESPONSE+_0x3a67b6(0x1c6),_0x3a67b6(0x106)),_0x24f83d=addMessageToChat('ai',_0x437fa1),showUpgradeButton(_0x24f83d)):_0x24f83d=addMessageToChat('ai',_0x437fa1);}else _0x24f83d=addMessageToChat('ai',_0x437fa1);return _0x24f83d;}function updateConversation(_0x19d9d2,_0x50adb3){const _0x8590bc=_0x155207;currentConversation['push']({'sender':_0x8590bc(0x28f),'content':_0x19d9d2}),currentConversation[_0x8590bc(0x184)]({'sender':'ai','content':_0x50adb3});}async function handleImageGeneration(_0x1ceb29,_0x4da9e9,_0x304a6a){const _0x34cd5d=_0x155207;try{if(!_0x304a6a['canGenerate']){showPaymentNotification(_0x304a6a[_0x34cd5d(0xcb)]);return;}const _0x438ea8=document[_0x34cd5d(0x162)]('imageSizeSelect')[_0x34cd5d(0x2cd)],_0x1cfe70=getRecraftStyle(_0x4da9e9),_0xae14b=addLoadingMessage(_0x34cd5d(0xf3)),_0x2e2b6b=await fetch('https://api.recraft.ai/api/v2/generate',{'method':_0x34cd5d(0x238),'headers':{'Content-Type':'application/json','Authorization':_0x34cd5d(0x152)+RECRAFT_API_KEY},'body':JSON[_0x34cd5d(0x113)]({'prompt':_0x1ceb29,'style':_0x1cfe70,'size':_0x438ea8,'n':0x1})});_0xae14b[_0x34cd5d(0x301)]();if(!_0x2e2b6b['ok'])throw new Error('Erreur\x20HTTP:\x20'+_0x2e2b6b['status']);const _0x4ef0ed=await _0x2e2b6b[_0x34cd5d(0x30a)]();if(!_0x4ef0ed[_0x34cd5d(0x2f3)]||!_0x4ef0ed[_0x34cd5d(0x2f3)][0x0]||!_0x4ef0ed[_0x34cd5d(0x2f3)][0x0]['url'])throw new Error(_0x34cd5d(0x226));const _0x1f260e=_0x4ef0ed[_0x34cd5d(0x2f3)][0x0]['url'],_0x22e40f=document[_0x34cd5d(0x260)](_0x34cd5d(0x1e7));_0x22e40f[_0x34cd5d(0x2b4)]=_0x34cd5d(0x155),_0x22e40f['innerHTML']=_0x34cd5d(0xfa)+_0x1f260e+_0x34cd5d(0x308)+_0x1ceb29+_0x34cd5d(0x1f2)+_0x1cfe70[_0x34cd5d(0x1f6)]('_','\x20')['toUpperCase']()+_0x34cd5d(0x175)+_0x438ea8+_0x34cd5d(0x28b)+(_0x304a6a[_0x34cd5d(0x169)]?_0x34cd5d(0x295):_0x34cd5d(0x198))+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22downloadImage(\x27'+_0x1f260e+'\x27,\x20\x27image-generee.png\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-download\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyImage(\x27'+_0x1f260e+_0x34cd5d(0x30c)+_0x1f260e+_0x34cd5d(0x1a8),document[_0x34cd5d(0x162)](_0x34cd5d(0x292))[_0x34cd5d(0x25d)](_0x22e40f);if(_0x304a6a['useFreeGeneration']){await incrementImageGenerationCount(currentUser[_0x34cd5d(0x227)]);const _0xdaa0a0=await getImageGenerationCount(currentUser['username']);showNotification(_0x34cd5d(0x15c)+(0x5-_0xdaa0a0)+'\x20g√©n√©rations\x20gratuites\x20aujourd\x27hui.',_0x34cd5d(0xfc));}else await updateCredits(_0x4da9e9,0x5),showNotification('Image\x20g√©n√©r√©e\x20avec\x20succ√®s!\x205\x20cr√©dits\x20ont\x20√©t√©\x20d√©duits.',_0x34cd5d(0xfc));document['getElementById'](_0x34cd5d(0xc7))[_0x34cd5d(0x2cd)]='',resetTextareaHeight();}catch(_0x489fa1){console[_0x34cd5d(0xc5)](_0x34cd5d(0x18d),_0x489fa1),showNotification(_0x34cd5d(0x1c3),'error');}}function createUserMessageElement(_0x44403a,_0x711aec,_0x1cfdc0,_0x2ea4ad){const _0x47e4ca=_0x155207,_0x58a6ec=document[_0x47e4ca(0x260)](_0x47e4ca(0x1e7));_0x58a6ec[_0x47e4ca(0x2b4)]=_0x47e4ca(0x270);_0x711aec['length']>0x0&&_0x58a6ec['appendChild'](createPinnedFilesElement(_0x711aec));_0x1cfdc0[_0x47e4ca(0x1ad)]>0x0&&_0x58a6ec[_0x47e4ca(0x25d)](createPinnedResponsesElement(_0x1cfdc0));_0x2ea4ad&&_0x58a6ec[_0x47e4ca(0x25d)](createPinnedPromptElement(_0x2ea4ad));if(_0x44403a){const _0x4a925e=document[_0x47e4ca(0x260)]('p');_0x4a925e[_0x47e4ca(0x1a0)]=_0x44403a,_0x58a6ec[_0x47e4ca(0x25d)](_0x4a925e);}return _0x58a6ec;}function addLoadingMessage(_0xb17e5d){const _0x1fd132=_0x155207,_0x15b05c=document['createElement'](_0x1fd132(0x1e7));return _0x15b05c[_0x1fd132(0x2b4)]='message\x20ai-message\x20loading-message',_0x15b05c[_0x1fd132(0x14c)]=_0x1fd132(0xee)+_0xb17e5d+_0x1fd132(0x194),document[_0x1fd132(0x162)]('messageContainer')[_0x1fd132(0x25d)](_0x15b05c),_0x15b05c;}async function downloadImage(_0x296264,_0x4a9257){const _0x157208=_0x155207;try{const _0x179116=await fetch(_0x296264),_0x79ac15=await _0x179116[_0x157208(0x1e8)](),_0x8c6e0a=window[_0x157208(0x2db)][_0x157208(0x111)](_0x79ac15),_0x3d5c20=document[_0x157208(0x260)]('a');_0x3d5c20[_0x157208(0x282)]=_0x8c6e0a,_0x3d5c20['download']=_0x4a9257,document[_0x157208(0x15f)][_0x157208(0x25d)](_0x3d5c20),_0x3d5c20['click'](),document['body']['removeChild'](_0x3d5c20),window['URL'][_0x157208(0x229)](_0x8c6e0a);}catch(_0x335493){showNotification(_0x157208(0xfe),_0x157208(0xc5));}}function copyImage(_0xeeb0ff){const _0x454fcf=_0x155207;navigator[_0x454fcf(0x23b)][_0x454fcf(0x2a8)](_0xeeb0ff)['then'](()=>showNotification('Lien\x20de\x20l\x27image\x20copi√©\x20dans\x20le\x20presse-papiers!',_0x454fcf(0xfc)))[_0x454fcf(0xfd)](()=>showNotification(_0x454fcf(0x153),'error'));}function shareImage(_0x512b06){const _0x1c7d07=_0x155207;navigator['share']?navigator['share']({'title':_0x1c7d07(0xde),'text':_0x1c7d07(0x1cd),'url':_0x512b06})[_0x1c7d07(0x299)](()=>showNotification(_0x1c7d07(0x20d),_0x1c7d07(0xfc)))[_0x1c7d07(0xfd)](_0x1bfa07=>{const _0x203143=_0x1c7d07;console[_0x203143(0xc5)](_0x203143(0xc8),_0x1bfa07),showNotification(_0x203143(0x25b),_0x203143(0xc5));}):copyImage(_0x512b06);}function pinResponse(_0x1f3457){const _0x11f966=_0x155207,_0x1224b4=_0x1f3457[_0x11f966(0x107)]('div:first-child')[_0x11f966(0x1a0)],_0x802107=_0x1224b4[_0x11f966(0x1ad)]>0x32?_0x1224b4['substring'](0x0,0x32)+_0x11f966(0x21d):_0x1224b4;pinnedResponses[_0x11f966(0x184)]({'text':_0x1224b4,'displayText':_0x802107}),updatePinnedItems();}function updatePinnedItems(){const _0x3db48b=_0x155207,_0x1ea576=document['getElementById'](_0x3db48b(0xd7));_0x1ea576[_0x3db48b(0x14c)]='',pinnedFiles[_0x3db48b(0x267)]((_0x19929f,_0x1ac12a)=>{const _0x4e1df1=_0x3db48b,_0x102222=document[_0x4e1df1(0x260)]('div');_0x102222['className']=_0x4e1df1(0x2c8),_0x102222[_0x4e1df1(0x30f)]('data-type',_0x4e1df1(0x1b0)),_0x102222['innerHTML']=_0x4e1df1(0xff)+(_0x19929f['type'][_0x4e1df1(0x21f)]('image/')?_0x4e1df1(0x19a):'üìÑ')+_0x4e1df1(0x11a)+_0x19929f[_0x4e1df1(0x117)]+'\x22>'+_0x19929f[_0x4e1df1(0x117)]+_0x4e1df1(0x102)+_0x1ac12a+_0x4e1df1(0x1d1),_0x1ea576[_0x4e1df1(0x25d)](_0x102222);}),pinnedResponses[_0x3db48b(0x267)]((_0x3cdc32,_0x4546e5)=>{const _0x43929a=_0x3db48b,_0xc0813d=document[_0x43929a(0x260)](_0x43929a(0x1e7));_0xc0813d[_0x43929a(0x2b4)]=_0x43929a(0x2c8),_0xc0813d[_0x43929a(0x30f)](_0x43929a(0x278),_0x43929a(0x2c2)),_0xc0813d['innerHTML']=_0x43929a(0x2d5)+_0x3cdc32[_0x43929a(0x2e1)]+'\x22>'+_0x3cdc32[_0x43929a(0x283)]+_0x43929a(0x25c)+_0x4546e5+_0x43929a(0x1d1),_0x1ea576[_0x43929a(0x25d)](_0xc0813d);});if(pinnedPrompt){const _0x143d5d=document[_0x3db48b(0x260)](_0x3db48b(0x1e7));_0x143d5d[_0x3db48b(0x2b4)]=_0x3db48b(0x2c8),_0x143d5d['setAttribute'](_0x3db48b(0x278),_0x3db48b(0x274)),_0x143d5d[_0x3db48b(0x14c)]=_0x3db48b(0x1ea)+pinnedPrompt[_0x3db48b(0x103)]+'\x22>'+pinnedPrompt[_0x3db48b(0x103)]+_0x3db48b(0x231),_0x1ea576[_0x3db48b(0x25d)](_0x143d5d);}}function removePinnedItem(_0xc02b2b,_0x164a5f){const _0x56bdf3=_0x155207;if(_0xc02b2b===_0x56bdf3(0x1b0))pinnedFiles[_0x56bdf3(0x17c)](_0x164a5f,0x1);else{if(_0xc02b2b==='response')pinnedResponses[_0x56bdf3(0x17c)](_0x164a5f,0x1);else _0xc02b2b===_0x56bdf3(0x274)&&(pinnedPrompt=null);}updatePinnedItems();}function replyToMessage(_0x565558){const _0x1ef0fc=_0x155207,_0x4d1537=_0x565558[_0x1ef0fc(0x107)]('div:first-child')[_0x1ef0fc(0x1a0)],_0x4221b5=document['getElementById']('userInput');_0x4221b5[_0x1ef0fc(0x2cd)]='>\x20'+_0x4d1537+'\x0a\x0a',_0x4221b5['focus'](),_0x4221b5[_0x1ef0fc(0xfb)](_0x4221b5[_0x1ef0fc(0x2cd)]['length'],_0x4221b5[_0x1ef0fc(0x2cd)][_0x1ef0fc(0x1ad)]);}function readFileAsBase64(_0x5a63fe){return new Promise((_0x3a0066,_0x48c492)=>{const _0x2cfdee=_0x579b,_0x26eb3d=new FileReader();_0x26eb3d['onload']=()=>_0x3a0066(_0x26eb3d['result'][_0x2cfdee(0x1a3)](',')[0x1]),_0x26eb3d[_0x2cfdee(0x179)]=_0x48c492,_0x26eb3d['readAsDataURL'](_0x5a63fe);});}function hasEnoughCredits(_0x44f780,_0x5252ac){const _0xc47cbf=_0x155207,_0x30e21b=_0x5252ac>0x0?_0x5252ac:0x1;return _0x44f780==='gemini-exp-1206'||_0x44f780==='gemini-1.0-pro'?currentUser[_0xc47cbf(0x2c7)]>=_0x30e21b||currentUser[_0xc47cbf(0x297)]>=_0x30e21b||hasValidSubscription():currentUser['paidCredits']>=_0x30e21b||hasValidSubscription();}async function updateCredits(_0xd25124,_0x5866b2){const _0x3ae434=_0x155207;if(hasValidSubscription()&&!isImageGenerationModel(_0xd25124))return;const _0x529f73=db[_0x3ae434(0x2ad)](_0x3ae434(0x2f6)+currentUser['username']);try{await _0x529f73[_0x3ae434(0x182)](_0x49d169=>{const _0x2a6572=_0x3ae434;if(_0x49d169){if(isImageGenerationModel(_0xd25124)){if(hasValidSubscription()){const _0x1dc362=_0x49d169[_0x2a6572(0x174)]?.[_0x2a6572(0xcd)]||0x0;_0x1dc362>=0x5&&(_0x49d169[_0x2a6572(0x297)]>=0x5?_0x49d169[_0x2a6572(0x297)]-=0x5:_0x49d169[_0x2a6572(0x2c7)]=Math[_0x2a6572(0x199)](0x0,_0x49d169[_0x2a6572(0x2c7)]-0x5));}else _0x49d169['paidCredits']>=0x5?_0x49d169[_0x2a6572(0x297)]-=0x5:_0x49d169[_0x2a6572(0x2c7)]=Math[_0x2a6572(0x199)](0x0,_0x49d169[_0x2a6572(0x2c7)]-0x5);}else{if(!hasValidSubscription()){if(_0xd25124==='gemini-exp-1206')_0x49d169[_0x2a6572(0x297)]>=_0x5866b2?_0x49d169[_0x2a6572(0x297)]-=_0x5866b2:_0x49d169[_0x2a6572(0x2c7)]-=_0x5866b2;else{if(_0xd25124===_0x2a6572(0x208)){if(_0x49d169[_0x2a6572(0x2c7)]>=_0x5866b2)_0x49d169[_0x2a6572(0x2c7)]-=_0x5866b2;else{const _0x5977c6=_0x5866b2-_0x49d169[_0x2a6572(0x2c7)];_0x49d169[_0x2a6572(0x2c7)]=0x0,_0x49d169[_0x2a6572(0x297)]=Math[_0x2a6572(0x199)](0x0,_0x49d169[_0x2a6572(0x297)]-_0x5977c6);}}else _0x49d169[_0x2a6572(0x297)]=Math['max'](0x0,_0x49d169['paidCredits']-_0x5866b2);}}}_0x49d169[_0x2a6572(0x2c7)]=Math[_0x2a6572(0x199)](0x0,_0x49d169[_0x2a6572(0x2c7)]),_0x49d169[_0x2a6572(0x297)]=Math[_0x2a6572(0x199)](0x0,_0x49d169[_0x2a6572(0x297)]);}return _0x49d169;});const _0x3932fb=await _0x529f73[_0x3ae434(0x2e6)](_0x3ae434(0x2cd)),_0x201838=_0x3932fb[_0x3ae434(0x307)]();_0x201838&&(currentUser[_0x3ae434(0x2c7)]=_0x201838[_0x3ae434(0x2c7)],currentUser[_0x3ae434(0x297)]=_0x201838[_0x3ae434(0x297)],document[_0x3ae434(0x162)](_0x3ae434(0x2c7))['textContent']=currentUser['freeCredits'],document[_0x3ae434(0x162)]('paidCredits')[_0x3ae434(0x1a0)]=currentUser[_0x3ae434(0x297)],currentUser[_0x3ae434(0x2c7)]===0x0&&currentUser[_0x3ae434(0x297)]<0x5&&showNotification(_0x3ae434(0x1fd),_0x3ae434(0x149)));}catch(_0x2d69e8){console[_0x3ae434(0xc5)](_0x3ae434(0x203),_0x2d69e8),showNotification(_0x3ae434(0x2bd),_0x3ae434(0xc5));}}async function addCreditsToUser(_0x147b53){const _0x3ca9e1=_0x155207,_0x3781b5=db[_0x3ca9e1(0x2ad)](_0x3ca9e1(0x2f6)+currentUser[_0x3ca9e1(0x227)]);await _0x3781b5[_0x3ca9e1(0x182)](_0x2fa96f=>{const _0x2c82f3=_0x3ca9e1;return _0x2fa96f&&(_0x2fa96f[_0x2c82f3(0x297)]+=_0x147b53),_0x2fa96f;}),currentUser[_0x3ca9e1(0x297)]=(await _0x3781b5[_0x3ca9e1(0x26b)]('paidCredits')[_0x3ca9e1(0x2e6)](_0x3ca9e1(0x2cd)))['val'](),document['getElementById'](_0x3ca9e1(0x297))[_0x3ca9e1(0x1a0)]=currentUser[_0x3ca9e1(0x297)];}function copyResponse(_0x3ddca9){const _0x5bb6ce=_0x155207,_0x2911be=_0x3ddca9['querySelector'](_0x5bb6ce(0x2dd))['textContent'];navigator['clipboard'][_0x5bb6ce(0x2a8)](_0x2911be)[_0x5bb6ce(0x299)](()=>{const _0x700437=_0x5bb6ce;showNotification(_0x700437(0xe4),'success');});}async function exportResponse(_0x4dc452,_0x5f0093){const _0x24afff=_0x155207,_0x19fc18=_0x4dc452[_0x24afff(0x107)](_0x24afff(0x2dd))[_0x24afff(0x1a0)];if(_0x5f0093===_0x24afff(0x1ca)){const _0x15131e=await generateWordDoc(_0x19fc18);saveAs(_0x15131e,_0x24afff(0x2e9));}else{if(_0x5f0093==='pdf'){const _0x45b7b3=await generatePDF(_0x19fc18);saveAs(_0x45b7b3,_0x24afff(0x1b2));}}showNotification('Export\x20en\x20'+_0x5f0093[_0x24afff(0x313)]()+_0x24afff(0x1bc),_0x24afff(0xfc));}async function generateWordDoc(_0x44c822){const _0x1d038f=_0x155207,_0x1be646=_0x1d038f(0xeb)+_0x44c822+_0x1d038f(0x16f),_0x7cd6e4=new PizZip();_0x7cd6e4[_0x1d038f(0x1b0)](_0x1d038f(0x183),_0x1be646);const _0x3e3dbe=await _0x7cd6e4[_0x1d038f(0x1c4)]({'type':_0x1d038f(0x1e8),'mimeType':_0x1d038f(0x2da)});return _0x3e3dbe;}function generatePDF(_0x4eb499){const _0x1d4e98=_0x155207,{jsPDF:_0x38bfd1}=window['jspdf'],_0x5e2218=new _0x38bfd1();_0x5e2218[_0x1d4e98(0x291)](0x12),_0x5e2218['text']('',0x14,0x14),_0x5e2218[_0x1d4e98(0x291)](0xc);const _0xe20f35=_0x5e2218['splitTextToSize'](_0x4eb499,0xaa);let _0x3ac939=0x1e;const _0x4e0874=_0x5e2218[_0x1d4e98(0x121)]['pageSize'][_0x1d4e98(0x135)];for(let _0x4fcf25=0x0;_0x4fcf25<_0xe20f35[_0x1d4e98(0x1ad)];_0x4fcf25++){_0x3ac939>_0x4e0874-0x14&&(_0x5e2218['addPage'](),_0x3ac939=0x14),_0x5e2218['text'](_0xe20f35[_0x4fcf25],0x14,_0x3ac939),_0x3ac939+=0x7;}return _0x5e2218[_0x1d4e98(0x173)]('blob');}function shareResponse(_0x3f4638){const _0x5a359a=_0x155207,_0x291c14=_0x3f4638[_0x5a359a(0x107)](_0x5a359a(0x2dd))[_0x5a359a(0x1a0)];navigator[_0x5a359a(0x146)]?navigator[_0x5a359a(0x146)]({'title':'','text':_0x291c14})[_0x5a359a(0x299)](()=>{showNotification('Partage\x20r√©ussi','success');})[_0x5a359a(0xfd)](_0x22940e=>{const _0x4a4036=_0x5a359a;console['error']('Erreur\x20lors\x20du\x20partage:',_0x22940e),showNotification('Erreur\x20lors\x20du\x20partage',_0x4a4036(0xc5));}):showNotification(_0x5a359a(0xd5),_0x5a359a(0xc5));}function hasValidSubscription(){const _0x47b92e=_0x155207;if(!currentUser[_0x47b92e(0xd2)]||!currentUser['subscriptionEndDate'])return![];return new Date()<new Date(currentUser[_0x47b92e(0x288)]);}function buySubscription(){const _0x3deb0c=_0x155207,_0x47b517=document[_0x3deb0c(0x162)](_0x3deb0c(0x2b9))['value'];if(!_0x47b517){showNotification(_0x3deb0c(0x225),_0x3deb0c(0xc5));return;}const _0x3b643d={'24h':0x1f4,'3d':0x4b0,'7d':0x960,'30d':0x1f40,'3m':0x4e20},_0x472d81=_0x3b643d[_0x47b517];var _0x38fd07=FedaPay[_0x3deb0c(0x296)]({'public_key':'pk_live_TfSz212W0xSMKK7oPEogkFmp','transaction':{'amount':_0x472d81,'description':'Achat\x20d\x27un\x20forfait\x20'+_0x47b517+_0x3deb0c(0x207)},'customer':{'email':'client@example.com'},'onComplete':async function(_0x4a04a5){const _0x221e54=_0x3deb0c;if(_0x4a04a5[_0x221e54(0x29e)]===FedaPay[_0x221e54(0x290)]){const _0x49c9fa={'id':_0x4a04a5['id'],'description':_0x221e54(0x211)+_0x47b517+_0x221e54(0x207),'amount':_0x472d81};await activateSubscription(_0x47b517),showInvoiceDetails(_0x49c9fa),showNotification('Forfait\x20'+_0x47b517+'\x20activ√©\x20avec\x20succ√®s\x20!',_0x221e54(0xfc)),await checkFirstPurchaseAndRewardReferrer(currentUser['username'],_0x472d81);}else showNotification(_0x221e54(0x14d),_0x221e54(0xc5));}});_0x38fd07[_0x3deb0c(0x178)]();}async function activateSubscription(_0x5bcdf2){const _0x2fb567=_0x155207,_0x116e06={'24h':0x1,'3d':0x3,'7d':0x7,'30d':0x1e,'3m':0x5a},_0x3548a5=_0x116e06[_0x5bcdf2],_0x48d285=new Date();_0x48d285[_0x2fb567(0x258)](_0x48d285['getDate']()+_0x3548a5),currentUser[_0x2fb567(0xd2)]=_0x5bcdf2,currentUser['subscriptionEndDate']=_0x48d285[_0x2fb567(0x13a)](),await syncUserData(),document[_0x2fb567(0x162)]('subscription')[_0x2fb567(0x1a0)]=_0x5bcdf2;}function buyCredits(){const _0x55163f=_0x155207,_0x741f6e=document[_0x55163f(0x162)](_0x55163f(0x190))[_0x55163f(0x2cd)];if(!_0x741f6e){showNotification('Veuillez\x20s√©lectionner\x20un\x20pack\x20de\x20cr√©dits.',_0x55163f(0xc5));return;}const _0x2709ec={'10':0xc8,'100':0x3e8,'500':0x1194,'1000':0x1f40},_0x5bc93e=_0x2709ec[_0x741f6e];var _0x2eb971=FedaPay[_0x55163f(0x296)]({'public_key':_0x55163f(0x249),'transaction':{'amount':_0x5bc93e,'description':_0x55163f(0x27f)+_0x741f6e+_0x55163f(0xdb)},'customer':{'email':_0x55163f(0x28c)},'onComplete':async function(_0x373e21){const _0x143d73=_0x55163f;if(_0x373e21[_0x143d73(0x29e)]===FedaPay[_0x143d73(0x290)]){const _0x56087f={'id':_0x373e21['id'],'description':_0x143d73(0x27f)+_0x741f6e+_0x143d73(0xdb),'amount':_0x5bc93e};await addCreditsToUser(parseInt(_0x741f6e)),showInvoiceDetails(_0x56087f),showNotification(_0x741f6e+'\x20cr√©dits\x20ont\x20√©t√©\x20ajout√©s\x20√†\x20votre\x20compte.',_0x143d73(0xfc)),await checkFirstPurchaseAndRewardReferrer(currentUser[_0x143d73(0x227)],_0x5bc93e);}else showNotification(_0x143d73(0x14d),_0x143d73(0xc5));}});_0x2eb971[_0x55163f(0x178)]();}async function checkFirstPurchaseAndRewardReferrer(_0x139687,_0x4be912){const _0x30dac0=_0x155207,_0x2ae134=db[_0x30dac0(0x2ad)](_0x30dac0(0x2f6)+_0x139687),_0x475f97=await _0x2ae134[_0x30dac0(0x2e6)](_0x30dac0(0x2cd)),_0x50536b=_0x475f97['val']();if(_0x50536b&&!_0x50536b['firstPurchase']){await _0x2ae134['update']({'firstPurchase':!![]});if(_0x50536b[_0x30dac0(0x215)]){const _0x3cf529=await db[_0x30dac0(0x2ad)](_0x30dac0(0x189))[_0x30dac0(0x264)](_0x30dac0(0x2c9))['equalTo'](_0x50536b[_0x30dac0(0x215)])['once']('value'),_0x3c2b5f=_0x3cf529['val']();if(_0x3c2b5f){const _0x4fe4cb=Object['keys'](_0x3c2b5f)[0x0],_0x5541f8=db[_0x30dac0(0x2ad)]('users/'+_0x4fe4cb);await _0x5541f8[_0x30dac0(0x182)](_0x53ed0e=>{const _0x149a62=_0x30dac0;return _0x53ed0e&&(_0x53ed0e[_0x149a62(0x297)]=(_0x53ed0e[_0x149a62(0x297)]||0x0)+0xa,_0x53ed0e[_0x149a62(0x222)]&&_0x53ed0e[_0x149a62(0x222)][_0x139687]&&(_0x53ed0e[_0x149a62(0x222)][_0x139687][_0x149a62(0x309)]=!![])),_0x53ed0e;}),await updateReferralStats(_0x4fe4cb),showNotification(_0x30dac0(0x26d)+_0x139687+_0x30dac0(0x209),_0x30dac0(0xfc));}}}}function getShareMessage(_0x5bf2c7){const _0x5ca322=_0x155207;return encodeURIComponent(_0x5ca322(0xc0)+_0x5bf2c7+_0x5ca322(0x30b));}function shareOnFacebook(){const _0x376ed5=_0x155207,_0x4b891a=document[_0x376ed5(0x162)]('referralLink')[_0x376ed5(0x2cd)],_0x4c0c07=getShareMessage(_0x4b891a);window[_0x376ed5(0x178)](_0x376ed5(0x22e)+_0x4b891a+_0x376ed5(0x2ab)+_0x4c0c07,_0x376ed5(0x26a));}function shareOnTwitter(){const _0x5e320b=_0x155207,_0x37b2a7=document[_0x5e320b(0x162)](_0x5e320b(0x1ef))['value'],_0x4c009b=getShareMessage(_0x37b2a7);window['open'](_0x5e320b(0x2e5)+_0x37b2a7+_0x5e320b(0x168)+_0x4c009b,_0x5e320b(0x26a));}function shareOnLinkedIn(){const _0x17ed23=_0x155207,_0x4c9b13=document[_0x17ed23(0x162)]('referralLink')[_0x17ed23(0x2cd)],_0x2d7344=getShareMessage(_0x4c9b13);window['open'](_0x17ed23(0x2df)+_0x4c9b13+'&title=Boostez\x20votre\x20apprentissage\x20avec\x20Eduque\x20moi&summary='+_0x2d7344,_0x17ed23(0x26a));}function shareOnWhatsApp(){const _0x43e36b=_0x155207,_0x152969=document['getElementById'](_0x43e36b(0x1ef))[_0x43e36b(0x2cd)],_0x4ffea6=getShareMessage(_0x152969);window['open'](_0x43e36b(0x2f2)+_0x4ffea6,_0x43e36b(0x26a));}function copyReferralLink(){const _0x329952=_0x155207,_0x52a28c=document[_0x329952(0x162)](_0x329952(0x1ef));_0x52a28c[_0x329952(0x304)](),document['execCommand'](_0x329952(0x1e6)),showNotification('Lien\x20de\x20partage\x20copi√©\x20!','success');}function showNotification(_0x45ef88,_0x399063){const _0x11b516=_0x155207,_0x2a2700=document[_0x11b516(0x260)]('div');_0x2a2700[_0x11b516(0x1a0)]=_0x45ef88,_0x2a2700[_0x11b516(0x2b4)]=_0x11b516(0x11f)+_0x399063,document[_0x11b516(0x15f)]['appendChild'](_0x2a2700),setTimeout(()=>{const _0x56c4b5=_0x11b516;_0x2a2700['classList'][_0x56c4b5(0x1d8)](_0x56c4b5(0x151)),setTimeout(()=>{const _0x271899=_0x56c4b5;_0x2a2700[_0x271899(0x2f5)][_0x271899(0x301)]('show'),setTimeout(()=>{const _0x317dcc=_0x271899;_0x2a2700[_0x317dcc(0x301)]();},0x12c);},0xbb8);},0x64);}function showPaymentNotification(_0x5a5722){const _0x3c7041=_0x155207,_0x5b640d=document[_0x3c7041(0x260)](_0x3c7041(0x1e7));_0x5b640d[_0x3c7041(0x2b4)]=_0x3c7041(0x17e),_0x5b640d[_0x3c7041(0x14c)]=_0x3c7041(0x1a2)+_0x5a5722+_0x3c7041(0x1e2),document['body'][_0x3c7041(0x25d)](_0x5b640d),setTimeout(()=>{const _0x4e4f91=_0x3c7041;_0x5b640d[_0x4e4f91(0x2f5)][_0x4e4f91(0x1d8)](_0x4e4f91(0x151)),setTimeout(()=>{const _0x2a86b8=_0x4e4f91;_0x5b640d[_0x2a86b8(0x2f5)][_0x2a86b8(0x301)]('show'),setTimeout(()=>{const _0x5cdf34=_0x2a86b8;_0x5b640d[_0x5cdf34(0x301)]();},0x12c);},0x2710);},0x64);}async function showPaymentNotificationWithFreeOption(_0x122250){return new Promise(_0x5a0a72=>{const _0x4b807b=_0x579b,_0x555a29=document['createElement'](_0x4b807b(0x1e7));_0x555a29['className']='notification\x20error',_0x555a29[_0x4b807b(0x14c)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x122250+_0x4b807b(0xca),document[_0x4b807b(0x15f)][_0x4b807b(0x25d)](_0x555a29),window[_0x4b807b(0x279)]=function(_0x5c85dc){const _0x236eba=_0x4b807b;_0x555a29[_0x236eba(0x301)](),_0x5a0a72(_0x5c85dc);},setTimeout(()=>{const _0x2a882b=_0x4b807b;_0x555a29['classList']['add'](_0x2a882b(0x151));},0x64);});}function toggleTheme(){const _0x448629=_0x155207,_0x187697=document[_0x448629(0x15f)],_0x5e6a73=_0x187697[_0x448629(0x298)](_0x448629(0x24b)),_0x1b7f1c=_0x5e6a73===_0x448629(0x1eb)?_0x448629(0x294):_0x448629(0x1eb);_0x187697[_0x448629(0x30f)]('data-theme',_0x1b7f1c),localStorage[_0x448629(0x1bd)](_0x448629(0x1ec),_0x1b7f1c),updateThemeIcon(_0x1b7f1c),document[_0x448629(0x107)](_0x448629(0x300))[_0x448629(0x30f)](_0x448629(0x16d),_0x1b7f1c);}function updateThemeIcon(_0x58b523){const _0x585d58=_0x155207,_0x505eaa=document[_0x585d58(0x107)](_0x585d58(0x2fb));_0x505eaa['className']=_0x58b523===_0x585d58(0x1eb)?'fas\x20fa-sun':_0x585d58(0x2ff);}function toggleSidebar(){const _0x4a6a12=_0x155207,_0x4b5acf=document['querySelector'](_0x4a6a12(0x28d)),_0x2df637=document['querySelector'](_0x4a6a12(0x186));_0x4b5acf[_0x4a6a12(0x2f5)]['toggle']('visible'),_0x2df637['classList'][_0x4a6a12(0x2a7)](_0x4a6a12(0x234)),localStorage[_0x4a6a12(0x1bd)](_0x4a6a12(0xc2),_0x4b5acf[_0x4a6a12(0x2f5)][_0x4a6a12(0x13b)](_0x4a6a12(0x228)));}function saveConversation(){const _0x507261=_0x155207;if(!currentUser)return;const _0xebffb3=currentConversation['id']||Date['now']()[_0x507261(0x287)]();conversations[_0xebffb3]=currentConversation,currentConversation['id']=_0xebffb3,localStorage[_0x507261(0x1bd)]('conversations_'+currentUser[_0x507261(0x227)],JSON[_0x507261(0x113)](conversations)),updateConversationHistory();}function loadConversationHistory(){const _0x2c0af=_0x155207;if(!currentUser)return;const _0x320fd1=localStorage['getItem'](_0x2c0af(0x29c)+currentUser[_0x2c0af(0x227)]);_0x320fd1&&(conversations=JSON[_0x2c0af(0x101)](_0x320fd1),updateConversationHistory());}function updateConversationHistory(){const _0x2a1cb2=_0x155207,_0x45de32=document[_0x2a1cb2(0x162)](_0x2a1cb2(0xe6));_0x45de32[_0x2a1cb2(0x14c)]='';const _0xcf0779=Object['keys'](conversations)[_0x2a1cb2(0x15d)]((_0x3bfc1e,_0x260c0a)=>parseInt(_0x260c0a)-parseInt(_0x3bfc1e));_0xcf0779[_0x2a1cb2(0x267)](_0x1f71f4=>{const _0x277fb1=_0x2a1cb2,_0x1511d6=conversations[_0x1f71f4],_0x475d95=document[_0x277fb1(0x260)](_0x277fb1(0x1e7));_0x475d95[_0x277fb1(0x2b4)]='conversation-item';const _0x268bc9=document[_0x277fb1(0x260)]('span');_0x268bc9[_0x277fb1(0x1a0)]=_0x277fb1(0x243)+new Date(parseInt(_0x1f71f4))[_0x277fb1(0x289)](),_0x268bc9['onclick']=()=>loadConversation(_0x1f71f4);const _0x401312=document[_0x277fb1(0x260)]('i');_0x401312[_0x277fb1(0x2b4)]=_0x277fb1(0x2f1),_0x401312[_0x277fb1(0x18a)]=_0x207be4=>{_0x207be4['stopPropagation'](),deleteConversation(_0x1f71f4);},_0x475d95[_0x277fb1(0x25d)](_0x268bc9),_0x475d95[_0x277fb1(0x25d)](_0x401312),_0x45de32[_0x277fb1(0x25d)](_0x475d95);});}function deleteConversation(_0xf1b5e9){const _0x2d3c72=_0x155207;confirm('√ätes-vous\x20s√ªr\x20de\x20vouloir\x20supprimer\x20cette\x20conversation\x20?')&&(delete conversations[_0xf1b5e9],localStorage[_0x2d3c72(0x1bd)]('conversations_'+currentUser['username'],JSON['stringify'](conversations)),updateConversationHistory());}function createNewConversation(){const _0x262ea2=_0x155207;currentConversation[_0x262ea2(0x1ad)]>0x0&&saveConversation();currentConversation=[];const _0xbcd795=document['getElementById']('messageContainer');_0xbcd795[_0x262ea2(0x14c)]='',updateConversationHistory(),addMessageToChat('ai',_0x262ea2(0x14e)),_0xbcd795[_0x262ea2(0x23f)]=0x0,document[_0x262ea2(0x162)](_0x262ea2(0xc7))['focus']();}function loadConversation(_0x39dbd1){const _0x2ff090=_0x155207;currentConversation[_0x2ff090(0x1ad)]>0x0&&currentConversation['id']!==_0x39dbd1&&saveConversation();currentConversation=conversations[_0x39dbd1],currentConversation['id']=_0x39dbd1;const _0xbbff0f=document[_0x2ff090(0x162)](_0x2ff090(0x292));_0xbbff0f[_0x2ff090(0x14c)]='',currentConversation[_0x2ff090(0x267)](_0x2742d3=>{const _0x56f5b4=_0x2ff090;addMessageToChat(_0x2742d3[_0x56f5b4(0x2d1)],_0x2742d3[_0x56f5b4(0x16d)]);}),_0xbbff0f[_0x2ff090(0x23f)]=0x0;}async function syncUserData(){const _0x3b0a6b=_0x155207;if(!currentUser)return;const _0x1679b3={'freeCredits':currentUser['freeCredits']||0x0,'paidCredits':currentUser[_0x3b0a6b(0x297)]||0x0,'lastFreeCreditsReset':currentUser[_0x3b0a6b(0x1d7)]||new Date()[_0x3b0a6b(0x13a)]()};currentUser[_0x3b0a6b(0xd2)]&&(_0x1679b3[_0x3b0a6b(0xd2)]=currentUser[_0x3b0a6b(0xd2)]);currentUser[_0x3b0a6b(0x288)]&&(_0x1679b3[_0x3b0a6b(0x288)]=currentUser[_0x3b0a6b(0x288)]);const _0x120832=db[_0x3b0a6b(0x2ad)](_0x3b0a6b(0x2f6)+currentUser[_0x3b0a6b(0x227)]);try{await _0x120832[_0x3b0a6b(0x311)](_0x1679b3),console[_0x3b0a6b(0x24c)](_0x3b0a6b(0x269),_0x1679b3);}catch(_0x53852d){console[_0x3b0a6b(0xc5)]('Erreur\x20lors\x20de\x20la\x20mise\x20√†\x20jour\x20des\x20donn√©es\x20utilisateur:',_0x53852d),showNotification(_0x3b0a6b(0x250),_0x3b0a6b(0xc5));}}function adjustTextareaHeight(){const _0xba5293=_0x155207,_0xb597a5=document[_0xba5293(0x162)](_0xba5293(0xc7));_0xb597a5['style'][_0xba5293(0x135)]=_0xba5293(0x27b),_0xb597a5['style']['height']=_0xb597a5[_0xba5293(0x1ac)]+'px';}function resetTextareaHeight(){const _0x3503c1=_0x155207,_0x56acc2=document['getElementById'](_0x3503c1(0xc7));_0x56acc2[_0x3503c1(0x140)][_0x3503c1(0x135)]=_0x3503c1(0x27b);}async function attemptAutoLogin(){const _0x67a0e2=_0x155207,_0x354186=getStoredLoginInfo();if(_0x354186[_0x67a0e2(0x227)]&&_0x354186[_0x67a0e2(0x1e1)])try{const _0x3eb626=db[_0x67a0e2(0x2ad)](_0x67a0e2(0x2f6)+_0x354186[_0x67a0e2(0x227)]),_0x318525=await _0x3eb626['once'](_0x67a0e2(0x2cd));if(_0x318525[_0x67a0e2(0x1c1)]()&&_0x318525[_0x67a0e2(0x307)]()['password']===_0x354186[_0x67a0e2(0x1e1)]){const _0x20154e=_0x318525[_0x67a0e2(0x307)]();currentUser={'username':_0x354186[_0x67a0e2(0x227)],'freeCredits':_0x20154e[_0x67a0e2(0x2c7)],'paidCredits':_0x20154e[_0x67a0e2(0x297)],'subscription':_0x20154e[_0x67a0e2(0xd2)],'subscriptionEndDate':_0x20154e[_0x67a0e2(0x288)],'lastFreeCreditsReset':_0x20154e['lastFreeCreditsReset']},await resetFreeCreditsIfNeeded(),updateUIForLoggedInUser(),console[_0x67a0e2(0x24c)](_0x67a0e2(0x265));}else clearLoginInfo(),console[_0x67a0e2(0x24c)]('√âchec\x20de\x20la\x20connexion\x20automatique\x20:\x20informations\x20invalides');}catch(_0x59a41d){console[_0x67a0e2(0xc5)]('Erreur\x20lors\x20de\x20la\x20connexion\x20automatique:',_0x59a41d),clearLoginInfo();}}function saveSelectedModel(){const _0x582deb=_0x155207,_0x572ee1=document[_0x582deb(0x162)]('modelSelect')[_0x582deb(0x2cd)];localStorage[_0x582deb(0x1bd)](_0x582deb(0x27e),_0x572ee1);}function loadSelectedModel(){const _0x4b651f=_0x155207,_0xbf3d2d=localStorage[_0x4b651f(0x22b)](_0x4b651f(0x27e));_0xbf3d2d&&(document[_0x4b651f(0x162)](_0x4b651f(0x123))[_0x4b651f(0x2cd)]=_0xbf3d2d);}function showUpgradeButton(_0x1aea55){const _0x383ba5=_0x155207,_0x20acf3=document['createElement'](_0x383ba5(0x28a));_0x20acf3[_0x383ba5(0x1a0)]=_0x383ba5(0x193),_0x20acf3['className']=_0x383ba5(0x1a4),_0x20acf3[_0x383ba5(0x18a)]=()=>{const _0x3d02e5=_0x383ba5;hasValidSubscription()||currentUser[_0x3d02e5(0x297)]>0x0?(document[_0x3d02e5(0x162)](_0x3d02e5(0x123))[_0x3d02e5(0x2cd)]=_0x3d02e5(0xd8),showNotification(_0x3d02e5(0x100),_0x3d02e5(0xfc))):showPaymentNotification(_0x3d02e5(0x192));},_0x1aea55[_0x383ba5(0x25d)](_0x20acf3);}function copyUserMessage(_0x1a080e){const _0x3998e7=_0x155207;let _0xacb6bd='';for(const _0x875f1a of _0x1a080e[_0x3998e7(0x167)]){if(_0x875f1a['tagName']==='P')_0xacb6bd+=_0x875f1a['textContent']+'\x0a';else{if(_0x875f1a['classList'][_0x3998e7(0x13b)](_0x3998e7(0x191))){const _0x322c0a=Array[_0x3998e7(0xdc)](_0x875f1a[_0x3998e7(0x2fc)]('.file-name'))[_0x3998e7(0x20b)](_0x57f4db=>_0x57f4db[_0x3998e7(0x1a0)])[_0x3998e7(0x248)](',\x20');_0xacb6bd+=_0x3998e7(0x141)+_0x322c0a+'\x0a';}else{if(_0x875f1a[_0x3998e7(0x2f5)][_0x3998e7(0x13b)](_0x3998e7(0x2d8))){const _0x10222d=Array[_0x3998e7(0xdc)](_0x875f1a[_0x3998e7(0x2fc)](_0x3998e7(0x19f)))[_0x3998e7(0x20b)](_0x5537f3=>_0x5537f3['textContent'])[_0x3998e7(0x248)]('\x0a');_0xacb6bd+=_0x3998e7(0xdd)+_0x10222d+'\x0a';}else{if(_0x875f1a[_0x3998e7(0x2f5)]['contains']('pinned-prompt-message')){const _0x18fef4=_0x875f1a[_0x3998e7(0x107)](_0x3998e7(0x145))[_0x3998e7(0x1a0)];_0xacb6bd+=_0x3998e7(0x2a1)+_0x18fef4+'\x0a';}}}}}navigator[_0x3998e7(0x23b)][_0x3998e7(0x2a8)](_0xacb6bd['trim']())[_0x3998e7(0x299)](()=>{const _0xb48bdb=_0x3998e7;showNotification(_0xb48bdb(0xcf),_0xb48bdb(0xfc));});}function animateResponse(_0x5b5433,_0x5e3276){const _0xb45444=_0x155207;let _0x41bc29=0x0;_0x5b5433[_0xb45444(0x1a0)]='';const _0x166127=setInterval(()=>{const _0x5c842f=_0xb45444;_0x41bc29<_0x5e3276['length']?(_0x5b5433[_0x5c842f(0x1a0)]+=_0x5e3276[_0x41bc29],_0x41bc29++):clearInterval(_0x166127);},0x1);}function loadPromptCategories(){const _0x5c2325=_0x155207,_0x227879=document[_0x5c2325(0x162)]('promptCategories');_0x227879[_0x5c2325(0x14c)]='',db['ref'](_0x5c2325(0x2ea))['once'](_0x5c2325(0x2cd),_0x52d546=>{const _0x198cbe=_0x5c2325;prompts=_0x52d546[_0x198cbe(0x307)]()||{};const _0x1ebde7=[...new Set(Object[_0x198cbe(0x18e)](prompts)['map'](_0x4f3c73=>_0x4f3c73[_0x198cbe(0x210)]))];_0x1ebde7['forEach'](_0x504473=>{const _0x4e4085=_0x198cbe,_0x50fe1c=document[_0x4e4085(0x260)]('li');_0x50fe1c[_0x4e4085(0x1a0)]=_0x504473,_0x50fe1c['onclick']=()=>{const _0x33c2e2=_0x4e4085;document[_0x33c2e2(0x2fc)]('#promptCategories\x20li')[_0x33c2e2(0x267)](_0x1a8766=>_0x1a8766[_0x33c2e2(0x2f5)][_0x33c2e2(0x301)]('active')),_0x50fe1c['classList'][_0x33c2e2(0x1d8)](_0x33c2e2(0x1d5)),loadPromptsForCategory(_0x504473);},_0x227879[_0x4e4085(0x25d)](_0x50fe1c);}),_0x1ebde7[_0x198cbe(0x1ad)]>0x0&&(loadPromptsForCategory(_0x1ebde7[0x0]),_0x227879['firstChild'][_0x198cbe(0x2f5)][_0x198cbe(0x1d8)]('active'));});}function loadPromptsForCategory(_0x119822){const _0x44920b=_0x155207,_0x513794=document[_0x44920b(0x162)](_0x44920b(0xcc));_0x513794['innerHTML']='',Object[_0x44920b(0x2b3)](prompts)['forEach'](([_0x4abfc0,_0xae7590])=>{const _0x2a903a=_0x44920b;if(_0xae7590[_0x2a903a(0x210)]===_0x119822){const _0x3e3d2a=document[_0x2a903a(0x260)]('li');_0x3e3d2a['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prompt-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22prompt-title\x22>'+_0xae7590[_0x2a903a(0x103)]+_0x2a903a(0x144),_0x3e3d2a[_0x2a903a(0x107)](_0x2a903a(0x1f4))[_0x2a903a(0x30f)]('onclick',_0x2a903a(0x213)+_0x4abfc0+'\x27,\x20this)'),_0x3e3d2a['querySelector'](_0x2a903a(0x1f4))[_0x2a903a(0x30f)](_0x2a903a(0x2fd),JSON[_0x2a903a(0x113)](_0xae7590)),_0x513794[_0x2a903a(0x25d)](_0x3e3d2a);}});}function selectPrompt(_0x4b1e96,_0x4b463b){const _0x3af30f=_0x155207,_0x51fa45=JSON[_0x3af30f(0x101)](_0x4b463b[_0x3af30f(0x298)]('data-prompt'));pinnedPrompt={'id':_0x4b1e96,..._0x51fa45},updatePinnedPrompt(),closePromptModal(),showNotification(_0x3af30f(0x1d4),_0x3af30f(0xfc));const _0x1e4d2f=document[_0x3af30f(0x162)]('userInput');_0x1e4d2f[_0x3af30f(0x16b)]=pinnedPrompt[_0x3af30f(0x1df)]||'Tapez\x20votre\x20texte\x20ici...',adjustTextareaHeight();}function closePromptModal(){const _0x294f1f=_0x155207;document['getElementById'](_0x294f1f(0x237))[_0x294f1f(0x140)][_0x294f1f(0x261)]='none';}function togglePromptList(){const _0x151010=_0x155207,_0x149b63=document['getElementById'](_0x151010(0x237));_0x149b63['style'][_0x151010(0x261)]=_0x151010(0xf0),loadPromptCategories();}function updatePinnedPrompt(){const _0x4d0090=_0x155207,_0x4ba53a=document[_0x4d0090(0x162)](_0x4d0090(0xd7)),_0x4fadcb=_0x4ba53a[_0x4d0090(0x107)](_0x4d0090(0x1c9));_0x4fadcb&&_0x4fadcb['remove']();if(pinnedPrompt){const _0x1bd089=document['createElement'](_0x4d0090(0x1e7));_0x1bd089[_0x4d0090(0x2b4)]='pinned-item',_0x1bd089[_0x4d0090(0x30f)](_0x4d0090(0x278),_0x4d0090(0x274)),_0x1bd089[_0x4d0090(0x14c)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>ü§ñ</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22'+pinnedPrompt['title']+'\x22>'+pinnedPrompt['title']+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedPrompt()\x22>‚ùå</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x4ba53a['appendChild'](_0x1bd089);}}function removePinnedPrompt(){pinnedPrompt=null,updatePinnedPrompt();}function openLibrary(){const _0x43d2d2=_0x155207;console[_0x43d2d2(0x24c)](_0x43d2d2(0x2af));if(currentUser){console[_0x43d2d2(0x24c)]('Utilisateur\x20connect√©:',currentUser);const _0x404047={'username':currentUser['username'],'freeCredits':currentUser[_0x43d2d2(0x2c7)],'paidCredits':currentUser[_0x43d2d2(0x297)],'subscription':currentUser['subscription']};localStorage['setItem'](_0x43d2d2(0x212),JSON[_0x43d2d2(0x113)](_0x404047)),console[_0x43d2d2(0x24c)](_0x43d2d2(0x302)),window[_0x43d2d2(0x21c)][_0x43d2d2(0x282)]=_0x43d2d2(0x10e);}else console['log'](_0x43d2d2(0x131)),alert(_0x43d2d2(0x2f8));}async function showReferralModal(){const _0xceab9d=_0x155207,_0x37c912=document[_0xceab9d(0x162)]('referralModal');_0x37c912[_0xceab9d(0x140)][_0xceab9d(0x261)]=_0xceab9d(0xf0);const _0x4b68c2=await getOrCreateReferralCode();if(_0x4b68c2){const _0x4e4acb=_0xceab9d(0x312)+_0x4b68c2;document[_0xceab9d(0x162)](_0xceab9d(0x1ef))['value']=_0x4e4acb;const _0x3a8a13=_0xceab9d(0x15b)+_0x4e4acb;document[_0xceab9d(0x162)](_0xceab9d(0x1ef))[_0xceab9d(0x30f)](_0xceab9d(0x2a6),_0x3a8a13);}else document[_0xceab9d(0x162)](_0xceab9d(0x1ef))[_0xceab9d(0x2cd)]=_0xceab9d(0x21e);await updateReferralStats(currentUser[_0xceab9d(0x227)]);}function generateReferralCode(){const _0x18d011=_0x155207;return Math['random']()[_0x18d011(0x287)](0x24)[_0x18d011(0x1b3)](0x2,0x8)['toUpperCase']();}async function getOrCreateReferralCode(){const _0x2139fd=_0x155207;if(!currentUser)return null;const _0x55ecc6=db['ref'](_0x2139fd(0x2f6)+currentUser['username']),_0x272802=await _0x55ecc6[_0x2139fd(0x2e6)](_0x2139fd(0x2cd)),_0x166573=_0x272802[_0x2139fd(0x307)]();if(_0x166573&&_0x166573['referralCode'])return _0x166573['referralCode'];else{const _0x376185=generateReferralCode();return await _0x55ecc6['update']({'referralCode':_0x376185}),_0x376185;}}async function updateReferralStats(_0x2b2350){const _0x41dcfa=_0x155207,_0x15bdee=db[_0x41dcfa(0x2ad)](_0x41dcfa(0x2f6)+_0x2b2350),_0x4383ed=await _0x15bdee[_0x41dcfa(0x2e6)](_0x41dcfa(0x2cd)),_0x329826=_0x4383ed[_0x41dcfa(0x307)]();if(_0x329826&&_0x329826[_0x41dcfa(0x222)]){const _0x4d4b29=_0x329826['referrals'],_0x1ed1af=Object[_0x41dcfa(0x161)](_0x4d4b29)[_0x41dcfa(0x1ad)],_0x582e74=Object[_0x41dcfa(0x18e)](_0x4d4b29)[_0x41dcfa(0x2e4)](_0x3d124c=>_0x3d124c['isActive'])[_0x41dcfa(0x1ad)];await _0x15bdee[_0x41dcfa(0x311)]({'totalReferrals':_0x1ed1af,'activeReferrals':_0x582e74}),currentUser&&currentUser['username']===_0x2b2350&&(document[_0x41dcfa(0x162)](_0x41dcfa(0x2bb))[_0x41dcfa(0x1a0)]=_0x1ed1af,document['getElementById']('activeReferrals')['textContent']=_0x582e74);}}window['onload']=async function(){const _0x3dfa07=_0x155207;await attemptAutoLogin();if(currentUser){if(currentUser['freeCredits']===undefined)currentUser[_0x3dfa07(0x2c7)]=0x0;if(currentUser[_0x3dfa07(0x297)]===undefined)currentUser[_0x3dfa07(0x297)]=0x0;if(currentUser[_0x3dfa07(0xd2)]===undefined)currentUser[_0x3dfa07(0xd2)]=null;if(currentUser[_0x3dfa07(0x288)]===undefined)currentUser[_0x3dfa07(0x288)]=null;if(currentUser['lastFreeCreditsReset']===undefined)currentUser['lastFreeCreditsReset']=new Date()[_0x3dfa07(0x13a)]();const _0x66ffa4=db[_0x3dfa07(0x2ad)](_0x3dfa07(0x2f6)+currentUser[_0x3dfa07(0x227)]),_0x4d7b0a=await _0x66ffa4[_0x3dfa07(0x2e6)](_0x3dfa07(0x2cd)),_0x4c942a=_0x4d7b0a['val']();_0x4c942a&&(importedFilesCount=_0x4c942a[_0x3dfa07(0x20c)]||0x0,lastImportReset=new Date(_0x4c942a['lastImportReset']||new Date())),await syncUserData();}await loadApiKeyList(),await apiManager[_0x3dfa07(0x1ab)](),initializeApiKeyRotation();const _0x5cc18c=localStorage[_0x3dfa07(0x22b)](_0x3dfa07(0x1ec))||_0x3dfa07(0x294);document[_0x3dfa07(0x15f)][_0x3dfa07(0x30f)](_0x3dfa07(0x24b),_0x5cc18c),updateThemeIcon(_0x5cc18c),setupUIEventListeners();currentUser&&loadConversationHistory();initModals(),loadSelectedModel(),document[_0x3dfa07(0x162)](_0x3dfa07(0x123))[_0x3dfa07(0x200)](_0x3dfa07(0x30d),saveSelectedModel),restoreAppState(),initializeNewDiscussion(),document[_0x3dfa07(0x15f)][_0x3dfa07(0x2f5)][_0x3dfa07(0x1d8)](_0x3dfa07(0x221)),setInterval(checkSubscriptionStatus,0x36ee80),await loadApiKeyList(),await apiManager[_0x3dfa07(0x1ab)](),initializeGeminiAPI();const _0x38ba3c=document[_0x3dfa07(0x162)](_0x3dfa07(0x123));!_0x38ba3c['value']&&(_0x38ba3c[_0x3dfa07(0x2cd)]=_0x3dfa07(0x2ac));};function setupUIEventListeners(){const _0x55644f=_0x155207,_0x239d79=document[_0x55644f(0x107)](_0x55644f(0x1a7)),_0x141927=document['getElementById']('userInput'),_0x223323=document['querySelector']('.file-label'),_0x33544c=_0x239d79[_0x55644f(0x107)](_0x55644f(0x2a0));function _0x495ee9(){const _0x446f5a=_0x55644f,_0x58b7b5=_0x239d79['offsetWidth'],_0x246494=_0x223323[_0x446f5a(0x20f)],_0x4400f6=document[_0x446f5a(0x162)](_0x446f5a(0x134))[_0x446f5a(0x20f)],_0x3a27d5=_0x33544c[_0x446f5a(0x20f)],_0x347360=0x1e;_0x141927[_0x446f5a(0x140)]['width']=_0x58b7b5-_0x246494-_0x4400f6-_0x3a27d5-_0x347360+'px';}_0x495ee9(),window[_0x55644f(0x200)](_0x55644f(0x1fe),_0x495ee9),_0x141927[_0x55644f(0x200)](_0x55644f(0x23a),adjustTextareaHeight),document[_0x55644f(0x162)](_0x55644f(0x123))[_0x55644f(0x200)]('change',checkModelAccess);window[_0x55644f(0x2ba)]<=0x300&&(document[_0x55644f(0x107)]('.sidebar')[_0x55644f(0x2f5)]['remove'](_0x55644f(0x228)),document['querySelector'](_0x55644f(0x186))[_0x55644f(0x2f5)][_0x55644f(0x301)](_0x55644f(0x234)));if(currentUser){const _0x55a388=db['ref'](_0x55644f(0x2f6)+currentUser['username']);_0x55a388['on'](_0x55644f(0x2cd),_0x986cd5=>{const _0x111e87=_0x55644f,_0x25d30c=_0x986cd5[_0x111e87(0x307)]();_0x25d30c&&(currentUser={...currentUser,'freeCredits':_0x25d30c[_0x111e87(0x2c7)],'paidCredits':_0x25d30c['paidCredits'],'subscription':_0x25d30c['subscription'],'subscriptionEndDate':_0x25d30c[_0x111e87(0x288)],'lastFreeCreditsReset':_0x25d30c[_0x111e87(0x1d7)]},updateUIForLoggedInUser());});}}function initModals(){const _0x166f35=_0x155207,_0x20eddc=document[_0x166f35(0x2fc)](_0x166f35(0x133)),_0x3c1ab7=document[_0x166f35(0x2fc)](_0x166f35(0x219));_0x3c1ab7[_0x166f35(0x267)](_0x19beab=>{const _0xf7e924=_0x166f35;_0x19beab[_0xf7e924(0x200)](_0xf7e924(0x2e8),()=>{const _0x3d8af7=_0xf7e924;_0x19beab[_0x3d8af7(0x132)]('.modal')[_0x3d8af7(0x140)][_0x3d8af7(0x261)]=_0x3d8af7(0x2e7);});}),window[_0x166f35(0x200)]('click',_0x376b50=>{const _0x13ef7c=_0x166f35;_0x20eddc[_0x13ef7c(0x267)](_0x298e6d=>{const _0x224704=_0x13ef7c;_0x376b50[_0x224704(0x204)]===_0x298e6d&&(_0x298e6d['style'][_0x224704(0x261)]=_0x224704(0x2e7));});});}window['addEventListener'](_0x155207(0x2bc),async()=>{const _0x1cbc42=_0x155207;if(currentUser){const _0x21f877=await checkGuidedTourStatus(currentUser[_0x1cbc42(0x227)]);!_0x21f877&&(startGuidedTour(),await markGuidedTourAsSeen(currentUser[_0x1cbc42(0x227)]));}}),document[_0x155207(0x200)](_0x155207(0xc3),function(_0x19b128){const _0x30af2a=_0x155207;_0x19b128['key']==='Enter'&&!_0x19b128[_0x30af2a(0x1f9)]&&(_0x19b128[_0x30af2a(0x136)](),sendMessage());}),document[_0x155207(0x162)](_0x155207(0xc7))[_0x155207(0x200)](_0x155207(0xc3),function(_0x29f520){const _0x55bf84=_0x155207;if(_0x29f520[_0x55bf84(0xda)]===_0x55bf84(0x275)&&_0x29f520[_0x55bf84(0x1f9)]){_0x29f520['preventDefault']();const _0x500018=this[_0x55bf84(0x108)],_0x3244d4=this['selectionEnd'],_0x39989d=this['value'];this['value']=_0x39989d[_0x55bf84(0x1b3)](0x0,_0x500018)+'\x0a'+_0x39989d['substring'](_0x3244d4),this['selectionStart']=this[_0x55bf84(0x147)]=_0x500018+0x1;}});function checkApiStatus(){const _0x557c26=_0x155207;axios['get'](API_BASE_URL+'models?key='+API_KEY)['then'](_0x18775a=>{const _0x352d90=_0x579b;console[_0x352d90(0x24c)](_0x352d90(0x1d3),_0x18775a[_0x352d90(0x1b8)]),console[_0x352d90(0x24c)](_0x352d90(0x27d),_0x18775a['data']);})[_0x557c26(0xfd)](_0x3c0c67=>{const _0x8eeaa=_0x557c26;console[_0x8eeaa(0xc5)]('Erreur\x20lors\x20de\x20la\x20v√©rification\x20du\x20statut\x20de\x20l\x27API:',_0x3c0c67);});}function checkApiStatusRegularly(){checkApiStatus(),setInterval(checkApiStatus,0xea60);}window[_0x155207(0x200)](_0x155207(0xd0),function(){const _0xbf436c=_0x155207;showNotification(_0xbf436c(0x24e),_0xbf436c(0xc5));}),window[_0x155207(0x200)](_0x155207(0x1b1),function(){const _0x51ac99=_0x155207;showNotification(_0x51ac99(0xe5),_0x51ac99(0xfc));}),window[_0x155207(0x200)]('beforeunload',function(){const _0x3a3b47=_0x155207;currentUser&&localStorage['setItem'](_0x3a3b47(0x110),JSON['stringify'](currentConversation));});function restoreAppState(){const _0x59cf66=_0x155207,_0x4462f6=localStorage[_0x59cf66(0x22b)]('lastConversation');_0x4462f6&&(currentConversation=JSON[_0x59cf66(0x101)](_0x4462f6),currentConversation[_0x59cf66(0x267)](_0x2bdb7a=>{const _0x2368c0=_0x59cf66;addMessageToChat(_0x2bdb7a[_0x2368c0(0x2d1)],_0x2bdb7a[_0x2368c0(0x16d)]);}));}function isImageGenerationModel(_0x2bd66a){return _0x2bd66a['startsWith']('recraft-');}function getRecraftStyle(_0xd9fcda){const _0x1315ed=_0x155207,_0x468880={'recraft-realistic':_0x1315ed(0x2d7),'recraft-digital':_0x1315ed(0x1ed),'recraft-vector':_0x1315ed(0xec),'recraft-icon':_0x1315ed(0x120)};return _0x468880[_0xd9fcda]||_0x1315ed(0x2d7);}async function initializeImageGenerationTracking(_0x32d843){const _0x4d0f10=_0x155207,_0x1e8b2c=db['ref']('users/'+_0x32d843),_0x4b4a2a=await _0x1e8b2c[_0x4d0f10(0x26b)]('imageGeneration')[_0x4d0f10(0x2e6)](_0x4d0f10(0x2cd)),_0x2e2f39=_0x4b4a2a['val']();(!_0x2e2f39||isNewDay(_0x2e2f39[_0x4d0f10(0xe9)]))&&await _0x1e8b2c[_0x4d0f10(0x26b)]('imageGeneration')[_0x4d0f10(0x1c2)]({'dailyCount':0x0,'lastReset':new Date()['toISOString']()});}function isNewDay(_0x9076c){const _0x4b3020=_0x155207;if(!_0x9076c)return!![];const _0x3912b3=new Date(_0x9076c),_0x526834=new Date();return _0x3912b3['getDate']()!==_0x526834[_0x4b3020(0x17b)]()||_0x3912b3['getMonth']()!==_0x526834[_0x4b3020(0x2d6)]()||_0x3912b3[_0x4b3020(0x2aa)]()!==_0x526834['getFullYear']();}async function getImageGenerationCount(_0x2d6a52){const _0x2ee170=_0x155207,_0x4814da=db['ref'](_0x2ee170(0x2f6)+_0x2d6a52),_0x3f933d=await _0x4814da['child'](_0x2ee170(0x174))['once'](_0x2ee170(0x2cd)),_0x34d84b=_0x3f933d[_0x2ee170(0x307)]();if(!_0x34d84b||isNewDay(_0x34d84b[_0x2ee170(0xe9)]))return await initializeImageGenerationTracking(_0x2d6a52),0x0;return _0x34d84b['dailyCount'];}async function incrementImageGenerationCount(_0x4250e1){const _0x2040ee=_0x155207,_0x248263=db['ref'](_0x2040ee(0x2f6)+_0x4250e1);await _0x248263[_0x2040ee(0x26b)]('imageGeneration')[_0x2040ee(0x182)](_0x2460e3=>{const _0x232a23=_0x2040ee;if(!_0x2460e3||isNewDay(_0x2460e3[_0x232a23(0xe9)]))return{'dailyCount':0x1,'lastReset':new Date()[_0x232a23(0x13a)]()};return{'dailyCount':_0x2460e3[_0x232a23(0xcd)]+0x1,'lastReset':_0x2460e3[_0x232a23(0xe9)]};});}async function canGenerateImage(){const _0x1829f8=_0x155207,_0x5de609=await getImageGenerationCount(currentUser[_0x1829f8(0x227)]),_0x3b2dba=hasValidSubscription(),_0x2762fa=currentUser[_0x1829f8(0x297)]>=0x5||currentUser[_0x1829f8(0x2c7)]>=0x5;if(_0x3b2dba&&_0x5de609<0x5)return{'canGenerate':!![],'useFreeGeneration':!![],'message':_0x1829f8(0x259)+(0x5-_0x5de609)+_0x1829f8(0x2c1)};if(_0x2762fa)return{'canGenerate':!![],'useFreeGeneration':![],'message':_0x1829f8(0x128)};return{'canGenerate':![],'useFreeGeneration':![],'message':_0x1829f8(0x24f)};}function confirmCreditUsage(_0x279820){return new Promise(_0x1ee759=>{const _0x2673e8=_0x579b,_0x5a1520=document[_0x2673e8(0x260)](_0x2673e8(0x1e7));_0x5a1520[_0x2673e8(0x2b4)]=_0x2673e8(0x1cc),_0x5a1520[_0x2673e8(0x14c)]=_0x2673e8(0xce)+_0x279820+_0x2673e8(0x30e),document[_0x2673e8(0x15f)][_0x2673e8(0x25d)](_0x5a1520),setTimeout(()=>_0x5a1520[_0x2673e8(0x2f5)]['add']('show'),0x64);function _0x2bcdbe(_0x24f469){const _0x5a24e6=_0x2673e8,_0x263011=_0x24f469[_0x5a24e6(0x204)]['closest'](_0x5a24e6(0xf7))[_0x5a24e6(0x298)](_0x5a24e6(0x1f5));_0x5a1520[_0x5a24e6(0x2f5)]['remove'](_0x5a24e6(0x151)),setTimeout(()=>{const _0x50b10d=_0x5a24e6;_0x5a1520[_0x50b10d(0x301)](),_0x1ee759(_0x263011==='true');},0x12c);}_0x5a1520[_0x2673e8(0x2fc)]('button')[_0x2673e8(0x267)](_0x386541=>{const _0xab065b=_0x2673e8;_0x386541[_0xab065b(0x200)](_0xab065b(0x2e8),_0x2bcdbe);});});}function parseMarkdownTable(_0x24e959){const _0x532733=_0x155207,_0xf35cc8=_0x24e959[_0x532733(0x137)]()[_0x532733(0x1a3)]('\x0a');if(_0xf35cc8[_0x532733(0x1ad)]<0x3)return null;const _0x357837=_0xf35cc8['every'](_0x785475=>_0x785475[_0x532733(0x137)]()[_0x532733(0x21f)]('|')&&_0x785475[_0x532733(0x137)]()['endsWith']('|'));if(!_0x357837)return null;const _0x2bb407=_0xf35cc8['map'](_0x4b1bc5=>{const _0x1a4472=_0x532733,_0x5f401d=_0x4b1bc5[_0x1a4472(0x137)]()['slice'](0x1,-0x1)['split']('|')[_0x1a4472(0x20b)](_0x13a471=>_0x13a471[_0x1a4472(0x137)]());return _0x5f401d;}),_0x36892=_0x2bb407[0x0],_0x2eb1da=_0x2bb407[_0x532733(0x11e)](0x2);let _0x4b1593='<div\x20class=\x22table-wrapper\x22><table><thead><tr>';return _0x36892[_0x532733(0x267)](_0x4ce187=>{const _0x51d6ce=_0x532733;_0x4b1593+=_0x51d6ce(0x19e)+_0x4ce187+_0x51d6ce(0xd6);}),_0x4b1593+=_0x532733(0x197),_0x2eb1da[_0x532733(0x267)](_0x30c513=>{const _0x5ca5f6=_0x532733;_0x4b1593+=_0x5ca5f6(0x1fa),_0x30c513['forEach'](_0x105af2=>{const _0x1e07b4=_0x5ca5f6;_0x4b1593+=_0x1e07b4(0x2a3)+_0x105af2+'</td>';}),_0x4b1593+=_0x5ca5f6(0x18b);}),_0x4b1593+=_0x532733(0x17d),_0x4b1593+=_0x532733(0xc6),_0x4b1593;}function processMessageContent(_0x1e7580){const _0x161ae3=_0x155207,_0x433436=/\|[\s\S]+?\n[-|\s]+\n[\s\S]+?\n(?=\n|$)/g;return _0x1e7580[_0x161ae3(0x1f6)](_0x433436,_0x2029ce=>{const _0x552f04=parseMarkdownTable(_0x2029ce);return _0x552f04||_0x2029ce;});}function addMessageToChat(_0x1e08b3,_0x33f1b7,_0x350c44=[],_0x260ff4=[],_0x83850d=null){const _0x1c415b=_0x155207,_0x12774d=document[_0x1c415b(0x162)](_0x1c415b(0x292)),_0xc0c503=document[_0x1c415b(0x260)](_0x1c415b(0x1e7));_0xc0c503[_0x1c415b(0x2f5)][_0x1c415b(0x1d8)]('message',_0x1e08b3==='user'?_0x1c415b(0x236):_0x1c415b(0x1d9));if(_0x1e08b3==='ai'){let _0x16f550=_0x33f1b7;_0x16f550=_0x16f550[_0x1c415b(0x1f6)](/^\*\*/gm,'\x0a'),_0x16f550=_0x16f550[_0x1c415b(0x1f6)](/\*\*/g,''),_0x16f550=formatMarkdownTable(_0x16f550);const _0x333af6=document[_0x1c415b(0x260)](_0x1c415b(0x1e7));_0x333af6['innerHTML']=_0x16f550,_0xc0c503['appendChild'](_0x333af6);const _0xa285af=document[_0x1c415b(0x260)](_0x1c415b(0x1e7));_0xa285af[_0x1c415b(0x2f5)]['add'](_0x1c415b(0x1d2)),_0xa285af[_0x1c415b(0x14c)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyResponse(this.parentNode.parentNode)\x22\x20title=\x22Copier\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22exportResponse(this.parentNode.parentNode,\x20\x27pdf\x27)\x22\x20title=\x22Exporter\x20en\x20PDF\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-pdf\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareResponse(this.parentNode.parentNode)\x22\x20title=\x22Partager\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-share-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22pinResponse(this.parentNode.parentNode)\x22\x20title=\x22√âpingler\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-thumbtack\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resubmitRequest(this.parentNode.parentNode)\x22\x20title=\x22Relancer\x20la\x20demande\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-redo\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0xc0c503[_0x1c415b(0x25d)](_0xa285af),currentConversation[_0x1c415b(0x184)]({'sender':'ai','content':_0x33f1b7});}else{_0x350c44[_0x1c415b(0x1ad)]>0x0&&_0xc0c503[_0x1c415b(0x25d)](createPinnedFilesElement(_0x350c44));_0x260ff4['length']>0x0&&_0xc0c503[_0x1c415b(0x25d)](createPinnedResponsesElement(_0x260ff4));_0x83850d&&_0xc0c503[_0x1c415b(0x25d)](createPinnedPromptElement(_0x83850d));const _0x151102=document['createElement']('p');_0x151102[_0x1c415b(0x1a0)]=_0x33f1b7,_0xc0c503[_0x1c415b(0x25d)](_0x151102);const _0x55d234=document[_0x1c415b(0x260)](_0x1c415b(0x1e7));_0x55d234['classList'][_0x1c415b(0x1d8)](_0x1c415b(0x1d2)),_0x55d234[_0x1c415b(0x14c)]=_0x1c415b(0x139),_0xc0c503[_0x1c415b(0x25d)](_0x55d234),currentConversation[_0x1c415b(0x184)]({'sender':_0x1c415b(0x28f),'content':_0x33f1b7,'files':_0x350c44,'responses':_0x260ff4,'prompt':_0x83850d});}return _0x12774d[_0x1c415b(0x25d)](_0xc0c503),_0x12774d['scrollTop']=_0x12774d[_0x1c415b(0x1ac)],_0xc0c503;}async function resubmitRequest(_0xe7c30){const _0x3cbae2=_0x155207,_0x1a8c6b=document[_0x3cbae2(0x162)]('modelSelect')[_0x3cbae2(0x2cd)];if(!hasValidSubscription()&&!currentUser[_0x3cbae2(0x297)]&&(_0x1a8c6b!==_0x3cbae2(0x2ac)&&_0x1a8c6b!==_0x3cbae2(0x208)||!currentUser[_0x3cbae2(0x2c7)])){showPaymentNotification(_0x3cbae2(0x255));return;}try{const _0x457815=document['querySelectorAll']('.message');let _0x145b99=null,_0x1f72ed='';for(let _0x467680=Array[_0x3cbae2(0xdc)](_0x457815)[_0x3cbae2(0x1a6)](_0xe7c30)-0x1;_0x467680>=0x0;_0x467680--){if(_0x457815[_0x467680][_0x3cbae2(0x2f5)][_0x3cbae2(0x13b)]('user-message')){_0x145b99=_0x457815[_0x467680];const _0x259459=_0x145b99[_0x3cbae2(0x107)](_0x3cbae2(0x145)),_0x1a2508=_0x145b99[_0x3cbae2(0x107)](_0x3cbae2(0x1dd));if(_0x259459)_0x1f72ed=_0x259459[_0x3cbae2(0x1a0)];else _0x1a2508&&(_0x1f72ed=_0x1a2508[_0x3cbae2(0x1a0)]);break;}}if(!_0x145b99)throw new Error(_0x3cbae2(0x1fb));const _0x28b135=document['createElement'](_0x3cbae2(0x1e7));_0x28b135[_0x3cbae2(0x2b4)]='message\x20ai-message',_0x28b135['innerHTML']=_0x3cbae2(0xd3)+createModelHeader(_0x1a8c6b)+_0x3cbae2(0x2b0),_0xe7c30[_0x3cbae2(0x2c3)](_0x28b135);const _0x2513d2=Array[_0x3cbae2(0xdc)](_0x145b99[_0x3cbae2(0x2fc)](_0x3cbae2(0x2b1)))[_0x3cbae2(0x20b)](_0x122e1b=>({'name':_0x122e1b[_0x3cbae2(0x107)](_0x3cbae2(0x1b9))[_0x3cbae2(0x1a0)],'type':_0x122e1b[_0x3cbae2(0x171)][_0x3cbae2(0x217)]})),_0x36ff6e=[{'text':_0x1f72ed}];if(_0x2513d2['length']>0x0)for(const _0x186b92 of _0x2513d2){_0x36ff6e['push']({'text':_0x3cbae2(0xe8)+_0x186b92[_0x3cbae2(0x117)]+']'});}const _0x156b9b=await model['generateContent'](_0x36ff6e),_0x3d9093=await _0x156b9b[_0x3cbae2(0x2c2)],_0x4b1a12=_0x3d9093[_0x3cbae2(0x2e1)]();await animateText(_0x28b135,_0x4b1a12),currentConversation[_0x3cbae2(0x184)]({'sender':'ai','content':_0x4b1a12}),saveConversation(),await updateCredits(_0x1a8c6b,0x1),showNotification('R√©ponse\x20actualis√©e\x20avec\x20succ√®s',_0x3cbae2(0xfc));}catch(_0x2935a4){console[_0x3cbae2(0xc5)](_0x3cbae2(0x245),_0x2935a4),showNotification(_0x3cbae2(0x177),_0x3cbae2(0xc5)),loadingMessage&&_0xe7c30&&loadingMessage[_0x3cbae2(0x2c3)](_0xe7c30);}}function createLoadingMessage(){const _0x19dde3=_0x155207,_0x4d3fb6=document[_0x19dde3(0x260)](_0x19dde3(0x1e7));return _0x4d3fb6[_0x19dde3(0x2b4)]=_0x19dde3(0x155),_0x4d3fb6['innerHTML']=_0x19dde3(0x1db),document[_0x19dde3(0x162)](_0x19dde3(0x292))[_0x19dde3(0x25d)](_0x4d3fb6),_0x4d3fb6;}function initializeScrollListener(){const _0x5cd11d=_0x155207,_0x38d526=document[_0x5cd11d(0x162)](_0x5cd11d(0x292));_0x38d526[_0x5cd11d(0x200)](_0x5cd11d(0x218),function(){const _0x42e8d5=_0x5cd11d;clearTimeout(scrollTimeout),_0x38d526['scrollTop']<lastScrollTop&&(userScrolling=!![]),lastScrollTop=_0x38d526[_0x42e8d5(0x23f)],scrollTimeout=setTimeout(()=>{const _0x4fb59b=_0x42e8d5,_0x73dddc=_0x38d526[_0x4fb59b(0x1ac)]-_0x38d526[_0x4fb59b(0x23f)]-_0x38d526[_0x4fb59b(0x26e)]<0x64;_0x73dddc&&(userScrolling=![]);},0x3e8);});}function shouldAutoScroll(){const _0x29382a=_0x155207;if(userScrolling)return![];const _0x31ac02=document[_0x29382a(0x162)]('messageContainer'),_0x48ac6a=_0x31ac02['scrollHeight']-_0x31ac02['scrollTop']-_0x31ac02[_0x29382a(0x26e)]<0x64;return _0x48ac6a;}async function animateText(_0x5e2ace,_0xc730bf){const _0x1fe59c=_0x155207,_0x314e60=document[_0x1fe59c(0x260)](_0x1fe59c(0x1e7));_0x5e2ace[_0x1fe59c(0x14c)]='',_0x5e2ace['appendChild'](_0x314e60);const _0x59db5a=document[_0x1fe59c(0x260)](_0x1fe59c(0x1e7));_0x59db5a[_0x1fe59c(0x2b4)]=_0x1fe59c(0x1d2),_0x59db5a['innerHTML']=_0x1fe59c(0x185);let _0x5dfc0d='';const _0x47c906=0xa;function _0x2aadca(_0x3d7b69,_0xe2472b){const _0x54928a=_0x1fe59c;return _0x3d7b69['slice'](_0xe2472b)[_0x54928a(0x21f)]('\x0a|')||_0x3d7b69[_0x54928a(0x11e)](_0xe2472b)['startsWith']('|');}function _0x4fbe51(_0x5f2876,_0x21f011){const _0x374033=_0x1fe59c,_0x578ee2=_0x5f2876[_0x374033(0x11e)](_0x21f011)[_0x374033(0x1a3)]('\x0a');let _0xc57e2e=[],_0x5bcfdd=0x0;while(_0x5bcfdd<_0x578ee2[_0x374033(0x1ad)]&&_0x578ee2[_0x5bcfdd][_0x374033(0x137)]()[_0x374033(0x21f)]('|')){_0xc57e2e[_0x374033(0x184)](_0x578ee2[_0x5bcfdd]),_0x5bcfdd++;}return _0xc57e2e[_0x374033(0x248)]('\x0a');}const _0x892c3a=document[_0x1fe59c(0x162)](_0x1fe59c(0x292));for(let _0x13a166=0x0;_0x13a166<_0xc730bf[_0x1fe59c(0x1ad)];_0x13a166++){if(_0x2aadca(_0xc730bf,_0x13a166)){const _0x396f32=_0x4fbe51(_0xc730bf,_0x13a166);if(_0x396f32){_0x5dfc0d+=_0x396f32,_0x314e60[_0x1fe59c(0x14c)]=formatMarkdownTable(_0x5dfc0d),_0x13a166+=_0x396f32[_0x1fe59c(0x1ad)]-0x1;continue;}}_0x5dfc0d+=_0xc730bf[_0x13a166],_0x314e60[_0x1fe59c(0x14c)]=formatMarkdownTable(_0x5dfc0d),shouldAutoScroll()&&(_0x892c3a['scrollTop']=_0x892c3a['scrollHeight']),await new Promise(_0x5b640a=>setTimeout(_0x5b640a,_0x47c906));}_0x5e2ace['appendChild'](_0x59db5a);}function resetScrollState(){userScrolling=![],lastScrollTop=0x0;}function formatMarkdownTable(_0x133258){const _0x17e187=_0x155207,_0x2c0b0f=/\|(.+)\|\n\|(?:[-:|]+\|)+\n(\|(?:.+\|)+\n?)+/g;return _0x133258[_0x17e187(0x1f6)](_0x2c0b0f,function(_0x4b9a54){const _0x2c93df=_0x17e187,_0x4229cf=_0x4b9a54[_0x2c93df(0x137)]()[_0x2c93df(0x1a3)]('\x0a');if(_0x4229cf[_0x2c93df(0x1ad)]<0x3)return _0x4b9a54;let _0x57ff91=_0x2c93df(0x2b6);const _0x47fef4=_0x4229cf[0x0][_0x2c93df(0x1a3)]('|')[_0x2c93df(0x2e4)](_0x4f0c44=>_0x4f0c44['trim']());return _0x57ff91+=_0x2c93df(0x2ed),_0x47fef4[_0x2c93df(0x267)](_0x525150=>{const _0x5257f9=_0x2c93df;_0x57ff91+=_0x5257f9(0x19e)+_0x525150[_0x5257f9(0x137)]()+'</th>';}),_0x57ff91+=_0x2c93df(0x2dc),_0x57ff91+=_0x2c93df(0x26c),_0x4229cf[_0x2c93df(0x11e)](0x2)['forEach'](_0x554350=>{const _0x4f9289=_0x2c93df,_0x396655=_0x554350[_0x4f9289(0x1a3)]('|')['filter'](_0xc83cc=>_0xc83cc[_0x4f9289(0x137)]());_0x396655[_0x4f9289(0x1ad)]>0x0&&(_0x57ff91+=_0x4f9289(0x1fa),_0x396655[_0x4f9289(0x267)](_0x5011a1=>{const _0x4a5d40=_0x4f9289;_0x57ff91+='<td>'+_0x5011a1[_0x4a5d40(0x137)]()+'</td>';}),_0x57ff91+='</tr>');}),_0x57ff91+='</tbody></table></div>',_0x57ff91;});}function updateUI(){const _0x3dad8d=_0x155207;currentUser&&(document[_0x3dad8d(0x162)](_0x3dad8d(0x2c7))['textContent']=currentUser[_0x3dad8d(0x2c7)],document[_0x3dad8d(0x162)](_0x3dad8d(0x297))[_0x3dad8d(0x1a0)]=currentUser[_0x3dad8d(0x297)],document['getElementById'](_0x3dad8d(0xd2))[_0x3dad8d(0x1a0)]=currentUser[_0x3dad8d(0xd2)]||'Aucun');}const apiManager=new GeminiApiManager();document[_0x155207(0x200)]('click',function(_0x3d1c7d){const _0xb87ad7=_0x155207,_0x287cc7=document[_0xb87ad7(0x107)](_0xb87ad7(0x28d)),_0x1384ef=document['querySelector'](_0xb87ad7(0x1e3));_0x287cc7[_0xb87ad7(0x2f5)]['contains'](_0xb87ad7(0x228))&&!_0x287cc7['contains'](_0x3d1c7d[_0xb87ad7(0x204)])&&!_0x1384ef[_0xb87ad7(0x13b)](_0x3d1c7d[_0xb87ad7(0x204)])&&(toggleSidebar(),_0x3d1c7d[_0xb87ad7(0x136)]());}),window['onpopstate']=function(_0x3d3366){const _0x383f35=_0x155207,_0xf06c22=document[_0x383f35(0x107)](_0x383f35(0x28d));if(_0xf06c22[_0x383f35(0x2f5)][_0x383f35(0x13b)]('visible'))return toggleSidebar(),_0x3d3366[_0x383f35(0x136)](),history[_0x383f35(0x246)]({},'',''),![];},document[_0x155207(0x162)]('fileInput')['accept']=_0x155207(0x180),setInterval(updateUI,0x493e0),checkApiStatusRegularly(),window[_0x155207(0x1e9)]=showLoginModal,window[_0x155207(0x271)]=showRegisterModal,window[_0x155207(0x16a)]=login,window[_0x155207(0x2cf)]=register,window[_0x155207(0x28e)]=logout,window[_0x155207(0x220)]=sendMessage,window[_0x155207(0x2c6)]=buySubscription,window['buyCredits']=buyCredits,window[_0x155207(0x239)]=toggleTheme,window[_0x155207(0x159)]=toggleSidebar,window['createNewConversation']=createNewConversation,window[_0x155207(0x10a)]=handleFileUpload,window[_0x155207(0x2fe)]=togglePromptList,window['showReferralModal']=showReferralModal,window[_0x155207(0x2f0)]=generateReferralCode,window[_0x155207(0x2a5)]=copyReferralLink,window['shareOnFacebook']=shareOnFacebook,window[_0x155207(0x26f)]=shareOnTwitter,window[_0x155207(0x2cc)]=shareOnLinkedIn,window[_0x155207(0x305)]=shareOnWhatsApp,window[_0x155207(0x156)]=removePinnedFile;
