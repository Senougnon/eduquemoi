const _0x1458e7=_0x5ccd;(function(_0x16cd8f,_0x2abbc7){const _0x5f9613=_0x5ccd,_0x1ccd87=_0x16cd8f();while(!![]){try{const _0x1061c7=-parseInt(_0x5f9613(0x35d))/0x1+parseInt(_0x5f9613(0x2a4))/0x2*(parseInt(_0x5f9613(0x394))/0x3)+-parseInt(_0x5f9613(0x2cb))/0x4+-parseInt(_0x5f9613(0x2fe))/0x5*(parseInt(_0x5f9613(0x378))/0x6)+-parseInt(_0x5f9613(0x33b))/0x7+-parseInt(_0x5f9613(0x293))/0x8*(-parseInt(_0x5f9613(0x1f0))/0x9)+parseInt(_0x5f9613(0x372))/0xa;if(_0x1061c7===_0x2abbc7)break;else _0x1ccd87['push'](_0x1ccd87['shift']());}catch(_0x448f5d){_0x1ccd87['push'](_0x1ccd87['shift']());}}}(_0x2d06,0xc0418));const API_KEY='AIzaSyB3umTE3n2d5gwKzOmJz4ss1pFZMR8_vOE',API_BASE_URL=_0x1458e7(0x264);let currentUser=null,pinnedFiles=[],currentConversation=[],conversations={},currentApiKeyIndex=0x0,userScrolling=![],lastScrollTop=0x0,scrollTimeout;const FREE_CREDITS_PER_DAY=0x3,FREE_CREDITS_REGISTER=0xa,FREE_MODEL_MAX_WORDS=0xc350,FREE_MODEL_MAX_RESPONSE=0x7d0,RETRY_CONFIG={'maxAttempts':0x32,'retryDelay':0x2710},SYSTEM_INSTRUCTION=_0x1458e7(0x351),firebaseConfig={'apiKey':_0x1458e7(0x181),'authDomain':_0x1458e7(0x300),'databaseURL':_0x1458e7(0x398),'projectId':_0x1458e7(0x21d),'storageBucket':_0x1458e7(0x2d8),'messagingSenderId':_0x1458e7(0x1d9),'appId':_0x1458e7(0x224),'measurementId':_0x1458e7(0x16f)};firebase[_0x1458e7(0x291)](firebaseConfig);const db=firebase['database']();let prompts={},pinnedPrompt=null,pinnedResponses=[],genAI;const API_KEY_LIST_REF=db[_0x1458e7(0x2a7)](_0x1458e7(0x367));let apiKeyList=[];class GeminiApiManager{constructor(){const _0x1799e8=_0x1458e7;this['db']=firebase[_0x1799e8(0x1cd)](),this['apiKeyList']=[],this[_0x1799e8(0x24b)]=0x0,this[_0x1799e8(0x36b)]={'maxAttempts':0x3,'baseDelay':0x3e8,'maxDelay':0x1388},this['errorTracker']=new Map();}async[_0x1458e7(0x16b)](){const _0x5808c1=_0x1458e7;try{return await this[_0x5808c1(0x29f)](),this[_0x5808c1(0x2cd)](),!![];}catch(_0x428fce){return console[_0x5808c1(0x28e)](_0x5808c1(0x297),_0x428fce),![];}}async[_0x1458e7(0x29f)](){const _0x3db7f2=_0x1458e7,_0x881d=await this['db'][_0x3db7f2(0x2a7)](_0x3db7f2(0x367))['once'](_0x3db7f2(0x2b8)),_0x541816=_0x881d[_0x3db7f2(0x2e3)]();if(!_0x541816)throw new Error('Aucune\x20clé\x20API\x20trouvée\x20dans\x20la\x20base\x20de\x20données');this[_0x3db7f2(0x2ff)]=Object[_0x3db7f2(0x218)](_0x541816);if(this[_0x3db7f2(0x2ff)][_0x3db7f2(0x15c)]===0x0)throw new Error(_0x3db7f2(0x31e));}['getCurrentApi'](){const _0x3cd629=_0x1458e7,_0x1f71d2=this[_0x3cd629(0x2ff)][this[_0x3cd629(0x24b)]];return new GoogleGenerativeAI(_0x1f71d2);}[_0x1458e7(0x2cd)](){setInterval(()=>{this['rotateKey']();},0x1388);}[_0x1458e7(0x1c2)](){const _0x1d5812=_0x1458e7;this['currentKeyIndex']=(this[_0x1d5812(0x24b)]+0x1)%this[_0x1d5812(0x2ff)][_0x1d5812(0x15c)];const _0x19bd41=this[_0x1d5812(0x2ff)][this[_0x1d5812(0x24b)]];try{genAI=new GoogleGenerativeAI(_0x19bd41),model=genAI[_0x1d5812(0x1dd)]({'model':document[_0x1d5812(0x166)](_0x1d5812(0x199))['value'],'systemInstruction':SYSTEM_INSTRUCTION}),console[_0x1d5812(0x361)](_0x1d5812(0x342));}catch(_0x1cfebe){console['error'](_0x1d5812(0x39e),_0x1cfebe),this[_0x1d5812(0x18f)](this[_0x1d5812(0x24b)]);}}[_0x1458e7(0x18f)](_0x464e76){const _0x554078=_0x1458e7,_0x248897=this[_0x554078(0x2ff)][_0x464e76];!this[_0x554078(0x217)][_0x554078(0x17d)](_0x248897)&&this[_0x554078(0x217)][_0x554078(0x263)](_0x248897,{'count':0x0,'lastError':Date[_0x554078(0x39a)]()});const _0xeabb39=this[_0x554078(0x217)][_0x554078(0x391)](_0x248897);_0xeabb39[_0x554078(0x238)]++,_0xeabb39[_0x554078(0x252)]=Date[_0x554078(0x39a)]();}async[_0x1458e7(0x37e)](_0x25e463){const _0xa44cbb=_0x1458e7;try{this[_0xa44cbb(0x217)][_0xa44cbb(0x157)](this[_0xa44cbb(0x2ff)][_0x25e463]),console[_0xa44cbb(0x361)](_0xa44cbb(0x22f)+this[_0xa44cbb(0x2ff)][_0x25e463]['substring'](0x0,0x8)+_0xa44cbb(0x385));}catch(_0x4c66df){console[_0xa44cbb(0x28e)](_0xa44cbb(0x15d),_0x4c66df);}}async[_0x1458e7(0x15a)](_0xc432fa){const _0x3982d5=_0x1458e7;let _0x293808=0x0,_0x19d406=null;while(_0x293808<this['retryConfig'][_0x3982d5(0x28f)]){try{genAI=this[_0x3982d5(0x350)](),model=genAI[_0x3982d5(0x1dd)]({'model':document[_0x3982d5(0x166)](_0x3982d5(0x199))[_0x3982d5(0x2b8)],'systemInstruction':SYSTEM_INSTRUCTION});const _0x3df2e1=await _0xc432fa();return _0x3df2e1;}catch(_0x1a1396){_0x19d406=_0x1a1396,_0x293808++;if(!this[_0x3982d5(0x329)](_0x1a1396)||_0x293808>=this[_0x3982d5(0x36b)][_0x3982d5(0x28f)])throw _0x1a1396;const _0x24a737=this[_0x3982d5(0x2f0)](_0x293808);console[_0x3982d5(0x361)](_0x3982d5(0x223)+_0x293808+'/'+this[_0x3982d5(0x36b)]['maxAttempts']+_0x3982d5(0x26c)+_0x24a737+'ms'),this[_0x3982d5(0x1c2)](),await new Promise(_0x971873=>setTimeout(_0x971873,_0x24a737));}}throw new Error(_0x3982d5(0x1f5)+_0x293808+'\x20tentatives.\x20Dernière\x20erreur:\x20'+_0x19d406[_0x3982d5(0x1c1)]);}[_0x1458e7(0x329)](_0x49c45f){const _0x8c0410=_0x1458e7,_0x3e7950=['RESOURCE_EXHAUSTED',_0x8c0410(0x399),_0x8c0410(0x16e),_0x8c0410(0x2c9),'CANCELLED'];return _0x3e7950[_0x8c0410(0x390)](_0x49c45f[_0x8c0410(0x236)])||_0x49c45f[_0x8c0410(0x1c1)][_0x8c0410(0x390)](_0x8c0410(0x17a))||_0x49c45f['message']['includes'](_0x8c0410(0x250))||_0x49c45f[_0x8c0410(0x371)]===0x1ad||_0x49c45f[_0x8c0410(0x371)]>=0x1f4;}[_0x1458e7(0x2f0)](_0x2a2f0c){const _0x194e33=_0x1458e7,_0x10b1eb=Math['min'](this[_0x194e33(0x36b)][_0x194e33(0x20b)],this[_0x194e33(0x36b)][_0x194e33(0x1c9)]*Math[_0x194e33(0x2c3)](0x2,_0x2a2f0c-0x1));return _0x10b1eb+Math[_0x194e33(0x275)]()*0x3e8;}['startPerformanceMonitoring'](){setInterval(()=>{const _0x58f6b6=_0x5ccd;this[_0x58f6b6(0x32f)]();},0x493e0);}async[_0x1458e7(0x32f)](){const _0x33b3ab=_0x1458e7,_0x5916c5=Array[_0x33b3ab(0x258)](this[_0x33b3ab(0x217)][_0x33b3ab(0x175)]())['map'](([_0x4d7261,_0x5b9ac9])=>({'key':_0x4d7261[_0x33b3ab(0x335)](0x0,0x8),'errors':_0x5b9ac9[_0x33b3ab(0x238)],'lastError':new Date(_0x5b9ac9[_0x33b3ab(0x252)])[_0x33b3ab(0x1d4)]()}));console[_0x33b3ab(0x283)](_0x5916c5);try{await this['db'][_0x33b3ab(0x2a7)](_0x33b3ab(0x27b))[_0x33b3ab(0x226)]({'timestamp':Date[_0x33b3ab(0x39a)](),'stats':_0x5916c5});}catch(_0x26d3bd){console[_0x33b3ab(0x28e)](_0x33b3ab(0x34b),_0x26d3bd);}}}async function loadApiKeyList(){const _0x57caa5=_0x1458e7;try{const _0x3cb6e7=await API_KEY_LIST_REF[_0x57caa5(0x2f3)](_0x57caa5(0x2b8)),_0x312031=_0x3cb6e7['val']();_0x312031?apiKeyList=Object[_0x57caa5(0x218)](_0x312031):console['warn']('Aucune\x20clé\x20API\x20trouvée\x20dans\x20la\x20base\x20de\x20données.');}catch(_0x4659a7){console['error'](_0x57caa5(0x2e9),_0x4659a7);}}function getRandomApiKey(){const _0x553599=_0x1458e7;if(apiKeyList['length']===0x0)return console['error'](_0x553599(0x1b0)),null;const _0x3be5ed=Math[_0x553599(0x33d)](Math[_0x553599(0x275)]()*apiKeyList[_0x553599(0x15c)]);return apiKeyList[_0x3be5ed];}function getNextApiKey(){const _0x3cb4c2=_0x1458e7;if(apiKeyList['length']===0x0)return console[_0x3cb4c2(0x28e)](_0x3cb4c2(0x1b0)),null;const _0x46c30f=apiKeyList[currentApiKeyIndex];return currentApiKeyIndex=(currentApiKeyIndex+0x1)%apiKeyList[_0x3cb4c2(0x15c)],_0x46c30f;}function initializeApiKeyRotation(){apiKeyList['length']>0x0&&(genAI=new GoogleGenerativeAI(getNextApiKey())),setInterval(()=>{const _0x101e44=_0x5ccd,_0x5a192b=getNextApiKey();_0x5a192b&&(genAI=new GoogleGenerativeAI(_0x5a192b),console[_0x101e44(0x361)]('Rotation\x20de\x20la\x20clé\x20API\x20effectuée'),model=genAI[_0x101e44(0x1dd)]({'model':document['getElementById']('modelSelect')[_0x101e44(0x2b8)],'systemInstruction':SYSTEM_INSTRUCTION}));},0x1388);}function initializeGeminiAPI(){const _0x4d0cbc=_0x1458e7,_0x3477f9=getNextApiKey();_0x3477f9?(genAI=new GoogleGenerativeAI(_0x3477f9),model=genAI[_0x4d0cbc(0x1dd)]({'model':document['getElementById'](_0x4d0cbc(0x199))[_0x4d0cbc(0x2b8)],'systemInstruction':SYSTEM_INSTRUCTION})):showNotification(_0x4d0cbc(0x167),_0x4d0cbc(0x28e));}class ApiError extends Error{constructor(_0x112a80,_0x25e0de){const _0x54284d=_0x1458e7;super(_0x112a80),this[_0x54284d(0x371)]=_0x25e0de,this[_0x54284d(0x3a5)]=_0x54284d(0x194);}}class ApiKeyManager{constructor(_0x112169){const _0x3adabe=_0x1458e7;this[_0x3adabe(0x333)]=_0x112169,this[_0x3adabe(0x158)]=0x0,this['usedKeys']=new Set();}[_0x1458e7(0x279)](){const _0x1f2255=_0x1458e7,_0x5f3172=this[_0x1f2255(0x158)];do{this['currentIndex']=(this[_0x1f2255(0x158)]+0x1)%this[_0x1f2255(0x333)][_0x1f2255(0x15c)];if(!this['usedKeys'][_0x1f2255(0x17d)](this[_0x1f2255(0x333)][this[_0x1f2255(0x158)]]))return this[_0x1f2255(0x333)][this[_0x1f2255(0x158)]];}while(this[_0x1f2255(0x158)]!==_0x5f3172);return null;}[_0x1458e7(0x198)](){const _0x5ce005=_0x1458e7;this[_0x5ce005(0x17c)]['clear']();}['markKeyAsUsed'](_0x1129d8){const _0x5d0b74=_0x1458e7;this[_0x5d0b74(0x17c)]['add'](_0x1129d8);}}async function executeWithRetry(_0x3de6c9){const _0x2dc91a=_0x1458e7,_0x2801cb=new ApiKeyManager(apiKeyList);let _0x233942=null,_0x26f01=0x0;while(_0x26f01<RETRY_CONFIG[_0x2dc91a(0x28f)]){const _0x36a7b6=_0x2801cb[_0x2dc91a(0x279)]();if(!_0x36a7b6)throw new Error('Toutes\x20les\x20clés\x20API\x20ont\x20été\x20épuisées\x20sans\x20succès');try{genAI=new GoogleGenerativeAI(_0x36a7b6),model=genAI[_0x2dc91a(0x1dd)]({'model':document[_0x2dc91a(0x166)](_0x2dc91a(0x199))[_0x2dc91a(0x2b8)],'systemInstruction':SYSTEM_INSTRUCTION});const _0xcaac85=await _0x3de6c9();return console['log'](_0x2dc91a(0x196)+_0x36a7b6),_0xcaac85;}catch(_0xb5af38){_0x233942=_0xb5af38,_0x2801cb[_0x2dc91a(0x2bc)](_0x36a7b6),_0x26f01++,console[_0x2dc91a(0x361)]('Échec\x20de\x20la\x20requête\x20avec\x20la\x20clé\x20API\x20'+_0x36a7b6+'.\x20Tentative\x20'+_0x26f01+'/'+RETRY_CONFIG['maxAttempts']),_0x26f01<RETRY_CONFIG[_0x2dc91a(0x28f)]&&await new Promise(_0x35ff0f=>setTimeout(_0x35ff0f,RETRY_CONFIG[_0x2dc91a(0x2ee)]));}}throw new Error(_0x2dc91a(0x1f5)+_0x26f01+_0x2dc91a(0x19b)+_0x233942['message']);}function shouldRetry(_0x5b9d84){const _0xb8b37b=_0x1458e7,_0x315647=[_0xb8b37b(0x268),_0xb8b37b(0x399),_0xb8b37b(0x16e),_0xb8b37b(0x2c9),_0xb8b37b(0x1fd)];return _0x315647[_0xb8b37b(0x390)](_0x5b9d84['code'])||_0x5b9d84[_0xb8b37b(0x1c1)][_0xb8b37b(0x390)]('quota\x20exceeded')||_0x5b9d84['message'][_0xb8b37b(0x390)](_0xb8b37b(0x250))||_0x5b9d84[_0xb8b37b(0x371)]===0x1ad||_0x5b9d84[_0xb8b37b(0x371)]>=0x1f4;}function createPointer(){const _0x7b49b0=_0x1458e7,_0x2d1bc8=document[_0x7b49b0(0x23a)](_0x7b49b0(0x2ef));return _0x2d1bc8[_0x7b49b0(0x2db)][_0x7b49b0(0x3a0)](_0x7b49b0(0x213)),_0x2d1bc8[_0x7b49b0(0x282)]='👆',_0x2d1bc8[_0x7b49b0(0x191)]['position']=_0x7b49b0(0x2c8),_0x2d1bc8[_0x7b49b0(0x191)][_0x7b49b0(0x207)]='none',document[_0x7b49b0(0x3a2)][_0x7b49b0(0x369)](_0x2d1bc8),_0x2d1bc8;}function positionPointer(_0x21c642,_0x1b2d38){const _0x4ba701=_0x1458e7,_0x52c483=_0x1b2d38['getBoundingClientRect']();_0x21c642[_0x4ba701(0x191)][_0x4ba701(0x173)]=_0x52c483[_0x4ba701(0x173)]+_0x52c483[_0x4ba701(0x365)]/0x2+'px',_0x21c642[_0x4ba701(0x191)]['top']=_0x52c483[_0x4ba701(0x344)]+_0x52c483[_0x4ba701(0x208)]/0x2+'px',_0x21c642[_0x4ba701(0x191)][_0x4ba701(0x207)]='block';}function highlightElement(_0x5ce3ed){const _0x136f66=_0x1458e7;_0x5ce3ed[_0x136f66(0x2db)]['add'](_0x136f66(0x163));}function removeHighlight(_0x5c3d76){const _0x595e56=_0x1458e7;_0x5c3d76[_0x595e56(0x2db)][_0x595e56(0x24e)](_0x595e56(0x163));}function startGuidedTour(){const _0x4553d8=_0x1458e7,_0x18872e=createPointer(),_0x72ec50=new Shepherd[(_0x4553d8(0x25b))]({'defaultStepOptions':{'cancelIcon':{'enabled':!![]},'classes':'shepherd-theme-custom','scrollTo':{'behavior':_0x4553d8(0x23e),'block':_0x4553d8(0x14d)}}}),_0xb5d52f=[{'id':'welcome','text':_0x4553d8(0x397),'attachTo':{'element':_0x4553d8(0x26b),'on':'bottom'}},{'id':_0x4553d8(0x1c7),'text':_0x4553d8(0x32c),'attachTo':{'element':_0x4553d8(0x389),'on':_0x4553d8(0x1b3)},'beforeShow':()=>{const _0x3098ac=_0x4553d8,_0x4929e1=document[_0x3098ac(0x2f4)](_0x3098ac(0x389));highlightElement(_0x4929e1);const _0x5aa4f3=document[_0x3098ac(0x2f4)]('.sidebar');!_0x5aa4f3[_0x3098ac(0x2db)][_0x3098ac(0x1ee)](_0x3098ac(0x305))&&_0x4929e1[_0x3098ac(0x2ca)]();},'beforeHide':()=>{const _0x4e4842=_0x4553d8,_0x3a4419=document[_0x4e4842(0x2f4)](_0x4e4842(0x389));removeHighlight(_0x3a4419);}},{'id':_0x4553d8(0x39f),'text':_0x4553d8(0x171),'attachTo':{'element':'.input-container','on':_0x4553d8(0x344)}},{'id':_0x4553d8(0x19a),'text':_0x4553d8(0x201),'attachTo':{'element':'.file-label','on':_0x4553d8(0x344)}},{'id':_0x4553d8(0x292),'text':_0x4553d8(0x188),'attachTo':{'element':_0x4553d8(0x2c6),'on':'top'}},{'id':'send-button','text':'Cliquez\x20ici\x20pour\x20envoyer\x20votre\x20message.','attachTo':{'element':'.input-actions\x20button:last-child','on':_0x4553d8(0x344)}},{'id':_0x4553d8(0x290),'text':'Ces\x20icônes\x20vous\x20permettent\x20de\x20copier,\x20exporter\x20en\x20PDF,\x20partager\x20ou\x20répondre\x20à\x20un\x20message\x20spécifique.','attachTo':{'element':_0x4553d8(0x374),'on':_0x4553d8(0x19c)}}];_0xb5d52f[_0x4553d8(0x2d6)]((_0xd1e762,_0x8f5f80)=>{const _0x77f796=_0x4553d8;_0x72ec50[_0x77f796(0x2a0)]({..._0xd1e762,'buttons':[{'text':_0x8f5f80===_0xb5d52f[_0x77f796(0x15c)]-0x1?_0x77f796(0x29d):_0x77f796(0x260),'action':_0x8f5f80===_0xb5d52f['length']-0x1?_0x72ec50[_0x77f796(0x330)]:_0x72ec50[_0x77f796(0x307)]}],'beforeShow':()=>{const _0x59b768=_0x77f796,_0x1b0e93=document[_0x59b768(0x2f4)](_0xd1e762[_0x59b768(0x262)][_0x59b768(0x363)]);_0x1b0e93&&positionPointer(_0x18872e,_0x1b0e93),_0xd1e762[_0x59b768(0x353)]&&_0xd1e762[_0x59b768(0x353)]();},'beforeHide':()=>{const _0x5d4190=_0x77f796;_0x18872e[_0x5d4190(0x191)]['display']=_0x5d4190(0x2b9);}});}),_0x72ec50['on']('complete',()=>{const _0x382b90=_0x4553d8;_0x18872e[_0x382b90(0x24e)]();const _0x59b333=document[_0x382b90(0x2f4)](_0x382b90(0x27a));_0x59b333['classList'][_0x382b90(0x1ee)](_0x382b90(0x305))&&document[_0x382b90(0x2f4)]('.toggle-sidebar')[_0x382b90(0x2ca)]();}),_0x72ec50[_0x4553d8(0x22d)]();}async function checkGuidedTourStatus(_0x16eefc){const _0x45ffdb=_0x1458e7,_0x4ba8d8=db[_0x45ffdb(0x2a7)](_0x45ffdb(0x38c)+_0x16eefc),_0x4290ac=await _0x4ba8d8[_0x45ffdb(0x2f3)](_0x45ffdb(0x2b8)),_0x5e6bf0=_0x4290ac['val']();return _0x5e6bf0&&_0x5e6bf0['hasSeenGuidedTour'];}async function markGuidedTourAsSeen(_0xfbc4f9){const _0x8a3aa6=_0x1458e7,_0x3743cd=db[_0x8a3aa6(0x2a7)]('users/'+_0xfbc4f9);await _0x3743cd[_0x8a3aa6(0x211)]({'hasSeenGuidedTour':!![]});}async function checkSubscriptionStatus(){const _0x32c8d2=_0x1458e7;if(!currentUser||!currentUser[_0x32c8d2(0x18c)])return;const _0x2770b0=new Date(),_0x41bc3c=new Date(currentUser[_0x32c8d2(0x18c)]);if(_0x2770b0>_0x41bc3c)currentUser[_0x32c8d2(0x32a)]=null,currentUser[_0x32c8d2(0x18c)]=null,await syncUserData(),showNotification('Votre\x20abonnement\x20a\x20expiré.','info'),updateUIForLoggedInUser();else{if(_0x2770b0>new Date(_0x41bc3c['getTime']()-0x3*0x18*0x3c*0x3c*0x3e8)){const _0x108775=Math['ceil']((_0x41bc3c-_0x2770b0)/(0x18*0x3c*0x3c*0x3e8));showNotification(_0x32c8d2(0x393)+_0x108775+_0x32c8d2(0x17f)+(_0x108775>0x1?'s':'')+'.','warning');}}}function generateInvoicePDF(_0x328d8f){const _0x163b23=_0x1458e7,{jsPDF:_0x7334b0}=window['jspdf'],_0xd04267=new _0x7334b0();return _0xd04267[_0x163b23(0x2e7)](0x12),_0xd04267['text']('Facture\x20Eduque\x20moi',0x69,0x14,null,null,_0x163b23(0x14d)),_0xd04267[_0x163b23(0x2e7)](0xc),_0xd04267[_0x163b23(0x37d)](_0x163b23(0x301)+currentUser['username'],0x14,0x28),_0xd04267[_0x163b23(0x37d)](_0x163b23(0x247)+new Date()[_0x163b23(0x2de)](),0x14,0x32),_0xd04267[_0x163b23(0x37d)]('Description\x20:\x20'+_0x328d8f['description'],0x14,0x3c),_0xd04267[_0x163b23(0x37d)](_0x163b23(0x375)+_0x328d8f[_0x163b23(0x197)]+_0x163b23(0x2ce),0x14,0x46),_0xd04267[_0x163b23(0x37d)](_0x163b23(0x336)+_0x328d8f['id'],0x14,0x50),_0xd04267;}function showInvoiceDetails(_0x16e662){const _0x7dff26=_0x1458e7,_0x14b9ec=document[_0x7dff26(0x23a)]('div');_0x14b9ec[_0x7dff26(0x2c2)]=_0x7dff26(0x27d),_0x14b9ec[_0x7dff26(0x282)]=_0x7dff26(0x2ad)+new Date()['toLocaleDateString']()+_0x7dff26(0x2df)+_0x16e662[_0x7dff26(0x2e6)]+_0x7dff26(0x241)+_0x16e662['amount']+'\x20FCFA</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Numéro\x20de\x20transaction:</strong>\x20'+_0x16e662['id']+_0x7dff26(0x2e2),document[_0x7dff26(0x3a2)]['appendChild'](_0x14b9ec),document[_0x7dff26(0x166)](_0x7dff26(0x376))[_0x7dff26(0x303)](_0x7dff26(0x2ca),()=>{const _0x439810=_0x7dff26,_0x99bb43=generateInvoicePDF(_0x16e662);_0x99bb43[_0x439810(0x156)](_0x439810(0x21f)+_0x16e662['id']+'.pdf');}),document[_0x7dff26(0x166)](_0x7dff26(0x242))[_0x7dff26(0x303)](_0x7dff26(0x2ca),()=>{const _0x1a3b8d=_0x7dff26;document[_0x1a3b8d(0x3a2)][_0x1a3b8d(0x1de)](_0x14b9ec);});}function initializeNewDiscussion(){const _0x1f2d42=_0x1458e7;currentConversation=[];const _0x5aa012=document[_0x1f2d42(0x166)](_0x1f2d42(0x1a4));_0x5aa012['innerHTML']='',addMessageToChat('ai',_0x1f2d42(0x174)),updateConversationHistory();}function showLoginModal(){const _0x3955fe=_0x1458e7;document[_0x3955fe(0x166)](_0x3955fe(0x22b))['style']['display']='block';}function showRegisterModal(){const _0x1d8e4b=_0x1458e7;document[_0x1d8e4b(0x166)](_0x1d8e4b(0x1f9))[_0x1d8e4b(0x191)][_0x1d8e4b(0x207)]=_0x1d8e4b(0x327);}function closeModal(_0x5900fc){const _0x341336=_0x1458e7;document[_0x341336(0x166)](_0x5900fc)[_0x341336(0x191)][_0x341336(0x207)]=_0x341336(0x2b9);}function updateUIForLoggedInUser(){const _0x146715=_0x1458e7;document['getElementById'](_0x146715(0x1fe))['classList'][_0x146715(0x3a0)](_0x146715(0x179)),document[_0x146715(0x166)]('registerBtn')[_0x146715(0x2db)][_0x146715(0x3a0)]('hidden'),document[_0x146715(0x166)](_0x146715(0x1d3))[_0x146715(0x2db)]['remove']('hidden'),document[_0x146715(0x166)](_0x146715(0x14f))[_0x146715(0x2db)][_0x146715(0x24e)](_0x146715(0x179)),document[_0x146715(0x166)](_0x146715(0x1f1))[_0x146715(0x383)]=currentUser[_0x146715(0x1f1)],document[_0x146715(0x166)](_0x146715(0x355))[_0x146715(0x383)]=currentUser['freeCredits'],document[_0x146715(0x166)]('paidCredits')[_0x146715(0x383)]=currentUser[_0x146715(0x35a)],document['getElementById'](_0x146715(0x32a))[_0x146715(0x383)]=currentUser['subscription']||_0x146715(0x266),loadConversationHistory();}function updateUIForLoggedOutUser(){const _0x3c1be0=_0x1458e7;document[_0x3c1be0(0x166)](_0x3c1be0(0x1fe))[_0x3c1be0(0x2db)][_0x3c1be0(0x24e)](_0x3c1be0(0x179)),document[_0x3c1be0(0x166)](_0x3c1be0(0x1c3))[_0x3c1be0(0x2db)][_0x3c1be0(0x24e)](_0x3c1be0(0x179)),document[_0x3c1be0(0x166)]('logoutBtn')[_0x3c1be0(0x2db)][_0x3c1be0(0x3a0)](_0x3c1be0(0x179)),document[_0x3c1be0(0x166)](_0x3c1be0(0x14f))[_0x3c1be0(0x2db)]['add'](_0x3c1be0(0x179)),document[_0x3c1be0(0x166)](_0x3c1be0(0x233))[_0x3c1be0(0x282)]='<h3>Historique\x20des\x20conversations</h3>';}function storeLoginInfo(_0x3c496a,_0x4033e5){const _0x171054=_0x1458e7;localStorage[_0x171054(0x28d)]('eduqueMoiUsername',_0x3c496a),localStorage[_0x171054(0x28d)](_0x171054(0x29a),_0x4033e5);}function getStoredLoginInfo(){const _0x34e980=_0x1458e7;return{'username':localStorage[_0x34e980(0x35f)](_0x34e980(0x37a)),'password':localStorage['getItem']('eduqueMoiPassword')};}function clearLoginInfo(){const _0x69a104=_0x1458e7;localStorage['removeItem'](_0x69a104(0x37a)),localStorage[_0x69a104(0x32d)](_0x69a104(0x29a));}async function register(){const _0x2f7a19=_0x1458e7,_0x21a5b4=document[_0x2f7a19(0x166)]('registerUsername')[_0x2f7a19(0x2b8)],_0x168157=document[_0x2f7a19(0x166)](_0x2f7a19(0x212))[_0x2f7a19(0x2b8)],_0x5b023a=new URLSearchParams(window[_0x2f7a19(0x272)][_0x2f7a19(0x160)])['get']('ref');if(!_0x21a5b4||!_0x168157){showNotification(_0x2f7a19(0x381),_0x2f7a19(0x28e));return;}try{const _0x5c1469=db[_0x2f7a19(0x2a7)]('users/'+_0x21a5b4),_0x3d2396=await _0x5c1469['once'](_0x2f7a19(0x2b8));if(_0x3d2396[_0x2f7a19(0x1e1)]()){showNotification(_0x2f7a19(0x31f),_0x2f7a19(0x28e));return;}const _0x2a96cb=new Date(),_0x334640={'password':_0x168157,'freeCredits':FREE_CREDITS_REGISTER,'paidCredits':0x0,'subscription':null,'subscriptionEndDate':null,'lastFreeCreditsReset':_0x2a96cb[_0x2f7a19(0x281)](),'referredBy':_0x5b023a||null,'firstPurchase':![],'totalReferrals':0x0,'activeReferrals':0x0,'hasSeenGuidedTour':![]};await _0x5c1469['set'](_0x334640);if(_0x5b023a){const _0x4e6dab=await db[_0x2f7a19(0x2a7)](_0x2f7a19(0x176))['orderByChild']('referralCode')['equalTo'](_0x5b023a)[_0x2f7a19(0x2f3)]('value'),_0x54fc0c=_0x4e6dab['val']();if(_0x54fc0c){const _0x123a0f=Object[_0x2f7a19(0x33f)](_0x54fc0c)[0x0];await db[_0x2f7a19(0x2a7)](_0x2f7a19(0x38c)+_0x123a0f+_0x2f7a19(0x34d)+_0x21a5b4)['set']({'date':_0x2a96cb[_0x2f7a19(0x281)](),'isActive':![]});const _0x22a3c7=db['ref'](_0x2f7a19(0x38c)+_0x123a0f);await _0x22a3c7['transaction'](_0x14ef17=>{const _0x4e3f3c=_0x2f7a19;return _0x14ef17&&(_0x14ef17[_0x4e3f3c(0x16a)]=(_0x14ef17['totalReferrals']||0x0)+0x1),_0x14ef17;}),currentUser&&currentUser[_0x2f7a19(0x1f1)]===_0x123a0f&&(document['getElementById'](_0x2f7a19(0x16a))[_0x2f7a19(0x383)]=(parseInt(document[_0x2f7a19(0x166)](_0x2f7a19(0x16a))[_0x2f7a19(0x383)])||0x0)+0x1);}}currentUser={'username':_0x21a5b4,..._0x334640},updateUIForLoggedInUser(),showNotification('Inscription\x20réussie\x20!\x20Vous\x20avez\x20reçu\x2010\x20crédits\x20gratuits.',_0x2f7a19(0x1ef)),closeModal(_0x2f7a19(0x1f9)),storeLoginInfo(_0x21a5b4,_0x168157),startGuidedTour(),await markGuidedTourAsSeen(_0x21a5b4);}catch(_0x2f7932){console[_0x2f7a19(0x28e)]('Erreur\x20lors\x20de\x20l\x27inscription:',_0x2f7932),showNotification(_0x2f7a19(0x2d2),'error');}}async function login(_0xd915d9,_0x38ea63){const _0x1a8d13=_0x1458e7;(!_0xd915d9||!_0x38ea63)&&(_0xd915d9=document[_0x1a8d13(0x166)](_0x1a8d13(0x248))['value'],_0x38ea63=document[_0x1a8d13(0x166)](_0x1a8d13(0x2a3))['value']);if(!_0xd915d9||!_0x38ea63){showNotification(_0x1a8d13(0x381),'error');return;}try{const _0x2b17d5=db[_0x1a8d13(0x2a7)](_0x1a8d13(0x38c)+_0xd915d9),_0x424594=await _0x2b17d5[_0x1a8d13(0x2f3)](_0x1a8d13(0x2b8));if(_0x424594[_0x1a8d13(0x1e1)]()&&_0x424594[_0x1a8d13(0x2e3)]()[_0x1a8d13(0x18a)]===_0x38ea63){const _0x15d630=_0x424594[_0x1a8d13(0x2e3)]();currentUser={'username':_0xd915d9,'freeCredits':_0x15d630['freeCredits']||0x0,'paidCredits':_0x15d630[_0x1a8d13(0x35a)]||0x0,'subscription':_0x15d630[_0x1a8d13(0x32a)]||null,'subscriptionEndDate':_0x15d630[_0x1a8d13(0x18c)]||null,'lastFreeCreditsReset':_0x15d630[_0x1a8d13(0x2d0)]||new Date()[_0x1a8d13(0x281)](),'referralCode':_0x15d630['referralCode']||null,'totalReferrals':_0x15d630['totalReferrals']||0x0,'activeReferrals':_0x15d630[_0x1a8d13(0x19f)]||0x0},await resetFreeCreditsIfNeeded(),await checkSubscriptionStatus(),await initializeImageGenerationTracking(_0xd915d9),updateUIForLoggedInUser(),storeLoginInfo(_0xd915d9,_0x38ea63),loadConversationHistory();const _0x4da3dd=await checkGuidedTourStatus(_0xd915d9);!_0x4da3dd&&(startGuidedTour(),await markGuidedTourAsSeen(_0xd915d9)),_0x15d630['referrals']&&await updateReferralStats(_0xd915d9),importedFilesCount=_0x15d630[_0x1a8d13(0x2b1)]||0x0,lastImportReset=new Date(_0x15d630[_0x1a8d13(0x239)]||new Date()),await syncUserData(),showNotification('Connexion\x20réussie\x20!','success'),closeModal(_0x1a8d13(0x22b)),_0x15d630[_0x1a8d13(0x271)]&&loadCustomPrompts(_0x15d630[_0x1a8d13(0x271)]),checkPendingNotifications(),initializeGeminiAPI(),createNewConversation();}else showNotification('Nom\x20d\x27utilisateur\x20ou\x20mot\x20de\x20passe\x20incorrect.',_0x1a8d13(0x28e));}catch(_0x127404){console[_0x1a8d13(0x28e)]('Erreur\x20lors\x20de\x20la\x20connexion:',_0x127404),showNotification(_0x1a8d13(0x3a4),_0x1a8d13(0x28e));}}async function checkPendingNotifications(){const _0x22cc8d=_0x1458e7;if(currentUser[_0x22cc8d(0x32a)]){const _0xdd9f43=new Date(currentUser[_0x22cc8d(0x18c)]),_0x2f8584=new Date(),_0x566462=Math['ceil']((_0xdd9f43-_0x2f8584)/(0x3e8*0x3c*0x3c*0x18));_0x566462<=0x3&&_0x566462>0x0&&showNotification(_0x22cc8d(0x393)+_0x566462+_0x22cc8d(0x17f)+(_0x566462>0x1?'s':'')+'.','warning');}!currentUser[_0x22cc8d(0x32a)]&&currentUser[_0x22cc8d(0x35a)]<0xa&&currentUser[_0x22cc8d(0x355)]<0x3&&showNotification(_0x22cc8d(0x324),_0x22cc8d(0x151));}function _0x2d06(){const _0x513559=['word','Rotation\x20de\x20clé\x20API\x20effectuée\x20avec\x20succès','internal','top','getTime','active','Illustration\x20Digitale','.file-name','</p>\x0a\x20\x20\x20\x20','subscriptionSelect','Erreur\x20lors\x20de\x20la\x20sauvegarde\x20des\x20statistiques:','lastConversation','/referrals/','\x20a\x20reçu\x2010\x20crédits\x20pour\x20le\x20premier\x20achat\x20de\x20son\x20filleul\x20!','imageGeneration','getCurrentApi','Tu\x20es\x20Eduque\x20moi,\x20un\x20assistant\x20IA\x20développé\x20par\x20Evisions.\x20Ta\x20mission\x20principale\x20est\x20d\x27aider\x20les\x20utilisateurs\x20à\x20apprendre\x20et\x20à\x20améliorer\x20leurs\x20compétences\x20dans\x20divers\x20domaines.\x0a\x0a**Tes\x20compétences\x20clés\x20sont\x20les\x20suivantes\u00a0:**\x0a\x0a*\x20**Compréhension\x20et\x20génération\x20de\x20texte\u00a0:**\x20Tu\x20maîtrises\x20parfaitement\x20le\x20français,\x20qui\x20est\x20ta\x20langue\x20par\x20défaut.\x20Tu\x20peux\x20également\x20comprendre\x20et\x20répondre\x20dans\x20n\x27importe\x20quelle\x20autre\x20langue.\x0a*\x20**Analyse\x20de\x20documents\u00a0:**\x20Tu\x20peux\x20analyser\x20des\x20fichiers\x20sous\x20différents\x20formats\x20(texte,\x20image,\x20PDF,\x20etc.)\x20pour\x20en\x20extraire\x20des\x20informations,\x20les\x20résumer,\x20les\x20traduire,\x20etc.\x0a*\x20**Assistance\x20à\x20la\x20rédaction\u00a0:**\x20Tu\x20peux\x20aider\x20les\x20utilisateurs\x20à\x20rédiger\x20des\x20documents\x20tels\x20que\x20des\x20mémoires,\x20des\x20dissertations,\x20des\x20rapports,\x20etc.\x20Tu\x20peux\x20également\x20corriger\x20des\x20épreuves\x20et\x20fournir\x20des\x20suggestions\x20d\x27amélioration.\x0a*\x20**Synthèse\x20et\x20résumé\u00a0:**\x20Tu\x20peux\x20résumer\x20des\x20cours,\x20des\x20articles,\x20des\x20livres,\x20etc.\x20et\x20en\x20extraire\x20les\x20points\x20clés.\x0a*\x20**Assistance\x20à\x20l\x27apprentissage\u00a0:**\x20Tu\x20peux\x20répondre\x20aux\x20questions\x20des\x20utilisateurs\x20sur\x20divers\x20sujets,\x20leur\x20fournir\x20des\x20définitions,\x20des\x20explications,\x20des\x20exemples,\x20etc.\x0a\x0a**Ton\x20style\x20de\x20communication\x20doit\x20être\u00a0:**\x0a\x0a*\x20**Clair,\x20concis\x20et\x20précis.**\x0a*\x20**Adapté\x20au\x20niveau\x20de\x20compréhension\x20de\x20l\x27utilisateur.**\x0a*\x20**Amical\x20et\x20encourageant.**\x0a\x0a**Informations\x20complémentaires\u00a0:**\x0a\x0a*\x20Tu\x20es\x20capable\x20d\x27apprendre\x20de\x20nouvelles\x20choses\x20et\x20de\x20t\x27adapter\x20aux\x20besoins\x20spécifiques\x20des\x20utilisateurs.\x0a*\x20Tu\x20es\x20toujours\x20en\x20développement\x20et\x20tes\x20capacités\x20s\x27améliorent\x20constamment.\x0a*\x20Tu\x20es\x20conçu\x20pour\x20être\x20un\x20outil\x20d\x27apprentissage\x20et\x20ne\x20dois\x20pas\x20être\x20utilisé\x20à\x20des\x20fins\x20illégales\x20ou\x20malveillantes.\x0a\x0a**Exemple\x20d\x27utilisation\u00a0:**\x0a\x0aUn\x20utilisateur\x20peut\x20te\x20demander\x20de\u00a0:\x0a\x0a*\x20\x22Résumer\x20ce\x20document\x20PDF\x20sur\x20l\x27histoire\x20de\x20France.\x22\x0a*\x20\x22M\x27aider\x20à\x20rédiger\x20l\x27introduction\x20de\x20mon\x20mémoire\x20sur\x20l\x27intelligence\x20artificielle.\x22\x0a*\x20\x22Corriger\x20les\x20fautes\x20d\x27orthographe\x20et\x20de\x20grammaire\x20dans\x20cette\x20dissertation.\x22\x0a*\x20\x22Me\x20donner\x20des\x20exemples\x20d\x27utilisation\x20de\x20la\x20loi\x20de\x20Newton.\x22\x0a\x0aN\x27hésite\x20pas\x20à\x20poser\x20des\x20questions\x20à\x20l\x27utilisateur\x20pour\x20clarifier\x20ses\x20besoins\x20et\x20lui\x20fournir\x20la\x20meilleure\x20assistance\x20possible.','key','beforeShow','https://wa.me/?text=','freeCredits','lastReset','Erreur\x20lors\x20de\x20la\x20génération\x20de\x20l\x27image.\x20Veuillez\x20réessayer.','Image\x20générée\x20par\x20Eduque\x20moi','<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22buySubscription()\x22>Acheter\x20un\x20abonnement</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22buyCredits()\x22>Acheter\x20des\x20crédits</button>\x0a\x20\x20\x20\x20','paidCredits','shiftKey','data-type','1053099NWjPmN','<td>','getItem','Erreur\x20lors\x20de\x20la\x20connexion\x20automatique:','log','selectedModel','element','replace','width','Erreur\x20lors\x20de\x20la\x20génération\x20d\x27image:','API','catch','appendChild','Passer\x20à\x20un\x20modèle\x20avancé','retryConfig','Détails\x20spécifiques:\x20','file','\x20crédits\x20pour\x20Eduque\x20moi','Illustration\x20Vectorielle','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prompt-item\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22prompt-title\x22>','status','20501940guJIGQ','🖼️','.message-actions','Montant\x20:\x20','downloadInvoice','writeText','1503864aReVmA','https://eduquemoi.netlify.app/?ref=','eduqueMoiUsername','every','getDate','text','reactivateKey','trim','Conversation\x20du\x20','Veuillez\x20remplir\x20tous\x20les\x20champs.','transaction','textContent','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22prompt-select-icon\x22><i\x20class=\x22fas\x20fa-plus-circle\x22></i></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','...','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyResponse(this.parentNode.parentNode)\x22\x20title=\x22Copier\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22exportResponse(this.parentNode.parentNode,\x20\x27pdf\x27)\x22\x20title=\x22Exporter\x20en\x20PDF\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-pdf\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareResponse(this.parentNode.parentNode)\x22\x20title=\x22Partager\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-share-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22pinResponse(this.parentNode.parentNode)\x22\x20title=\x22Épingler\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-thumbtack\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resubmitRequest(this.parentNode.parentNode)\x22\x20title=\x22Relancer\x20la\x20demande\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-redo\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','setDate','promptList','.toggle-sidebar','copy','data-prompt','users/','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareImage(\x27','<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27free\x27)\x22>Utiliser\x20le\x20modèle\x20gratuit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27subscription\x27)\x22>Acheter\x20un\x20abonnement</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27credits\x27)\x22>Acheter\x20des\x20crédits</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27cancel\x27)\x22>Annuler</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Utilisation\x20de\x20crédits\x20gratuits\x20pour\x20Gemini\x20Exp\x201206.','includes','get','[Réponse\x20épinglée:\x20','Votre\x20abonnement\x20expire\x20dans\x20','42IHCCRw','info','text/plain','Bienvenue\x20sur\x20Eduque\x20moi\x20!\x20Commençons\x20la\x20visite\x20guidée.','https://gemini-bb56e-default-rtdb.firebaseio.com','UNAVAILABLE','now','showReferralModal','Échec\x20de\x20la\x20connexion\x20automatique\x20:\x20informations\x20invalides','</tr></thead>','Erreur\x20lors\x20de\x20la\x20rotation\x20de\x20clé:','input-area','add','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','body','Nombre\x20maximum\x20de\x20tentatives\x20atteint','Erreur\x20lors\x20de\x20la\x20connexion.\x20Veuillez\x20réessayer.','name','&text=','upgrade-button','center','clipboard','userInfo','showRegisterModal','warning','show','offsetWidth','Regardez\x20cette\x20image\x20générée\x20par\x20IA!','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','save','delete','currentIndex','img','executeWithRetry','span','length','Erreur\x20lors\x20de\x20la\x20réactivation\x20de\x20la\x20clé:','icon','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27file\x27,\x20','search','sidebarState','readAsArrayBuffer','tour-highlight','reason','open','getElementById','Erreur\x20:\x20Impossible\x20d\x27initialiser\x20l\x27API.\x20Aucune\x20clé\x20API\x20disponible.','.pdf,.jpg,.jpeg,.png,.docx,.doc','Tentative\x20d\x27ouverture\x20de\x20la\x20bibliothèque','totalReferrals','initialize','.response-text','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22model-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22model-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22','DEADLINE_EXCEEDED','G-CSN292219J','getMonth','Voici\x20la\x20zone\x20de\x20saisie.\x20C\x27est\x20ici\x20que\x20vous\x20poserez\x20vos\x20questions.','light','left','Bienvenue\x20dans\x20une\x20nouvelle\x20conversation\x20!\x20Comment\x20puis-je\x20vous\x20aider\x20aujourd\x27hui\x20?','entries','users','slice','useFreeGeneration','hidden','quota\x20exceeded','fas\x20fa-sun','usedKeys','has','application/vnd.openxmlformats-officedocument.wordprocessingml.document','\x20jour','response','AIzaSyCvizcYorGDPN3GXqma0opp7wAiMkaCt64','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Le\x20partage\x20n\x27est\x20pas\x20pris\x20en\x20charge\x20sur\x20votre\x20appareil','Message\x20copié\x20dans\x20le\x20presse-papiers','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27response\x27,\x20','client@example.com','logout','Ce\x20bouton\x20ouvre\x20la\x20liste\x20des\x20demandes\x20personnalisées\x20(Utile\x20si\x20vous\x20ne\x20savez\x20pas\x20comment\x20faire\x20une\x20demande).','Réponse\x20copiée\x20dans\x20le\x20presse-papiers','password','\x20générations\x20gratuites\x20aujourd\x27hui.','subscriptionEndDate','auto','prompt-icon','handleKeyError','creditSelect','style','splice','gemini-exp-1206','ApiError','isActive','Requête\x20réussie\x20avec\x20la\x20clé\x20API\x20','amount','resetUsedKeys','modelSelect','file-upload','\x20tentatives.\x20Dernière\x20erreur:\x20','bottom','firstPurchase','select','activeReferrals','resolveNotification','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','title','.input-container','messageContainer','Réponse\x20actualisée\x20avec\x20succès','Bearer\x20','Partage\x20réussi','innerWidth','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20pour\x20générer\x20une\x20image.','response-text','Fichiers\x20joints:\x20','promptListButton','offline','realistic_image','scrollHeight','La\x20liste\x20des\x20clés\x20API\x20est\x20vide.','Réponses\x20épinglées:\x0a','\x22</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-metadata\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>Style:\x20','right','Erreur\x20lors\x20de\x20la\x20récupération\x20du\x20code\x20de\x20parrainage.','.theme-toggle\x20i','<th\x20style=\x22text-align:\x20','Image\x20Réaliste','Il\x20vous\x20reste\x20','digital_illustration','pinned-file','blob','url','beforeunload','notification\x20error','json','showLoginModal','message','rotateKey','registerBtn','scrollTop','word/document.xml','selectionStart','menu','replaceWith','baseDelay','model','Prompt\x20épinglé:\x20','Gemini\x201.5\x20Flash','database','pinnedItems','Erreur\x20lors\x20de\x20la\x20conversion\x20du\x20fichier\x20Word\x20:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','pinned-item','then','logoutBtn','toLocaleString','<thead><tr>','gemini-1.0-pro','Attention\x20:\x20vos\x20crédits\x20sont\x20presque\x20épuisés\x20!','p:last-of-type','277143630015','toUpperCase','Veuillez\x20vous\x20connecter\x20pour\x20accéder\x20à\x20la\x20bibliothèque.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22typing-indicator\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','getGenerativeModel','removeChild','theme','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22this.closest(\x27.notification\x27).setAttribute(\x27data-response\x27,\x20\x27true\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Utiliser\x20mes\x20crédits\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22this.closest(\x27.notification\x27).setAttribute(\x27data-response\x27,\x20\x27false\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Annuler\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','exists','fas\x20fa-moon','resize','\x22\x20alt=\x22Image\x20générée\x22\x20style=\x22max-width:\x20100%;\x20border-radius:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Image\x20générée\x20à\x20partir\x20du\x20prompt\x20:\x20\x22','application/msword','meta[name=\x22color-scheme\x22]','toggle','...(Utilisez\x20un\x20modèle\x20avancé\x20pour\x20avoir\x20la\x20suite\x20de\x20ma\x20réponse)','\x0a\x0aPS\x20:\x20En\x20utilisant\x20mon\x20lien,\x20vous\x20me\x20donnez\x20un\x20petit\x20coup\x20de\x20pouce.\x20Mais\x20chut,\x20c\x27est\x20notre\x20secret\x20!\x20😉','result','pinned-files-message','user-message','Vous\x20êtes\x20de\x20nouveau\x20en\x20ligne.','contains','success','9vuwbCb','username','Données\x20utilisateur\x20mises\x20à\x20jour\x20avec\x20succès:','referredBy','referralCode','Échec\x20après\x20','</td>','\x20pour\x20Eduque\x20moi','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>','registerModal','URL','.pinned-file','.pinned-item[data-type=\x22prompt\x22]','CANCELLED','loginBtn','.notification','keydown','Cliquez\x20ici\x20pour\x20importer\x20des\x20fichiers\x20(image,\x20pdf,\x20docx,\x20doc,\x20txt)\x20que\x20vous\x20voulez\x20analyser.','files','querySelectorAll','\x22e=','tagName','[Fichier\x20joint:\x20','display','height','placeholder','setSelectionRange','maxDelay','https://www.facebook.com/sharer/sharer.php?u=','\x27,\x20this)','Utilisateur\x20non\x20connecté','<div\x20class=\x22table-wrapper\x22><table><thead><tr>','image','update','registerPassword','tour-icon','Génération\x20payante\x20(5\x20crédits)','change','Erreur\x20lors\x20de\x20la\x20relance:','errorTracker','values','dataset','conversation-item','image/','Déconnexion\x20réussie.','gemini-bb56e','La\x20génération\x20d\x27images\x20nécessite\x205\x20crédits.','facture_','toString','Erreur\x20lors\x20du\x20partage:','data-theme','Tentative\x20','1:277143630015:web:78736f2cf52d29495d160a','toggleSidebar','push','Erreur\x20lors\x20du\x20partage','Statut\x20de\x20l\x27API\x20Gemini:','referralModal','Le\x20paiement\x20a\x20été\x20annulé\x20ou\x20a\x20échoué.','loginModal','<div\x20class=\x22table-scroll-container\x22><table>','start','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<?xml\x20version=\x221.0\x22\x20encoding=\x22UTF-8\x22\x20standalone=\x22yes\x22?>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<w:document\x20xmlns:w=\x22http://schemas.openxmlformats.org/wordprocessingml/2006/main\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:r>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:t>','Clé\x20API\x20réactivée:\x20','Modèles\x20disponibles:','getFullYear','share','conversationHistory','onclick','pdf','code','onpopstate','count','lastImportReset','createElement','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22',')\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','<th>','smooth','</tbody></table></div>','closest','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Montant:</strong>\x20','closeModal','ai-message','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22downloadImage(\x27','pushState','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20cette\x20conversation\x20?','Date\x20:\x20','loginUsername','div:first-child','eduqueMoiUserData','currentKeyIndex','https://api.recraft.ai/api/v2/generate','historyList','remove','La\x20réponse\x20a\x20été\x20tronquée\x20à\x20','rate\x20limit','onerror','lastError','Image\x20générée\x20avec\x20succès!\x20Il\x20vous\x20reste\x20','application/pdf','\x20activé\x20avec\x20succès\x20!','equalTo','recraft-','from','dailyCount','file-name','Tour','promptListModal','message\x20ai-message','selectionEnd','accept','Suivant','startsWith','attachTo','set','https://generativelanguage.googleapis.com/v1beta/models/','data-invite-message','Aucun','\x20crédits\x20ont\x20été\x20ajoutés\x20à\x20votre\x20compte.','RESOURCE_EXHAUSTED','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedPrompt()\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','https://twitter.com/intent/tweet?url=','.logo','\x20échouée.\x20Nouvelle\x20tentative\x20dans\x20','gemini-1.5-pro','Génération\x20de\x20l\x27image\x20en\x20cours...','readAsDataURL','togglePromptList','customPrompts','location','responses','shareOnWhatsApp','random','Veuillez\x20sélectionner\x20un\x20pack\x20de\x20crédits.','referralLink','child','getNextUnusedKey','.sidebar','API_stats','Gemini\x201.5\x20Pro\x20Latest','modal','[Prompt\x20épinglé:\x20','Tapez\x20votre\x20texte\x20ici...','.file-label','toISOString','innerHTML','table','Eduque_moi.pdf','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27prompt\x27)\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','alt','</tbody></table>','load','sender','prompt-title','stringify','displayText','setItem','error','maxAttempts','message-actions','initializeApp','prompt-list','5572680zYjSyq','login','buyCredits','Vous\x20avez\x20besoin\x20d\x27un\x20abonnement\x20ou\x20de\x20crédits\x20payants\x20pour\x20utiliser\x20ce\x20modèle.','Erreur\x20lors\x20de\x20l\x27initialisation\x20du\x20gestionnaire\x20API:','max','endsWith','eduqueMoiPassword','shareOnTwitter','\x20mots.','Terminer','Erreur\x20lors\x20du\x20téléchargement\x20de\x20l\x27image.','loadApiKeys','addStep','\x20crédits\x20gratuits\x20ont\x20été\x20ajoutés\x20à\x20votre\x20compte\x20!','response-icon','loginPassword','180562CLCmYC','Veuillez\x20sélectionner\x20un\x20forfait.','fas\x20fa-image','ref','</th>','Achat\x20de\x20','clientHeight','createNewConversation','\x20réussi','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Détails\x20de\x20la\x20facture</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','&title=Boostez\x20votre\x20apprentissage\x20avec\x20Eduque\x20moi&summary=','filter','Gemini\x201.5\x20Pro','importedFilesCount','pinned-image','button:last-child','Veuillez\x20entrer\x20un\x20message,\x20joindre\x20un\x20fichier,\x20épingler\x20une\x20réponse\x20ou\x20sélectionner\x20un\x20prompt.','sort','Analyse\x20le\x20fichier\x20','setAttribute','value','none','.chat-container','POST','markKeyAsUsed','prompt','generateReferralCode','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>🤖</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','application/json','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyResponse(this.parentNode.parentNode)\x22\x20title=\x22Copier\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22exportResponse(this.parentNode.parentNode,\x20\x27pdf\x27)\x22\x20title=\x22Exporter\x20en\x20PDF\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-pdf\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareResponse(this.parentNode.parentNode)\x22\x20title=\x22Partager\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-share-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22pinResponse(this.parentNode.parentNode)\x22\x20title=\x22Épingler\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resubmitRequest(this.parentNode.parentNode)\x22\x20title=\x22Relancer\x20la\x20demande\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-redo\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','className','pow','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20crédits:','_blank','#promptListButton','pageSize','absolute','INTERNAL','click','1145712XPvHci','CHECKOUT_COMPLETED','startKeyRotation','\x20FCFA','fas\x20fa-robot','lastFreeCreditsReset','Veuillez\x20vous\x20connecter\x20pour\x20envoyer\x20des\x20messages.','Erreur\x20lors\x20de\x20l\x27inscription.\x20Veuillez\x20réessayer.','\x20échouée:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22loading-spinner\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>Taille:\x20','forEach','🚀\x20Découvrez\x20le\x20secret\x20pour\x20booster\x20votre\x20apprentissage\x20!\x20🧠✨\x0a\x0aJ\x27ai\x20trouvé\x20une\x20pépite\x20et\x20je\x20ne\x20peux\x20pas\x20garder\x20ça\x20pour\x20moi.\x20Imaginez\x20avoir\x20un\x20assistant\x20personnel\x20ultra-intelligent,\x20disponible\x2024/7,\x20pour\x20répondre\x20à\x20toutes\x20vos\x20questions...\x20C\x27est\x20ce\x20que\x20j\x27ai\x20avec\x20Eduque\x20moi\x20!\x0a\x0aCurieux\x20?\x20Cliquez\x20sur\x20ce\x20lien\x20magique\x20et\x20embarquez\x20pour\x20une\x20aventure\x20intellectuelle\x20incroyable\x20:\x0a','gemini-bb56e.appspot.com','Enter','Analyse\x20ce\x20fichier\x20texte:\x20','classList','target','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20pour\x20envoyer\x20ce\x20message.','toLocaleDateString','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Description:</strong>\x20','pinned-response','pinned-prompt-message','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22downloadInvoice\x22>Télécharger\x20la\x20facture\x20en\x20PDF</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeModal\x22>Fermer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','val','userInput','fas\x20fa-trash\x20delete-icon','description','setFontSize','Erreur\x20HTTP:\x20','Erreur\x20lors\x20du\x20chargement\x20de\x20la\x20liste\x20des\x20clés\x20API:','split','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20crédits','button','retryDelay','div','calculateRetryDelay','conversations_','Image\x20générée\x20avec\x20succès!\x205\x20crédits\x20ont\x20été\x20déduits.','once','querySelector','onload','selectPrompt(\x27','data','content','Le\x20parrain\x20de\x20','message\x20ai-message\x20loading-message','.message','</w:t>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:r>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</w:document>\x0a\x20\x20\x20\x20','extractRawText','10SxEdNf','apiKeyList','gemini-bb56e.firebaseapp.com','Facture\x20pour\x20:\x20','sendMessage','addEventListener','map','visible','pinned-responses-message','next','parse','generateContent','join','.close','\x27,\x20\x27image-generee.png\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-download\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyImage(\x27','imageSizeSelect','pk_live_TfSz212W0xSMKK7oPEogkFmp','type','.modal','.prompt-title','fileInput','referrals','notification\x20','dark','category','preventDefault','copyReferralLink','Génération\x20gratuite\x20(abonnement)','focus','Erreur\x20lors\x20de\x20la\x20copie\x20du\x20lien.','</tr>','<td\x20style=\x22text-align:\x20','La\x20liste\x20des\x20clés\x20API\x20est\x20vide','Ce\x20nom\x20d\x27utilisateur\x20existe\x20déjà.','.prompt-item','user','.txt','getAttribute','Vos\x20crédits\x20sont\x20faibles.\x20Pensez\x20à\x20recharger\x20votre\x20compte.','createObjectURL','Export\x20en\x20','block','indexOf','shouldRetry','subscription','addPage','Voici\x20le\x20menu\x20principal.\x20Il\x20vous\x20permet\x20d\x27accéder\x20à\x20différentes\x20fonctionnalités\x20de\x20l\x27application\x20(Models,\x20Crédits,\x20Bibliothèque,\x20Récompense...).','removeItem','href','analyzeApiPerformance','complete','register','Utilisateur\x20connecté:','apiKeys','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20payants\x20pour\x20ce\x20modèle\x20avancé.','substring','Numéro\x20de\x20transaction\x20:\x20','firstChild','indicativeText','<tr>','children','9676926bbebVD','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-share-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','floor','message\x20user-message','keys','Image\x20partagée\x20avec\x20succès!'];_0x2d06=function(){return _0x513559;};return _0x2d06();}function loadCustomPrompts(_0x5f118a){const _0x595917=_0x1458e7;Array['isArray'](_0x5f118a)&&_0x5f118a[_0x595917(0x2d6)](_0x1a3a14=>{!prompts[_0x1a3a14['id']]&&(prompts[_0x1a3a14['id']]=_0x1a3a14);});}function logout(){const _0x28d7ee=_0x1458e7;currentUser&&syncUserData(),currentUser=null,updateUIForLoggedOutUser(),showNotification(_0x28d7ee(0x21c),'success'),clearLoginInfo();}async function resetFreeCreditsIfNeeded(){const _0x3a0906=_0x1458e7,_0x4c59dc=new Date(),_0x2c1ac3=new Date(currentUser[_0x3a0906(0x2d0)]);if(_0x4c59dc[_0x3a0906(0x345)]()-_0x2c1ac3['getTime']()>=0x18*0x3c*0x3c*0x3e8){const _0x295267=currentUser['freeCredits'];currentUser['freeCredits']=FREE_CREDITS_PER_DAY,currentUser[_0x3a0906(0x2d0)]=_0x4c59dc[_0x3a0906(0x281)](),await syncUserData(),document[_0x3a0906(0x166)]('freeCredits')[_0x3a0906(0x383)]=currentUser[_0x3a0906(0x355)];const _0x4f36dd=currentUser[_0x3a0906(0x355)]-_0x295267;_0x4f36dd>0x0&&showNotification(_0x4f36dd+_0x3a0906(0x2a1),_0x3a0906(0x1ef));}}async function checkModelAccess(){const _0x27de43=_0x1458e7,_0x3d1e5a=document[_0x27de43(0x166)]('modelSelect')[_0x27de43(0x2b8)],_0x3863f5=document[_0x27de43(0x166)](_0x27de43(0x30d));_0x3863f5[_0x27de43(0x191)]['display']=isImageGenerationModel(_0x3d1e5a)?_0x27de43(0x327):'none';if(isImageGenerationModel(_0x3d1e5a)){if(!hasValidSubscription()&&currentUser['paidCredits']<0x5&&currentUser[_0x27de43(0x355)]<0x5){showPaymentNotification(_0x27de43(0x21e)),document[_0x27de43(0x166)](_0x27de43(0x199))[_0x27de43(0x2b8)]=_0x27de43(0x193),_0x3863f5['style']['display']=_0x27de43(0x2b9);return;}}else!['gemini-exp-1206',_0x27de43(0x1d6)][_0x27de43(0x390)](_0x3d1e5a)&&!hasValidSubscription()&&currentUser[_0x27de43(0x35a)]<=0x0&&(showPaymentNotification('Ce\x20modèle\x20nécessite\x20un\x20abonnement\x20ou\x20des\x20crédits\x20payants.'),document['getElementById']('modelSelect')[_0x27de43(0x2b8)]=_0x27de43(0x193));}async function handleFileUpload(_0x366ad4){const _0x21d8b0=_0x1458e7,_0x499077=_0x366ad4[_0x21d8b0(0x2dc)]['files'];for(let _0x373b01=0x0;_0x373b01<_0x499077['length'];_0x373b01++){const _0x4622cc=_0x499077[_0x373b01];if(_0x4622cc['type']===_0x21d8b0(0x17e)||_0x4622cc[_0x21d8b0(0x30f)]===_0x21d8b0(0x1e5))try{const _0x1d4b11=await convertWordToText(_0x4622cc);pinnedFiles[_0x21d8b0(0x226)]({'name':_0x4622cc[_0x21d8b0(0x3a5)][_0x21d8b0(0x364)](/\.[^/.]+$/,'')+_0x21d8b0(0x322),'type':_0x21d8b0(0x396),'content':_0x1d4b11}),updatePinnedFiles(),importedFilesCount++,await db['ref']('users/'+currentUser['username'])[_0x21d8b0(0x211)]({'importedFilesCount':importedFilesCount});}catch(_0x19c253){console['error'](_0x21d8b0(0x1cf),_0x19c253),showNotification('Erreur\x20lors\x20de\x20la\x20conversion\x20du\x20fichier\x20Word.','error');}else(_0x4622cc[_0x21d8b0(0x30f)][_0x21d8b0(0x261)]('image/')||_0x4622cc[_0x21d8b0(0x30f)]===_0x21d8b0(0x254))&&(pinnedFiles[_0x21d8b0(0x226)](_0x4622cc),updatePinnedFiles());}}function convertWordToText(_0x2f126e){return new Promise((_0x2bb3e2,_0x59c91b)=>{const _0x132d5e=_0x5ccd,_0x359222=new FileReader();_0x359222[_0x132d5e(0x2f5)]=function(_0x2e9cda){const _0x1f62b2=_0x132d5e,_0x3fad40=_0x2e9cda[_0x1f62b2(0x2dc)]['result'];mammoth[_0x1f62b2(0x2fd)]({'arrayBuffer':_0x3fad40})[_0x1f62b2(0x1d2)](function(_0x38d59f){_0x2bb3e2(_0x38d59f['value']);})[_0x1f62b2(0x368)](function(_0x298110){_0x59c91b(_0x298110);});},_0x359222[_0x132d5e(0x162)](_0x2f126e);});}function updatePinnedFiles(){const _0x18d666=_0x1458e7,_0x231ddd=document[_0x18d666(0x166)](_0x18d666(0x1ce)),_0x1a3bd6=_0x231ddd[_0x18d666(0x2f4)](_0x18d666(0x1fc));_0x231ddd['innerHTML']='',_0x1a3bd6&&_0x231ddd[_0x18d666(0x369)](_0x1a3bd6),pinnedFiles[_0x18d666(0x2d6)]((_0x4ad89c,_0x20ca1f)=>{const _0x4a327f=_0x18d666,_0x23420a=document[_0x4a327f(0x23a)](_0x4a327f(0x2ef));_0x23420a[_0x4a327f(0x2c2)]=_0x4a327f(0x1d1),_0x23420a[_0x4a327f(0x2b7)]('data-type',_0x4a327f(0x36d)),_0x23420a[_0x4a327f(0x282)]=_0x4a327f(0x1f8)+(_0x4ad89c[_0x4a327f(0x30f)][_0x4a327f(0x261)](_0x4a327f(0x21b))?_0x4a327f(0x373):'📄')+_0x4a327f(0x23b)+_0x4ad89c[_0x4a327f(0x3a5)]+'\x22>'+_0x4ad89c[_0x4a327f(0x3a5)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedFile('+_0x20ca1f+_0x4a327f(0x23c),_0x231ddd[_0x4a327f(0x369)](_0x23420a);});}function removePinnedFile(_0x301b71){pinnedFiles['splice'](_0x301b71,0x1),updatePinnedFiles();}function createPinnedFilesElement(_0x302f2d){const _0x11df06=_0x1458e7,_0x13c770=document['createElement'](_0x11df06(0x2ef));return _0x13c770[_0x11df06(0x2c2)]=_0x11df06(0x1eb),_0x302f2d[_0x11df06(0x2d6)](_0x2ec4db=>{const _0x4c0f73=_0x11df06,_0x4b0f8a=document[_0x4c0f73(0x23a)](_0x4c0f73(0x2ef));_0x4b0f8a[_0x4c0f73(0x2c2)]=_0x4c0f73(0x1ba);if(_0x2ec4db['type'][_0x4c0f73(0x261)]('image/')){const _0x20918b=document['createElement'](_0x4c0f73(0x159));_0x20918b['src']=URL['createObjectURL'](_0x2ec4db),_0x20918b[_0x4c0f73(0x286)]=_0x2ec4db['name'],_0x20918b['className']=_0x4c0f73(0x2b2),_0x4b0f8a[_0x4c0f73(0x369)](_0x20918b);}else{const _0x118f9b=document['createElement'](_0x4c0f73(0x15b));_0x118f9b[_0x4c0f73(0x2c2)]='file-icon',_0x118f9b[_0x4c0f73(0x383)]=_0x2ec4db[_0x4c0f73(0x30f)]['startsWith']('application/pdf')?'📄':'📎',_0x4b0f8a['appendChild'](_0x118f9b);}const _0x59426c=document[_0x4c0f73(0x23a)]('span');_0x59426c[_0x4c0f73(0x2c2)]=_0x4c0f73(0x25a),_0x59426c[_0x4c0f73(0x383)]=_0x2ec4db['name'],_0x4b0f8a[_0x4c0f73(0x369)](_0x59426c),_0x13c770[_0x4c0f73(0x369)](_0x4b0f8a);}),_0x13c770;}function createPinnedResponsesElement(_0x432498){const _0x584492=_0x1458e7,_0x2766c7=document[_0x584492(0x23a)](_0x584492(0x2ef));return _0x2766c7[_0x584492(0x2c2)]=_0x584492(0x306),_0x432498[_0x584492(0x2d6)](_0x426bce=>{const _0x26d63d=_0x584492,_0x3d6ae5=document[_0x26d63d(0x23a)](_0x26d63d(0x2ef));_0x3d6ae5[_0x26d63d(0x2c2)]=_0x26d63d(0x2e0);const _0x34f232=document['createElement']('span');_0x34f232[_0x26d63d(0x2c2)]=_0x26d63d(0x2a2),_0x34f232[_0x26d63d(0x383)]='💬';const _0x17bd59=document['createElement'](_0x26d63d(0x15b));_0x17bd59['className']=_0x26d63d(0x1aa),_0x17bd59['textContent']=_0x426bce['displayText'],_0x3d6ae5[_0x26d63d(0x369)](_0x34f232),_0x3d6ae5['appendChild'](_0x17bd59),_0x2766c7[_0x26d63d(0x369)](_0x3d6ae5);}),_0x2766c7;}function createPinnedPromptElement(_0x4b3672){const _0x17b070=_0x1458e7,_0x120756=document['createElement']('div');_0x120756[_0x17b070(0x2c2)]=_0x17b070(0x2e1);const _0x3b05cb=document[_0x17b070(0x23a)](_0x17b070(0x2ef));_0x3b05cb[_0x17b070(0x2c2)]='pinned-prompt';const _0x566878=document[_0x17b070(0x23a)](_0x17b070(0x15b));_0x566878['className']=_0x17b070(0x18e),_0x566878[_0x17b070(0x383)]='🤖';const _0x2ff3cb=document['createElement'](_0x17b070(0x15b));return _0x2ff3cb[_0x17b070(0x2c2)]=_0x17b070(0x28a),_0x2ff3cb[_0x17b070(0x383)]=_0x4b3672['title'],_0x3b05cb[_0x17b070(0x369)](_0x566878),_0x3b05cb['appendChild'](_0x2ff3cb),_0x120756[_0x17b070(0x369)](_0x3b05cb),_0x120756;}function createModelHeader(_0x45408d){const _0x41395f=_0x1458e7,_0x211a9f={'gemini-1.5-flash':_0x41395f(0x1cc),'gemini-1.5-pro':_0x41395f(0x2b0),'gemini-1.5-pro-latest':_0x41395f(0x27c),'gemini-1.0-pro':'Gemini\x201.0\x20Pro','recraft-realistic':_0x41395f(0x1b7),'recraft-digital':_0x41395f(0x347),'recraft-vector':_0x41395f(0x36f)},_0x3e503b=_0x211a9f[_0x45408d]||_0x45408d;return _0x41395f(0x16d)+(isImageGenerationModel(_0x45408d)?_0x41395f(0x2a6):_0x41395f(0x2cf))+'\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x3e503b+_0x41395f(0x3a1);}async function sendMessage(){const _0x1577e9=_0x1458e7;if(!currentUser){showNotification(_0x1577e9(0x2d1),'error');return;}const _0xd8c09e=document[_0x1577e9(0x166)](_0x1577e9(0x2e4))[_0x1577e9(0x2b8)][_0x1577e9(0x37f)](),_0x26a4a2=document[_0x1577e9(0x166)](_0x1577e9(0x199))['value'];if(!_0xd8c09e&&pinnedFiles[_0x1577e9(0x15c)]===0x0&&pinnedResponses[_0x1577e9(0x15c)]===0x0&&!pinnedPrompt){showNotification(_0x1577e9(0x2b4),_0x1577e9(0x28e));return;}let _0x5a30b3=_0xd8c09e;pinnedPrompt&&(_0x5a30b3=pinnedPrompt[_0x1577e9(0x30f)]===_0x1577e9(0x210)?pinnedPrompt['content']+'\x0aDétails\x20spécifiques:\x20'+_0xd8c09e:pinnedPrompt[_0x1577e9(0x2f8)]+'\x0a\x0a'+_0xd8c09e);if(isImageGenerationModel(_0x26a4a2)){try{const _0x5e7d57=await canGenerateImage();if(!_0x5e7d57['canGenerate']){showPaymentNotification(_0x5e7d57[_0x1577e9(0x1c1)]);return;}const _0x293deb=document['createElement']('div');_0x293deb[_0x1577e9(0x2c2)]=_0x1577e9(0x25d),_0x293deb[_0x1577e9(0x282)]=_0x1577e9(0x155)+createModelHeader(_0x26a4a2)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22typing-indicator\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span><span></span><span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',document[_0x1577e9(0x166)]('messageContainer')['appendChild'](_0x293deb);const _0x4bd3e5=document[_0x1577e9(0x166)](_0x1577e9(0x30d))['value'],_0xfa439e=getRecraftStyle(_0x26a4a2),_0x4c5900=await fetch(_0x1577e9(0x24c),{'method':_0x1577e9(0x2bb),'headers':{'Content-Type':_0x1577e9(0x2c0),'Authorization':_0x1577e9(0x1a6)+RECRAFT_API_KEY},'body':JSON[_0x1577e9(0x28b)]({'prompt':_0x5a30b3,'style':_0xfa439e,'size':_0x4bd3e5})});if(!_0x4c5900['ok'])throw new Error('Erreur\x20lors\x20de\x20la\x20génération\x20de\x20l\x27image');const _0x1c5f5b=await _0x4c5900['json'](),_0x122cac=_0x1c5f5b[_0x1577e9(0x2f7)][0x0][_0x1577e9(0x1bc)];_0x293deb[_0x1577e9(0x282)]=_0x1577e9(0x155)+createModelHeader(_0x26a4a2)+_0x1577e9(0x1d0)+_0x122cac+_0x1577e9(0x1e4)+_0x5a30b3+_0x1577e9(0x1b2)+_0xfa439e[_0x1577e9(0x364)]('_','\x20')[_0x1577e9(0x1da)]()+_0x1577e9(0x2d5)+_0x4bd3e5+_0x1577e9(0x182)+(_0x5e7d57[_0x1577e9(0x178)]?_0x1577e9(0x319):_0x1577e9(0x214))+_0x1577e9(0x244)+_0x122cac+'\x27,\x20\x27image-generee.png\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-download\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyImage(\x27'+_0x122cac+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareImage(\x27'+_0x122cac+_0x1577e9(0x33c);if(_0x5e7d57[_0x1577e9(0x178)]){await incrementImageGenerationCount(currentUser[_0x1577e9(0x1f1)]);const _0x2d22a7=await getImageGenerationCount(currentUser[_0x1577e9(0x1f1)]);showNotification(_0x1577e9(0x253)+(0x5-_0x2d22a7)+'\x20générations\x20gratuites\x20aujourd\x27hui.',_0x1577e9(0x1ef));}else await updateCredits(_0x26a4a2,0x5),showNotification(_0x1577e9(0x2f2),_0x1577e9(0x1ef));}catch(_0x11e404){console[_0x1577e9(0x28e)]('Erreur\x20de\x20génération\x20d\x27image:',_0x11e404),showNotification(_0x1577e9(0x357),'error');}finally{document[_0x1577e9(0x166)]('userInput')[_0x1577e9(0x2b8)]='',resetTextareaHeight(),pinnedPrompt=null,updatePinnedItems();}return;}let _0x75bc8=0x1;_0x75bc8+=pinnedFiles[_0x1577e9(0x2af)](_0x4f6ada=>_0x4f6ada[_0x1577e9(0x30f)]!==_0x1577e9(0x396))[_0x1577e9(0x15c)],_0x75bc8+=pinnedResponses['length'];if(!hasValidSubscription()){if(_0x26a4a2===_0x1577e9(0x193)){if(currentUser[_0x1577e9(0x35a)]<_0x75bc8&&currentUser[_0x1577e9(0x355)]<_0x75bc8){showPaymentNotification('Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20pour\x20envoyer\x20ce\x20message.');return;}}else{if(!['gemini-1.0-pro'][_0x1577e9(0x390)](_0x26a4a2)&&currentUser['paidCredits']<_0x75bc8){showPaymentNotification(_0x1577e9(0x334));return;}}}const _0xc9e196=[...pinnedFiles],_0x3b347e=[...pinnedResponses],_0x4a0523=pinnedPrompt;pinnedFiles=[],pinnedResponses=[],pinnedPrompt=null,updatePinnedItems();const _0x5bcc67=addMessageToChat(_0x1577e9(0x321),_0xd8c09e,_0xc9e196,_0x3b347e,_0x4a0523),_0x23b25d=document[_0x1577e9(0x23a)]('div');_0x23b25d[_0x1577e9(0x2c2)]=_0x1577e9(0x25d),_0x23b25d[_0x1577e9(0x282)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+createModelHeader(_0x26a4a2)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22typing-indicator\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',document[_0x1577e9(0x166)]('messageContainer')[_0x1577e9(0x369)](_0x23b25d);try{const _0x4257fc=[];let _0xbf4e73=buildConversationContext();await addFilesToParts(_0x4257fc,_0xc9e196),_0x3b347e[_0x1577e9(0x2d6)](_0x429438=>{const _0x533f68=_0x1577e9;_0xbf4e73+=_0x533f68(0x392)+_0x429438[_0x533f68(0x28c)]+']\x0a';});_0x4a0523?(_0xbf4e73+=_0x1577e9(0x27e)+_0x4a0523[_0x1577e9(0x1a2)]+']\x0a',_0x4a0523['type']===_0x1577e9(0x210)?_0xbf4e73+=_0x1577e9(0x36c)+_0xd8c09e+'\x0a':_0xbf4e73+=_0x4a0523[_0x1577e9(0x2f8)]+'\x0a\x0a'+_0xd8c09e+'\x0a'):_0xbf4e73+=_0xd8c09e+'\x0a';_0x5a30b3=_0xbf4e73,_0x4257fc[_0x1577e9(0x226)]({'text':_0x5a30b3});let _0x3624d6,_0x4f2f8f=0x0;const _0x2e1f23=0x3;while(_0x4f2f8f<_0x2e1f23){try{const _0x5b297e=getNextApiKey();if(!_0x5b297e)throw new Error('Aucune\x20clé\x20API\x20disponible');genAI=new GoogleGenerativeAI(_0x5b297e),model=genAI[_0x1577e9(0x1dd)]({'model':_0x26a4a2,'systemInstruction':SYSTEM_INSTRUCTION});const _0x164d95=await model[_0x1577e9(0x309)](_0x4257fc);_0x3624d6=await _0x164d95[_0x1577e9(0x180)];break;}catch(_0x58072e){_0x4f2f8f++,console[_0x1577e9(0x28e)](_0x1577e9(0x223)+_0x4f2f8f+'/'+_0x2e1f23+_0x1577e9(0x2d3),_0x58072e);if(_0x4f2f8f===_0x2e1f23)throw new Error(_0x1577e9(0x3a3));const _0x37cf9e=Math['min'](0x3e8*Math[_0x1577e9(0x2c3)](0x2,_0x4f2f8f),0x1388);await new Promise(_0x1fb2b9=>setTimeout(_0x1fb2b9,_0x37cf9e));}}let _0x22c7d3=_0x3624d6[_0x1577e9(0x37d)]();if(_0x26a4a2==='gemini-1.0-pro'||_0x26a4a2===_0x1577e9(0x193)&&currentUser['paidCredits']<_0x75bc8){const _0x480dee=_0x22c7d3[_0x1577e9(0x2ea)](/\s+/);_0x480dee[_0x1577e9(0x15c)]>FREE_MODEL_MAX_RESPONSE&&(_0x22c7d3=_0x480dee[_0x1577e9(0x177)](0x0,FREE_MODEL_MAX_RESPONSE)[_0x1577e9(0x30a)]('\x20')+_0x1577e9(0x1e8),showNotification(_0x1577e9(0x24f)+FREE_MODEL_MAX_RESPONSE+_0x1577e9(0x29c),_0x1577e9(0x395)));}await animateText(_0x23b25d,_0x22c7d3),currentConversation['push']({'sender':'ai','content':_0x22c7d3}),await updateCredits(_0x26a4a2,_0x75bc8),saveConversation();}catch(_0x154114){console[_0x1577e9(0x28e)]('Erreur\x20lors\x20de\x20la\x20génération\x20de\x20la\x20réponse:',_0x154114),_0x23b25d[_0x1577e9(0x24e)](),showNotification('Erreur\x20:\x20'+_0x154114['message']+'.\x20Veuillez\x20réessayer.',_0x1577e9(0x28e));}finally{document[_0x1577e9(0x166)](_0x1577e9(0x2e4))[_0x1577e9(0x2b8)]='',resetTextareaHeight(),resetScrollState();}}document[_0x1458e7(0x303)]('DOMContentLoaded',initializeScrollListener);function resetPinnedItems(){pinnedFiles=[],pinnedResponses=[],pinnedPrompt=null,updatePinnedItems();}function buildConversationContext(){const _0x1bbd6d=_0x1458e7;let _0x2a3487='';const _0x3eb854=currentConversation[_0x1bbd6d(0x177)](-0x5);return _0x3eb854[_0x1bbd6d(0x2d6)](_0x127a16=>{const _0x44ecc9=_0x1bbd6d;_0x2a3487+=(_0x127a16['sender']==='user'?'user':_0x44ecc9(0x1ca))+':\x20'+_0x127a16['content']+'\x0a',_0x127a16[_0x44ecc9(0x202)]&&_0x127a16['files'][_0x44ecc9(0x2d6)](_0x3b1d41=>{const _0x104291=_0x44ecc9;_0x2a3487+='[Fichier\x20joint:\x20'+_0x3b1d41[_0x104291(0x3a5)]+']\x0a';}),_0x127a16[_0x44ecc9(0x273)]&&_0x127a16[_0x44ecc9(0x273)]['forEach'](_0x11b180=>{const _0x1156ec=_0x44ecc9;_0x2a3487+=_0x1156ec(0x392)+_0x11b180[_0x1156ec(0x28c)]+']\x0a';}),_0x127a16['prompt']&&(_0x2a3487+=_0x44ecc9(0x27e)+_0x127a16['prompt'][_0x44ecc9(0x1a2)]+']\x0a');}),_0x2a3487;}async function addFilesToParts(_0x207b58,_0x480775){const _0x45b788=_0x1458e7;for(const _0x3792f0 of _0x480775){if(_0x3792f0[_0x45b788(0x30f)]===_0x45b788(0x396))_0x207b58[_0x45b788(0x226)]({'text':_0x45b788(0x2da)+_0x3792f0[_0x45b788(0x2f8)]});else{const _0x10b0b7=await readFileAsBase64(_0x3792f0);_0x207b58[_0x45b788(0x226)]({'inlineData':{'data':_0x10b0b7,'mimeType':_0x3792f0[_0x45b788(0x30f)]}}),_0x207b58['push']({'text':_0x45b788(0x2b6)+_0x3792f0[_0x45b788(0x3a5)]+'\x20('+_0x3792f0['type']+')\x20que\x20je\x20viens\x20de\x20t\x27envoyer.'});}}}async function validateCreditsAndModel(_0x58de56,_0x29fffb){const _0x353898=_0x1458e7;if(_0x58de56==='gemini-exp-1206'){if(currentUser[_0x353898(0x35a)]>=_0x29fffb)return showNotification('Utilisation\x20de\x20crédits\x20payants\x20pour\x20Gemini\x20Exp\x201206.',_0x353898(0x395)),!![];else{if(currentUser[_0x353898(0x355)]>=_0x29fffb)return showNotification(_0x353898(0x38f),_0x353898(0x395)),!![];}}else{if(![_0x353898(0x1d6)]['includes'](_0x58de56)){if(currentUser[_0x353898(0x35a)]<_0x29fffb)return showPaymentNotification(_0x353898(0x334)),![];}else{if(currentUser[_0x353898(0x355)]<_0x29fffb&&currentUser['paidCredits']<_0x29fffb)return showPaymentNotification(_0x353898(0x2dd)),![];}}return!![];}async function processAndDisplayAIResponse(_0x730964,_0x29f00b,_0xb74cd3){const _0x36fe19=_0x1458e7;let _0x3ee98e;if(_0x29f00b===_0x36fe19(0x1d6)||_0x29f00b==='gemini-exp-1206'&&currentUser[_0x36fe19(0x35a)]<_0xb74cd3){const _0x232acc=_0x730964[_0x36fe19(0x2ea)](/\s+/);_0x232acc[_0x36fe19(0x15c)]>FREE_MODEL_MAX_RESPONSE?(_0x730964=_0x232acc[_0x36fe19(0x177)](0x0,FREE_MODEL_MAX_RESPONSE)[_0x36fe19(0x30a)]('\x20')+_0x36fe19(0x1e8),showNotification(_0x36fe19(0x24f)+FREE_MODEL_MAX_RESPONSE+_0x36fe19(0x29c),_0x36fe19(0x395)),_0x3ee98e=addMessageToChat('ai',_0x730964),showUpgradeButton(_0x3ee98e)):_0x3ee98e=addMessageToChat('ai',_0x730964);}else _0x3ee98e=addMessageToChat('ai',_0x730964);return _0x3ee98e;}function updateConversation(_0xcc816,_0x380f62){const _0x4c3bd8=_0x1458e7;currentConversation['push']({'sender':_0x4c3bd8(0x321),'content':_0xcc816}),currentConversation[_0x4c3bd8(0x226)]({'sender':'ai','content':_0x380f62});}async function handleImageGeneration(_0x260acd,_0x450c0b,_0x474cd2){const _0x4baa73=_0x1458e7;try{if(!_0x474cd2['canGenerate']){showPaymentNotification(_0x474cd2[_0x4baa73(0x1c1)]);return;}const _0x1239c5=document[_0x4baa73(0x166)]('imageSizeSelect')['value'],_0x4decf6=getRecraftStyle(_0x450c0b),_0x10e7e2=addLoadingMessage(_0x4baa73(0x26e)),_0x5f2783=await fetch('https://api.recraft.ai/api/v2/generate',{'method':'POST','headers':{'Content-Type':_0x4baa73(0x2c0),'Authorization':_0x4baa73(0x1a6)+RECRAFT_API_KEY},'body':JSON[_0x4baa73(0x28b)]({'prompt':_0x260acd,'style':_0x4decf6,'size':_0x1239c5,'n':0x1})});_0x10e7e2[_0x4baa73(0x24e)]();if(!_0x5f2783['ok'])throw new Error(_0x4baa73(0x2e8)+_0x5f2783[_0x4baa73(0x371)]);const _0x436fe9=await _0x5f2783[_0x4baa73(0x1bf)]();if(!_0x436fe9[_0x4baa73(0x2f7)]||!_0x436fe9['data'][0x0]||!_0x436fe9['data'][0x0][_0x4baa73(0x1bc)])throw new Error('Format\x20de\x20réponse\x20invalide\x20de\x20l\x27API\x20Recraft');const _0x52d7b6=_0x436fe9['data'][0x0][_0x4baa73(0x1bc)],_0x2d1509=document[_0x4baa73(0x23a)](_0x4baa73(0x2ef));_0x2d1509[_0x4baa73(0x2c2)]=_0x4baa73(0x25d),_0x2d1509[_0x4baa73(0x282)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x52d7b6+_0x4baa73(0x1e4)+_0x260acd+_0x4baa73(0x1b2)+_0x4decf6[_0x4baa73(0x364)]('_','\x20')[_0x4baa73(0x1da)]()+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>Taille:\x20'+_0x1239c5+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x474cd2[_0x4baa73(0x178)]?'Génération\x20gratuite\x20(abonnement)':'Génération\x20payante\x20(5\x20crédits)')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22downloadImage(\x27'+_0x52d7b6+_0x4baa73(0x30c)+_0x52d7b6+_0x4baa73(0x38d)+_0x52d7b6+_0x4baa73(0x33c),document[_0x4baa73(0x166)](_0x4baa73(0x1a4))[_0x4baa73(0x369)](_0x2d1509);if(_0x474cd2[_0x4baa73(0x178)]){await incrementImageGenerationCount(currentUser[_0x4baa73(0x1f1)]);const _0x336ba3=await getImageGenerationCount(currentUser[_0x4baa73(0x1f1)]);showNotification('Image\x20générée\x20avec\x20succès!\x20Il\x20vous\x20reste\x20'+(0x5-_0x336ba3)+'\x20générations\x20gratuites\x20aujourd\x27hui.','success');}else await updateCredits(_0x450c0b,0x5),showNotification(_0x4baa73(0x2f2),_0x4baa73(0x1ef));document[_0x4baa73(0x166)]('userInput')[_0x4baa73(0x2b8)]='',resetTextareaHeight();}catch(_0x29a8ad){console[_0x4baa73(0x28e)](_0x4baa73(0x366),_0x29a8ad),showNotification(_0x4baa73(0x357),_0x4baa73(0x28e));}}function createUserMessageElement(_0x5546f9,_0x5197a5,_0x4bd05a,_0x207105){const _0x2ae426=_0x1458e7,_0x4053aa=document[_0x2ae426(0x23a)](_0x2ae426(0x2ef));_0x4053aa[_0x2ae426(0x2c2)]=_0x2ae426(0x33e);_0x5197a5[_0x2ae426(0x15c)]>0x0&&_0x4053aa['appendChild'](createPinnedFilesElement(_0x5197a5));_0x4bd05a[_0x2ae426(0x15c)]>0x0&&_0x4053aa[_0x2ae426(0x369)](createPinnedResponsesElement(_0x4bd05a));_0x207105&&_0x4053aa[_0x2ae426(0x369)](createPinnedPromptElement(_0x207105));if(_0x5546f9){const _0x3fac4f=document[_0x2ae426(0x23a)]('p');_0x3fac4f['textContent']=_0x5546f9,_0x4053aa[_0x2ae426(0x369)](_0x3fac4f);}return _0x4053aa;}function addLoadingMessage(_0x3f0e34){const _0x33d7e2=_0x1458e7,_0x5f3f40=document['createElement'](_0x33d7e2(0x2ef));return _0x5f3f40[_0x33d7e2(0x2c2)]=_0x33d7e2(0x2fa),_0x5f3f40[_0x33d7e2(0x282)]=_0x33d7e2(0x2d4)+_0x3f0e34+_0x33d7e2(0x349),document[_0x33d7e2(0x166)](_0x33d7e2(0x1a4))[_0x33d7e2(0x369)](_0x5f3f40),_0x5f3f40;}async function downloadImage(_0x1eaaf6,_0x31fc28){const _0x451751=_0x1458e7;try{const _0x27cc2e=await fetch(_0x1eaaf6),_0x3592db=await _0x27cc2e[_0x451751(0x1bb)](),_0xc26f67=window[_0x451751(0x1fa)][_0x451751(0x325)](_0x3592db),_0x1d496f=document[_0x451751(0x23a)]('a');_0x1d496f[_0x451751(0x32e)]=_0xc26f67,_0x1d496f['download']=_0x31fc28,document[_0x451751(0x3a2)][_0x451751(0x369)](_0x1d496f),_0x1d496f[_0x451751(0x2ca)](),document[_0x451751(0x3a2)]['removeChild'](_0x1d496f),window[_0x451751(0x1fa)]['revokeObjectURL'](_0xc26f67);}catch(_0x251c58){showNotification(_0x451751(0x29e),_0x451751(0x28e));}}function copyImage(_0x57f53d){const _0x2c84ec=_0x1458e7;navigator['clipboard'][_0x2c84ec(0x377)](_0x57f53d)[_0x2c84ec(0x1d2)](()=>showNotification('Lien\x20de\x20l\x27image\x20copié\x20dans\x20le\x20presse-papiers!',_0x2c84ec(0x1ef)))[_0x2c84ec(0x368)](()=>showNotification(_0x2c84ec(0x31b),_0x2c84ec(0x28e)));}function shareImage(_0x5299fe){const _0x233f35=_0x1458e7;navigator[_0x233f35(0x232)]?navigator[_0x233f35(0x232)]({'title':_0x233f35(0x358),'text':_0x233f35(0x154),'url':_0x5299fe})['then'](()=>showNotification(_0x233f35(0x340),_0x233f35(0x1ef)))['catch'](_0x514818=>{const _0x35e9a8=_0x233f35;console['error'](_0x35e9a8(0x221),_0x514818),showNotification('Erreur\x20lors\x20du\x20partage\x20de\x20l\x27image.',_0x35e9a8(0x28e));}):copyImage(_0x5299fe);}function pinResponse(_0x3a026b){const _0x1f5d54=_0x1458e7,_0xbbd376=_0x3a026b[_0x1f5d54(0x2f4)]('div:first-child')['textContent'],_0x2db88d=_0xbbd376[_0x1f5d54(0x15c)]>0x32?_0xbbd376[_0x1f5d54(0x335)](0x0,0x32)+_0x1f5d54(0x385):_0xbbd376;pinnedResponses[_0x1f5d54(0x226)]({'text':_0xbbd376,'displayText':_0x2db88d}),updatePinnedItems();}function updatePinnedItems(){const _0x6edb48=_0x1458e7,_0x3cd325=document['getElementById']('pinnedItems');_0x3cd325[_0x6edb48(0x282)]='',pinnedFiles[_0x6edb48(0x2d6)]((_0x1ebcef,_0x2b7d01)=>{const _0x13277a=_0x6edb48,_0x163f2b=document[_0x13277a(0x23a)]('div');_0x163f2b[_0x13277a(0x2c2)]=_0x13277a(0x1d1),_0x163f2b[_0x13277a(0x2b7)](_0x13277a(0x35c),_0x13277a(0x36d)),_0x163f2b[_0x13277a(0x282)]=_0x13277a(0x1f8)+(_0x1ebcef[_0x13277a(0x30f)][_0x13277a(0x261)](_0x13277a(0x21b))?'🖼️':'📄')+_0x13277a(0x23b)+_0x1ebcef['name']+'\x22>'+_0x1ebcef[_0x13277a(0x3a5)]+_0x13277a(0x15f)+_0x2b7d01+_0x13277a(0x23c),_0x3cd325['appendChild'](_0x163f2b);}),pinnedResponses[_0x6edb48(0x2d6)]((_0x47a07a,_0x2e15e4)=>{const _0x75dc78=_0x6edb48,_0x3ece6d=document['createElement'](_0x75dc78(0x2ef));_0x3ece6d[_0x75dc78(0x2c2)]='pinned-item',_0x3ece6d['setAttribute'](_0x75dc78(0x35c),_0x75dc78(0x180)),_0x3ece6d[_0x75dc78(0x282)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>💬</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22'+_0x47a07a[_0x75dc78(0x37d)]+'\x22>'+_0x47a07a['displayText']+_0x75dc78(0x185)+_0x2e15e4+_0x75dc78(0x23c),_0x3cd325[_0x75dc78(0x369)](_0x3ece6d);});if(pinnedPrompt){const _0x437850=document['createElement'](_0x6edb48(0x2ef));_0x437850[_0x6edb48(0x2c2)]='pinned-item',_0x437850[_0x6edb48(0x2b7)](_0x6edb48(0x35c),_0x6edb48(0x2bd)),_0x437850[_0x6edb48(0x282)]=_0x6edb48(0x2bf)+pinnedPrompt['title']+'\x22>'+pinnedPrompt[_0x6edb48(0x1a2)]+_0x6edb48(0x285),_0x3cd325[_0x6edb48(0x369)](_0x437850);}}function removePinnedItem(_0x1a788f,_0x599ee4){const _0x27da97=_0x1458e7;if(_0x1a788f===_0x27da97(0x36d))pinnedFiles[_0x27da97(0x192)](_0x599ee4,0x1);else{if(_0x1a788f==='response')pinnedResponses[_0x27da97(0x192)](_0x599ee4,0x1);else _0x1a788f==='prompt'&&(pinnedPrompt=null);}updatePinnedItems();}function replyToMessage(_0x25fc64){const _0x192d38=_0x1458e7,_0x2d680a=_0x25fc64['querySelector'](_0x192d38(0x249))[_0x192d38(0x383)],_0x4545e7=document[_0x192d38(0x166)](_0x192d38(0x2e4));_0x4545e7[_0x192d38(0x2b8)]='>\x20'+_0x2d680a+'\x0a\x0a',_0x4545e7[_0x192d38(0x31a)](),_0x4545e7[_0x192d38(0x20a)](_0x4545e7[_0x192d38(0x2b8)][_0x192d38(0x15c)],_0x4545e7[_0x192d38(0x2b8)][_0x192d38(0x15c)]);}function readFileAsBase64(_0x5d120a){return new Promise((_0x2cfe9f,_0x473553)=>{const _0x159365=_0x5ccd,_0x32d169=new FileReader();_0x32d169['onload']=()=>_0x2cfe9f(_0x32d169[_0x159365(0x1ea)][_0x159365(0x2ea)](',')[0x1]),_0x32d169[_0x159365(0x251)]=_0x473553,_0x32d169[_0x159365(0x26f)](_0x5d120a);});}function hasEnoughCredits(_0x4587fb,_0x27fded){const _0x952bec=_0x1458e7,_0xa61815=_0x27fded>0x0?_0x27fded:0x1;return _0x4587fb===_0x952bec(0x193)||_0x4587fb===_0x952bec(0x1d6)?currentUser[_0x952bec(0x355)]>=_0xa61815||currentUser['paidCredits']>=_0xa61815||hasValidSubscription():currentUser[_0x952bec(0x35a)]>=_0xa61815||hasValidSubscription();}async function updateCredits(_0x3c5c55,_0x5a07e4){const _0x302dbf=_0x1458e7;if(hasValidSubscription()&&!isImageGenerationModel(_0x3c5c55))return;const _0x4d41bc=db[_0x302dbf(0x2a7)]('users/'+currentUser[_0x302dbf(0x1f1)]);try{await _0x4d41bc[_0x302dbf(0x382)](_0x3495fe=>{const _0x8516be=_0x302dbf;if(_0x3495fe){if(isImageGenerationModel(_0x3c5c55)){if(hasValidSubscription()){const _0x185224=_0x3495fe[_0x8516be(0x34f)]?.[_0x8516be(0x259)]||0x0;_0x185224>=0x5&&(_0x3495fe[_0x8516be(0x35a)]>=0x5?_0x3495fe[_0x8516be(0x35a)]-=0x5:_0x3495fe[_0x8516be(0x355)]=Math[_0x8516be(0x298)](0x0,_0x3495fe[_0x8516be(0x355)]-0x5));}else _0x3495fe[_0x8516be(0x35a)]>=0x5?_0x3495fe[_0x8516be(0x35a)]-=0x5:_0x3495fe[_0x8516be(0x355)]=Math[_0x8516be(0x298)](0x0,_0x3495fe['freeCredits']-0x5);}else{if(!hasValidSubscription()){if(_0x3c5c55===_0x8516be(0x193))_0x3495fe['paidCredits']>=_0x5a07e4?_0x3495fe[_0x8516be(0x35a)]-=_0x5a07e4:_0x3495fe[_0x8516be(0x355)]-=_0x5a07e4;else{if(_0x3c5c55===_0x8516be(0x1d6)){if(_0x3495fe[_0x8516be(0x355)]>=_0x5a07e4)_0x3495fe[_0x8516be(0x355)]-=_0x5a07e4;else{const _0x191af9=_0x5a07e4-_0x3495fe[_0x8516be(0x355)];_0x3495fe[_0x8516be(0x355)]=0x0,_0x3495fe['paidCredits']=Math[_0x8516be(0x298)](0x0,_0x3495fe['paidCredits']-_0x191af9);}}else _0x3495fe['paidCredits']=Math['max'](0x0,_0x3495fe[_0x8516be(0x35a)]-_0x5a07e4);}}}_0x3495fe[_0x8516be(0x355)]=Math[_0x8516be(0x298)](0x0,_0x3495fe[_0x8516be(0x355)]),_0x3495fe[_0x8516be(0x35a)]=Math[_0x8516be(0x298)](0x0,_0x3495fe['paidCredits']);}return _0x3495fe;});const _0x2bea17=await _0x4d41bc['once']('value'),_0x2605d3=_0x2bea17['val']();_0x2605d3&&(currentUser[_0x302dbf(0x355)]=_0x2605d3[_0x302dbf(0x355)],currentUser[_0x302dbf(0x35a)]=_0x2605d3['paidCredits'],document[_0x302dbf(0x166)](_0x302dbf(0x355))['textContent']=currentUser[_0x302dbf(0x355)],document[_0x302dbf(0x166)](_0x302dbf(0x35a))['textContent']=currentUser[_0x302dbf(0x35a)],currentUser[_0x302dbf(0x355)]===0x0&&currentUser[_0x302dbf(0x35a)]<0x5&&showNotification(_0x302dbf(0x1d7),_0x302dbf(0x151)));}catch(_0x2920f3){console[_0x302dbf(0x28e)](_0x302dbf(0x2c4),_0x2920f3),showNotification(_0x302dbf(0x2ec),_0x302dbf(0x28e));}}async function addCreditsToUser(_0x16012f){const _0x472a47=_0x1458e7,_0xa4d01=db['ref'](_0x472a47(0x38c)+currentUser['username']);await _0xa4d01[_0x472a47(0x382)](_0x48bfae=>{const _0x4b1021=_0x472a47;return _0x48bfae&&(_0x48bfae[_0x4b1021(0x35a)]+=_0x16012f),_0x48bfae;}),currentUser[_0x472a47(0x35a)]=(await _0xa4d01[_0x472a47(0x278)](_0x472a47(0x35a))['once']('value'))[_0x472a47(0x2e3)](),document['getElementById']('paidCredits')[_0x472a47(0x383)]=currentUser[_0x472a47(0x35a)];}function copyResponse(_0x4cc563){const _0x3f600b=_0x1458e7,_0x383797=_0x4cc563[_0x3f600b(0x2f4)]('div:first-child')[_0x3f600b(0x383)];navigator[_0x3f600b(0x14e)][_0x3f600b(0x377)](_0x383797)[_0x3f600b(0x1d2)](()=>{const _0x80b6c2=_0x3f600b;showNotification(_0x80b6c2(0x189),_0x80b6c2(0x1ef));});}async function exportResponse(_0xd3e928,_0xee14d6){const _0x3ffc66=_0x1458e7,_0x3e9a8a=_0xd3e928[_0x3ffc66(0x2f4)](_0x3ffc66(0x249))['textContent'];if(_0xee14d6===_0x3ffc66(0x341)){const _0x30260f=await generateWordDoc(_0x3e9a8a);saveAs(_0x30260f,'Eduque_moi.docx');}else{if(_0xee14d6===_0x3ffc66(0x235)){const _0x4b1831=await generatePDF(_0x3e9a8a);saveAs(_0x4b1831,_0x3ffc66(0x284));}}showNotification(_0x3ffc66(0x326)+_0xee14d6[_0x3ffc66(0x1da)]()+_0x3ffc66(0x2ac),'success');}async function generateWordDoc(_0x31a35a){const _0x5c467c=_0x1458e7,_0x411b35=_0x5c467c(0x22e)+_0x31a35a+_0x5c467c(0x2fc),_0x5a61e8=new PizZip();_0x5a61e8[_0x5c467c(0x36d)](_0x5c467c(0x1c5),_0x411b35);const _0x5814d3=await _0x5a61e8['generateAsync']({'type':'blob','mimeType':_0x5c467c(0x17e)});return _0x5814d3;}function generatePDF(_0x3142f9){const _0xde0a5f=_0x1458e7,{jsPDF:_0x50cf7e}=window['jspdf'],_0x2c1bfb=new _0x50cf7e();_0x2c1bfb[_0xde0a5f(0x2e7)](0x12),_0x2c1bfb[_0xde0a5f(0x37d)]('',0x14,0x14),_0x2c1bfb[_0xde0a5f(0x2e7)](0xc);const _0x9ec7e8=_0x2c1bfb['splitTextToSize'](_0x3142f9,0xaa);let _0x1c2e31=0x1e;const _0x347c6a=_0x2c1bfb[_0xde0a5f(0x343)][_0xde0a5f(0x2c7)][_0xde0a5f(0x208)];for(let _0x57ef8d=0x0;_0x57ef8d<_0x9ec7e8[_0xde0a5f(0x15c)];_0x57ef8d++){_0x1c2e31>_0x347c6a-0x14&&(_0x2c1bfb[_0xde0a5f(0x32b)](),_0x1c2e31=0x14),_0x2c1bfb[_0xde0a5f(0x37d)](_0x9ec7e8[_0x57ef8d],0x14,_0x1c2e31),_0x1c2e31+=0x7;}return _0x2c1bfb['output']('blob');}function shareResponse(_0x15da01){const _0x41a144=_0x1458e7,_0x41c30c=_0x15da01[_0x41a144(0x2f4)](_0x41a144(0x249))[_0x41a144(0x383)];navigator[_0x41a144(0x232)]?navigator[_0x41a144(0x232)]({'title':'','text':_0x41c30c})[_0x41a144(0x1d2)](()=>{const _0x3d8ee0=_0x41a144;showNotification(_0x3d8ee0(0x1a7),_0x3d8ee0(0x1ef));})['catch'](_0x1fa100=>{const _0x16fd52=_0x41a144;console[_0x16fd52(0x28e)](_0x16fd52(0x221),_0x1fa100),showNotification(_0x16fd52(0x227),_0x16fd52(0x28e));}):showNotification(_0x41a144(0x183),'error');}function hasValidSubscription(){const _0x24715e=_0x1458e7;if(!currentUser['subscription']||!currentUser[_0x24715e(0x18c)])return![];return new Date()<new Date(currentUser[_0x24715e(0x18c)]);}function buySubscription(){const _0x1bc72d=_0x1458e7,_0x4f0226=document[_0x1bc72d(0x166)](_0x1bc72d(0x34a))[_0x1bc72d(0x2b8)];if(!_0x4f0226){showNotification(_0x1bc72d(0x2a5),'error');return;}const _0x72f9e2={'24h':0x1f4,'3d':0x4b0,'7d':0x960,'30d':0x1f40,'3m':0x4e20},_0x12ef6e=_0x72f9e2[_0x4f0226];var _0x45f723=FedaPay['init']({'public_key':_0x1bc72d(0x30e),'transaction':{'amount':_0x12ef6e,'description':'Achat\x20d\x27un\x20forfait\x20'+_0x4f0226+'\x20pour\x20Eduque\x20moi'},'customer':{'email':_0x1bc72d(0x186)},'onComplete':async function(_0x186aa5){const _0x4d6bee=_0x1bc72d;if(_0x186aa5[_0x4d6bee(0x164)]===FedaPay['CHECKOUT_COMPLETED']){const _0x1cb327={'id':_0x186aa5['id'],'description':'Achat\x20d\x27un\x20forfait\x20'+_0x4f0226+_0x4d6bee(0x1f7),'amount':_0x12ef6e};await activateSubscription(_0x4f0226),showInvoiceDetails(_0x1cb327),showNotification('Forfait\x20'+_0x4f0226+_0x4d6bee(0x255),_0x4d6bee(0x1ef)),await checkFirstPurchaseAndRewardReferrer(currentUser[_0x4d6bee(0x1f1)],_0x12ef6e);}else showNotification(_0x4d6bee(0x22a),_0x4d6bee(0x28e));}});_0x45f723['open']();}async function activateSubscription(_0x494aac){const _0x486704=_0x1458e7,_0x3e1fdf={'24h':0x1,'3d':0x3,'7d':0x7,'30d':0x1e,'3m':0x5a},_0x2ef1b2=_0x3e1fdf[_0x494aac],_0x511bbd=new Date();_0x511bbd[_0x486704(0x387)](_0x511bbd[_0x486704(0x37c)]()+_0x2ef1b2),currentUser[_0x486704(0x32a)]=_0x494aac,currentUser[_0x486704(0x18c)]=_0x511bbd[_0x486704(0x281)](),await syncUserData(),document['getElementById'](_0x486704(0x32a))[_0x486704(0x383)]=_0x494aac;}function buyCredits(){const _0xd774f9=_0x1458e7,_0x24e340=document[_0xd774f9(0x166)](_0xd774f9(0x190))[_0xd774f9(0x2b8)];if(!_0x24e340){showNotification(_0xd774f9(0x276),_0xd774f9(0x28e));return;}const _0x219a22={'10':0xc8,'100':0x3e8,'500':0x1194,'1000':0x1f40},_0x5ccdfa=_0x219a22[_0x24e340];var _0x52707b=FedaPay['init']({'public_key':_0xd774f9(0x30e),'transaction':{'amount':_0x5ccdfa,'description':_0xd774f9(0x2a9)+_0x24e340+_0xd774f9(0x36e)},'customer':{'email':_0xd774f9(0x186)},'onComplete':async function(_0x51b14d){const _0x4fb846=_0xd774f9;if(_0x51b14d[_0x4fb846(0x164)]===FedaPay[_0x4fb846(0x2cc)]){const _0x3d61b6={'id':_0x51b14d['id'],'description':_0x4fb846(0x2a9)+_0x24e340+'\x20crédits\x20pour\x20Eduque\x20moi','amount':_0x5ccdfa};await addCreditsToUser(parseInt(_0x24e340)),showInvoiceDetails(_0x3d61b6),showNotification(_0x24e340+_0x4fb846(0x267),_0x4fb846(0x1ef)),await checkFirstPurchaseAndRewardReferrer(currentUser[_0x4fb846(0x1f1)],_0x5ccdfa);}else showNotification(_0x4fb846(0x22a),_0x4fb846(0x28e));}});_0x52707b['open']();}async function checkFirstPurchaseAndRewardReferrer(_0x4ea5f9,_0x3106a7){const _0x1d9ed6=_0x1458e7,_0x464896=db[_0x1d9ed6(0x2a7)](_0x1d9ed6(0x38c)+_0x4ea5f9),_0x138ffd=await _0x464896[_0x1d9ed6(0x2f3)](_0x1d9ed6(0x2b8)),_0x3b3216=_0x138ffd[_0x1d9ed6(0x2e3)]();if(_0x3b3216&&!_0x3b3216[_0x1d9ed6(0x19d)]){await _0x464896[_0x1d9ed6(0x211)]({'firstPurchase':!![]});if(_0x3b3216[_0x1d9ed6(0x1f3)]){const _0x39f9b9=await db[_0x1d9ed6(0x2a7)](_0x1d9ed6(0x176))['orderByChild'](_0x1d9ed6(0x1f4))[_0x1d9ed6(0x256)](_0x3b3216['referredBy'])[_0x1d9ed6(0x2f3)](_0x1d9ed6(0x2b8)),_0x201b74=_0x39f9b9[_0x1d9ed6(0x2e3)]();if(_0x201b74){const _0xa3946b=Object[_0x1d9ed6(0x33f)](_0x201b74)[0x0],_0x19f877=db[_0x1d9ed6(0x2a7)](_0x1d9ed6(0x38c)+_0xa3946b);await _0x19f877['transaction'](_0x2b8225=>{const _0x266c4a=_0x1d9ed6;return _0x2b8225&&(_0x2b8225['paidCredits']=(_0x2b8225[_0x266c4a(0x35a)]||0x0)+0xa,_0x2b8225[_0x266c4a(0x313)]&&_0x2b8225[_0x266c4a(0x313)][_0x4ea5f9]&&(_0x2b8225[_0x266c4a(0x313)][_0x4ea5f9][_0x266c4a(0x195)]=!![])),_0x2b8225;}),await updateReferralStats(_0xa3946b),showNotification(_0x1d9ed6(0x2f9)+_0x4ea5f9+_0x1d9ed6(0x34e),_0x1d9ed6(0x1ef));}}}}function getShareMessage(_0x16077d){const _0x23d368=_0x1458e7;return encodeURIComponent(_0x23d368(0x2d7)+_0x16077d+_0x23d368(0x1e9));}function shareOnFacebook(){const _0x660e86=_0x1458e7,_0x4e9bb8=document[_0x660e86(0x166)](_0x660e86(0x277))[_0x660e86(0x2b8)],_0x324bcd=getShareMessage(_0x4e9bb8);window[_0x660e86(0x165)](_0x660e86(0x20c)+_0x4e9bb8+_0x660e86(0x204)+_0x324bcd,_0x660e86(0x2c5));}function shareOnTwitter(){const _0x40090a=_0x1458e7,_0x2d1ccb=document['getElementById'](_0x40090a(0x277))[_0x40090a(0x2b8)],_0x5a721e=getShareMessage(_0x2d1ccb);window[_0x40090a(0x165)](_0x40090a(0x26a)+_0x2d1ccb+_0x40090a(0x3a6)+_0x5a721e,_0x40090a(0x2c5));}function shareOnLinkedIn(){const _0x15c3b5=_0x1458e7,_0x40a9c0=document[_0x15c3b5(0x166)](_0x15c3b5(0x277))['value'],_0x5d4075=getShareMessage(_0x40a9c0);window[_0x15c3b5(0x165)]('https://www.linkedin.com/shareArticle?mini=true&url='+_0x40a9c0+_0x15c3b5(0x2ae)+_0x5d4075,'_blank');}function shareOnWhatsApp(){const _0x2c18a7=_0x1458e7,_0x36e1ad=document[_0x2c18a7(0x166)]('referralLink')[_0x2c18a7(0x2b8)],_0x5577d1=getShareMessage(_0x36e1ad);window['open'](_0x2c18a7(0x354)+_0x5577d1,_0x2c18a7(0x2c5));}function copyReferralLink(){const _0x2e3120=_0x1458e7,_0x3eb530=document[_0x2e3120(0x166)](_0x2e3120(0x277));_0x3eb530[_0x2e3120(0x19e)](),document['execCommand'](_0x2e3120(0x38a)),showNotification('Lien\x20de\x20partage\x20copié\x20!',_0x2e3120(0x1ef));}function showNotification(_0x2a5f09,_0x3a6b7f){const _0x354e46=_0x1458e7,_0x43cb0e=document[_0x354e46(0x23a)](_0x354e46(0x2ef));_0x43cb0e[_0x354e46(0x383)]=_0x2a5f09,_0x43cb0e[_0x354e46(0x2c2)]=_0x354e46(0x314)+_0x3a6b7f,document[_0x354e46(0x3a2)][_0x354e46(0x369)](_0x43cb0e),setTimeout(()=>{const _0x4bead9=_0x354e46;_0x43cb0e['classList'][_0x4bead9(0x3a0)](_0x4bead9(0x152)),setTimeout(()=>{const _0x20890c=_0x4bead9;_0x43cb0e[_0x20890c(0x2db)][_0x20890c(0x24e)]('show'),setTimeout(()=>{const _0x2918a3=_0x20890c;_0x43cb0e[_0x2918a3(0x24e)]();},0x12c);},0xbb8);},0x64);}function showPaymentNotification(_0x5379a9){const _0x2503f4=_0x1458e7,_0x302f5a=document[_0x2503f4(0x23a)](_0x2503f4(0x2ef));_0x302f5a[_0x2503f4(0x2c2)]=_0x2503f4(0x1be),_0x302f5a['innerHTML']=_0x2503f4(0x1a1)+_0x5379a9+_0x2503f4(0x359),document[_0x2503f4(0x3a2)][_0x2503f4(0x369)](_0x302f5a),setTimeout(()=>{const _0x2661b7=_0x2503f4;_0x302f5a[_0x2661b7(0x2db)][_0x2661b7(0x3a0)](_0x2661b7(0x152)),setTimeout(()=>{const _0x12bac6=_0x2661b7;_0x302f5a['classList']['remove'](_0x12bac6(0x152)),setTimeout(()=>{const _0x5bf47c=_0x12bac6;_0x302f5a[_0x5bf47c(0x24e)]();},0x12c);},0x2710);},0x64);}async function showPaymentNotificationWithFreeOption(_0x3b6d7b){return new Promise(_0x99f532=>{const _0x5824ee=_0x5ccd,_0x22e74b=document['createElement'](_0x5824ee(0x2ef));_0x22e74b[_0x5824ee(0x2c2)]=_0x5824ee(0x1be),_0x22e74b[_0x5824ee(0x282)]=_0x5824ee(0x155)+_0x3b6d7b+_0x5824ee(0x38e),document[_0x5824ee(0x3a2)]['appendChild'](_0x22e74b),window[_0x5824ee(0x1a0)]=function(_0x1963d4){const _0x82a634=_0x5824ee;_0x22e74b[_0x82a634(0x24e)](),_0x99f532(_0x1963d4);},setTimeout(()=>{const _0x1c6a16=_0x5824ee;_0x22e74b[_0x1c6a16(0x2db)][_0x1c6a16(0x3a0)](_0x1c6a16(0x152));},0x64);});}function toggleTheme(){const _0x3ee7ab=_0x1458e7,_0xb17fd1=document[_0x3ee7ab(0x3a2)],_0x174630=_0xb17fd1['getAttribute'](_0x3ee7ab(0x222)),_0x14bfb5=_0x174630===_0x3ee7ab(0x315)?_0x3ee7ab(0x172):_0x3ee7ab(0x315);_0xb17fd1[_0x3ee7ab(0x2b7)]('data-theme',_0x14bfb5),localStorage[_0x3ee7ab(0x28d)]('theme',_0x14bfb5),updateThemeIcon(_0x14bfb5),document[_0x3ee7ab(0x2f4)](_0x3ee7ab(0x1e6))[_0x3ee7ab(0x2b7)]('content',_0x14bfb5);}function updateThemeIcon(_0x38fc7a){const _0x4e6128=_0x1458e7,_0x43bb9f=document[_0x4e6128(0x2f4)](_0x4e6128(0x1b5));_0x43bb9f['className']=_0x38fc7a===_0x4e6128(0x315)?_0x4e6128(0x17b):_0x4e6128(0x1e2);}function toggleSidebar(){const _0x4b04c7=_0x1458e7,_0x141322=document[_0x4b04c7(0x2f4)]('.sidebar'),_0x4cbc08=document[_0x4b04c7(0x2f4)]('.chat-container');_0x141322[_0x4b04c7(0x2db)][_0x4b04c7(0x1e7)](_0x4b04c7(0x305)),_0x4cbc08['classList']['toggle']('sidebar-visible'),localStorage[_0x4b04c7(0x28d)](_0x4b04c7(0x161),_0x141322[_0x4b04c7(0x2db)]['contains'](_0x4b04c7(0x305)));}function saveConversation(){const _0x20df59=_0x1458e7;if(!currentUser)return;const _0x4db4c9=currentConversation['id']||Date['now']()[_0x20df59(0x220)]();conversations[_0x4db4c9]=currentConversation,currentConversation['id']=_0x4db4c9,localStorage['setItem'](_0x20df59(0x2f1)+currentUser[_0x20df59(0x1f1)],JSON[_0x20df59(0x28b)](conversations)),updateConversationHistory();}function loadConversationHistory(){const _0x16b454=_0x1458e7;if(!currentUser)return;const _0x1dff57=localStorage[_0x16b454(0x35f)](_0x16b454(0x2f1)+currentUser[_0x16b454(0x1f1)]);_0x1dff57&&(conversations=JSON[_0x16b454(0x308)](_0x1dff57),updateConversationHistory());}function updateConversationHistory(){const _0x245487=_0x1458e7,_0x503b41=document[_0x245487(0x166)](_0x245487(0x24d));_0x503b41[_0x245487(0x282)]='';const _0x123b02=Object[_0x245487(0x33f)](conversations)[_0x245487(0x2b5)]((_0x4ac1fb,_0x6dcc79)=>parseInt(_0x6dcc79)-parseInt(_0x4ac1fb));_0x123b02[_0x245487(0x2d6)](_0x264b02=>{const _0x55f44d=_0x245487,_0x524afd=conversations[_0x264b02],_0x2aadda=document[_0x55f44d(0x23a)](_0x55f44d(0x2ef));_0x2aadda[_0x55f44d(0x2c2)]=_0x55f44d(0x21a);const _0x40d656=document[_0x55f44d(0x23a)](_0x55f44d(0x15b));_0x40d656[_0x55f44d(0x383)]=_0x55f44d(0x380)+new Date(parseInt(_0x264b02))[_0x55f44d(0x1d4)](),_0x40d656[_0x55f44d(0x234)]=()=>loadConversation(_0x264b02);const _0xe686fa=document['createElement']('i');_0xe686fa[_0x55f44d(0x2c2)]=_0x55f44d(0x2e5),_0xe686fa['onclick']=_0x31283e=>{_0x31283e['stopPropagation'](),deleteConversation(_0x264b02);},_0x2aadda[_0x55f44d(0x369)](_0x40d656),_0x2aadda['appendChild'](_0xe686fa),_0x503b41[_0x55f44d(0x369)](_0x2aadda);});}function deleteConversation(_0x54ac4a){const _0xec5a5f=_0x1458e7;confirm(_0xec5a5f(0x246))&&(delete conversations[_0x54ac4a],localStorage[_0xec5a5f(0x28d)](_0xec5a5f(0x2f1)+currentUser['username'],JSON['stringify'](conversations)),updateConversationHistory());}function createNewConversation(){const _0x52b82d=_0x1458e7;currentConversation[_0x52b82d(0x15c)]>0x0&&saveConversation();currentConversation=[];const _0x295138=document[_0x52b82d(0x166)](_0x52b82d(0x1a4));_0x295138['innerHTML']='',updateConversationHistory(),addMessageToChat('ai',_0x52b82d(0x174)),_0x295138[_0x52b82d(0x1c4)]=0x0,document[_0x52b82d(0x166)](_0x52b82d(0x2e4))[_0x52b82d(0x31a)]();}function loadConversation(_0x1f9b37){const _0x41be94=_0x1458e7;currentConversation[_0x41be94(0x15c)]>0x0&&currentConversation['id']!==_0x1f9b37&&saveConversation();currentConversation=conversations[_0x1f9b37],currentConversation['id']=_0x1f9b37;const _0x3c1198=document['getElementById'](_0x41be94(0x1a4));_0x3c1198['innerHTML']='',currentConversation[_0x41be94(0x2d6)](_0x2a1f40=>{const _0xde1ab7=_0x41be94;addMessageToChat(_0x2a1f40[_0xde1ab7(0x289)],_0x2a1f40['content']);}),_0x3c1198[_0x41be94(0x1c4)]=0x0;}async function syncUserData(){const _0x164d20=_0x1458e7;if(!currentUser)return;const _0x57939a={'freeCredits':currentUser[_0x164d20(0x355)]||0x0,'paidCredits':currentUser[_0x164d20(0x35a)]||0x0,'lastFreeCreditsReset':currentUser[_0x164d20(0x2d0)]||new Date()[_0x164d20(0x281)]()};currentUser[_0x164d20(0x32a)]&&(_0x57939a[_0x164d20(0x32a)]=currentUser[_0x164d20(0x32a)]);currentUser[_0x164d20(0x18c)]&&(_0x57939a[_0x164d20(0x18c)]=currentUser[_0x164d20(0x18c)]);const _0x200c98=db[_0x164d20(0x2a7)]('users/'+currentUser[_0x164d20(0x1f1)]);try{await _0x200c98[_0x164d20(0x211)](_0x57939a),console['log'](_0x164d20(0x1f2),_0x57939a);}catch(_0x597f06){console[_0x164d20(0x28e)]('Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20données\x20utilisateur:',_0x597f06),showNotification('Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20de\x20votre\x20profil.\x20Veuillez\x20réessayer.',_0x164d20(0x28e));}}function adjustTextareaHeight(){const _0x58f098=_0x1458e7,_0x3588e9=document[_0x58f098(0x166)]('userInput');_0x3588e9[_0x58f098(0x191)][_0x58f098(0x208)]=_0x58f098(0x18d),_0x3588e9['style'][_0x58f098(0x208)]=_0x3588e9[_0x58f098(0x1af)]+'px';}function resetTextareaHeight(){const _0xae09f5=_0x1458e7,_0x43e928=document[_0xae09f5(0x166)](_0xae09f5(0x2e4));_0x43e928[_0xae09f5(0x191)][_0xae09f5(0x208)]=_0xae09f5(0x18d);}async function attemptAutoLogin(){const _0xdabbaf=_0x1458e7,_0x488b3c=getStoredLoginInfo();if(_0x488b3c[_0xdabbaf(0x1f1)]&&_0x488b3c[_0xdabbaf(0x18a)])try{const _0x107859=db[_0xdabbaf(0x2a7)]('users/'+_0x488b3c[_0xdabbaf(0x1f1)]),_0x39727b=await _0x107859[_0xdabbaf(0x2f3)](_0xdabbaf(0x2b8));if(_0x39727b[_0xdabbaf(0x1e1)]()&&_0x39727b[_0xdabbaf(0x2e3)]()[_0xdabbaf(0x18a)]===_0x488b3c['password']){const _0x381d5e=_0x39727b[_0xdabbaf(0x2e3)]();currentUser={'username':_0x488b3c[_0xdabbaf(0x1f1)],'freeCredits':_0x381d5e['freeCredits'],'paidCredits':_0x381d5e[_0xdabbaf(0x35a)],'subscription':_0x381d5e['subscription'],'subscriptionEndDate':_0x381d5e[_0xdabbaf(0x18c)],'lastFreeCreditsReset':_0x381d5e[_0xdabbaf(0x2d0)]},await resetFreeCreditsIfNeeded(),updateUIForLoggedInUser(),console[_0xdabbaf(0x361)]('Connexion\x20automatique\x20réussie');}else clearLoginInfo(),console[_0xdabbaf(0x361)](_0xdabbaf(0x39c));}catch(_0x57f9c4){console[_0xdabbaf(0x28e)](_0xdabbaf(0x360),_0x57f9c4),clearLoginInfo();}}function saveSelectedModel(){const _0x1a753c=_0x1458e7,_0x493867=document[_0x1a753c(0x166)]('modelSelect')['value'];localStorage[_0x1a753c(0x28d)]('selectedModel',_0x493867);}function loadSelectedModel(){const _0x5e1019=_0x1458e7,_0x8bdea=localStorage['getItem'](_0x5e1019(0x362));_0x8bdea&&(document[_0x5e1019(0x166)](_0x5e1019(0x199))[_0x5e1019(0x2b8)]=_0x8bdea);}function showUpgradeButton(_0x3953a4){const _0x58e088=_0x1458e7,_0x2fdeb6=document[_0x58e088(0x23a)](_0x58e088(0x2ed));_0x2fdeb6[_0x58e088(0x383)]=_0x58e088(0x36a),_0x2fdeb6[_0x58e088(0x2c2)]=_0x58e088(0x3a7),_0x2fdeb6['onclick']=()=>{const _0x2afbde=_0x58e088;hasValidSubscription()||currentUser[_0x2afbde(0x35a)]>0x0?(document[_0x2afbde(0x166)](_0x2afbde(0x199))[_0x2afbde(0x2b8)]=_0x2afbde(0x26d),showNotification('Modèle\x20mis\x20à\x20jour\x20vers\x20Gemini\x201.5\x20Pro',_0x2afbde(0x1ef))):showPaymentNotification(_0x2afbde(0x296));},_0x3953a4[_0x58e088(0x369)](_0x2fdeb6);}function copyUserMessage(_0x2323bb){const _0x45a59b=_0x1458e7;let _0x215a02='';for(const _0x4caac2 of _0x2323bb[_0x45a59b(0x33a)]){if(_0x4caac2[_0x45a59b(0x205)]==='P')_0x215a02+=_0x4caac2[_0x45a59b(0x383)]+'\x0a';else{if(_0x4caac2[_0x45a59b(0x2db)]['contains'](_0x45a59b(0x1eb))){const _0x3441cb=Array[_0x45a59b(0x258)](_0x4caac2[_0x45a59b(0x203)](_0x45a59b(0x348)))[_0x45a59b(0x304)](_0x14a573=>_0x14a573[_0x45a59b(0x383)])[_0x45a59b(0x30a)](',\x20');_0x215a02+=_0x45a59b(0x1ab)+_0x3441cb+'\x0a';}else{if(_0x4caac2[_0x45a59b(0x2db)]['contains']('pinned-responses-message')){const _0x3621e1=Array[_0x45a59b(0x258)](_0x4caac2[_0x45a59b(0x203)](_0x45a59b(0x16c)))[_0x45a59b(0x304)](_0x1fa8a4=>_0x1fa8a4[_0x45a59b(0x383)])[_0x45a59b(0x30a)]('\x0a');_0x215a02+=_0x45a59b(0x1b1)+_0x3621e1+'\x0a';}else{if(_0x4caac2[_0x45a59b(0x2db)]['contains'](_0x45a59b(0x2e1))){const _0x59c6a2=_0x4caac2[_0x45a59b(0x2f4)](_0x45a59b(0x311))[_0x45a59b(0x383)];_0x215a02+=_0x45a59b(0x1cb)+_0x59c6a2+'\x0a';}}}}}navigator[_0x45a59b(0x14e)][_0x45a59b(0x377)](_0x215a02[_0x45a59b(0x37f)]())[_0x45a59b(0x1d2)](()=>{const _0x489335=_0x45a59b;showNotification(_0x489335(0x184),_0x489335(0x1ef));});}function animateResponse(_0x1d1ebe,_0x13a9c8){const _0x220f64=_0x1458e7;let _0x3b8ced=0x0;_0x1d1ebe[_0x220f64(0x383)]='';const _0x467a09=setInterval(()=>{_0x3b8ced<_0x13a9c8['length']?(_0x1d1ebe['textContent']+=_0x13a9c8[_0x3b8ced],_0x3b8ced++):clearInterval(_0x467a09);},0x1);}function loadPromptCategories(){const _0x3f8309=_0x1458e7,_0x4fc6d7=document[_0x3f8309(0x166)]('promptCategories');_0x4fc6d7[_0x3f8309(0x282)]='',db[_0x3f8309(0x2a7)]('prompts')['once']('value',_0x1071d4=>{const _0x5c1fee=_0x3f8309;prompts=_0x1071d4[_0x5c1fee(0x2e3)]()||{};const _0x460ef9=[...new Set(Object[_0x5c1fee(0x218)](prompts)[_0x5c1fee(0x304)](_0x20b894=>_0x20b894[_0x5c1fee(0x316)]))];_0x460ef9[_0x5c1fee(0x2d6)](_0x20e121=>{const _0x48c4d0=_0x5c1fee,_0x454f88=document['createElement']('li');_0x454f88['textContent']=_0x20e121,_0x454f88[_0x48c4d0(0x234)]=()=>{const _0x1cbbae=_0x48c4d0;document['querySelectorAll']('#promptCategories\x20li')[_0x1cbbae(0x2d6)](_0xd37ef9=>_0xd37ef9['classList'][_0x1cbbae(0x24e)](_0x1cbbae(0x346))),_0x454f88[_0x1cbbae(0x2db)][_0x1cbbae(0x3a0)](_0x1cbbae(0x346)),loadPromptsForCategory(_0x20e121);},_0x4fc6d7[_0x48c4d0(0x369)](_0x454f88);}),_0x460ef9[_0x5c1fee(0x15c)]>0x0&&(loadPromptsForCategory(_0x460ef9[0x0]),_0x4fc6d7[_0x5c1fee(0x337)][_0x5c1fee(0x2db)][_0x5c1fee(0x3a0)](_0x5c1fee(0x346)));});}function loadPromptsForCategory(_0x36b458){const _0x8e5fac=_0x1458e7,_0x395cc7=document[_0x8e5fac(0x166)](_0x8e5fac(0x388));_0x395cc7[_0x8e5fac(0x282)]='',Object[_0x8e5fac(0x175)](prompts)[_0x8e5fac(0x2d6)](([_0x118099,_0x1dc1c3])=>{const _0x7fb11=_0x8e5fac;if(_0x1dc1c3['category']===_0x36b458){const _0x13534=document['createElement']('li');_0x13534[_0x7fb11(0x282)]=_0x7fb11(0x370)+_0x1dc1c3[_0x7fb11(0x1a2)]+_0x7fb11(0x384),_0x13534[_0x7fb11(0x2f4)]('.prompt-item')[_0x7fb11(0x2b7)]('onclick',_0x7fb11(0x2f6)+_0x118099+_0x7fb11(0x20d)),_0x13534['querySelector'](_0x7fb11(0x320))[_0x7fb11(0x2b7)]('data-prompt',JSON[_0x7fb11(0x28b)](_0x1dc1c3)),_0x395cc7[_0x7fb11(0x369)](_0x13534);}});}function selectPrompt(_0x307190,_0x3985ed){const _0x19e21f=_0x1458e7,_0x3ec088=JSON['parse'](_0x3985ed['getAttribute'](_0x19e21f(0x38b)));pinnedPrompt={'id':_0x307190,..._0x3ec088},updatePinnedPrompt(),closePromptModal(),showNotification('Prompt\x20sélectionné',_0x19e21f(0x1ef));const _0x57e4b3=document[_0x19e21f(0x166)](_0x19e21f(0x2e4));_0x57e4b3[_0x19e21f(0x209)]=pinnedPrompt[_0x19e21f(0x338)]||_0x19e21f(0x27f),adjustTextareaHeight();}function closePromptModal(){const _0x492b06=_0x1458e7;document[_0x492b06(0x166)](_0x492b06(0x25c))[_0x492b06(0x191)][_0x492b06(0x207)]=_0x492b06(0x2b9);}function togglePromptList(){const _0x194b7c=_0x1458e7,_0x3808eb=document[_0x194b7c(0x166)](_0x194b7c(0x25c));_0x3808eb[_0x194b7c(0x191)][_0x194b7c(0x207)]=_0x194b7c(0x327),loadPromptCategories();}function updatePinnedPrompt(){const _0x5c3d6f=_0x1458e7,_0x502653=document['getElementById'](_0x5c3d6f(0x1ce)),_0x51f02f=_0x502653[_0x5c3d6f(0x2f4)](_0x5c3d6f(0x1fc));_0x51f02f&&_0x51f02f[_0x5c3d6f(0x24e)]();if(pinnedPrompt){const _0x181a18=document['createElement'](_0x5c3d6f(0x2ef));_0x181a18[_0x5c3d6f(0x2c2)]=_0x5c3d6f(0x1d1),_0x181a18[_0x5c3d6f(0x2b7)](_0x5c3d6f(0x35c),_0x5c3d6f(0x2bd)),_0x181a18['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>🤖</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22'+pinnedPrompt[_0x5c3d6f(0x1a2)]+'\x22>'+pinnedPrompt[_0x5c3d6f(0x1a2)]+_0x5c3d6f(0x269),_0x502653[_0x5c3d6f(0x369)](_0x181a18);}}function removePinnedPrompt(){pinnedPrompt=null,updatePinnedPrompt();}function openLibrary(){const _0x27b39d=_0x1458e7;console[_0x27b39d(0x361)](_0x27b39d(0x169));if(currentUser){console[_0x27b39d(0x361)](_0x27b39d(0x332),currentUser);const _0x5bb2f7={'username':currentUser[_0x27b39d(0x1f1)],'freeCredits':currentUser[_0x27b39d(0x355)],'paidCredits':currentUser['paidCredits'],'subscription':currentUser[_0x27b39d(0x32a)]};localStorage['setItem'](_0x27b39d(0x24a),JSON[_0x27b39d(0x28b)](_0x5bb2f7)),console['log']('Données\x20utilisateur\x20enregistrées\x20dans\x20localStorage'),window[_0x27b39d(0x272)][_0x27b39d(0x32e)]='Bibliothèque.html';}else console[_0x27b39d(0x361)](_0x27b39d(0x20e)),alert(_0x27b39d(0x1db));}async function showReferralModal(){const _0x325f8c=_0x1458e7,_0x3eed1e=document[_0x325f8c(0x166)](_0x325f8c(0x229));_0x3eed1e['style'][_0x325f8c(0x207)]=_0x325f8c(0x327);const _0xd84e20=await getOrCreateReferralCode();if(_0xd84e20){const _0x546016=_0x325f8c(0x379)+_0xd84e20;document['getElementById'](_0x325f8c(0x277))['value']=_0x546016;const _0x215646='Rejoignez-moi\x20sur\x20Eduque\x20moi\x20et\x20commencez\x20votre\x20voyage\x20d\x27apprentissage\x20!\x20Utilisez\x20mon\x20lien\x20de\x20parrainage\x20pour\x20obtenir\x20des\x20bonus\x20spéciaux\x20:\x20'+_0x546016;document[_0x325f8c(0x166)](_0x325f8c(0x277))[_0x325f8c(0x2b7)](_0x325f8c(0x265),_0x215646);}else document['getElementById']('referralLink')[_0x325f8c(0x2b8)]=_0x325f8c(0x1b4);await updateReferralStats(currentUser['username']);}function generateReferralCode(){const _0x2395fb=_0x1458e7;return Math[_0x2395fb(0x275)]()['toString'](0x24)[_0x2395fb(0x335)](0x2,0x8)[_0x2395fb(0x1da)]();}async function getOrCreateReferralCode(){const _0x4cbdd3=_0x1458e7;if(!currentUser)return null;const _0x36998f=db[_0x4cbdd3(0x2a7)](_0x4cbdd3(0x38c)+currentUser[_0x4cbdd3(0x1f1)]),_0x2cc043=await _0x36998f[_0x4cbdd3(0x2f3)]('value'),_0x2137cf=_0x2cc043['val']();if(_0x2137cf&&_0x2137cf[_0x4cbdd3(0x1f4)])return _0x2137cf[_0x4cbdd3(0x1f4)];else{const _0xd86884=generateReferralCode();return await _0x36998f['update']({'referralCode':_0xd86884}),_0xd86884;}}async function updateReferralStats(_0x15af78){const _0x50f756=_0x1458e7,_0x386586=db['ref'](_0x50f756(0x38c)+_0x15af78),_0x1378f0=await _0x386586[_0x50f756(0x2f3)](_0x50f756(0x2b8)),_0x9102c7=_0x1378f0[_0x50f756(0x2e3)]();if(_0x9102c7&&_0x9102c7['referrals']){const _0x48fc07=_0x9102c7[_0x50f756(0x313)],_0xbd2d5a=Object[_0x50f756(0x33f)](_0x48fc07)[_0x50f756(0x15c)],_0x41ef78=Object['values'](_0x48fc07)[_0x50f756(0x2af)](_0x4fca87=>_0x4fca87[_0x50f756(0x195)])['length'];await _0x386586[_0x50f756(0x211)]({'totalReferrals':_0xbd2d5a,'activeReferrals':_0x41ef78}),currentUser&&currentUser[_0x50f756(0x1f1)]===_0x15af78&&(document[_0x50f756(0x166)](_0x50f756(0x16a))[_0x50f756(0x383)]=_0xbd2d5a,document[_0x50f756(0x166)](_0x50f756(0x19f))[_0x50f756(0x383)]=_0x41ef78);}}window[_0x1458e7(0x2f5)]=async function(){const _0x156e2f=_0x1458e7;await attemptAutoLogin();if(currentUser){if(currentUser[_0x156e2f(0x355)]===undefined)currentUser[_0x156e2f(0x355)]=0x0;if(currentUser['paidCredits']===undefined)currentUser['paidCredits']=0x0;if(currentUser[_0x156e2f(0x32a)]===undefined)currentUser[_0x156e2f(0x32a)]=null;if(currentUser['subscriptionEndDate']===undefined)currentUser[_0x156e2f(0x18c)]=null;if(currentUser[_0x156e2f(0x2d0)]===undefined)currentUser[_0x156e2f(0x2d0)]=new Date()[_0x156e2f(0x281)]();const _0x5aa928=db[_0x156e2f(0x2a7)]('users/'+currentUser[_0x156e2f(0x1f1)]),_0x576427=await _0x5aa928['once'](_0x156e2f(0x2b8)),_0x25d37d=_0x576427[_0x156e2f(0x2e3)]();_0x25d37d&&(importedFilesCount=_0x25d37d[_0x156e2f(0x2b1)]||0x0,lastImportReset=new Date(_0x25d37d[_0x156e2f(0x239)]||new Date())),await syncUserData();}await loadApiKeyList(),await apiManager['initialize'](),initializeApiKeyRotation();const _0x52256e=localStorage['getItem'](_0x156e2f(0x1df))||'light';document[_0x156e2f(0x3a2)][_0x156e2f(0x2b7)](_0x156e2f(0x222),_0x52256e),updateThemeIcon(_0x52256e),setupUIEventListeners();currentUser&&loadConversationHistory();initModals(),loadSelectedModel(),document['getElementById'](_0x156e2f(0x199))['addEventListener'](_0x156e2f(0x215),saveSelectedModel),restoreAppState(),initializeNewDiscussion(),document[_0x156e2f(0x3a2)][_0x156e2f(0x2db)][_0x156e2f(0x3a0)]('loaded'),setInterval(checkSubscriptionStatus,0x36ee80),await loadApiKeyList(),await apiManager[_0x156e2f(0x16b)](),initializeGeminiAPI();const _0x14873f=document[_0x156e2f(0x166)](_0x156e2f(0x199));!_0x14873f[_0x156e2f(0x2b8)]&&(_0x14873f[_0x156e2f(0x2b8)]=_0x156e2f(0x193));};function setupUIEventListeners(){const _0x499508=_0x1458e7,_0x2682a8=document['querySelector'](_0x499508(0x1a3)),_0x58ddac=document[_0x499508(0x166)](_0x499508(0x2e4)),_0x49814d=document[_0x499508(0x2f4)](_0x499508(0x280)),_0x381c1a=_0x2682a8[_0x499508(0x2f4)](_0x499508(0x2b3));function _0x52cf6c(){const _0x4d778c=_0x499508,_0x2bdbd0=_0x2682a8[_0x4d778c(0x153)],_0x392879=_0x49814d[_0x4d778c(0x153)],_0x3698a6=document['getElementById'](_0x4d778c(0x1ac))[_0x4d778c(0x153)],_0x5adfda=_0x381c1a[_0x4d778c(0x153)],_0x353a23=0x1e;_0x58ddac[_0x4d778c(0x191)][_0x4d778c(0x365)]=_0x2bdbd0-_0x392879-_0x3698a6-_0x5adfda-_0x353a23+'px';}_0x52cf6c(),window['addEventListener'](_0x499508(0x1e3),_0x52cf6c),_0x58ddac[_0x499508(0x303)]('input',adjustTextareaHeight),document[_0x499508(0x166)](_0x499508(0x199))[_0x499508(0x303)](_0x499508(0x215),checkModelAccess);window[_0x499508(0x1a8)]<=0x300&&(document[_0x499508(0x2f4)](_0x499508(0x27a))[_0x499508(0x2db)][_0x499508(0x24e)](_0x499508(0x305)),document['querySelector'](_0x499508(0x2ba))[_0x499508(0x2db)][_0x499508(0x24e)]('sidebar-visible'));if(currentUser){const _0x45cdfe=db[_0x499508(0x2a7)](_0x499508(0x38c)+currentUser[_0x499508(0x1f1)]);_0x45cdfe['on'](_0x499508(0x2b8),_0xb11dc0=>{const _0x39df9d=_0x499508,_0x1e744e=_0xb11dc0[_0x39df9d(0x2e3)]();_0x1e744e&&(currentUser={...currentUser,'freeCredits':_0x1e744e['freeCredits'],'paidCredits':_0x1e744e[_0x39df9d(0x35a)],'subscription':_0x1e744e[_0x39df9d(0x32a)],'subscriptionEndDate':_0x1e744e[_0x39df9d(0x18c)],'lastFreeCreditsReset':_0x1e744e[_0x39df9d(0x2d0)]},updateUIForLoggedInUser());});}}function initModals(){const _0x23fa17=_0x1458e7,_0x5c4d93=document[_0x23fa17(0x203)](_0x23fa17(0x310)),_0x2295e7=document[_0x23fa17(0x203)](_0x23fa17(0x30b));_0x2295e7[_0x23fa17(0x2d6)](_0x1b518c=>{const _0x486b2f=_0x23fa17;_0x1b518c[_0x486b2f(0x303)](_0x486b2f(0x2ca),()=>{const _0x307228=_0x486b2f;_0x1b518c[_0x307228(0x240)](_0x307228(0x310))[_0x307228(0x191)][_0x307228(0x207)]=_0x307228(0x2b9);});}),window[_0x23fa17(0x303)](_0x23fa17(0x2ca),_0x4651ee=>{const _0xe687eb=_0x23fa17;_0x5c4d93[_0xe687eb(0x2d6)](_0x40b1fe=>{const _0x32378b=_0xe687eb;_0x4651ee['target']===_0x40b1fe&&(_0x40b1fe['style']['display']=_0x32378b(0x2b9));});});}window[_0x1458e7(0x303)](_0x1458e7(0x288),async()=>{const _0x353e7c=_0x1458e7;if(currentUser){const _0x403c14=await checkGuidedTourStatus(currentUser[_0x353e7c(0x1f1)]);!_0x403c14&&(startGuidedTour(),await markGuidedTourAsSeen(currentUser[_0x353e7c(0x1f1)]));}}),document[_0x1458e7(0x303)](_0x1458e7(0x200),function(_0x33fa6d){const _0x17f7c6=_0x1458e7;_0x33fa6d[_0x17f7c6(0x352)]==='Enter'&&!_0x33fa6d[_0x17f7c6(0x35b)]&&(_0x33fa6d['preventDefault'](),sendMessage());}),document['getElementById']('userInput')[_0x1458e7(0x303)](_0x1458e7(0x200),function(_0x160e89){const _0x3fba17=_0x1458e7;if(_0x160e89['key']===_0x3fba17(0x2d9)&&_0x160e89[_0x3fba17(0x35b)]){_0x160e89[_0x3fba17(0x317)]();const _0x561e55=this[_0x3fba17(0x1c6)],_0x36d87c=this[_0x3fba17(0x25e)],_0x4fb5ff=this['value'];this['value']=_0x4fb5ff[_0x3fba17(0x335)](0x0,_0x561e55)+'\x0a'+_0x4fb5ff[_0x3fba17(0x335)](_0x36d87c),this[_0x3fba17(0x1c6)]=this[_0x3fba17(0x25e)]=_0x561e55+0x1;}});function checkApiStatus(){const _0x11c659=_0x1458e7;axios[_0x11c659(0x391)](API_BASE_URL+'models?key='+API_KEY)[_0x11c659(0x1d2)](_0x4b19f7=>{const _0x206528=_0x11c659;console[_0x206528(0x361)](_0x206528(0x228),_0x4b19f7[_0x206528(0x371)]),console['log'](_0x206528(0x230),_0x4b19f7[_0x206528(0x2f7)]);})['catch'](_0x213c0c=>{const _0x7f6a89=_0x11c659;console[_0x7f6a89(0x28e)]('Erreur\x20lors\x20de\x20la\x20vérification\x20du\x20statut\x20de\x20l\x27API:',_0x213c0c);});}function checkApiStatusRegularly(){checkApiStatus(),setInterval(checkApiStatus,0xea60);}window['addEventListener'](_0x1458e7(0x1ad),function(){const _0x47fd8d=_0x1458e7;showNotification('Vous\x20êtes\x20hors\x20ligne.\x20Veuillez\x20vérifier\x20votre\x20connexion\x20internet.',_0x47fd8d(0x28e));}),window[_0x1458e7(0x303)]('online',function(){const _0x333c9f=_0x1458e7;showNotification(_0x333c9f(0x1ed),_0x333c9f(0x1ef));}),window[_0x1458e7(0x303)](_0x1458e7(0x1bd),function(){const _0x44978d=_0x1458e7;currentUser&&localStorage['setItem'](_0x44978d(0x34c),JSON[_0x44978d(0x28b)](currentConversation));});function restoreAppState(){const _0x4dc55a=_0x1458e7,_0x3ae833=localStorage[_0x4dc55a(0x35f)]('lastConversation');_0x3ae833&&(currentConversation=JSON[_0x4dc55a(0x308)](_0x3ae833),currentConversation[_0x4dc55a(0x2d6)](_0x21d6ce=>{const _0x3d5f72=_0x4dc55a;addMessageToChat(_0x21d6ce[_0x3d5f72(0x289)],_0x21d6ce[_0x3d5f72(0x2f8)]);}));}function isImageGenerationModel(_0x33b247){const _0xa04c6a=_0x1458e7;return _0x33b247[_0xa04c6a(0x261)](_0xa04c6a(0x257));}function getRecraftStyle(_0x1f37e2){const _0x38ba55=_0x1458e7,_0x5609a9={'recraft-realistic':_0x38ba55(0x1ae),'recraft-digital':_0x38ba55(0x1b9),'recraft-vector':'vector_illustration','recraft-icon':_0x38ba55(0x15e)};return _0x5609a9[_0x1f37e2]||_0x38ba55(0x1ae);}async function initializeImageGenerationTracking(_0x5e44c4){const _0x4aeb4d=_0x1458e7,_0x6a1b50=db[_0x4aeb4d(0x2a7)](_0x4aeb4d(0x38c)+_0x5e44c4),_0x115b83=await _0x6a1b50['child'](_0x4aeb4d(0x34f))[_0x4aeb4d(0x2f3)](_0x4aeb4d(0x2b8)),_0x563ccd=_0x115b83[_0x4aeb4d(0x2e3)]();(!_0x563ccd||isNewDay(_0x563ccd[_0x4aeb4d(0x356)]))&&await _0x6a1b50[_0x4aeb4d(0x278)](_0x4aeb4d(0x34f))[_0x4aeb4d(0x263)]({'dailyCount':0x0,'lastReset':new Date()[_0x4aeb4d(0x281)]()});}function isNewDay(_0x1aa449){const _0x549d41=_0x1458e7;if(!_0x1aa449)return!![];const _0x203562=new Date(_0x1aa449),_0x398749=new Date();return _0x203562[_0x549d41(0x37c)]()!==_0x398749['getDate']()||_0x203562[_0x549d41(0x170)]()!==_0x398749[_0x549d41(0x170)]()||_0x203562[_0x549d41(0x231)]()!==_0x398749[_0x549d41(0x231)]();}async function getImageGenerationCount(_0x18fa30){const _0x24c260=_0x1458e7,_0x5de4d5=db[_0x24c260(0x2a7)]('users/'+_0x18fa30),_0x495ac5=await _0x5de4d5[_0x24c260(0x278)](_0x24c260(0x34f))[_0x24c260(0x2f3)](_0x24c260(0x2b8)),_0x5974de=_0x495ac5[_0x24c260(0x2e3)]();if(!_0x5974de||isNewDay(_0x5974de['lastReset']))return await initializeImageGenerationTracking(_0x18fa30),0x0;return _0x5974de['dailyCount'];}async function incrementImageGenerationCount(_0x1a7636){const _0x1960bf=_0x1458e7,_0x3d3831=db[_0x1960bf(0x2a7)]('users/'+_0x1a7636);await _0x3d3831['child'](_0x1960bf(0x34f))[_0x1960bf(0x382)](_0x40a171=>{const _0x1001b6=_0x1960bf;if(!_0x40a171||isNewDay(_0x40a171[_0x1001b6(0x356)]))return{'dailyCount':0x1,'lastReset':new Date()['toISOString']()};return{'dailyCount':_0x40a171['dailyCount']+0x1,'lastReset':_0x40a171['lastReset']};});}async function canGenerateImage(){const _0x10da3a=_0x1458e7,_0x2bf779=await getImageGenerationCount(currentUser[_0x10da3a(0x1f1)]),_0x587e4c=hasValidSubscription(),_0x197491=currentUser[_0x10da3a(0x35a)]>=0x5||currentUser['freeCredits']>=0x5;if(_0x587e4c&&_0x2bf779<0x5)return{'canGenerate':!![],'useFreeGeneration':!![],'message':_0x10da3a(0x1b8)+(0x5-_0x2bf779)+_0x10da3a(0x18b)};if(_0x197491)return{'canGenerate':!![],'useFreeGeneration':![],'message':'Génération\x20avec\x20consommation\x20de\x205\x20crédits'};return{'canGenerate':![],'useFreeGeneration':![],'message':_0x10da3a(0x1a9)};}function confirmCreditUsage(_0x59801c){return new Promise(_0x2fd074=>{const _0x356d79=_0x5ccd,_0x5a2552=document['createElement']('div');_0x5a2552[_0x356d79(0x2c2)]='notification\x20warning',_0x5a2552[_0x356d79(0x282)]=_0x356d79(0x2eb)+_0x59801c+_0x356d79(0x1e0),document[_0x356d79(0x3a2)][_0x356d79(0x369)](_0x5a2552),setTimeout(()=>_0x5a2552[_0x356d79(0x2db)][_0x356d79(0x3a0)](_0x356d79(0x152)),0x64);function _0xc78059(_0x3de8ab){const _0x482064=_0x356d79,_0x3bca41=_0x3de8ab[_0x482064(0x2dc)]['closest'](_0x482064(0x1ff))[_0x482064(0x323)]('data-response');_0x5a2552[_0x482064(0x2db)][_0x482064(0x24e)]('show'),setTimeout(()=>{_0x5a2552['remove'](),_0x2fd074(_0x3bca41==='true');},0x12c);}_0x5a2552[_0x356d79(0x203)]('button')[_0x356d79(0x2d6)](_0x6d1388=>{const _0x3ffd7f=_0x356d79;_0x6d1388[_0x3ffd7f(0x303)](_0x3ffd7f(0x2ca),_0xc78059);});});}function parseMarkdownTable(_0x24409b){const _0x1fa86b=_0x1458e7,_0x45865e=_0x24409b[_0x1fa86b(0x37f)]()['split']('\x0a');if(_0x45865e[_0x1fa86b(0x15c)]<0x3)return null;const _0x5ee7f=_0x45865e[_0x1fa86b(0x37b)](_0x260b9f=>_0x260b9f[_0x1fa86b(0x37f)]()['startsWith']('|')&&_0x260b9f[_0x1fa86b(0x37f)]()[_0x1fa86b(0x299)]('|'));if(!_0x5ee7f)return null;const _0x372561=_0x45865e[_0x1fa86b(0x304)](_0x2ee183=>{const _0x38225d=_0x1fa86b,_0xa2b730=_0x2ee183[_0x38225d(0x37f)]()[_0x38225d(0x177)](0x1,-0x1)[_0x38225d(0x2ea)]('|')['map'](_0x42311c=>_0x42311c[_0x38225d(0x37f)]());return _0xa2b730;}),_0xb503a7=_0x372561[0x0],_0x5b10f5=_0x372561[0x1],_0x40d8aa=_0x5b10f5[_0x1fa86b(0x304)](_0x11f445=>{const _0x3c610a=_0x1fa86b,_0x202aeb=_0x11f445[_0x3c610a(0x261)](':'),_0x1b0005=_0x11f445['endsWith'](':');if(_0x202aeb&&_0x1b0005)return'center';if(_0x1b0005)return'right';return _0x3c610a(0x173);}),_0x3daa47=_0x372561[_0x1fa86b(0x177)](0x2);let _0x47dd14=_0x1fa86b(0x20f);return _0xb503a7['forEach']((_0x31bb4d,_0x3c4d5c)=>{const _0x219a38=_0x1fa86b;_0x47dd14+=_0x219a38(0x1b6)+_0x40d8aa[_0x3c4d5c]+'\x22>'+_0x31bb4d+_0x219a38(0x2a8);}),_0x47dd14+='</tr></thead><tbody>',_0x3daa47[_0x1fa86b(0x2d6)](_0x185788=>{const _0x486502=_0x1fa86b;_0x47dd14+=_0x486502(0x339),_0x185788[_0x486502(0x2d6)]((_0x16b10a,_0x2f29a4)=>{const _0x1cc02b=_0x486502;_0x47dd14+=_0x1cc02b(0x31d)+_0x40d8aa[_0x2f29a4]+'\x22>'+_0x16b10a+'</td>';}),_0x47dd14+=_0x486502(0x31c);}),_0x47dd14+=_0x1fa86b(0x287),_0x47dd14+='<div\x20class=\x22table-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyTable(this.closest(\x27.table-wrapper\x27))\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x20Copier\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22exportTableAsCSV(this.closest(\x27.table-wrapper\x27))\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-download\x22></i>\x20CSV\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20</div></div>',_0x47dd14;}function processMessageContent(_0x191d1f){const _0x53a2cc=_0x1458e7,_0x22a297=/\|[\s\S]+?\n[-|\s]+\n[\s\S]+?\n(?=\n|$)/g;return _0x191d1f[_0x53a2cc(0x364)](_0x22a297,_0x44eac1=>{const _0xa598cd=parseMarkdownTable(_0x44eac1);return _0xa598cd||_0x44eac1;});}function addMessageToChat(_0x309a71,_0x256830,_0x3ac970=[],_0x523ab4=[],_0x237358=null){const _0x112929=_0x1458e7,_0x3f16d4=document[_0x112929(0x166)](_0x112929(0x1a4)),_0x363587=document[_0x112929(0x23a)](_0x112929(0x2ef));_0x363587[_0x112929(0x2db)][_0x112929(0x3a0)](_0x112929(0x1c1),_0x309a71===_0x112929(0x321)?'user-message':_0x112929(0x243));if(_0x309a71==='ai'){let _0x106e56=_0x256830;_0x106e56=_0x106e56[_0x112929(0x364)](/^\*\*/gm,'\x0a'),_0x106e56=_0x106e56[_0x112929(0x364)](/\*\*/g,''),_0x106e56=formatMarkdownTable(_0x106e56);const _0x1f4913=document['createElement']('div');_0x1f4913['innerHTML']=_0x106e56,_0x363587[_0x112929(0x369)](_0x1f4913);const _0x351d84=document[_0x112929(0x23a)](_0x112929(0x2ef));_0x351d84[_0x112929(0x2db)]['add']('message-actions'),_0x351d84['innerHTML']=_0x112929(0x386),_0x363587[_0x112929(0x369)](_0x351d84),currentConversation[_0x112929(0x226)]({'sender':'ai','content':_0x256830});}else{_0x3ac970[_0x112929(0x15c)]>0x0&&_0x363587[_0x112929(0x369)](createPinnedFilesElement(_0x3ac970));_0x523ab4['length']>0x0&&_0x363587[_0x112929(0x369)](createPinnedResponsesElement(_0x523ab4));_0x237358&&_0x363587[_0x112929(0x369)](createPinnedPromptElement(_0x237358));const _0x12286d=document[_0x112929(0x23a)]('p');_0x12286d[_0x112929(0x383)]=_0x256830,_0x363587[_0x112929(0x369)](_0x12286d);const _0x3c2fe8=document[_0x112929(0x23a)]('div');_0x3c2fe8[_0x112929(0x2db)][_0x112929(0x3a0)](_0x112929(0x290)),_0x3c2fe8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyUserMessage(this.parentNode.parentNode)\x22\x20title=\x22Copier\x20le\x20message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x363587[_0x112929(0x369)](_0x3c2fe8),currentConversation[_0x112929(0x226)]({'sender':'user','content':_0x256830,'files':_0x3ac970,'responses':_0x523ab4,'prompt':_0x237358});}return _0x3f16d4[_0x112929(0x369)](_0x363587),_0x3f16d4[_0x112929(0x1c4)]=_0x3f16d4[_0x112929(0x1af)],_0x363587;}async function resubmitRequest(_0x11fd86){const _0x4e3b82=_0x1458e7,_0x1a2b84=document['getElementById'](_0x4e3b82(0x199))['value'];if(!hasValidSubscription()&&!currentUser['paidCredits']&&(_0x1a2b84!==_0x4e3b82(0x193)&&_0x1a2b84!==_0x4e3b82(0x1d6)||!currentUser[_0x4e3b82(0x355)])){showPaymentNotification('Crédits\x20insuffisants\x20pour\x20actualiser\x20la\x20réponse.');return;}try{const _0x585a88=document['querySelectorAll'](_0x4e3b82(0x2fb));let _0x5c4f8e=null,_0x3295a2='';for(let _0x23b0a5=Array['from'](_0x585a88)[_0x4e3b82(0x328)](_0x11fd86)-0x1;_0x23b0a5>=0x0;_0x23b0a5--){if(_0x585a88[_0x23b0a5]['classList'][_0x4e3b82(0x1ee)](_0x4e3b82(0x1ec))){_0x5c4f8e=_0x585a88[_0x23b0a5];const _0x3fa917=_0x5c4f8e[_0x4e3b82(0x2f4)](_0x4e3b82(0x311)),_0x1635be=_0x5c4f8e[_0x4e3b82(0x2f4)](_0x4e3b82(0x1d8));if(_0x3fa917)_0x3295a2=_0x3fa917[_0x4e3b82(0x383)];else _0x1635be&&(_0x3295a2=_0x1635be['textContent']);break;}}if(!_0x5c4f8e)throw new Error('Message\x20utilisateur\x20introuvable');const _0x4ab955=document['createElement'](_0x4e3b82(0x2ef));_0x4ab955[_0x4e3b82(0x2c2)]=_0x4e3b82(0x25d),_0x4ab955[_0x4e3b82(0x282)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+createModelHeader(_0x1a2b84)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22typing-indicator\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x11fd86[_0x4e3b82(0x1c8)](_0x4ab955);const _0x1b18ca=Array['from'](_0x5c4f8e[_0x4e3b82(0x203)](_0x4e3b82(0x1fb)))['map'](_0x5051fc=>({'name':_0x5051fc[_0x4e3b82(0x2f4)]('.file-name')[_0x4e3b82(0x383)],'type':_0x5051fc[_0x4e3b82(0x219)][_0x4e3b82(0x30f)]})),_0x3d0b25=[{'text':_0x3295a2}];if(_0x1b18ca[_0x4e3b82(0x15c)]>0x0)for(const _0xdf58ae of _0x1b18ca){_0x3d0b25['push']({'text':_0x4e3b82(0x206)+_0xdf58ae['name']+']'});}const _0x4aad42=await model[_0x4e3b82(0x309)](_0x3d0b25),_0x6005f5=await _0x4aad42[_0x4e3b82(0x180)],_0xbce8f2=_0x6005f5['text']();await animateText(_0x4ab955,_0xbce8f2),currentConversation[_0x4e3b82(0x226)]({'sender':'ai','content':_0xbce8f2}),saveConversation(),await updateCredits(_0x1a2b84,0x1),showNotification(_0x4e3b82(0x1a5),_0x4e3b82(0x1ef));}catch(_0x2577b9){console[_0x4e3b82(0x28e)](_0x4e3b82(0x216),_0x2577b9),showNotification('Erreur\x20lors\x20de\x20la\x20relance\x20de\x20la\x20demande',_0x4e3b82(0x28e)),loadingMessage&&_0x11fd86&&loadingMessage[_0x4e3b82(0x1c8)](_0x11fd86);}}function createLoadingMessage(){const _0x1f1e4c=_0x1458e7,_0x5d9472=document[_0x1f1e4c(0x23a)]('div');return _0x5d9472['className']=_0x1f1e4c(0x25d),_0x5d9472[_0x1f1e4c(0x282)]=_0x1f1e4c(0x1dc),document['getElementById'](_0x1f1e4c(0x1a4))[_0x1f1e4c(0x369)](_0x5d9472),_0x5d9472;}function _0x5ccd(_0x91a7aa,_0x540c04){const _0x2d063f=_0x2d06();return _0x5ccd=function(_0x5ccd69,_0x4a85e6){_0x5ccd69=_0x5ccd69-0x14d;let _0x263538=_0x2d063f[_0x5ccd69];return _0x263538;},_0x5ccd(_0x91a7aa,_0x540c04);}function initializeScrollListener(){const _0xf71a54=_0x1458e7,_0x15c1a6=document[_0xf71a54(0x166)](_0xf71a54(0x1a4));_0x15c1a6[_0xf71a54(0x303)]('scroll',function(){const _0x1bcae9=_0xf71a54;clearTimeout(scrollTimeout),_0x15c1a6[_0x1bcae9(0x1c4)]<lastScrollTop&&(userScrolling=!![]),lastScrollTop=_0x15c1a6['scrollTop'],scrollTimeout=setTimeout(()=>{const _0x2c556a=_0x1bcae9,_0x439537=_0x15c1a6[_0x2c556a(0x1af)]-_0x15c1a6['scrollTop']-_0x15c1a6[_0x2c556a(0x2aa)]<0x64;_0x439537&&(userScrolling=![]);},0x3e8);});}function shouldAutoScroll(){const _0x56a0e5=_0x1458e7;if(userScrolling)return![];const _0x3f6bca=document[_0x56a0e5(0x166)](_0x56a0e5(0x1a4)),_0x5cf91b=_0x3f6bca['scrollHeight']-_0x3f6bca[_0x56a0e5(0x1c4)]-_0x3f6bca[_0x56a0e5(0x2aa)]<0x64;return _0x5cf91b;}async function animateText(_0x106def,_0x1eaf73){const _0x1f29a7=_0x1458e7,_0x13c10b=document[_0x1f29a7(0x23a)]('div');_0x106def[_0x1f29a7(0x282)]='',_0x106def[_0x1f29a7(0x369)](_0x13c10b);const _0x1cda16=document['createElement'](_0x1f29a7(0x2ef));_0x1cda16[_0x1f29a7(0x2c2)]='message-actions',_0x1cda16[_0x1f29a7(0x282)]=_0x1f29a7(0x2c1);let _0x456e62='';const _0x3cbafb=0xa;function _0x1017e4(_0x1cade5,_0x4d3b36){const _0x2233e8=_0x1f29a7;return _0x1cade5[_0x2233e8(0x177)](_0x4d3b36)['startsWith']('\x0a|')||_0x1cade5[_0x2233e8(0x177)](_0x4d3b36)[_0x2233e8(0x261)]('|');}function _0x3e417d(_0x51faa2,_0x1a63ed){const _0x395eab=_0x1f29a7,_0x13149e=_0x51faa2[_0x395eab(0x177)](_0x1a63ed)[_0x395eab(0x2ea)]('\x0a');let _0x2ba209=[],_0x46396b=0x0;while(_0x46396b<_0x13149e[_0x395eab(0x15c)]&&_0x13149e[_0x46396b][_0x395eab(0x37f)]()[_0x395eab(0x261)]('|')){_0x2ba209['push'](_0x13149e[_0x46396b]),_0x46396b++;}return _0x2ba209[_0x395eab(0x30a)]('\x0a');}const _0xd8cb10=document['getElementById'](_0x1f29a7(0x1a4));for(let _0x6bcd2=0x0;_0x6bcd2<_0x1eaf73[_0x1f29a7(0x15c)];_0x6bcd2++){if(_0x1017e4(_0x1eaf73,_0x6bcd2)){const _0x8ed88a=_0x3e417d(_0x1eaf73,_0x6bcd2);if(_0x8ed88a){_0x456e62+=_0x8ed88a,_0x13c10b[_0x1f29a7(0x282)]=formatMarkdownTable(_0x456e62),_0x6bcd2+=_0x8ed88a['length']-0x1;continue;}}_0x456e62+=_0x1eaf73[_0x6bcd2],_0x13c10b[_0x1f29a7(0x282)]=formatMarkdownTable(_0x456e62),shouldAutoScroll()&&(_0xd8cb10[_0x1f29a7(0x1c4)]=_0xd8cb10[_0x1f29a7(0x1af)]),await new Promise(_0x552f55=>setTimeout(_0x552f55,_0x3cbafb));}_0x106def[_0x1f29a7(0x369)](_0x1cda16);}function resetScrollState(){userScrolling=![],lastScrollTop=0x0;}function formatMarkdownTable(_0x276f87){const _0x558f23=_0x1458e7,_0x498261=/\|(.+)\|\n\|(?:[-:|]+\|)+\n(\|(?:.+\|)+\n?)+/g;return _0x276f87[_0x558f23(0x364)](_0x498261,function(_0x371e96){const _0x1220b2=_0x558f23,_0x1e5d2c=_0x371e96['trim']()[_0x1220b2(0x2ea)]('\x0a');if(_0x1e5d2c[_0x1220b2(0x15c)]<0x3)return _0x371e96;let _0x1e5a80=_0x1220b2(0x22c);const _0x22d0ed=_0x1e5d2c[0x0][_0x1220b2(0x2ea)]('|')[_0x1220b2(0x2af)](_0x4244e9=>_0x4244e9[_0x1220b2(0x37f)]());return _0x1e5a80+=_0x1220b2(0x1d5),_0x22d0ed[_0x1220b2(0x2d6)](_0x43fc95=>{const _0x360510=_0x1220b2;_0x1e5a80+=_0x360510(0x23d)+_0x43fc95[_0x360510(0x37f)]()+_0x360510(0x2a8);}),_0x1e5a80+=_0x1220b2(0x39d),_0x1e5a80+='<tbody>',_0x1e5d2c[_0x1220b2(0x177)](0x2)['forEach'](_0x5d3cf7=>{const _0x437218=_0x1220b2,_0x12b504=_0x5d3cf7['split']('|')['filter'](_0x41206f=>_0x41206f['trim']());_0x12b504[_0x437218(0x15c)]>0x0&&(_0x1e5a80+=_0x437218(0x339),_0x12b504[_0x437218(0x2d6)](_0x1e48b8=>{const _0x5eb4bf=_0x437218;_0x1e5a80+=_0x5eb4bf(0x35e)+_0x1e48b8[_0x5eb4bf(0x37f)]()+_0x5eb4bf(0x1f6);}),_0x1e5a80+=_0x437218(0x31c));}),_0x1e5a80+=_0x1220b2(0x23f),_0x1e5a80;});}function updateUI(){const _0x3085b8=_0x1458e7;currentUser&&(document[_0x3085b8(0x166)](_0x3085b8(0x355))[_0x3085b8(0x383)]=currentUser[_0x3085b8(0x355)],document[_0x3085b8(0x166)](_0x3085b8(0x35a))[_0x3085b8(0x383)]=currentUser['paidCredits'],document[_0x3085b8(0x166)](_0x3085b8(0x32a))[_0x3085b8(0x383)]=currentUser['subscription']||_0x3085b8(0x266));}const apiManager=new GeminiApiManager();document[_0x1458e7(0x303)]('click',function(_0x3a78f9){const _0x467cf7=_0x1458e7,_0x2b5455=document[_0x467cf7(0x2f4)](_0x467cf7(0x27a)),_0x555ddd=document[_0x467cf7(0x2f4)]('.toggle-sidebar');_0x2b5455[_0x467cf7(0x2db)][_0x467cf7(0x1ee)]('visible')&&!_0x2b5455[_0x467cf7(0x1ee)](_0x3a78f9[_0x467cf7(0x2dc)])&&!_0x555ddd[_0x467cf7(0x1ee)](_0x3a78f9[_0x467cf7(0x2dc)])&&(toggleSidebar(),_0x3a78f9[_0x467cf7(0x317)]());}),window[_0x1458e7(0x237)]=function(_0x1874fc){const _0x5b43e5=_0x1458e7,_0x27f56b=document[_0x5b43e5(0x2f4)](_0x5b43e5(0x27a));if(_0x27f56b[_0x5b43e5(0x2db)][_0x5b43e5(0x1ee)](_0x5b43e5(0x305)))return toggleSidebar(),_0x1874fc[_0x5b43e5(0x317)](),history[_0x5b43e5(0x245)]({},'',''),![];},document['getElementById'](_0x1458e7(0x312))[_0x1458e7(0x25f)]=_0x1458e7(0x168),setInterval(updateUI,0x493e0),checkApiStatusRegularly(),window[_0x1458e7(0x1c0)]=showLoginModal,window[_0x1458e7(0x150)]=showRegisterModal,window[_0x1458e7(0x294)]=login,window[_0x1458e7(0x331)]=register,window[_0x1458e7(0x187)]=logout,window[_0x1458e7(0x302)]=sendMessage,window['buySubscription']=buySubscription,window[_0x1458e7(0x295)]=buyCredits,window['toggleTheme']=toggleTheme,window[_0x1458e7(0x225)]=toggleSidebar,window[_0x1458e7(0x2ab)]=createNewConversation,window['handleFileUpload']=handleFileUpload,window[_0x1458e7(0x270)]=togglePromptList,window[_0x1458e7(0x39b)]=showReferralModal,window[_0x1458e7(0x2be)]=generateReferralCode,window[_0x1458e7(0x318)]=copyReferralLink,window['shareOnFacebook']=shareOnFacebook,window[_0x1458e7(0x29b)]=shareOnTwitter,window['shareOnLinkedIn']=shareOnLinkedIn,window[_0x1458e7(0x274)]=shareOnWhatsApp,window['removePinnedFile']=removePinnedFile;
