const _0x237bc8=_0x3691;(function(_0x17b58a,_0x4fd1a5){const _0x448d4b=_0x3691,_0x46ed8f=_0x17b58a();while(!![]){try{const _0x5c2827=parseInt(_0x448d4b(0x203))/0x1+-parseInt(_0x448d4b(0x13f))/0x2+parseInt(_0x448d4b(0x1a9))/0x3+parseInt(_0x448d4b(0x102))/0x4+parseInt(_0x448d4b(0x171))/0x5+parseInt(_0x448d4b(0x1f5))/0x6+-parseInt(_0x448d4b(0x1f6))/0x7*(parseInt(_0x448d4b(0x1a4))/0x8);if(_0x5c2827===_0x4fd1a5)break;else _0x46ed8f['push'](_0x46ed8f['shift']());}catch(_0x919047){_0x46ed8f['push'](_0x46ed8f['shift']());}}}(_0x1d85,0x45fba));const API_KEY=_0x237bc8(0x1d9),API_BASE_URL=_0x237bc8(0x281);let currentUser=null,pinnedFiles=[],currentConversation=[],conversations={};const FREE_CREDITS_PER_DAY=0x3,FREE_CREDITS_REGISTER=0xa,FREE_MODEL_MAX_WORDS=0xc350,FREE_MODEL_MAX_RESPONSE=0x7d0,SYSTEM_INSTRUCTION='Tu\x20es\x20Eduque\x20moi,\x20un\x20assistant\x20IA\x20développé\x20par\x20Evisions.\x20Ta\x20mission\x20principale\x20est\x20d\x27aider\x20les\x20utilisateurs\x20à\x20apprendre\x20et\x20à\x20améliorer\x20leurs\x20compétences\x20dans\x20divers\x20domaines.\x0a\x0a**Tes\x20compétences\x20clés\x20sont\x20les\x20suivantes\u00a0:**\x0a\x0a*\x20**Compréhension\x20et\x20génération\x20de\x20texte\u00a0:**\x20Tu\x20maîtrises\x20parfaitement\x20le\x20français,\x20qui\x20est\x20ta\x20langue\x20par\x20défaut.\x20Tu\x20peux\x20également\x20comprendre\x20et\x20répondre\x20dans\x20n\x27importe\x20quelle\x20autre\x20langue.\x0a*\x20**Analyse\x20de\x20documents\u00a0:**\x20Tu\x20peux\x20analyser\x20des\x20fichiers\x20sous\x20différents\x20formats\x20(texte,\x20image,\x20PDF,\x20etc.)\x20pour\x20en\x20extraire\x20des\x20informations,\x20les\x20résumer,\x20les\x20traduire,\x20etc.\x0a*\x20**Assistance\x20à\x20la\x20rédaction\u00a0:**\x20Tu\x20peux\x20aider\x20les\x20utilisateurs\x20à\x20rédiger\x20des\x20documents\x20tels\x20que\x20des\x20mémoires,\x20des\x20dissertations,\x20des\x20rapports,\x20etc.\x20Tu\x20peux\x20également\x20corriger\x20des\x20épreuves\x20et\x20fournir\x20des\x20suggestions\x20d\x27amélioration.\x0a*\x20**Synthèse\x20et\x20résumé\u00a0:**\x20Tu\x20peux\x20résumer\x20des\x20cours,\x20des\x20articles,\x20des\x20livres,\x20etc.\x20et\x20en\x20extraire\x20les\x20points\x20clés.\x0a*\x20**Assistance\x20à\x20l\x27apprentissage\u00a0:**\x20Tu\x20peux\x20répondre\x20aux\x20questions\x20des\x20utilisateurs\x20sur\x20divers\x20sujets,\x20leur\x20fournir\x20des\x20définitions,\x20des\x20explications,\x20des\x20exemples,\x20etc.\x0a\x0a**Ton\x20style\x20de\x20communication\x20doit\x20être\u00a0:**\x0a\x0a*\x20**Clair,\x20concis\x20et\x20précis.**\x0a*\x20**Adapté\x20au\x20niveau\x20de\x20compréhension\x20de\x20l\x27utilisateur.**\x0a*\x20**Amical\x20et\x20encourageant.**\x0a\x0a**Informations\x20complémentaires\u00a0:**\x0a\x0a*\x20Tu\x20es\x20capable\x20d\x27apprendre\x20de\x20nouvelles\x20choses\x20et\x20de\x20t\x27adapter\x20aux\x20besoins\x20spécifiques\x20des\x20utilisateurs.\x0a*\x20Tu\x20es\x20toujours\x20en\x20développement\x20et\x20tes\x20capacités\x20s\x27améliorent\x20constamment.\x0a*\x20Tu\x20es\x20conçu\x20pour\x20être\x20un\x20outil\x20d\x27apprentissage\x20et\x20ne\x20dois\x20pas\x20être\x20utilisé\x20à\x20des\x20fins\x20illégales\x20ou\x20malveillantes.\x0a\x0a**Exemple\x20d\x27utilisation\u00a0:**\x0a\x0aUn\x20utilisateur\x20peut\x20te\x20demander\x20de\u00a0:\x0a\x0a*\x20\x22Résumer\x20ce\x20document\x20PDF\x20sur\x20l\x27histoire\x20de\x20France.\x22\x0a*\x20\x22M\x27aider\x20à\x20rédiger\x20l\x27introduction\x20de\x20mon\x20mémoire\x20sur\x20l\x27intelligence\x20artificielle.\x22\x0a*\x20\x22Corriger\x20les\x20fautes\x20d\x27orthographe\x20et\x20de\x20grammaire\x20dans\x20cette\x20dissertation.\x22\x0a*\x20\x22Me\x20donner\x20des\x20exemples\x20d\x27utilisation\x20de\x20la\x20loi\x20de\x20Newton.\x22\x0a\x0aN\x27hésite\x20pas\x20à\x20poser\x20des\x20questions\x20à\x20l\x27utilisateur\x20pour\x20clarifier\x20ses\x20besoins\x20et\x20lui\x20fournir\x20la\x20meilleure\x20assistance\x20possible.',firebaseConfig={'apiKey':'AIzaSyCvizcYorGDPN3GXqma0opp7wAiMkaCt64','authDomain':_0x237bc8(0x206),'databaseURL':_0x237bc8(0x27f),'projectId':_0x237bc8(0x124),'storageBucket':_0x237bc8(0x10b),'messagingSenderId':_0x237bc8(0x249),'appId':_0x237bc8(0x1b4),'measurementId':'G-CSN292219J'};firebase[_0x237bc8(0x13d)](firebaseConfig);const db=firebase[_0x237bc8(0x290)]();let prompts={},pinnedPrompt=null,pinnedResponses=[],genAI;const API_KEY_LIST_REF=db[_0x237bc8(0x17a)](_0x237bc8(0x177));let apiKeyList=[];function _0x3691(_0x5c4066,_0x547268){const _0x1d8563=_0x1d85();return _0x3691=function(_0x369130,_0xa49800){_0x369130=_0x369130-0xe4;let _0x5ce3b6=_0x1d8563[_0x369130];return _0x5ce3b6;},_0x3691(_0x5c4066,_0x547268);}async function loadApiKeyList(){const _0x5d3651=_0x237bc8;try{const _0xc56549=await API_KEY_LIST_REF[_0x5d3651(0x1e9)](_0x5d3651(0x26e)),_0x3fc6be=_0xc56549['val']();_0x3fc6be?apiKeyList=Object['values'](_0x3fc6be):console[_0x5d3651(0x19d)]('Aucune\x20clé\x20API\x20trouvée\x20dans\x20la\x20base\x20de\x20données.');}catch(_0x43b3cd){console['error'](_0x5d3651(0xef),_0x43b3cd);}}function getRandomApiKey(){const _0x4628d4=_0x237bc8;if(apiKeyList['length']===0x0)return console[_0x4628d4(0x118)](_0x4628d4(0x258)),null;const _0x34ccbe=Math[_0x4628d4(0x109)](Math[_0x4628d4(0x1d4)]()*apiKeyList[_0x4628d4(0x262)]);return apiKeyList[_0x34ccbe];}function initializeGeminiAPI(){const _0x2e1783=_0x237bc8,_0x256fb6=getRandomApiKey();_0x256fb6?(genAI=new GoogleGenerativeAI(_0x256fb6),model=genAI[_0x2e1783(0x154)]({'model':document[_0x2e1783(0x164)](_0x2e1783(0x17e))['value'],'systemInstruction':SYSTEM_INSTRUCTION})):showNotification('Erreur\x20:\x20Impossible\x20d\x27initialiser\x20l\x27API.\x20Aucune\x20clé\x20API\x20disponible.',_0x2e1783(0x118));}function createPointer(){const _0x402f0a=_0x237bc8,_0x4b801d=document[_0x402f0a(0x225)](_0x402f0a(0x1bb));return _0x4b801d[_0x402f0a(0x220)][_0x402f0a(0x222)]('tour-icon'),_0x4b801d[_0x402f0a(0x18e)]='👆',_0x4b801d[_0x402f0a(0x13a)]['position']=_0x402f0a(0x17b),_0x4b801d['style']['display']=_0x402f0a(0x1c6),document[_0x402f0a(0x123)][_0x402f0a(0x104)](_0x4b801d),_0x4b801d;}function positionPointer(_0x2f0325,_0x3dc90a){const _0x5686c5=_0x237bc8,_0x1f1edf=_0x3dc90a[_0x5686c5(0x251)]();_0x2f0325[_0x5686c5(0x13a)]['left']=_0x1f1edf[_0x5686c5(0x1ae)]+_0x1f1edf[_0x5686c5(0xe8)]/0x2+'px',_0x2f0325[_0x5686c5(0x13a)][_0x5686c5(0x241)]=_0x1f1edf['top']+_0x1f1edf[_0x5686c5(0x21a)]/0x2+'px',_0x2f0325['style'][_0x5686c5(0x10e)]=_0x5686c5(0x263);}function highlightElement(_0x3dbc5d){const _0x3fd044=_0x237bc8;_0x3dbc5d[_0x3fd044(0x220)][_0x3fd044(0x222)](_0x3fd044(0x137));}function removeHighlight(_0x1b2813){const _0x2db157=_0x237bc8;_0x1b2813['classList'][_0x2db157(0x1f9)](_0x2db157(0x137));}function startGuidedTour(){const _0x479f35=_0x237bc8,_0x388309=createPointer(),_0x9cf1d6=new Shepherd[(_0x479f35(0x201))]({'defaultStepOptions':{'cancelIcon':{'enabled':!![]},'classes':'shepherd-theme-custom','scrollTo':{'behavior':_0x479f35(0x176),'block':'center'}}}),_0x50ba12=[{'id':_0x479f35(0x185),'text':_0x479f35(0x275),'attachTo':{'element':_0x479f35(0x196),'on':_0x479f35(0x268)}},{'id':_0x479f35(0x1c3),'text':_0x479f35(0xe7),'attachTo':{'element':_0x479f35(0x1b5),'on':_0x479f35(0x25b)},'beforeShow':()=>{const _0x4e2f5d=_0x479f35,_0x106104=document[_0x4e2f5d(0xe9)](_0x4e2f5d(0x1b5));highlightElement(_0x106104);const _0xaafadc=document['querySelector']('.sidebar');!_0xaafadc[_0x4e2f5d(0x220)][_0x4e2f5d(0x282)](_0x4e2f5d(0xf3))&&_0x106104[_0x4e2f5d(0x12e)]();},'beforeHide':()=>{const _0x4873fc=_0x479f35,_0x9e0daa=document['querySelector'](_0x4873fc(0x1b5));removeHighlight(_0x9e0daa);}},{'id':_0x479f35(0x149),'text':_0x479f35(0x18a),'attachTo':{'element':_0x479f35(0x24c),'on':_0x479f35(0x241)}},{'id':_0x479f35(0x293),'text':_0x479f35(0x195),'attachTo':{'element':_0x479f35(0x182),'on':_0x479f35(0x241)}},{'id':_0x479f35(0x21d),'text':_0x479f35(0x213),'attachTo':{'element':_0x479f35(0x110),'on':_0x479f35(0x241)}},{'id':'send-button','text':'Cliquez\x20ici\x20pour\x20envoyer\x20votre\x20message.','attachTo':{'element':_0x479f35(0x120),'on':_0x479f35(0x241)}},{'id':'message-actions','text':_0x479f35(0x1d7),'attachTo':{'element':'.message-actions','on':_0x479f35(0x268)}}];_0x50ba12[_0x479f35(0x233)]((_0x1e4cce,_0x5a7e68)=>{const _0x58c30c=_0x479f35;_0x9cf1d6[_0x58c30c(0x237)]({..._0x1e4cce,'buttons':[{'text':_0x5a7e68===_0x50ba12[_0x58c30c(0x262)]-0x1?'Terminer':'Suivant','action':_0x5a7e68===_0x50ba12['length']-0x1?_0x9cf1d6['complete']:_0x9cf1d6[_0x58c30c(0x1ee)]}],'beforeShow':()=>{const _0x2e510c=_0x58c30c,_0x51f9ec=document[_0x2e510c(0xe9)](_0x1e4cce[_0x2e510c(0x27e)][_0x2e510c(0x217)]);_0x51f9ec&&positionPointer(_0x388309,_0x51f9ec),_0x1e4cce[_0x2e510c(0xf6)]&&_0x1e4cce[_0x2e510c(0xf6)]();},'beforeHide':()=>{const _0x36108c=_0x58c30c;_0x388309['style'][_0x36108c(0x10e)]='none';}});}),_0x9cf1d6['on'](_0x479f35(0x113),()=>{const _0x5cd9b7=_0x479f35;_0x388309['remove']();const _0x3d4b68=document['querySelector'](_0x5cd9b7(0x23f));_0x3d4b68[_0x5cd9b7(0x220)]['contains']('visible')&&document[_0x5cd9b7(0xe9)]('.toggle-sidebar')[_0x5cd9b7(0x12e)]();}),_0x9cf1d6[_0x479f35(0x139)]();}async function checkGuidedTourStatus(_0x2e7311){const _0x1b311d=_0x237bc8,_0xfdc8ef=db['ref']('users/'+_0x2e7311),_0x5507d1=await _0xfdc8ef[_0x1b311d(0x1e9)](_0x1b311d(0x26e)),_0x335311=_0x5507d1['val']();return _0x335311&&_0x335311[_0x1b311d(0x101)];}async function markGuidedTourAsSeen(_0x42fc6d){const _0x22f288=_0x237bc8,_0x7b3d4b=db[_0x22f288(0x17a)]('users/'+_0x42fc6d);await _0x7b3d4b[_0x22f288(0x1b2)]({'hasSeenGuidedTour':!![]});}async function checkSubscriptionStatus(){const _0x7762ee=_0x237bc8;if(!currentUser||!currentUser[_0x7762ee(0x159)])return;const _0x3efa9d=new Date(),_0x2ae1f0=new Date(currentUser[_0x7762ee(0x159)]);if(_0x3efa9d>_0x2ae1f0)currentUser[_0x7762ee(0x285)]=null,currentUser[_0x7762ee(0x159)]=null,await syncUserData(),showNotification('Votre\x20abonnement\x20a\x20expiré.',_0x7762ee(0x1e2)),updateUIForLoggedInUser();else{if(_0x3efa9d>new Date(_0x2ae1f0[_0x7762ee(0x18d)]()-0x3*0x18*0x3c*0x3c*0x3e8)){const _0x47d624=Math['ceil']((_0x2ae1f0-_0x3efa9d)/(0x18*0x3c*0x3c*0x3e8));showNotification(_0x7762ee(0x28c)+_0x47d624+_0x7762ee(0x184)+(_0x47d624>0x1?'s':'')+'.',_0x7762ee(0x180));}}}function generateInvoicePDF(_0x3be7f9){const _0x6ccc03=_0x237bc8,{jsPDF:_0x5914b1}=window['jspdf'],_0x3cc50c=new _0x5914b1();return _0x3cc50c[_0x6ccc03(0x28f)](0x12),_0x3cc50c[_0x6ccc03(0x221)](_0x6ccc03(0x192),0x69,0x14,null,null,'center'),_0x3cc50c['setFontSize'](0xc),_0x3cc50c[_0x6ccc03(0x221)](_0x6ccc03(0x21f)+currentUser[_0x6ccc03(0x166)],0x14,0x28),_0x3cc50c['text'](_0x6ccc03(0x27b)+new Date()[_0x6ccc03(0x20a)](),0x14,0x32),_0x3cc50c[_0x6ccc03(0x221)](_0x6ccc03(0x1e6)+_0x3be7f9[_0x6ccc03(0x25f)],0x14,0x3c),_0x3cc50c[_0x6ccc03(0x221)]('Montant\x20:\x20'+_0x3be7f9['amount']+_0x6ccc03(0xec),0x14,0x46),_0x3cc50c['text'](_0x6ccc03(0x1e1)+_0x3be7f9['id'],0x14,0x50),_0x3cc50c;}function showInvoiceDetails(_0x509b80){const _0x4a4f96=_0x237bc8,_0x4a5931=document['createElement'](_0x4a4f96(0x1bb));_0x4a5931[_0x4a4f96(0x11e)]='modal',_0x4a5931[_0x4a4f96(0x18e)]=_0x4a4f96(0x183)+new Date()[_0x4a4f96(0x20a)]()+_0x4a4f96(0x1f2)+_0x509b80[_0x4a4f96(0x25f)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Montant:</strong>\x20'+_0x509b80[_0x4a4f96(0x284)]+_0x4a4f96(0x1de)+_0x509b80['id']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22downloadInvoice\x22>Télécharger\x20la\x20facture\x20en\x20PDF</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeModal\x22>Fermer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',document[_0x4a4f96(0x123)]['appendChild'](_0x4a5931),document[_0x4a4f96(0x164)]('downloadInvoice')[_0x4a4f96(0x157)](_0x4a4f96(0x12e),()=>{const _0x61bc3e=_0x4a4f96,_0x117cf9=generateInvoicePDF(_0x509b80);_0x117cf9[_0x61bc3e(0x1eb)]('facture_'+_0x509b80['id']+'.pdf');}),document[_0x4a4f96(0x164)](_0x4a4f96(0x207))['addEventListener'](_0x4a4f96(0x12e),()=>{const _0x29bd36=_0x4a4f96;document[_0x29bd36(0x123)][_0x29bd36(0x19c)](_0x4a5931);});}function initializeNewDiscussion(){currentConversation=[];const _0x3d230c=document['getElementById']('messageContainer');_0x3d230c['innerHTML']='',addMessageToChat('ai','Bienvenue\x20dans\x20une\x20nouvelle\x20conversation\x20!\x20Comment\x20puis-je\x20vous\x20aider\x20aujourd\x27hui\x20?'),updateConversationHistory();}function showLoginModal(){const _0x16a325=_0x237bc8;document[_0x16a325(0x164)](_0x16a325(0x22b))[_0x16a325(0x13a)]['display']=_0x16a325(0x263);}function showRegisterModal(){const _0x6ff9=_0x237bc8;document[_0x6ff9(0x164)](_0x6ff9(0x14c))[_0x6ff9(0x13a)]['display']=_0x6ff9(0x263);}function closeModal(_0x203718){const _0x2e042c=_0x237bc8;document[_0x2e042c(0x164)](_0x203718)['style'][_0x2e042c(0x10e)]=_0x2e042c(0x1c6);}function updateUIForLoggedInUser(){const _0x26e834=_0x237bc8;document[_0x26e834(0x164)](_0x26e834(0x133))[_0x26e834(0x220)][_0x26e834(0x222)](_0x26e834(0xf7)),document[_0x26e834(0x164)](_0x26e834(0x122))[_0x26e834(0x220)][_0x26e834(0x222)](_0x26e834(0xf7)),document['getElementById'](_0x26e834(0x1fd))['classList'][_0x26e834(0x1f9)](_0x26e834(0xf7)),document['getElementById'](_0x26e834(0x23c))[_0x26e834(0x220)][_0x26e834(0x1f9)](_0x26e834(0xf7)),document[_0x26e834(0x164)](_0x26e834(0x166))[_0x26e834(0x25e)]=currentUser[_0x26e834(0x166)],document[_0x26e834(0x164)](_0x26e834(0x231))[_0x26e834(0x25e)]=currentUser[_0x26e834(0x231)],document[_0x26e834(0x164)]('paidCredits')[_0x26e834(0x25e)]=currentUser[_0x26e834(0x11c)],document['getElementById'](_0x26e834(0x285))[_0x26e834(0x25e)]=currentUser[_0x26e834(0x285)]||'Aucun',loadConversationHistory();}function _0x1d85(){const _0xccace2=['Déconnexion\x20réussie.','firstPurchase','setFontSize','database','shareOnTwitter','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20payants\x20pour\x20ce\x20modèle\x20avancé.','file-upload','meta[name=\x22color-scheme\x22]','registerPassword','conversations_','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20pour\x20envoyer\x20ce\x20message.','Voici\x20le\x20menu\x20principal.\x20Il\x20vous\x20permet\x20d\x27accéder\x20à\x20différentes\x20fonctionnalités\x20de\x20l\x27application\x20(Models,\x20Crédits,\x20Bibliothèque,\x20Récompense...).','width','querySelector','referralLink','loginUsername','\x20FCFA','image/','sidebar-visible','Erreur\x20lors\x20du\x20chargement\x20de\x20la\x20liste\x20des\x20clés\x20API:','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedPrompt()\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','fas\x20fa-trash\x20delete-icon','file-icon','visible','...(Utilisez\x20un\x20modèle\x20avancé\x20pour\x20avoir\x20la\x20suite\x20de\x20ma\x20réponse)','createNewConversation','beforeShow','hidden','Veuillez\x20sélectionner\x20un\x20pack\x20de\x20crédits.','buyCredits','Veuillez\x20sélectionner\x20un\x20forfait.','_blank','.theme-toggle\x20i','&quote=','fas\x20fa-sun','trim','totalReferrals','hasSeenGuidedTour','1595740LzCYUV','set','appendChild','\x0a\x0a**Fichiers\x20joints:**\x0a','🚀\x20Découvrez\x20le\x20secret\x20pour\x20booster\x20votre\x20apprentissage\x20!\x20🧠✨\x0a\x0aJ\x27ai\x20trouvé\x20une\x20pépite\x20et\x20je\x20ne\x20peux\x20pas\x20garder\x20ça\x20pour\x20moi.\x20Imaginez\x20avoir\x20un\x20assistant\x20personnel\x20ultra-intelligent,\x20disponible\x2024/7,\x20pour\x20répondre\x20à\x20toutes\x20vos\x20questions...\x20C\x27est\x20ce\x20que\x20j\x27ai\x20avec\x20Eduque\x20moi\x20!\x0a\x0aCurieux\x20?\x20Cliquez\x20sur\x20ce\x20lien\x20magique\x20et\x20embarquez\x20pour\x20une\x20aventure\x20intellectuelle\x20incroyable\x20:\x0a','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','referredBy','floor','pinnedItems','gemini-bb56e.appspot.com','Ce\x20nom\x20d\x27utilisateur\x20existe\x20déjà.','prompt-icon','display','conversationHistory','#promptListButton','Partage\x20réussi','toggleTheme','complete','selectionEnd','logout','input','getDate','error','notification\x20error','sender','generateAsync','paidCredits','theme','className','val','.input-actions\x20button:last-child','Statut\x20de\x20l\x27API\x20Gemini:','registerBtn','body','gemini-bb56e','shiftKey','Erreur\x20:\x20','getItem','showReferralModal','scrollHeight','Inscription\x20réussie\x20!\x20Vous\x20avez\x20reçu\x2010\x20crédits\x20gratuits.','Erreur\x20lors\x20de\x20la\x20récupération\x20du\x20code\x20de\x20parrainage.','dark','open','click','Modèles\x20disponibles:','users/','eduqueMoiPassword','search','loginBtn','internal','<h3>Historique\x20des\x20conversations</h3>','createObjectURL','tour-highlight','.modal','start','style','togglePromptList','pk_live_TfSz212W0xSMKK7oPEogkFmp','initializeApp','toggle','1121004TEUXxI','.txt','setItem','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','response-icon','application/msword','startsWith','auto','fas\x20fa-moon','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyResponse(this.parentNode.parentNode)\x22><i\x20class=\x22fas\x20fa-copy\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22exportResponse(this.parentNode.parentNode,\x20\x27pdf\x27)\x22><i\x20class=\x22fas\x20fa-file-pdf\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareResponse(this.parentNode.parentNode)\x22><i\x20class=\x22fas\x20fa-share-alt\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22reply-button\x22\x20onclick=\x22pinResponse(this.parentNode.parentNode)\x22><i\x20class=\x22fas\x20fa-reply\x22></i></button>\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20','input-area','/referrals/','handleFileUpload','registerModal','registerUsername','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<?xml\x20version=\x221.0\x22\x20encoding=\x22UTF-8\x22\x20standalone=\x22yes\x22?>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<w:document\x20xmlns:w=\x22http://schemas.openxmlformats.org/wordprocessingml/2006/main\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:r>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:t>','https://wa.me/?text=','\x20réussi','removeItem','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20de\x20votre\x20profil.\x20Veuillez\x20réessayer.','loaded','getGenerativeModel','scrollTop','response-text','addEventListener','child','subscriptionEndDate','prompt-title','pinned-response','Export\x20en\x20','setDate','execCommand','loading','password','application/pdf','key','includes','getElementById','data-theme','username','name','gemini-1.5-pro','alt','values','setSelectionRange','closest','CHECKOUT_COMPLETED','success','init','selectedModel','1566950YPplBz','readAsDataURL','displayText','Veuillez\x20entrer\x20un\x20message,\x20joindre\x20un\x20fichier,\x20épingler\x20une\x20réponse\x20ou\x20sélectionner\x20un\x20prompt.','href','smooth','API','🖼️','onclick','ref','absolute','then','Eduque_moi.pdf','modelSelect','showRegisterModal','warning','notification\x20','.file-label','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Détails\x20de\x20la\x20facture</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','\x20jour','welcome','Veuillez\x20vous\x20connecter\x20pour\x20accéder\x20à\x20la\x20bibliothèque.','max','\x20mots.','toLocaleString','Voici\x20la\x20zone\x20de\x20saisie.\x20C\x27est\x20ici\x20que\x20vous\x20poserez\x20vos\x20questions.','response','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>🤖</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','getTime','innerHTML','onload','beforeunload','word','Facture\x20Eduque\x20moi','map','lastConversation','Cliquez\x20ici\x20pour\x20importer\x20des\x20fichiers\x20(image,\x20pdf,\x20docx,\x20doc,\x20txt)\x20que\x20vous\x20voulez\x20analyser.','.logo','Prompt\x20sélectionné','orderByChild','readAsArrayBuffer','transaction','target','removeChild','warn','generateContent','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27prompt\x27)\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','gemini-1.5-flash','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20données\x20utilisateur:','isActive','selectionStart','8RvWZTp','sort','stringify','user:\x20','userInput','1122816xedtFr','Forfait\x20','model:\x20','prompt','\x0a\x0aPS\x20:\x20En\x20utilisant\x20mon\x20lien,\x20vous\x20me\x20donnez\x20un\x20petit\x20coup\x20de\x20pouce.\x20Mais\x20chut,\x20c\x27est\x20notre\x20secret\x20!\x20😉','left','#promptCategories\x20li','upgrade-button','disabled','update','jspdf','1:277143630015:web:78736f2cf52d29495d160a','.toggle-sidebar','Bienvenue\x20dans\x20une\x20nouvelle\x20conversation\x20!\x20Comment\x20puis-je\x20vous\x20aider\x20aujourd\x27hui\x20?','pinned-responses-message','.chat-container','register','pinned-file','div','Utilisateur\x20connecté:','referralModal','Erreur\x20lors\x20de\x20la\x20conversion\x20du\x20fichier\x20Word.','promptCategories','Échec\x20de\x20la\x20connexion\x20automatique\x20:\x20informations\x20invalides','category','shareOnWhatsApp','menu','word/document.xml','Erreur\x20lors\x20de\x20la\x20vérification\x20du\x20statut\x20de\x20l\x27API:','none','data-type','gemini-1.0-pro','firstChild','promptListModal','lastFreeCreditsReset','Enter','\x20pour\x20Eduque\x20moi','historyList','Erreur\x20lors\x20de\x20l\x27inscription:','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20pour\x20utiliser\x20Gemini\x201.5\x20Flash.','</w:t>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:r>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</w:document>\x0a\x20\x20\x20\x20','light','eduqueMoiUsername','random','message\x20user-message','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>','Ces\x20icônes\x20vous\x20permettent\x20de\x20copier,\x20exporter\x20en\x20PDF,\x20partager\x20ou\x20répondre\x20à\x20un\x20message\x20spécifique.','file','AIzaSyB3umTE3n2d5gwKzOmJz4ss1pFZMR8_vOE','activeReferrals','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27file\x27,\x20','Veuillez\x20remplir\x20tous\x20les\x20champs.','change','\x20FCFA</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Numéro\x20de\x20transaction:</strong>\x20','showLoginModal','online','Numéro\x20de\x20transaction\x20:\x20','info','replace','buySubscription','Modèle\x20mis\x20à\x20jour\x20vers\x20Gemini\x201.5\x20Pro','Description\x20:\x20','select',')\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','once','button','save','\x20crédits\x20ont\x20été\x20ajoutés\x20à\x20votre\x20compte.','conversation-item','next','user','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','title','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Description:</strong>\x20','setAttribute','.pinned-item[data-type=\x22prompt\x22]','2741280SrAjWf','5564545MwCUhK','content','addPage','remove','Conversation\x20du\x20','fileInput','message','logoutBtn','data-invite-message','keydown','getAttribute','Tour','load','98610CnVfXZ','log','referrals','gemini-bb56e.firebaseapp.com','closeModal','span','&text=','toLocaleDateString','Le\x20parrain\x20de\x20','eduqueMoiUserData','Lien\x20de\x20partage\x20copié\x20!','div:first-child','slice','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedFile(','copy','stopPropagation','Ce\x20bouton\x20ouvre\x20la\x20liste\x20des\x20demandes\x20personnalisées\x20(Utile\x20si\x20vous\x20ne\x20savez\x20pas\x20comment\x20faire\x20une\x20demande).','La\x20réponse\x20a\x20été\x20tronquée\x20à\x20','promptList','show','element','exists','preventDefault','height','output','toISOString','prompt-list','catch','Facture\x20pour\x20:\x20','classList','text','add','toggleSidebar','Connexion\x20automatique\x20réussie','createElement','pinned-item','messageContainer','&quot;','location','clipboard','loginModal',')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22prompt-title\x22>','Ce\x20modèle\x20nécessite\x20un\x20abonnement\x20ou\x20des\x20crédits\x20payants.','Erreur\x20lors\x20de\x20la\x20connexion\x20automatique:','\x20activé\x20avec\x20succès\x20!','toUpperCase','freeCredits','<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27free\x27)\x22>Utiliser\x20le\x20modèle\x20gratuit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27subscription\x27)\x22>Acheter\x20un\x20abonnement</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27credits\x27)\x22>Acheter\x20des\x20crédits</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27cancel\x27)\x22>Annuler</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','forEach','https://eduquemoi.netlify.app/?ref=','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>💬</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','Analyse\x20ce\x20fichier\x20texte:\x20','addStep','resolveNotification','blob','https://www.facebook.com/sharer/sharer.php?u=','type','userInfo','Utilisateur\x20non\x20connecté','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20cette\x20conversation\x20?','.sidebar','result','top','src','querySelectorAll','sendMessage','users','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27response\x27,\x20','Erreur\x20lors\x20du\x20partage','prompts','277143630015','split','\x20crédits\x20pour\x20Eduque\x20moi','.input-container','get','filter','client@example.com','active','getBoundingClientRect','Réponse\x20copiée\x20dans\x20le\x20presse-papiers','Erreur\x20lors\x20de\x20la\x20conversion\x20du\x20fichier\x20Word\x20:','\x27,\x20','Le\x20paiement\x20a\x20été\x20annulé\x20ou\x20a\x20échoué.','focus','keys','La\x20liste\x20des\x20clés\x20API\x20est\x20vide.','lastImportReset','removePinnedFile','right','splice','Erreur\x20lors\x20de\x20l\x27inscription.\x20Veuillez\x20réessayer.','textContent','description','onerror','text/plain','length','block','user-message','copyReferralLink','innerWidth','offsetWidth','bottom','Aucun','Connexion\x20réussie\x20!','pageSize','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22prompt-select-icon\x22><i\x20class=\x22fas\x20fa-plus-circle\x22></i></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','application/vnd.openxmlformats-officedocument.wordprocessingml.document','value',')\x20que\x20je\x20viens\x20de\x20t\x27envoyer.','pdf','Achat\x20d\x27un\x20forfait\x20','Erreur\x20lors\x20de\x20la\x20connexion:','Le\x20partage\x20n\x27est\x20pas\x20pris\x20en\x20charge\x20sur\x20votre\x20appareil','img','Bienvenue\x20sur\x20Eduque\x20moi\x20!\x20Commençons\x20la\x20visite\x20guidée.','.\x20Veuillez\x20réessayer.','button:last-child','push','Achat\x20de\x20','pinned-prompt','Date\x20:\x20','message-actions','extractRawText','attachTo','https://gemini-bb56e-default-rtdb.firebaseio.com','https://twitter.com/intent/tweet?url=','https://generativelanguage.googleapis.com/v1beta/models/','contains','models?key=','amount','subscription','now','shareOnFacebook','share','referralCode','Tentative\x20d\x27ouverture\x20de\x20la\x20bibliothèque','substring','Votre\x20abonnement\x20expire\x20dans\x20'];_0x1d85=function(){return _0xccace2;};return _0x1d85();}function updateUIForLoggedOutUser(){const _0x551022=_0x237bc8;document['getElementById']('loginBtn')[_0x551022(0x220)][_0x551022(0x1f9)](_0x551022(0xf7)),document['getElementById'](_0x551022(0x122))[_0x551022(0x220)][_0x551022(0x1f9)](_0x551022(0xf7)),document[_0x551022(0x164)](_0x551022(0x1fd))[_0x551022(0x220)][_0x551022(0x222)]('hidden'),document[_0x551022(0x164)](_0x551022(0x23c))[_0x551022(0x220)][_0x551022(0x222)](_0x551022(0xf7)),document[_0x551022(0x164)](_0x551022(0x10f))[_0x551022(0x18e)]=_0x551022(0x135);}function storeLoginInfo(_0x18436d,_0xfca76b){const _0x28054e=_0x237bc8;localStorage['setItem'](_0x28054e(0x1d3),_0x18436d),localStorage[_0x28054e(0x141)]('eduqueMoiPassword',_0xfca76b);}function getStoredLoginInfo(){const _0x3316d1=_0x237bc8;return{'username':localStorage[_0x3316d1(0x127)](_0x3316d1(0x1d3)),'password':localStorage[_0x3316d1(0x127)](_0x3316d1(0x131))};}function clearLoginInfo(){const _0x1b234e=_0x237bc8;localStorage[_0x1b234e(0x151)](_0x1b234e(0x1d3)),localStorage['removeItem'](_0x1b234e(0x131));}async function register(){const _0x728a3e=_0x237bc8,_0x7bb52=document[_0x728a3e(0x164)](_0x728a3e(0x14d))[_0x728a3e(0x26e)],_0x13fdbd=document[_0x728a3e(0x164)](_0x728a3e(0xe4))[_0x728a3e(0x26e)],_0x5373a6=new URLSearchParams(window[_0x728a3e(0x229)][_0x728a3e(0x132)])[_0x728a3e(0x24d)](_0x728a3e(0x17a));if(!_0x7bb52||!_0x13fdbd){showNotification(_0x728a3e(0x1dc),_0x728a3e(0x118));return;}try{const _0x1f134d=db['ref'](_0x728a3e(0x130)+_0x7bb52),_0xa8d339=await _0x1f134d[_0x728a3e(0x1e9)](_0x728a3e(0x26e));if(_0xa8d339[_0x728a3e(0x218)]()){showNotification(_0x728a3e(0x10c),'error');return;}const _0x51064b=new Date(),_0x5112bb={'password':_0x13fdbd,'freeCredits':FREE_CREDITS_REGISTER,'paidCredits':0x0,'subscription':null,'subscriptionEndDate':null,'lastFreeCreditsReset':_0x51064b[_0x728a3e(0x21c)](),'referredBy':_0x5373a6||null,'firstPurchase':![],'totalReferrals':0x0,'activeReferrals':0x0,'hasSeenGuidedTour':![]};await _0x1f134d[_0x728a3e(0x103)](_0x5112bb);if(_0x5373a6){const _0x42bf7f=await db['ref'](_0x728a3e(0x245))['orderByChild']('referralCode')['equalTo'](_0x5373a6)[_0x728a3e(0x1e9)](_0x728a3e(0x26e)),_0x24d630=_0x42bf7f[_0x728a3e(0x11f)]();if(_0x24d630){const _0x5cbc09=Object[_0x728a3e(0x257)](_0x24d630)[0x0];await db['ref'](_0x728a3e(0x130)+_0x5cbc09+_0x728a3e(0x14a)+_0x7bb52)[_0x728a3e(0x103)]({'date':_0x51064b[_0x728a3e(0x21c)](),'isActive':![]});const _0x4fa97d=db['ref'](_0x728a3e(0x130)+_0x5cbc09);await _0x4fa97d[_0x728a3e(0x19a)](_0x460f6e=>{const _0x1dbfff=_0x728a3e;return _0x460f6e&&(_0x460f6e[_0x1dbfff(0x100)]=(_0x460f6e[_0x1dbfff(0x100)]||0x0)+0x1),_0x460f6e;}),currentUser&&currentUser[_0x728a3e(0x166)]===_0x5cbc09&&(document[_0x728a3e(0x164)](_0x728a3e(0x100))[_0x728a3e(0x25e)]=(parseInt(document[_0x728a3e(0x164)](_0x728a3e(0x100))['textContent'])||0x0)+0x1);}}currentUser={'username':_0x7bb52,..._0x5112bb},updateUIForLoggedInUser(),showNotification(_0x728a3e(0x12a),'success'),closeModal(_0x728a3e(0x14c)),storeLoginInfo(_0x7bb52,_0x13fdbd),startGuidedTour(),await markGuidedTourAsSeen(_0x7bb52);}catch(_0x3e66e5){console['error'](_0x728a3e(0x1cf),_0x3e66e5),showNotification(_0x728a3e(0x25d),_0x728a3e(0x118));}}async function login(_0x464c08,_0x4e9213){const _0x44d432=_0x237bc8;(!_0x464c08||!_0x4e9213)&&(_0x464c08=document['getElementById'](_0x44d432(0xeb))['value'],_0x4e9213=document[_0x44d432(0x164)]('loginPassword')[_0x44d432(0x26e)]);if(!_0x464c08||!_0x4e9213){showNotification(_0x44d432(0x1dc),_0x44d432(0x118));return;}try{const _0xaf2a53=db[_0x44d432(0x17a)](_0x44d432(0x130)+_0x464c08),_0x57b44c=await _0xaf2a53[_0x44d432(0x1e9)]('value');if(_0x57b44c[_0x44d432(0x218)]()&&_0x57b44c['val']()[_0x44d432(0x160)]===_0x4e9213){const _0x4e84d4=_0x57b44c['val']();currentUser={'username':_0x464c08,'freeCredits':_0x4e84d4[_0x44d432(0x231)],'paidCredits':_0x4e84d4['paidCredits'],'subscription':_0x4e84d4[_0x44d432(0x285)],'subscriptionEndDate':_0x4e84d4['subscriptionEndDate'],'lastFreeCreditsReset':_0x4e84d4[_0x44d432(0x1cb)]},await resetFreeCreditsIfNeeded(),updateUIForLoggedInUser(),showNotification(_0x44d432(0x26a),_0x44d432(0x16e)),closeModal(_0x44d432(0x22b)),storeLoginInfo(_0x464c08,_0x4e9213);const _0x2d3096=await checkGuidedTourStatus(_0x464c08);!_0x2d3096&&(startGuidedTour(),await markGuidedTourAsSeen(_0x464c08));}else showNotification('Nom\x20dutilisateur\x20ou\x20mot\x20de\x20passe\x20incorrect.','error');}catch(_0x5ab656){console['error'](_0x44d432(0x272),_0x5ab656),showNotification('Erreur\x20lors\x20de\x20la\x20connexion.\x20Veuillez\x20réessayer.','error');}}function logout(){const _0x561b57=_0x237bc8;currentUser&&syncUserData(),currentUser=null,updateUIForLoggedOutUser(),showNotification(_0x561b57(0x28d),'success'),clearLoginInfo();}async function resetFreeCreditsIfNeeded(){const _0x2b7314=_0x237bc8,_0x3938dc=new Date(),_0x385a8e=new Date(currentUser[_0x2b7314(0x1cb)]);if(_0x3938dc[_0x2b7314(0x18d)]()-_0x385a8e['getTime']()>=0x18*0x3c*0x3c*0x3e8){const _0x4eb058=currentUser['freeCredits'];currentUser[_0x2b7314(0x231)]=FREE_CREDITS_PER_DAY,currentUser[_0x2b7314(0x1cb)]=_0x3938dc[_0x2b7314(0x21c)](),await syncUserData(),document[_0x2b7314(0x164)](_0x2b7314(0x231))['textContent']=currentUser[_0x2b7314(0x231)];const _0x57bf7d=currentUser[_0x2b7314(0x231)]-_0x4eb058;_0x57bf7d>0x0&&showNotification(_0x57bf7d+'\x20crédits\x20gratuits\x20ont\x20été\x20ajoutés\x20à\x20votre\x20compte\x20!',_0x2b7314(0x16e));}}function checkModelAccess(){const _0x27eacd=_0x237bc8,_0x5c482e=document[_0x27eacd(0x164)](_0x27eacd(0x17e))[_0x27eacd(0x26e)];![_0x27eacd(0x1a0),'gemini-1.0-pro']['includes'](_0x5c482e)&&!hasValidSubscription()&&currentUser[_0x27eacd(0x11c)]<=0x0&&(showPaymentNotification(_0x27eacd(0x22d)),document[_0x27eacd(0x164)](_0x27eacd(0x17e))['value']='gemini-1.5-flash');}async function handleFileUpload(_0x4d7ad7){const _0x4b054f=_0x237bc8,_0x2c3a22=_0x4d7ad7[_0x4b054f(0x19b)]['files'];for(let _0xca65ee=0x0;_0xca65ee<_0x2c3a22[_0x4b054f(0x262)];_0xca65ee++){const _0x1cd032=_0x2c3a22[_0xca65ee];if(_0x1cd032[_0x4b054f(0x23b)]==='application/vnd.openxmlformats-officedocument.wordprocessingml.document'||_0x1cd032[_0x4b054f(0x23b)]===_0x4b054f(0x144))try{const _0x254f6b=await convertWordToText(_0x1cd032);pinnedFiles[_0x4b054f(0x278)]({'name':_0x1cd032[_0x4b054f(0x167)][_0x4b054f(0x1e3)](/\.[^/.]+$/,'')+_0x4b054f(0x140),'type':'text/plain','content':_0x254f6b}),updatePinnedFiles(),importedFilesCount++,await db[_0x4b054f(0x17a)](_0x4b054f(0x130)+currentUser[_0x4b054f(0x166)])[_0x4b054f(0x1b2)]({'importedFilesCount':importedFilesCount});}catch(_0x43f2ac){console[_0x4b054f(0x118)](_0x4b054f(0x253),_0x43f2ac),showNotification(_0x4b054f(0x1be),_0x4b054f(0x118));}else(_0x1cd032[_0x4b054f(0x23b)][_0x4b054f(0x145)](_0x4b054f(0xed))||_0x1cd032[_0x4b054f(0x23b)]===_0x4b054f(0x161))&&(pinnedFiles[_0x4b054f(0x278)](_0x1cd032),updatePinnedFiles());}}function convertWordToText(_0x4a8a55){return new Promise((_0x121374,_0x12b70b)=>{const _0x1f9d00=_0x3691,_0xb4fd1a=new FileReader();_0xb4fd1a[_0x1f9d00(0x18f)]=function(_0x24c92e){const _0x35d132=_0x1f9d00,_0x5ca177=_0x24c92e[_0x35d132(0x19b)]['result'];mammoth[_0x35d132(0x27d)]({'arrayBuffer':_0x5ca177})['then'](function(_0x117c50){_0x121374(_0x117c50['value']);})[_0x35d132(0x21e)](function(_0x2f52ad){_0x12b70b(_0x2f52ad);});},_0xb4fd1a[_0x1f9d00(0x199)](_0x4a8a55);});}function updatePinnedFiles(){const _0x217d77=_0x237bc8,_0x329059=document[_0x217d77(0x164)](_0x217d77(0x10a));_0x329059[_0x217d77(0x18e)]='',pinnedFiles['forEach']((_0x35c4b2,_0x4f0fc0)=>{const _0x1cd854=_0x217d77,_0x1c70e2=document[_0x1cd854(0x225)]('div');_0x1c70e2[_0x1cd854(0x11e)]='pinned-item',_0x1c70e2[_0x1cd854(0x18e)]=_0x1cd854(0x1d6)+(_0x35c4b2[_0x1cd854(0x23b)][_0x1cd854(0x145)](_0x1cd854(0xed))?'🖼️':'📄')+_0x1cd854(0x107)+_0x35c4b2[_0x1cd854(0x167)]+'\x22>'+_0x35c4b2[_0x1cd854(0x167)]+_0x1cd854(0x210)+_0x4f0fc0+_0x1cd854(0x1e8),_0x329059[_0x1cd854(0x104)](_0x1c70e2);});}function removePinnedFile(_0x4fcbb4){const _0x31685d=_0x237bc8;pinnedFiles[_0x31685d(0x25c)](_0x4fcbb4,0x1),updatePinnedFiles();}function createPinnedFilesElement(_0x3790e2){const _0xcb559f=_0x237bc8,_0x33ad4b=document[_0xcb559f(0x225)](_0xcb559f(0x1bb));return _0x33ad4b[_0xcb559f(0x11e)]='pinned-files-message',_0x3790e2['forEach'](_0x9e99ed=>{const _0x21818b=_0xcb559f,_0x38726b=document['createElement'](_0x21818b(0x1bb));_0x38726b['className']=_0x21818b(0x1ba);if(_0x9e99ed[_0x21818b(0x23b)][_0x21818b(0x145)](_0x21818b(0xed))){const _0x150e6e=document[_0x21818b(0x225)](_0x21818b(0x274));_0x150e6e[_0x21818b(0x242)]=URL[_0x21818b(0x136)](_0x9e99ed),_0x150e6e[_0x21818b(0x169)]=_0x9e99ed[_0x21818b(0x167)],_0x150e6e[_0x21818b(0x11e)]='pinned-image',_0x38726b[_0x21818b(0x104)](_0x150e6e);}else{const _0x5c52af=document['createElement'](_0x21818b(0x208));_0x5c52af[_0x21818b(0x11e)]=_0x21818b(0xf2),_0x5c52af['textContent']=_0x9e99ed[_0x21818b(0x23b)][_0x21818b(0x145)](_0x21818b(0x161))?'📄':'📎',_0x38726b[_0x21818b(0x104)](_0x5c52af);}const _0x182922=document[_0x21818b(0x225)](_0x21818b(0x208));_0x182922[_0x21818b(0x11e)]='file-name',_0x182922['textContent']=_0x9e99ed['name'],_0x38726b['appendChild'](_0x182922),_0x33ad4b[_0x21818b(0x104)](_0x38726b);}),_0x33ad4b;}function createPinnedResponsesElement(_0x24b567){const _0x382284=_0x237bc8,_0x56ff3f=document[_0x382284(0x225)](_0x382284(0x1bb));return _0x56ff3f['className']=_0x382284(0x1b7),_0x24b567[_0x382284(0x233)](_0x47ae7d=>{const _0x2b123e=_0x382284,_0x2fdce8=document[_0x2b123e(0x225)]('div');_0x2fdce8[_0x2b123e(0x11e)]=_0x2b123e(0x15b);const _0x2b41aa=document[_0x2b123e(0x225)](_0x2b123e(0x208));_0x2b41aa[_0x2b123e(0x11e)]=_0x2b123e(0x143),_0x2b41aa[_0x2b123e(0x25e)]='💬';const _0x5b7b44=document['createElement'](_0x2b123e(0x208));_0x5b7b44[_0x2b123e(0x11e)]=_0x2b123e(0x156),_0x5b7b44[_0x2b123e(0x25e)]=_0x47ae7d[_0x2b123e(0x173)],_0x2fdce8[_0x2b123e(0x104)](_0x2b41aa),_0x2fdce8[_0x2b123e(0x104)](_0x5b7b44),_0x56ff3f[_0x2b123e(0x104)](_0x2fdce8);}),_0x56ff3f;}function createPinnedPromptElement(_0x576672){const _0x9bd016=_0x237bc8,_0xb031e5=document[_0x9bd016(0x225)]('div');_0xb031e5[_0x9bd016(0x11e)]='pinned-prompt-message';const _0x58dbe8=document[_0x9bd016(0x225)](_0x9bd016(0x1bb));_0x58dbe8[_0x9bd016(0x11e)]=_0x9bd016(0x27a);const _0x51cf9c=document[_0x9bd016(0x225)](_0x9bd016(0x208));_0x51cf9c[_0x9bd016(0x11e)]=_0x9bd016(0x10d),_0x51cf9c[_0x9bd016(0x25e)]='🤖';const _0x2ac072=document[_0x9bd016(0x225)](_0x9bd016(0x208));return _0x2ac072[_0x9bd016(0x11e)]=_0x9bd016(0x15a),_0x2ac072[_0x9bd016(0x25e)]=_0x576672[_0x9bd016(0x1f1)],_0x58dbe8[_0x9bd016(0x104)](_0x51cf9c),_0x58dbe8[_0x9bd016(0x104)](_0x2ac072),_0xb031e5[_0x9bd016(0x104)](_0x58dbe8),_0xb031e5;}async function sendMessage(){const _0x34546b=_0x237bc8;if(!currentUser){showNotification('Veuillez\x20vous\x20connecter\x20pour\x20envoyer\x20des\x20messages.','error');return;}const _0x3273f1=document[_0x34546b(0x164)]('userInput')['value'][_0x34546b(0xff)](),_0x2c02a7=document['getElementById'](_0x34546b(0x17e))[_0x34546b(0x26e)];if(!_0x3273f1&&pinnedFiles[_0x34546b(0x262)]===0x0&&pinnedResponses[_0x34546b(0x262)]===0x0&&!pinnedPrompt){showNotification(_0x34546b(0x174),_0x34546b(0x118));return;}let _0x4cd113=0x1;_0x4cd113+=pinnedFiles[_0x34546b(0x24e)](_0x1a0b3b=>_0x1a0b3b[_0x34546b(0x23b)]!==_0x34546b(0x261))[_0x34546b(0x262)],_0x4cd113+=pinnedResponses[_0x34546b(0x262)];if(!hasValidSubscription()){if(_0x2c02a7===_0x34546b(0x1a0)){if(currentUser['paidCredits']>=_0x4cd113)showNotification('Utilisation\x20de\x20crédits\x20payants\x20pour\x20Gemini\x201.5\x20Flash.',_0x34546b(0x1e2));else{if(currentUser[_0x34546b(0x231)]>=_0x4cd113)showNotification('Utilisation\x20de\x20crédits\x20gratuits\x20pour\x20Gemini\x201.5\x20Flash.','info');else{showPaymentNotification(_0x34546b(0x1d0));return;}}}else{if(![_0x34546b(0x1c8)][_0x34546b(0x163)](_0x2c02a7)){if(currentUser['paidCredits']<_0x4cd113){showPaymentNotification(_0x34546b(0x292));return;}}else{if(currentUser['freeCredits']<_0x4cd113&&currentUser[_0x34546b(0x11c)]<_0x4cd113){showPaymentNotification(_0x34546b(0xe6));return;}}}}let _0x2e4c83=_0x3273f1,_0x45245e=_0x3273f1;const _0x57310a=[...pinnedFiles],_0x10974f=[...pinnedResponses],_0x58075f=pinnedPrompt;pinnedFiles=[],pinnedResponses=[],pinnedPrompt=null,updatePinnedItems();const _0x5750b2=document[_0x34546b(0x225)]('div');_0x5750b2[_0x34546b(0x11e)]=_0x34546b(0x1d5);if(_0x57310a[_0x34546b(0x262)]>0x0){const _0x50151f=createPinnedFilesElement(_0x57310a);_0x5750b2[_0x34546b(0x104)](_0x50151f),_0x45245e+=_0x34546b(0x105),_0x57310a[_0x34546b(0x233)](_0xd0c743=>{const _0x362e75=_0x34546b;_0x45245e+='-\x20'+_0xd0c743[_0x362e75(0x167)]+'\x20('+_0xd0c743[_0x362e75(0x23b)]+')\x0a';});}if(_0x10974f[_0x34546b(0x262)]>0x0){const _0x236418=createPinnedResponsesElement(_0x10974f);_0x5750b2[_0x34546b(0x104)](_0x236418),_0x45245e+='\x0a\x0a**Réponses\x20épinglées:**\x0a',_0x10974f['forEach'](_0x57bd7c=>{const _0xc0b98a=_0x34546b;_0x45245e+='-\x20'+_0x57bd7c[_0xc0b98a(0x173)]+'\x0a';});}if(_0x58075f){const _0x3d004f=createPinnedPromptElement(_0x58075f);_0x5750b2['appendChild'](_0x3d004f),_0x45245e=_0x58075f[_0x34546b(0x1f7)]+'\x0a\x0a'+_0x45245e;}const _0x3b3f3a=document[_0x34546b(0x225)]('p');_0x3b3f3a[_0x34546b(0x25e)]=_0x2e4c83,_0x5750b2[_0x34546b(0x104)](_0x3b3f3a);const _0x3ccbed=document[_0x34546b(0x164)]('messageContainer');_0x3ccbed[_0x34546b(0x104)](_0x5750b2),_0x3ccbed[_0x34546b(0x155)]=_0x3ccbed[_0x34546b(0x129)],document[_0x34546b(0x164)](_0x34546b(0x1a8))['value']='',resetTextareaHeight();const _0x11c85a=document[_0x34546b(0xe9)](_0x34546b(0x120));_0x11c85a[_0x34546b(0x220)][_0x34546b(0x222)](_0x34546b(0x15f)),_0x11c85a[_0x34546b(0x1b1)]=!![];try{const _0x10dafa=[];let _0x556110='';const _0x31a0e2=currentConversation[_0x34546b(0x20f)](-0x5);_0x31a0e2['forEach'](_0xaf2b78=>{const _0x115cc6=_0x34546b;_0xaf2b78[_0x115cc6(0x11a)]===_0x115cc6(0x1ef)?_0x556110+=_0x115cc6(0x1a7)+_0xaf2b78['content']+'\x0a':_0x556110+=_0x115cc6(0x1ab)+_0xaf2b78['content']+'\x0a';}),_0x45245e=_0x556110+'\x0a'+_0x45245e,_0x10dafa['push']({'text':_0x45245e});for(const _0x213c26 of _0x57310a){if(_0x213c26[_0x34546b(0x23b)]===_0x34546b(0x261))_0x10dafa[_0x34546b(0x278)]({'text':_0x34546b(0x236)+_0x213c26[_0x34546b(0x1f7)]});else{const _0x1de93b=await readFileAsBase64(_0x213c26);_0x10dafa[_0x34546b(0x278)]({'inlineData':{'data':_0x1de93b,'mimeType':_0x213c26[_0x34546b(0x23b)]}}),_0x10dafa['push']({'text':'Analyse\x20le\x20fichier\x20'+_0x213c26[_0x34546b(0x167)]+'\x20('+_0x213c26['type']+_0x34546b(0x26f)});}}model=genAI[_0x34546b(0x154)]({'model':_0x2c02a7,'systemInstruction':SYSTEM_INSTRUCTION});const _0x4e7d1c=await model[_0x34546b(0x19e)](_0x10dafa),_0x25cc3a=await _0x4e7d1c[_0x34546b(0x18b)];let _0x1bd8df=_0x25cc3a[_0x34546b(0x221)](),_0x305757;if(_0x2c02a7===_0x34546b(0x1c8)||_0x2c02a7===_0x34546b(0x1a0)&&currentUser[_0x34546b(0x11c)]<_0x4cd113){const _0x2a6bd3=_0x1bd8df[_0x34546b(0x24a)](/\s+/);_0x2a6bd3[_0x34546b(0x262)]>FREE_MODEL_MAX_RESPONSE?(_0x1bd8df=_0x2a6bd3[_0x34546b(0x20f)](0x0,FREE_MODEL_MAX_RESPONSE)['join']('\x20')+_0x34546b(0xf4),showNotification(_0x34546b(0x214)+FREE_MODEL_MAX_RESPONSE+_0x34546b(0x188),_0x34546b(0x1e2)),_0x305757=addMessageToChat('ai',_0x1bd8df),showUpgradeButton(_0x305757)):_0x305757=addMessageToChat('ai',_0x1bd8df);}else _0x305757=addMessageToChat('ai',_0x1bd8df);currentConversation['push']({'sender':_0x34546b(0x1ef),'content':_0x3273f1}),currentConversation[_0x34546b(0x278)]({'sender':'ai','content':_0x1bd8df}),await updateCredits(_0x2c02a7,_0x4cd113),saveConversation();}catch(_0x1562ff){console[_0x34546b(0x118)]('Erreur\x20lors\x20de\x20la\x20génération\x20de\x20la\x20réponse:',_0x1562ff),showNotification(_0x34546b(0x126)+_0x1562ff[_0x34546b(0x1fc)]+_0x34546b(0x276),'error');}finally{_0x11c85a['classList'][_0x34546b(0x1f9)](_0x34546b(0x15f)),_0x11c85a['disabled']=![];}}function pinResponse(_0x4aadaf){const _0x4a33b1=_0x237bc8,_0x5710bb=_0x4aadaf[_0x4a33b1(0xe9)](_0x4a33b1(0x20e))['textContent'],_0x6ce21a=_0x5710bb[_0x4a33b1(0x262)]>0x32?_0x5710bb['substring'](0x0,0x32)+'...':_0x5710bb;pinnedResponses[_0x4a33b1(0x278)]({'text':_0x5710bb,'displayText':_0x6ce21a}),updatePinnedItems();}function updatePinnedItems(){const _0x3fc976=_0x237bc8,_0x19e3eb=document[_0x3fc976(0x164)](_0x3fc976(0x10a));_0x19e3eb[_0x3fc976(0x18e)]='',pinnedFiles['forEach']((_0x145e68,_0x2da664)=>{const _0x2a0f81=_0x3fc976,_0x2ed68a=document[_0x2a0f81(0x225)](_0x2a0f81(0x1bb));_0x2ed68a[_0x2a0f81(0x11e)]=_0x2a0f81(0x226),_0x2ed68a[_0x2a0f81(0x1f3)](_0x2a0f81(0x1c7),_0x2a0f81(0x1d8)),_0x2ed68a['innerHTML']=_0x2a0f81(0x1d6)+(_0x145e68['type'][_0x2a0f81(0x145)](_0x2a0f81(0xed))?_0x2a0f81(0x178):'📄')+_0x2a0f81(0x107)+_0x145e68['name']+'\x22>'+_0x145e68[_0x2a0f81(0x167)]+_0x2a0f81(0x1db)+_0x2da664+_0x2a0f81(0x1e8),_0x19e3eb[_0x2a0f81(0x104)](_0x2ed68a);}),pinnedResponses[_0x3fc976(0x233)]((_0x5d23a2,_0x1eeca2)=>{const _0x245a6a=_0x3fc976,_0x56644b=document[_0x245a6a(0x225)]('div');_0x56644b[_0x245a6a(0x11e)]=_0x245a6a(0x226),_0x56644b['setAttribute'](_0x245a6a(0x1c7),_0x245a6a(0x18b)),_0x56644b[_0x245a6a(0x18e)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>💬</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22'+_0x5d23a2[_0x245a6a(0x221)]+'\x22>'+_0x5d23a2[_0x245a6a(0x173)]+_0x245a6a(0x246)+_0x1eeca2+_0x245a6a(0x1e8),_0x19e3eb['appendChild'](_0x56644b);});if(pinnedPrompt){const _0x3ddb2d=document[_0x3fc976(0x225)](_0x3fc976(0x1bb));_0x3ddb2d['className']=_0x3fc976(0x226),_0x3ddb2d['setAttribute'](_0x3fc976(0x1c7),'prompt'),_0x3ddb2d[_0x3fc976(0x18e)]=_0x3fc976(0x18c)+pinnedPrompt['title']+'\x22>'+pinnedPrompt[_0x3fc976(0x1f1)]+_0x3fc976(0x19f),_0x19e3eb[_0x3fc976(0x104)](_0x3ddb2d);}}function removePinnedItem(_0x431075,_0x4d145d){const _0x24cdaf=_0x237bc8;if(_0x431075==='file')pinnedFiles[_0x24cdaf(0x25c)](_0x4d145d,0x1);else{if(_0x431075==='response')pinnedResponses['splice'](_0x4d145d,0x1);else _0x431075===_0x24cdaf(0x1ac)&&(pinnedPrompt=null);}updatePinnedItems();}function replyToMessage(_0x2995fa){const _0x1f227f=_0x237bc8,_0x4305c7=_0x2995fa[_0x1f227f(0xe9)]('div:first-child')[_0x1f227f(0x25e)],_0x1ffde2=document[_0x1f227f(0x164)](_0x1f227f(0x1a8));_0x1ffde2[_0x1f227f(0x26e)]='>\x20'+_0x4305c7+'\x0a\x0a',_0x1ffde2['focus'](),_0x1ffde2[_0x1f227f(0x16b)](_0x1ffde2[_0x1f227f(0x26e)][_0x1f227f(0x262)],_0x1ffde2[_0x1f227f(0x26e)][_0x1f227f(0x262)]);}function readFileAsBase64(_0x431f81){return new Promise((_0x2674fc,_0x32777f)=>{const _0x5bb099=_0x3691,_0x88ab=new FileReader();_0x88ab[_0x5bb099(0x18f)]=()=>_0x2674fc(_0x88ab[_0x5bb099(0x240)][_0x5bb099(0x24a)](',')[0x1]),_0x88ab[_0x5bb099(0x260)]=_0x32777f,_0x88ab[_0x5bb099(0x172)](_0x431f81);});}function hasEnoughCredits(_0xab02aa,_0x263407){const _0x22491f=_0x237bc8,_0x10d76a=_0x263407>0x0?_0x263407:0x1;return _0xab02aa===_0x22491f(0x1a0)||_0xab02aa==='gemini-1.0-pro'?currentUser[_0x22491f(0x231)]>=_0x10d76a||currentUser[_0x22491f(0x11c)]>=_0x10d76a||hasValidSubscription():currentUser[_0x22491f(0x11c)]>=_0x10d76a||hasValidSubscription();}async function updateCredits(_0x4329a3,_0x15ebe8){const _0x19cb11=_0x237bc8;if(hasValidSubscription())return;const _0x7c7a5f=db['ref']('users/'+currentUser[_0x19cb11(0x166)]);await _0x7c7a5f['transaction'](_0x40ad82=>{const _0x190d68=_0x19cb11;if(_0x40ad82){if(_0x4329a3===_0x190d68(0x1a0))_0x40ad82[_0x190d68(0x11c)]>=_0x15ebe8?_0x40ad82['paidCredits']-=_0x15ebe8:_0x40ad82[_0x190d68(0x231)]-=_0x15ebe8;else{if(_0x4329a3==='gemini-1.0-pro'){if(_0x40ad82[_0x190d68(0x231)]>=_0x15ebe8)_0x40ad82[_0x190d68(0x231)]-=_0x15ebe8;else{const _0x1e533a=_0x15ebe8-_0x40ad82[_0x190d68(0x231)];_0x40ad82['freeCredits']=0x0,_0x40ad82['paidCredits']=Math[_0x190d68(0x187)](0x0,_0x40ad82[_0x190d68(0x11c)]-_0x1e533a);}}else _0x40ad82[_0x190d68(0x11c)]=Math[_0x190d68(0x187)](0x0,_0x40ad82[_0x190d68(0x11c)]-_0x15ebe8);}}return _0x40ad82;}),currentUser[_0x19cb11(0x231)]=(await _0x7c7a5f[_0x19cb11(0x158)](_0x19cb11(0x231))[_0x19cb11(0x1e9)]('value'))['val'](),currentUser[_0x19cb11(0x11c)]=(await _0x7c7a5f['child']('paidCredits')[_0x19cb11(0x1e9)]('value'))['val'](),document[_0x19cb11(0x164)](_0x19cb11(0x231))['textContent']=currentUser[_0x19cb11(0x231)],document[_0x19cb11(0x164)]('paidCredits')[_0x19cb11(0x25e)]=currentUser[_0x19cb11(0x11c)];}async function addCreditsToUser(_0x138e7b){const _0x19914f=_0x237bc8,_0x3bfebc=db[_0x19914f(0x17a)]('users/'+currentUser[_0x19914f(0x166)]);await _0x3bfebc[_0x19914f(0x19a)](_0x1df6e8=>{return _0x1df6e8&&(_0x1df6e8['paidCredits']+=_0x138e7b),_0x1df6e8;}),currentUser[_0x19914f(0x11c)]=(await _0x3bfebc[_0x19914f(0x158)](_0x19914f(0x11c))[_0x19914f(0x1e9)](_0x19914f(0x26e)))[_0x19914f(0x11f)](),document[_0x19914f(0x164)](_0x19914f(0x11c))[_0x19914f(0x25e)]=currentUser[_0x19914f(0x11c)];}function addMessageToChat(_0x155808,_0xc52ec1){const _0x2103f5=_0x237bc8,_0x3ef9c7=document[_0x2103f5(0x164)](_0x2103f5(0x227)),_0x2442ea=document[_0x2103f5(0x225)](_0x2103f5(0x1bb));_0x2442ea[_0x2103f5(0x220)][_0x2103f5(0x222)]('message',_0x155808===_0x2103f5(0x1ef)?_0x2103f5(0x264):'ai-message');if(_0x155808==='ai'){_0xc52ec1=_0xc52ec1[_0x2103f5(0x1e3)](/^\*\*/gm,'\x0a'),_0xc52ec1=_0xc52ec1['replace'](/\*\*/g,'');const _0x55ab26=document[_0x2103f5(0x225)](_0x2103f5(0x1bb));_0x2442ea[_0x2103f5(0x104)](_0x55ab26),animateResponse(_0x55ab26,_0xc52ec1);const _0x5063c6=document[_0x2103f5(0x225)](_0x2103f5(0x1bb));_0x5063c6[_0x2103f5(0x220)][_0x2103f5(0x222)](_0x2103f5(0x27c)),_0x5063c6['innerHTML']=_0x2103f5(0x148),_0x2442ea[_0x2103f5(0x104)](_0x5063c6);}else _0x2442ea['textContent']=_0xc52ec1;return _0x3ef9c7[_0x2103f5(0x104)](_0x2442ea),_0x3ef9c7['scrollTop']=_0x3ef9c7[_0x2103f5(0x129)],currentConversation[_0x2103f5(0x278)]({'sender':_0x155808,'content':_0xc52ec1}),_0x2442ea;}function copyResponse(_0x5b3176){const _0x498736=_0x237bc8,_0x28c487=_0x5b3176[_0x498736(0xe9)](_0x498736(0x20e))[_0x498736(0x25e)];navigator[_0x498736(0x22a)]['writeText'](_0x28c487)[_0x498736(0x17c)](()=>{const _0xf21918=_0x498736;showNotification(_0xf21918(0x252),_0xf21918(0x16e));});}async function exportResponse(_0xf0967a,_0x3d1e30){const _0x5e29ea=_0x237bc8,_0x33432c=_0xf0967a[_0x5e29ea(0xe9)]('div:first-child')[_0x5e29ea(0x25e)];if(_0x3d1e30===_0x5e29ea(0x191)){const _0x391458=await generateWordDoc(_0x33432c);saveAs(_0x391458,'Eduque_moi.docx');}else{if(_0x3d1e30===_0x5e29ea(0x270)){const _0x48306f=await generatePDF(_0x33432c);saveAs(_0x48306f,_0x5e29ea(0x17d));}}showNotification(_0x5e29ea(0x15c)+_0x3d1e30[_0x5e29ea(0x230)]()+_0x5e29ea(0x150),_0x5e29ea(0x16e));}async function generateWordDoc(_0x569019){const _0x3b7f1f=_0x237bc8,_0x6ea0c6=_0x3b7f1f(0x14e)+_0x569019+_0x3b7f1f(0x1d1),_0x29efa9=new PizZip();_0x29efa9[_0x3b7f1f(0x1d8)](_0x3b7f1f(0x1c4),_0x6ea0c6);const _0x4b1396=await _0x29efa9[_0x3b7f1f(0x11b)]({'type':_0x3b7f1f(0x239),'mimeType':_0x3b7f1f(0x26d)});return _0x4b1396;}function generatePDF(_0x4b2a41){const _0x36a44d=_0x237bc8,{jsPDF:_0x3eb389}=window[_0x36a44d(0x1b3)],_0x3685fb=new _0x3eb389();_0x3685fb['setFontSize'](0x12),_0x3685fb[_0x36a44d(0x221)]('',0x14,0x14),_0x3685fb[_0x36a44d(0x28f)](0xc);const _0x3795f7=_0x3685fb['splitTextToSize'](_0x4b2a41,0xaa);let _0x2584f4=0x1e;const _0x122377=_0x3685fb[_0x36a44d(0x134)][_0x36a44d(0x26b)][_0x36a44d(0x21a)];for(let _0x4de93b=0x0;_0x4de93b<_0x3795f7[_0x36a44d(0x262)];_0x4de93b++){_0x2584f4>_0x122377-0x14&&(_0x3685fb[_0x36a44d(0x1f8)](),_0x2584f4=0x14),_0x3685fb[_0x36a44d(0x221)](_0x3795f7[_0x4de93b],0x14,_0x2584f4),_0x2584f4+=0x7;}return _0x3685fb[_0x36a44d(0x21b)](_0x36a44d(0x239));}function shareResponse(_0x4cc50e){const _0x3c846d=_0x237bc8,_0x467845=_0x4cc50e['querySelector']('div:first-child')['textContent'];navigator[_0x3c846d(0x288)]?navigator[_0x3c846d(0x288)]({'title':'','text':_0x467845})[_0x3c846d(0x17c)](()=>{const _0x5c4793=_0x3c846d;showNotification(_0x5c4793(0x111),_0x5c4793(0x16e));})[_0x3c846d(0x21e)](_0x1c8b56=>{const _0x389470=_0x3c846d;console[_0x389470(0x118)]('Erreur\x20lors\x20du\x20partage:',_0x1c8b56),showNotification(_0x389470(0x247),'error');}):showNotification(_0x3c846d(0x273),'error');}function hasValidSubscription(){const _0x36e0e5=_0x237bc8;if(!currentUser[_0x36e0e5(0x285)]||!currentUser[_0x36e0e5(0x159)])return![];return new Date()<new Date(currentUser[_0x36e0e5(0x159)]);}function buySubscription(){const _0x27c839=_0x237bc8,_0x304962=document['getElementById']('subscriptionSelect')[_0x27c839(0x26e)];if(!_0x304962){showNotification(_0x27c839(0xfa),'error');return;}const _0x2e87f6={'24h':0x1f4,'3d':0x4b0,'7d':0x960,'30d':0x1f40,'3m':0x4e20},_0x262b82=_0x2e87f6[_0x304962];var _0x1cffb3=FedaPay[_0x27c839(0x16f)]({'public_key':_0x27c839(0x13c),'transaction':{'amount':_0x262b82,'description':_0x27c839(0x271)+_0x304962+_0x27c839(0x1cd)},'customer':{'email':_0x27c839(0x24f)},'onComplete':async function(_0x1ae90d){const _0x333686=_0x27c839;if(_0x1ae90d['reason']===FedaPay[_0x333686(0x16d)]){const _0x5641b1={'id':_0x1ae90d['id'],'description':'Achat\x20d\x27un\x20forfait\x20'+_0x304962+'\x20pour\x20Eduque\x20moi','amount':_0x262b82};await activateSubscription(_0x304962),showInvoiceDetails(_0x5641b1),showNotification(_0x333686(0x1aa)+_0x304962+_0x333686(0x22f),_0x333686(0x16e)),await checkFirstPurchaseAndRewardReferrer(currentUser[_0x333686(0x166)],_0x262b82);}else showNotification('Le\x20paiement\x20a\x20été\x20annulé\x20ou\x20a\x20échoué.','error');}});_0x1cffb3[_0x27c839(0x12d)]();}async function activateSubscription(_0x239af5){const _0x2cfd3e=_0x237bc8,_0x1c5b93={'24h':0x1,'3d':0x3,'7d':0x7,'30d':0x1e,'3m':0x5a},_0x88c6eb=_0x1c5b93[_0x239af5],_0x5b2bf8=new Date();_0x5b2bf8[_0x2cfd3e(0x15d)](_0x5b2bf8[_0x2cfd3e(0x117)]()+_0x88c6eb),currentUser[_0x2cfd3e(0x285)]=_0x239af5,currentUser[_0x2cfd3e(0x159)]=_0x5b2bf8[_0x2cfd3e(0x21c)](),await syncUserData(),document[_0x2cfd3e(0x164)](_0x2cfd3e(0x285))[_0x2cfd3e(0x25e)]=_0x239af5;}function buyCredits(){const _0x418d3c=_0x237bc8,_0x474068=document['getElementById']('creditSelect')[_0x418d3c(0x26e)];if(!_0x474068){showNotification(_0x418d3c(0xf8),_0x418d3c(0x118));return;}const _0x56b0fd={'10':0xc8,'100':0x3e8,'500':0x1194,'1000':0x1f40},_0x561848=_0x56b0fd[_0x474068];var _0x2a5b26=FedaPay[_0x418d3c(0x16f)]({'public_key':_0x418d3c(0x13c),'transaction':{'amount':_0x561848,'description':_0x418d3c(0x279)+_0x474068+_0x418d3c(0x24b)},'customer':{'email':'client@example.com'},'onComplete':async function(_0x43d776){const _0x109c5c=_0x418d3c;if(_0x43d776['reason']===FedaPay[_0x109c5c(0x16d)]){const _0x47a4e3={'id':_0x43d776['id'],'description':'Achat\x20de\x20'+_0x474068+'\x20crédits\x20pour\x20Eduque\x20moi','amount':_0x561848};await addCreditsToUser(parseInt(_0x474068)),showInvoiceDetails(_0x47a4e3),showNotification(_0x474068+_0x109c5c(0x1ec),_0x109c5c(0x16e)),await checkFirstPurchaseAndRewardReferrer(currentUser[_0x109c5c(0x166)],_0x561848);}else showNotification(_0x109c5c(0x255),_0x109c5c(0x118));}});_0x2a5b26[_0x418d3c(0x12d)]();}async function checkFirstPurchaseAndRewardReferrer(_0x1362a0,_0x3d65f4){const _0x2b2d7f=_0x237bc8,_0x99ded4=db[_0x2b2d7f(0x17a)](_0x2b2d7f(0x130)+_0x1362a0),_0x368d85=await _0x99ded4[_0x2b2d7f(0x1e9)](_0x2b2d7f(0x26e)),_0x357008=_0x368d85[_0x2b2d7f(0x11f)]();if(_0x357008&&!_0x357008[_0x2b2d7f(0x28e)]){await _0x99ded4['update']({'firstPurchase':!![]});if(_0x357008[_0x2b2d7f(0x108)]){const _0x551175=await db[_0x2b2d7f(0x17a)]('users')[_0x2b2d7f(0x198)](_0x2b2d7f(0x289))['equalTo'](_0x357008[_0x2b2d7f(0x108)])[_0x2b2d7f(0x1e9)](_0x2b2d7f(0x26e)),_0x132545=_0x551175[_0x2b2d7f(0x11f)]();if(_0x132545){const _0x18afd9=Object[_0x2b2d7f(0x257)](_0x132545)[0x0],_0x246c63=db['ref']('users/'+_0x18afd9);await _0x246c63[_0x2b2d7f(0x19a)](_0xb2f76f=>{const _0xd693cb=_0x2b2d7f;return _0xb2f76f&&(_0xb2f76f['paidCredits']=(_0xb2f76f[_0xd693cb(0x11c)]||0x0)+0xa,_0xb2f76f[_0xd693cb(0x205)]&&_0xb2f76f[_0xd693cb(0x205)][_0x1362a0]&&(_0xb2f76f['referrals'][_0x1362a0]['isActive']=!![])),_0xb2f76f;}),await updateReferralStats(_0x18afd9),showNotification(_0x2b2d7f(0x20b)+_0x1362a0+'\x20a\x20reçu\x2010\x20crédits\x20pour\x20le\x20premier\x20achat\x20de\x20son\x20filleul\x20!',_0x2b2d7f(0x16e));}}}}function getShareMessage(_0x564169){const _0x3d66ff=_0x237bc8;return encodeURIComponent(_0x3d66ff(0x106)+_0x564169+_0x3d66ff(0x1ad));}function shareOnFacebook(){const _0x1647cb=_0x237bc8,_0x149818=document[_0x1647cb(0x164)](_0x1647cb(0xea))[_0x1647cb(0x26e)],_0x31240f=getShareMessage(_0x149818);window['open'](_0x1647cb(0x23a)+_0x149818+_0x1647cb(0xfd)+_0x31240f,_0x1647cb(0xfb));}function shareOnTwitter(){const _0x6b8827=_0x237bc8,_0x425341=document[_0x6b8827(0x164)](_0x6b8827(0xea))[_0x6b8827(0x26e)],_0x3bf879=getShareMessage(_0x425341);window['open'](_0x6b8827(0x280)+_0x425341+_0x6b8827(0x209)+_0x3bf879,_0x6b8827(0xfb));}function shareOnLinkedIn(){const _0x45f174=_0x237bc8,_0x239591=document['getElementById']('referralLink')[_0x45f174(0x26e)],_0x2de8a8=getShareMessage(_0x239591);window[_0x45f174(0x12d)]('https://www.linkedin.com/shareArticle?mini=true&url='+_0x239591+'&title=Boostez\x20votre\x20apprentissage\x20avec\x20Eduque\x20moi&summary='+_0x2de8a8,'_blank');}function shareOnWhatsApp(){const _0x198ce7=_0x237bc8,_0x1c9185=document[_0x198ce7(0x164)](_0x198ce7(0xea))['value'],_0x3797bb=getShareMessage(_0x1c9185);window[_0x198ce7(0x12d)](_0x198ce7(0x14f)+_0x3797bb,_0x198ce7(0xfb));}function copyReferralLink(){const _0x15b09a=_0x237bc8,_0xa78cb1=document['getElementById'](_0x15b09a(0xea));_0xa78cb1[_0x15b09a(0x1e7)](),document[_0x15b09a(0x15e)](_0x15b09a(0x211)),showNotification(_0x15b09a(0x20d),_0x15b09a(0x16e));}function showNotification(_0x1f7ac7,_0xc3ae2f){const _0x5ab3dd=_0x237bc8,_0x4ce97d=document[_0x5ab3dd(0x225)](_0x5ab3dd(0x1bb));_0x4ce97d[_0x5ab3dd(0x25e)]=_0x1f7ac7,_0x4ce97d[_0x5ab3dd(0x11e)]=_0x5ab3dd(0x181)+_0xc3ae2f,document[_0x5ab3dd(0x123)][_0x5ab3dd(0x104)](_0x4ce97d),setTimeout(()=>{const _0x4a6f8a=_0x5ab3dd;_0x4ce97d[_0x4a6f8a(0x220)][_0x4a6f8a(0x222)](_0x4a6f8a(0x216)),setTimeout(()=>{const _0x155a86=_0x4a6f8a;_0x4ce97d[_0x155a86(0x220)][_0x155a86(0x1f9)]('show'),setTimeout(()=>{const _0x495a39=_0x155a86;_0x4ce97d[_0x495a39(0x1f9)]();},0x12c);},0xbb8);},0x64);}function showPaymentNotification(_0x1bd96f){const _0x3a17e7=_0x237bc8,_0x20d16f=document['createElement'](_0x3a17e7(0x1bb));_0x20d16f[_0x3a17e7(0x11e)]=_0x3a17e7(0x119),_0x20d16f['innerHTML']=_0x3a17e7(0x142)+_0x1bd96f+'<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22buySubscription()\x22>Acheter\x20un\x20abonnement</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22buyCredits()\x22>Acheter\x20des\x20crédits</button>\x0a\x20\x20\x20\x20',document['body'][_0x3a17e7(0x104)](_0x20d16f),setTimeout(()=>{const _0x513a87=_0x3a17e7;_0x20d16f[_0x513a87(0x220)][_0x513a87(0x222)](_0x513a87(0x216)),setTimeout(()=>{const _0x4d15d9=_0x513a87;_0x20d16f[_0x4d15d9(0x220)][_0x4d15d9(0x1f9)](_0x4d15d9(0x216)),setTimeout(()=>{const _0xd7f021=_0x4d15d9;_0x20d16f[_0xd7f021(0x1f9)]();},0x12c);},0x2710);},0x64);}async function showPaymentNotificationWithFreeOption(_0x359680){return new Promise(_0x414480=>{const _0xd57b2b=_0x3691,_0x4b32ea=document['createElement'](_0xd57b2b(0x1bb));_0x4b32ea[_0xd57b2b(0x11e)]=_0xd57b2b(0x119),_0x4b32ea['innerHTML']=_0xd57b2b(0x1f0)+_0x359680+_0xd57b2b(0x232),document[_0xd57b2b(0x123)][_0xd57b2b(0x104)](_0x4b32ea),window[_0xd57b2b(0x238)]=function(_0x1b146d){_0x4b32ea['remove'](),_0x414480(_0x1b146d);},setTimeout(()=>{const _0x2af766=_0xd57b2b;_0x4b32ea[_0x2af766(0x220)][_0x2af766(0x222)](_0x2af766(0x216));},0x64);});}function toggleTheme(){const _0x184093=_0x237bc8,_0x4bbfa1=document['body'],_0x2e9f3d=_0x4bbfa1[_0x184093(0x200)](_0x184093(0x165)),_0x3734f7=_0x2e9f3d===_0x184093(0x12c)?'light':_0x184093(0x12c);_0x4bbfa1[_0x184093(0x1f3)](_0x184093(0x165),_0x3734f7),localStorage[_0x184093(0x141)](_0x184093(0x11d),_0x3734f7),updateThemeIcon(_0x3734f7),document[_0x184093(0xe9)](_0x184093(0x294))[_0x184093(0x1f3)](_0x184093(0x1f7),_0x3734f7);}function updateThemeIcon(_0x4ef85c){const _0x515ff1=_0x237bc8,_0x1b93ee=document[_0x515ff1(0xe9)](_0x515ff1(0xfc));_0x1b93ee[_0x515ff1(0x11e)]=_0x4ef85c===_0x515ff1(0x12c)?_0x515ff1(0xfe):_0x515ff1(0x147);}function toggleSidebar(){const _0x5f2a30=_0x237bc8,_0x4403b5=document[_0x5f2a30(0xe9)](_0x5f2a30(0x23f)),_0x9c434f=document[_0x5f2a30(0xe9)](_0x5f2a30(0x1b8));_0x4403b5[_0x5f2a30(0x220)]['toggle']('visible'),_0x9c434f[_0x5f2a30(0x220)][_0x5f2a30(0x13e)](_0x5f2a30(0xee));}function saveConversation(){const _0x2499da=_0x237bc8;if(!currentUser)return;const _0x1c2418=currentConversation['id']||Date[_0x2499da(0x286)]()['toString']();conversations[_0x1c2418]=currentConversation,currentConversation['id']=_0x1c2418,localStorage[_0x2499da(0x141)](_0x2499da(0xe5)+currentUser['username'],JSON[_0x2499da(0x1a6)](conversations)),updateConversationHistory();}function loadConversationHistory(){const _0x4c6d35=_0x237bc8;if(!currentUser)return;const _0x534e20=localStorage['getItem']('conversations_'+currentUser[_0x4c6d35(0x166)]);_0x534e20&&(conversations=JSON['parse'](_0x534e20),updateConversationHistory());}function updateConversationHistory(){const _0x55c3f7=_0x237bc8,_0x4a8cb3=document[_0x55c3f7(0x164)](_0x55c3f7(0x1ce));_0x4a8cb3[_0x55c3f7(0x18e)]='';const _0x3d3795=Object['keys'](conversations)[_0x55c3f7(0x1a5)]((_0x41de95,_0x410d03)=>parseInt(_0x410d03)-parseInt(_0x41de95));_0x3d3795['forEach'](_0xa095a3=>{const _0x47f28a=_0x55c3f7,_0x2c6ab7=conversations[_0xa095a3],_0x2d9471=document[_0x47f28a(0x225)](_0x47f28a(0x1bb));_0x2d9471[_0x47f28a(0x11e)]=_0x47f28a(0x1ed);const _0x77b30a=document[_0x47f28a(0x225)](_0x47f28a(0x208));_0x77b30a[_0x47f28a(0x25e)]=_0x47f28a(0x1fa)+new Date(parseInt(_0xa095a3))[_0x47f28a(0x189)](),_0x77b30a[_0x47f28a(0x179)]=()=>loadConversation(_0xa095a3);const _0x519311=document[_0x47f28a(0x225)]('i');_0x519311['className']=_0x47f28a(0xf1),_0x519311[_0x47f28a(0x179)]=_0x2d34e9=>{const _0x1a03e0=_0x47f28a;_0x2d34e9[_0x1a03e0(0x212)](),deleteConversation(_0xa095a3);},_0x2d9471[_0x47f28a(0x104)](_0x77b30a),_0x2d9471[_0x47f28a(0x104)](_0x519311),_0x4a8cb3[_0x47f28a(0x104)](_0x2d9471);});}function deleteConversation(_0x2b5237){const _0x21ef49=_0x237bc8;confirm(_0x21ef49(0x23e))&&(delete conversations[_0x2b5237],localStorage[_0x21ef49(0x141)](_0x21ef49(0xe5)+currentUser[_0x21ef49(0x166)],JSON[_0x21ef49(0x1a6)](conversations)),updateConversationHistory());}function createNewConversation(){const _0x4736a1=_0x237bc8;currentConversation[_0x4736a1(0x262)]>0x0&&saveConversation();currentConversation=[];const _0x1e7eae=document[_0x4736a1(0x164)](_0x4736a1(0x227));_0x1e7eae[_0x4736a1(0x18e)]='',updateConversationHistory(),addMessageToChat('ai',_0x4736a1(0x1b6)),_0x1e7eae['scrollTop']=0x0,document['getElementById'](_0x4736a1(0x1a8))[_0x4736a1(0x256)]();}function loadConversation(_0x74e066){const _0x5d79c2=_0x237bc8;currentConversation['length']>0x0&&currentConversation['id']!==_0x74e066&&saveConversation();currentConversation=conversations[_0x74e066],currentConversation['id']=_0x74e066;const _0x2cbbbf=document['getElementById'](_0x5d79c2(0x227));_0x2cbbbf[_0x5d79c2(0x18e)]='',currentConversation[_0x5d79c2(0x233)](_0x79b7da=>{const _0x33419b=_0x5d79c2;addMessageToChat(_0x79b7da[_0x33419b(0x11a)],_0x79b7da[_0x33419b(0x1f7)]);}),_0x2cbbbf[_0x5d79c2(0x155)]=0x0;}async function syncUserData(){const _0x5c5a20=_0x237bc8;if(!currentUser)return;const _0x23b12b={'freeCredits':currentUser[_0x5c5a20(0x231)]||0x0,'paidCredits':currentUser[_0x5c5a20(0x11c)]||0x0,'lastFreeCreditsReset':currentUser[_0x5c5a20(0x1cb)]||new Date()[_0x5c5a20(0x21c)]()};currentUser[_0x5c5a20(0x285)]&&(_0x23b12b[_0x5c5a20(0x285)]=currentUser[_0x5c5a20(0x285)]);currentUser[_0x5c5a20(0x159)]&&(_0x23b12b['subscriptionEndDate']=currentUser[_0x5c5a20(0x159)]);const _0x1a20c1=db[_0x5c5a20(0x17a)](_0x5c5a20(0x130)+currentUser[_0x5c5a20(0x166)]);try{await _0x1a20c1[_0x5c5a20(0x1b2)](_0x23b12b),console[_0x5c5a20(0x204)]('Données\x20utilisateur\x20mises\x20à\x20jour\x20avec\x20succès:',_0x23b12b);}catch(_0x5513fd){console['error'](_0x5c5a20(0x1a1),_0x5513fd),showNotification(_0x5c5a20(0x152),_0x5c5a20(0x118));}}function adjustTextareaHeight(){const _0x526d2f=_0x237bc8,_0x407eeb=document[_0x526d2f(0x164)](_0x526d2f(0x1a8));_0x407eeb[_0x526d2f(0x13a)][_0x526d2f(0x21a)]='auto',_0x407eeb['style'][_0x526d2f(0x21a)]=_0x407eeb['scrollHeight']+'px';}function resetTextareaHeight(){const _0x2e895c=_0x237bc8,_0x12a8c7=document[_0x2e895c(0x164)]('userInput');_0x12a8c7[_0x2e895c(0x13a)][_0x2e895c(0x21a)]=_0x2e895c(0x146);}async function attemptAutoLogin(){const _0x3fb3ad=_0x237bc8,_0x51e17f=getStoredLoginInfo();if(_0x51e17f[_0x3fb3ad(0x166)]&&_0x51e17f[_0x3fb3ad(0x160)])try{const _0x1bc6c6=db[_0x3fb3ad(0x17a)](_0x3fb3ad(0x130)+_0x51e17f[_0x3fb3ad(0x166)]),_0x4428b1=await _0x1bc6c6[_0x3fb3ad(0x1e9)](_0x3fb3ad(0x26e));if(_0x4428b1[_0x3fb3ad(0x218)]()&&_0x4428b1[_0x3fb3ad(0x11f)]()[_0x3fb3ad(0x160)]===_0x51e17f[_0x3fb3ad(0x160)]){const _0x56171a=_0x4428b1[_0x3fb3ad(0x11f)]();currentUser={'username':_0x51e17f[_0x3fb3ad(0x166)],'freeCredits':_0x56171a[_0x3fb3ad(0x231)],'paidCredits':_0x56171a[_0x3fb3ad(0x11c)],'subscription':_0x56171a['subscription'],'subscriptionEndDate':_0x56171a[_0x3fb3ad(0x159)],'lastFreeCreditsReset':_0x56171a[_0x3fb3ad(0x1cb)]},await resetFreeCreditsIfNeeded(),updateUIForLoggedInUser(),console[_0x3fb3ad(0x204)](_0x3fb3ad(0x224));}else clearLoginInfo(),console[_0x3fb3ad(0x204)](_0x3fb3ad(0x1c0));}catch(_0xb9ade2){console[_0x3fb3ad(0x118)](_0x3fb3ad(0x22e),_0xb9ade2),clearLoginInfo();}}function saveSelectedModel(){const _0x41d4f5=_0x237bc8,_0x22a934=document[_0x41d4f5(0x164)](_0x41d4f5(0x17e))[_0x41d4f5(0x26e)];localStorage[_0x41d4f5(0x141)](_0x41d4f5(0x170),_0x22a934);}function loadSelectedModel(){const _0x59ba9c=_0x237bc8,_0x5ff7e0=localStorage['getItem'](_0x59ba9c(0x170));_0x5ff7e0&&(document[_0x59ba9c(0x164)](_0x59ba9c(0x17e))[_0x59ba9c(0x26e)]=_0x5ff7e0);}function showUpgradeButton(_0x238e02){const _0x139a12=_0x237bc8,_0x31c335=document[_0x139a12(0x225)](_0x139a12(0x1ea));_0x31c335['textContent']='Passer\x20à\x20un\x20modèle\x20avancé',_0x31c335[_0x139a12(0x11e)]=_0x139a12(0x1b0),_0x31c335[_0x139a12(0x179)]=()=>{const _0x1c2637=_0x139a12;hasValidSubscription()||currentUser[_0x1c2637(0x11c)]>0x0?(document[_0x1c2637(0x164)](_0x1c2637(0x17e))[_0x1c2637(0x26e)]=_0x1c2637(0x168),showNotification(_0x1c2637(0x1e5),'success')):showPaymentNotification('Vous\x20avez\x20besoin\x20d\x27un\x20abonnement\x20ou\x20de\x20crédits\x20payants\x20pour\x20utiliser\x20ce\x20modèle.');},_0x238e02[_0x139a12(0x104)](_0x31c335);}function animateResponse(_0x5b4711,_0x28e458){const _0x14389d=_0x237bc8;let _0x4d3a2c=0x0;_0x5b4711[_0x14389d(0x25e)]='';const _0x358a1e=setInterval(()=>{const _0x49bf01=_0x14389d;_0x4d3a2c<_0x28e458[_0x49bf01(0x262)]?(_0x5b4711[_0x49bf01(0x25e)]+=_0x28e458[_0x4d3a2c],_0x4d3a2c++):clearInterval(_0x358a1e);},0x1);}function loadPromptCategories(){const _0x25811c=_0x237bc8,_0x14c064=document[_0x25811c(0x164)](_0x25811c(0x1bf));_0x14c064[_0x25811c(0x18e)]='',db['ref'](_0x25811c(0x248))[_0x25811c(0x1e9)](_0x25811c(0x26e),_0x1d70e3=>{const _0x4231f1=_0x25811c;prompts=_0x1d70e3[_0x4231f1(0x11f)]()||{};const _0x1c46b3=[...new Set(Object['values'](prompts)[_0x4231f1(0x193)](_0x447362=>_0x447362['category']))];_0x1c46b3['forEach'](_0x46f4cd=>{const _0x46c25e=_0x4231f1,_0x35fc48=document[_0x46c25e(0x225)]('li');_0x35fc48[_0x46c25e(0x25e)]=_0x46f4cd,_0x35fc48[_0x46c25e(0x179)]=()=>{const _0x2e6fc3=_0x46c25e;document['querySelectorAll'](_0x2e6fc3(0x1af))['forEach'](_0x5dcf21=>_0x5dcf21[_0x2e6fc3(0x220)][_0x2e6fc3(0x1f9)](_0x2e6fc3(0x250))),_0x35fc48[_0x2e6fc3(0x220)][_0x2e6fc3(0x222)]('active'),loadPromptsForCategory(_0x46f4cd);},_0x14c064[_0x46c25e(0x104)](_0x35fc48);}),_0x1c46b3[_0x4231f1(0x262)]>0x0&&(loadPromptsForCategory(_0x1c46b3[0x0]),_0x14c064[_0x4231f1(0x1c9)][_0x4231f1(0x220)][_0x4231f1(0x222)](_0x4231f1(0x250)));});}function loadPromptsForCategory(_0x342c29){const _0x437d35=_0x237bc8,_0x5e6c39=document[_0x437d35(0x164)](_0x437d35(0x215));_0x5e6c39['innerHTML']='',Object['entries'](prompts)[_0x437d35(0x233)](([_0x4bc0e2,_0x254efa])=>{const _0x586401=_0x437d35;if(_0x254efa[_0x586401(0x1c1)]===_0x342c29){const _0x3769d3=document[_0x586401(0x225)]('li');_0x3769d3[_0x586401(0x18e)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prompt-item\x22\x20onclick=\x22selectPrompt(\x27'+_0x4bc0e2+_0x586401(0x254)+JSON[_0x586401(0x1a6)](_0x254efa)[_0x586401(0x1e3)](/"/g,_0x586401(0x228))+_0x586401(0x22c)+_0x254efa[_0x586401(0x1f1)]+_0x586401(0x26c),_0x5e6c39[_0x586401(0x104)](_0x3769d3);}});}function selectPrompt(_0x54e787,_0x552658){const _0xeca190=_0x237bc8;pinnedPrompt={'id':_0x54e787,..._0x552658},updatePinnedPrompt(),closePromptModal(),showNotification(_0xeca190(0x197),_0xeca190(0x16e));}function closePromptModal(){const _0x129b45=_0x237bc8;document[_0x129b45(0x164)](_0x129b45(0x1ca))[_0x129b45(0x13a)][_0x129b45(0x10e)]=_0x129b45(0x1c6);}function togglePromptList(){const _0x2eb330=_0x237bc8,_0x50f31a=document[_0x2eb330(0x164)](_0x2eb330(0x1ca));_0x50f31a['style'][_0x2eb330(0x10e)]=_0x2eb330(0x263),loadPromptCategories();}function updatePinnedPrompt(){const _0x170514=_0x237bc8,_0x46720f=document[_0x170514(0x164)](_0x170514(0x10a)),_0x426ec1=_0x46720f[_0x170514(0xe9)](_0x170514(0x1f4));_0x426ec1&&_0x426ec1[_0x170514(0x1f9)]();if(pinnedPrompt){const _0x42f040=document[_0x170514(0x225)](_0x170514(0x1bb));_0x42f040[_0x170514(0x11e)]='pinned-item',_0x42f040[_0x170514(0x1f3)](_0x170514(0x1c7),'prompt'),_0x42f040[_0x170514(0x18e)]=_0x170514(0x235)+pinnedPrompt[_0x170514(0x1f1)]+'\x22>'+pinnedPrompt[_0x170514(0x1f1)]+_0x170514(0xf0),_0x46720f[_0x170514(0x104)](_0x42f040);}}function removePinnedPrompt(){pinnedPrompt=null,updatePinnedPrompt();}function openLibrary(){const _0x29a18a=_0x237bc8;console[_0x29a18a(0x204)](_0x29a18a(0x28a));if(currentUser){console['log'](_0x29a18a(0x1bc),currentUser);const _0xbd1f4f={'username':currentUser[_0x29a18a(0x166)],'freeCredits':currentUser[_0x29a18a(0x231)],'paidCredits':currentUser[_0x29a18a(0x11c)],'subscription':currentUser[_0x29a18a(0x285)]};localStorage['setItem'](_0x29a18a(0x20c),JSON['stringify'](_0xbd1f4f)),console[_0x29a18a(0x204)]('Données\x20utilisateur\x20enregistrées\x20dans\x20localStorage'),window[_0x29a18a(0x229)][_0x29a18a(0x175)]='Bibliothèque.html';}else console[_0x29a18a(0x204)](_0x29a18a(0x23d)),alert(_0x29a18a(0x186));}async function showReferralModal(){const _0x3ea653=_0x237bc8,_0x17d6c7=document[_0x3ea653(0x164)](_0x3ea653(0x1bd));_0x17d6c7[_0x3ea653(0x13a)][_0x3ea653(0x10e)]=_0x3ea653(0x263);const _0x3ebe76=await getOrCreateReferralCode();if(_0x3ebe76){const _0x346aa2=_0x3ea653(0x234)+_0x3ebe76;document[_0x3ea653(0x164)](_0x3ea653(0xea))[_0x3ea653(0x26e)]=_0x346aa2;const _0x1451a6='Rejoignez-moi\x20sur\x20Eduque\x20moi\x20et\x20commencez\x20votre\x20voyage\x20d\x27apprentissage\x20!\x20Utilisez\x20mon\x20lien\x20de\x20parrainage\x20pour\x20obtenir\x20des\x20bonus\x20spéciaux\x20:\x20'+_0x346aa2;document[_0x3ea653(0x164)](_0x3ea653(0xea))[_0x3ea653(0x1f3)](_0x3ea653(0x1fe),_0x1451a6);}else document[_0x3ea653(0x164)](_0x3ea653(0xea))[_0x3ea653(0x26e)]=_0x3ea653(0x12b);await updateReferralStats(currentUser[_0x3ea653(0x166)]);}function generateReferralCode(){const _0x3031bb=_0x237bc8;return Math['random']()['toString'](0x24)[_0x3031bb(0x28b)](0x2,0x8)[_0x3031bb(0x230)]();}async function getOrCreateReferralCode(){const _0x432b92=_0x237bc8;if(!currentUser)return null;const _0x151f89=db[_0x432b92(0x17a)](_0x432b92(0x130)+currentUser[_0x432b92(0x166)]),_0x15a089=await _0x151f89[_0x432b92(0x1e9)]('value'),_0x466573=_0x15a089[_0x432b92(0x11f)]();if(_0x466573&&_0x466573[_0x432b92(0x289)])return _0x466573[_0x432b92(0x289)];else{const _0xea1048=generateReferralCode();return await _0x151f89[_0x432b92(0x1b2)]({'referralCode':_0xea1048}),_0xea1048;}}async function updateReferralStats(_0x390122){const _0x6a88d7=_0x237bc8,_0x4c4362=db[_0x6a88d7(0x17a)](_0x6a88d7(0x130)+_0x390122),_0x2fd92b=await _0x4c4362[_0x6a88d7(0x1e9)]('value'),_0x392b87=_0x2fd92b[_0x6a88d7(0x11f)]();if(_0x392b87&&_0x392b87[_0x6a88d7(0x205)]){const _0x29313d=_0x392b87[_0x6a88d7(0x205)],_0x11d31b=Object['keys'](_0x29313d)['length'],_0x4ef4df=Object[_0x6a88d7(0x16a)](_0x29313d)['filter'](_0x13d647=>_0x13d647[_0x6a88d7(0x1a2)])[_0x6a88d7(0x262)];await _0x4c4362[_0x6a88d7(0x1b2)]({'totalReferrals':_0x11d31b,'activeReferrals':_0x4ef4df}),currentUser&&currentUser[_0x6a88d7(0x166)]===_0x390122&&(document[_0x6a88d7(0x164)](_0x6a88d7(0x100))[_0x6a88d7(0x25e)]=_0x11d31b,document[_0x6a88d7(0x164)](_0x6a88d7(0x1da))[_0x6a88d7(0x25e)]=_0x4ef4df);}}window['onload']=async function(){const _0x10dc52=_0x237bc8;await attemptAutoLogin();if(currentUser){if(currentUser[_0x10dc52(0x231)]===undefined)currentUser[_0x10dc52(0x231)]=0x0;if(currentUser[_0x10dc52(0x11c)]===undefined)currentUser[_0x10dc52(0x11c)]=0x0;if(currentUser[_0x10dc52(0x285)]===undefined)currentUser[_0x10dc52(0x285)]=null;if(currentUser[_0x10dc52(0x159)]===undefined)currentUser['subscriptionEndDate']=null;if(currentUser[_0x10dc52(0x1cb)]===undefined)currentUser[_0x10dc52(0x1cb)]=new Date()[_0x10dc52(0x21c)]();const _0x299671=db['ref'](_0x10dc52(0x130)+currentUser['username']),_0x53bb3b=await _0x299671[_0x10dc52(0x1e9)]('value'),_0x5c90b7=_0x53bb3b[_0x10dc52(0x11f)]();_0x5c90b7&&(importedFilesCount=_0x5c90b7['importedFilesCount']||0x0,lastImportReset=new Date(_0x5c90b7[_0x10dc52(0x259)]||new Date())),await syncUserData();}const _0x1512e8=localStorage[_0x10dc52(0x127)]('theme')||_0x10dc52(0x1d2);document[_0x10dc52(0x123)]['setAttribute']('data-theme',_0x1512e8),updateThemeIcon(_0x1512e8),setupUIEventListeners();currentUser&&loadConversationHistory();initModals(),loadSelectedModel(),document[_0x10dc52(0x164)](_0x10dc52(0x17e))['addEventListener'](_0x10dc52(0x1dd),saveSelectedModel),restoreAppState(),initializeNewDiscussion(),document[_0x10dc52(0x123)]['classList'][_0x10dc52(0x222)](_0x10dc52(0x153)),setInterval(checkSubscriptionStatus,0x36ee80),await loadApiKeyList(),initializeGeminiAPI();const _0x221ee4=document[_0x10dc52(0x164)](_0x10dc52(0x17e));!_0x221ee4[_0x10dc52(0x26e)]&&(_0x221ee4['value']=_0x10dc52(0x1a0));};function setupUIEventListeners(){const _0x27aa27=_0x237bc8,_0x52835f=document['querySelector'](_0x27aa27(0x24c)),_0x4efbfa=document[_0x27aa27(0x164)]('userInput'),_0x115897=document[_0x27aa27(0xe9)]('.file-label'),_0x5ed47a=_0x52835f[_0x27aa27(0xe9)](_0x27aa27(0x277));function _0x1c9c37(){const _0x35c35f=_0x27aa27,_0x324112=_0x52835f[_0x35c35f(0x267)],_0x59cb0e=_0x115897['offsetWidth'],_0x57ace4=document[_0x35c35f(0x164)]('promptListButton')[_0x35c35f(0x267)],_0x396040=_0x5ed47a[_0x35c35f(0x267)],_0x5ded5a=0x1e;_0x4efbfa[_0x35c35f(0x13a)]['width']=_0x324112-_0x59cb0e-_0x57ace4-_0x396040-_0x5ded5a+'px';}_0x1c9c37(),window[_0x27aa27(0x157)]('resize',_0x1c9c37),_0x4efbfa[_0x27aa27(0x157)](_0x27aa27(0x116),adjustTextareaHeight),document['getElementById']('modelSelect')[_0x27aa27(0x157)](_0x27aa27(0x1dd),checkModelAccess);window[_0x27aa27(0x266)]<=0x300&&(document[_0x27aa27(0xe9)](_0x27aa27(0x23f))[_0x27aa27(0x220)][_0x27aa27(0x1f9)](_0x27aa27(0xf3)),document[_0x27aa27(0xe9)](_0x27aa27(0x1b8))[_0x27aa27(0x220)][_0x27aa27(0x1f9)](_0x27aa27(0xee)));if(currentUser){const _0x1316c1=db['ref'](_0x27aa27(0x130)+currentUser['username']);_0x1316c1['on'](_0x27aa27(0x26e),_0x4585a=>{const _0x570651=_0x27aa27,_0x11f7fe=_0x4585a[_0x570651(0x11f)]();_0x11f7fe&&(currentUser={...currentUser,'freeCredits':_0x11f7fe[_0x570651(0x231)],'paidCredits':_0x11f7fe[_0x570651(0x11c)],'subscription':_0x11f7fe[_0x570651(0x285)],'subscriptionEndDate':_0x11f7fe[_0x570651(0x159)],'lastFreeCreditsReset':_0x11f7fe[_0x570651(0x1cb)]},updateUIForLoggedInUser());});}}function initModals(){const _0x43ce9d=_0x237bc8,_0x433e09=document[_0x43ce9d(0x243)](_0x43ce9d(0x138)),_0x3f5357=document[_0x43ce9d(0x243)]('.close');_0x3f5357['forEach'](_0x34a7b5=>{const _0x384468=_0x43ce9d;_0x34a7b5[_0x384468(0x157)](_0x384468(0x12e),()=>{const _0x593d0d=_0x384468;_0x34a7b5[_0x593d0d(0x16c)]('.modal')['style'][_0x593d0d(0x10e)]=_0x593d0d(0x1c6);});}),window[_0x43ce9d(0x157)](_0x43ce9d(0x12e),_0x2acaa0=>{const _0x10595b=_0x43ce9d;_0x433e09[_0x10595b(0x233)](_0x5c88da=>{const _0x136735=_0x10595b;_0x2acaa0[_0x136735(0x19b)]===_0x5c88da&&(_0x5c88da[_0x136735(0x13a)][_0x136735(0x10e)]='none');});});}window[_0x237bc8(0x157)](_0x237bc8(0x202),async()=>{const _0x3f412f=_0x237bc8;if(currentUser){const _0x3250fd=await checkGuidedTourStatus(currentUser[_0x3f412f(0x166)]);!_0x3250fd&&(startGuidedTour(),await markGuidedTourAsSeen(currentUser[_0x3f412f(0x166)]));}}),document[_0x237bc8(0x157)](_0x237bc8(0x1ff),function(_0x1ac4ae){const _0x28a4a2=_0x237bc8;_0x1ac4ae[_0x28a4a2(0x162)]===_0x28a4a2(0x1cc)&&!_0x1ac4ae[_0x28a4a2(0x125)]&&(_0x1ac4ae[_0x28a4a2(0x219)](),sendMessage());}),document['getElementById'](_0x237bc8(0x1a8))[_0x237bc8(0x157)](_0x237bc8(0x1ff),function(_0x221e4f){const _0x670ff4=_0x237bc8;if(_0x221e4f[_0x670ff4(0x162)]===_0x670ff4(0x1cc)&&_0x221e4f['shiftKey']){_0x221e4f[_0x670ff4(0x219)]();const _0x514792=this[_0x670ff4(0x1a3)],_0x2b55f8=this[_0x670ff4(0x114)],_0x3f4281=this['value'];this[_0x670ff4(0x26e)]=_0x3f4281[_0x670ff4(0x28b)](0x0,_0x514792)+'\x0a'+_0x3f4281[_0x670ff4(0x28b)](_0x2b55f8),this[_0x670ff4(0x1a3)]=this['selectionEnd']=_0x514792+0x1;}});function checkApiStatus(){const _0x2a8781=_0x237bc8;axios[_0x2a8781(0x24d)](API_BASE_URL+_0x2a8781(0x283)+API_KEY)[_0x2a8781(0x17c)](_0x2e7ced=>{const _0x43e1b1=_0x2a8781;console['log'](_0x43e1b1(0x121),_0x2e7ced['status']),console['log'](_0x43e1b1(0x12f),_0x2e7ced['data']);})['catch'](_0x275df9=>{const _0x378d97=_0x2a8781;console[_0x378d97(0x118)](_0x378d97(0x1c5),_0x275df9);});}function checkApiStatusRegularly(){checkApiStatus(),setInterval(checkApiStatus,0xea60);}window['addEventListener']('offline',function(){const _0x2c733c=_0x237bc8;showNotification('Vous\x20êtes\x20hors\x20ligne.\x20Veuillez\x20vérifier\x20votre\x20connexion\x20internet.',_0x2c733c(0x118));}),window[_0x237bc8(0x157)](_0x237bc8(0x1e0),function(){const _0x54fe6b=_0x237bc8;showNotification('Vous\x20êtes\x20de\x20nouveau\x20en\x20ligne.',_0x54fe6b(0x16e));}),window['addEventListener'](_0x237bc8(0x190),function(){const _0x5bca7b=_0x237bc8;currentUser&&localStorage['setItem'](_0x5bca7b(0x194),JSON[_0x5bca7b(0x1a6)](currentConversation));});function restoreAppState(){const _0x4fc8bd=_0x237bc8,_0x345f32=localStorage[_0x4fc8bd(0x127)](_0x4fc8bd(0x194));_0x345f32&&(currentConversation=JSON['parse'](_0x345f32),currentConversation[_0x4fc8bd(0x233)](_0x37e202=>{const _0x4b41a7=_0x4fc8bd;addMessageToChat(_0x37e202[_0x4b41a7(0x11a)],_0x37e202[_0x4b41a7(0x1f7)]);}));}function updateUI(){const _0x3277e0=_0x237bc8;currentUser&&(document[_0x3277e0(0x164)](_0x3277e0(0x231))[_0x3277e0(0x25e)]=currentUser['freeCredits'],document['getElementById'](_0x3277e0(0x11c))[_0x3277e0(0x25e)]=currentUser['paidCredits'],document[_0x3277e0(0x164)](_0x3277e0(0x285))[_0x3277e0(0x25e)]=currentUser['subscription']||_0x3277e0(0x269));}document[_0x237bc8(0x164)](_0x237bc8(0x1fb))['accept']='.pdf,.jpg,.jpeg,.png,.docx,.doc',setInterval(updateUI,0x493e0),checkApiStatusRegularly(),window[_0x237bc8(0x1df)]=showLoginModal,window[_0x237bc8(0x17f)]=showRegisterModal,window['login']=login,window[_0x237bc8(0x1b9)]=register,window[_0x237bc8(0x115)]=logout,window[_0x237bc8(0x244)]=sendMessage,window[_0x237bc8(0x1e4)]=buySubscription,window[_0x237bc8(0xf9)]=buyCredits,window[_0x237bc8(0x112)]=toggleTheme,window[_0x237bc8(0x223)]=toggleSidebar,window[_0x237bc8(0xf5)]=createNewConversation,window[_0x237bc8(0x14b)]=handleFileUpload,window[_0x237bc8(0x13b)]=togglePromptList,window[_0x237bc8(0x128)]=showReferralModal,window['generateReferralCode']=generateReferralCode,window[_0x237bc8(0x265)]=copyReferralLink,window[_0x237bc8(0x287)]=shareOnFacebook,window[_0x237bc8(0x291)]=shareOnTwitter,window['shareOnLinkedIn']=shareOnLinkedIn,window[_0x237bc8(0x1c2)]=shareOnWhatsApp,window[_0x237bc8(0x25a)]=removePinnedFile;
