const _0x4a59ac=_0xf473;(function(_0x18135a,_0x554a7b){const _0x1add9c=_0xf473,_0x5745d8=_0x18135a();while(!![]){try{const _0x3e2ca0=parseInt(_0x1add9c(0x267))/0x1*(-parseInt(_0x1add9c(0x2e1))/0x2)+-parseInt(_0x1add9c(0x2ea))/0x3*(parseInt(_0x1add9c(0x2e0))/0x4)+-parseInt(_0x1add9c(0x18b))/0x5+-parseInt(_0x1add9c(0x20b))/0x6*(parseInt(_0x1add9c(0x347))/0x7)+parseInt(_0x1add9c(0x29a))/0x8*(-parseInt(_0x1add9c(0x264))/0x9)+-parseInt(_0x1add9c(0x213))/0xa*(-parseInt(_0x1add9c(0x167))/0xb)+parseInt(_0x1add9c(0x208))/0xc*(parseInt(_0x1add9c(0x1ab))/0xd);if(_0x3e2ca0===_0x554a7b)break;else _0x5745d8['push'](_0x5745d8['shift']());}catch(_0x364cc4){_0x5745d8['push'](_0x5745d8['shift']());}}}(_0x102c,0xe20ce));const API_KEY='AIzaSyB3umTE3n2d5gwKzOmJz4ss1pFZMR8_vOE',API_BASE_URL=_0x4a59ac(0x290);let currentUser=null,pinnedFiles=[],currentConversation=[],conversations={},currentApiKeyIndex=0x0,userScrolling=![],lastScrollTop=0x0,scrollTimeout;const FREE_CREDITS_PER_DAY=0x3,FREE_CREDITS_REGISTER=0xa,FREE_MODEL_MAX_WORDS=0xc350,FREE_MODEL_MAX_RESPONSE=0x7d0,RETRY_CONFIG={'maxAttempts':0x32,'retryDelay':0x2710},SYSTEM_INSTRUCTION=_0x4a59ac(0x239),firebaseConfig={'apiKey':_0x4a59ac(0x262),'authDomain':_0x4a59ac(0x1fe),'databaseURL':_0x4a59ac(0x33e),'projectId':_0x4a59ac(0x26a),'storageBucket':_0x4a59ac(0x1f7),'messagingSenderId':'277143630015','appId':'1:277143630015:web:78736f2cf52d29495d160a','measurementId':'G-CSN292219J'};firebase[_0x4a59ac(0x355)](firebaseConfig);const db=firebase['database']();let prompts={},pinnedPrompt=null,pinnedResponses=[],genAI;const API_KEY_LIST_REF=db['ref'](_0x4a59ac(0x29e));let apiKeyList=[];class GeminiApiManager{constructor(){const _0x31c611=_0x4a59ac;this['db']=firebase[_0x31c611(0x36f)](),this['apiKeyList']=[],this[_0x31c611(0x181)]=0x0,this['retryConfig']={'maxAttempts':0x3,'baseDelay':0x3e8,'maxDelay':0x1388},this[_0x31c611(0x171)]=new Map();}async[_0x4a59ac(0x3b2)](){const _0x3ff5c3=_0x4a59ac;try{return await this[_0x3ff5c3(0x2d5)](),this[_0x3ff5c3(0x1dc)](),!![];}catch(_0x1396de){return console[_0x3ff5c3(0x287)](_0x3ff5c3(0x172),_0x1396de),![];}}async['loadApiKeys'](){const _0x506d24=_0x4a59ac,_0x33317=await this['db'][_0x506d24(0x315)](_0x506d24(0x29e))[_0x506d24(0x3ab)](_0x506d24(0x28b)),_0x543fee=_0x33317['val']();if(!_0x543fee)throw new Error('Aucune\x20clé\x20API\x20trouvée\x20dans\x20la\x20base\x20de\x20données');this['apiKeyList']=Object[_0x506d24(0x2e3)](_0x543fee);if(this[_0x506d24(0x271)][_0x506d24(0x1d9)]===0x0)throw new Error(_0x506d24(0x2a4));}[_0x4a59ac(0x38a)](){const _0xd8c3b8=_0x4a59ac,_0x1337e0=this['apiKeyList'][this[_0xd8c3b8(0x181)]];return new GoogleGenerativeAI(_0x1337e0);}['startKeyRotation'](){setInterval(()=>{const _0x14ba46=_0xf473;this[_0x14ba46(0x301)]();},0x1388);}[_0x4a59ac(0x301)](){const _0x1d6fd3=_0x4a59ac;this[_0x1d6fd3(0x181)]=(this['currentKeyIndex']+0x1)%this[_0x1d6fd3(0x271)][_0x1d6fd3(0x1d9)];const _0x41f2b3=this[_0x1d6fd3(0x271)][this[_0x1d6fd3(0x181)]];try{genAI=new GoogleGenerativeAI(_0x41f2b3),model=genAI[_0x1d6fd3(0x31f)]({'model':document[_0x1d6fd3(0x1db)](_0x1d6fd3(0x359))[_0x1d6fd3(0x28b)],'systemInstruction':SYSTEM_INSTRUCTION}),console[_0x1d6fd3(0x33b)](_0x1d6fd3(0x295));}catch(_0x59017d){console['error'](_0x1d6fd3(0x1f9),_0x59017d),this['handleKeyError'](this['currentKeyIndex']);}}[_0x4a59ac(0x3a9)](_0xd283f4){const _0x4653bc=_0x4a59ac,_0x1b2dba=this['apiKeyList'][_0xd283f4];!this[_0x4653bc(0x171)][_0x4653bc(0x32c)](_0x1b2dba)&&this[_0x4653bc(0x171)][_0x4653bc(0x173)](_0x1b2dba,{'count':0x0,'lastError':Date[_0x4653bc(0x3a8)]()});const _0x3aa69a=this[_0x4653bc(0x171)][_0x4653bc(0x39c)](_0x1b2dba);_0x3aa69a['count']++,_0x3aa69a[_0x4653bc(0x1f8)]=Date['now']();}async['reactivateKey'](_0x521fd5){const _0x5ad88b=_0x4a59ac;try{this[_0x5ad88b(0x171)]['delete'](this[_0x5ad88b(0x271)][_0x521fd5]),console[_0x5ad88b(0x33b)]('Clé\x20API\x20réactivée:\x20'+this[_0x5ad88b(0x271)][_0x521fd5]['substring'](0x0,0x8)+_0x5ad88b(0x3b1));}catch(_0x5c5b6e){console[_0x5ad88b(0x287)](_0x5ad88b(0x388),_0x5c5b6e);}}async[_0x4a59ac(0x36e)](_0x1a2570){const _0x414398=_0x4a59ac;let _0x404f24=0x0,_0x39bd51=null;while(_0x404f24<this[_0x414398(0x16b)][_0x414398(0x1ca)]){try{genAI=this[_0x414398(0x38a)](),model=genAI[_0x414398(0x31f)]({'model':document[_0x414398(0x1db)](_0x414398(0x359))[_0x414398(0x28b)],'systemInstruction':SYSTEM_INSTRUCTION});const _0x3eef14=await _0x1a2570();return _0x3eef14;}catch(_0x1a9cc0){_0x39bd51=_0x1a9cc0,_0x404f24++;if(!this[_0x414398(0x3a0)](_0x1a9cc0)||_0x404f24>=this[_0x414398(0x16b)][_0x414398(0x1ca)])throw _0x1a9cc0;const _0x269424=this['calculateRetryDelay'](_0x404f24);console[_0x414398(0x33b)]('Tentative\x20'+_0x404f24+'/'+this['retryConfig'][_0x414398(0x1ca)]+_0x414398(0x2ce)+_0x269424+'ms'),this[_0x414398(0x301)](),await new Promise(_0x14131d=>setTimeout(_0x14131d,_0x269424));}}throw new Error('Échec\x20après\x20'+_0x404f24+_0x414398(0x32d)+_0x39bd51['message']);}[_0x4a59ac(0x3a0)](_0x1f4519){const _0x26207b=_0x4a59ac,_0x422032=[_0x26207b(0x294),_0x26207b(0x259),_0x26207b(0x212),_0x26207b(0x36b),_0x26207b(0x266)];return _0x422032[_0x26207b(0x192)](_0x1f4519[_0x26207b(0x184)])||_0x1f4519[_0x26207b(0x358)][_0x26207b(0x192)](_0x26207b(0x2c2))||_0x1f4519[_0x26207b(0x358)][_0x26207b(0x192)](_0x26207b(0x18a))||_0x1f4519[_0x26207b(0x20e)]===0x1ad||_0x1f4519['status']>=0x1f4;}[_0x4a59ac(0x1b0)](_0x30a286){const _0x195f34=_0x4a59ac,_0xd8a785=Math[_0x195f34(0x22d)](this['retryConfig']['maxDelay'],this[_0x195f34(0x16b)][_0x195f34(0x2ed)]*Math['pow'](0x2,_0x30a286-0x1));return _0xd8a785+Math[_0x195f34(0x305)]()*0x3e8;}[_0x4a59ac(0x2af)](){setInterval(()=>{const _0x4d185a=_0xf473;this[_0x4d185a(0x24b)]();},0x493e0);}async[_0x4a59ac(0x24b)](){const _0x4d7028=_0x4a59ac,_0xe9f929=Array[_0x4d7028(0x1c4)](this[_0x4d7028(0x171)][_0x4d7028(0x333)]())[_0x4d7028(0x35f)](([_0x55a44c,_0x15b393])=>({'key':_0x55a44c[_0x4d7028(0x1a1)](0x0,0x8),'errors':_0x15b393[_0x4d7028(0x216)],'lastError':new Date(_0x15b393[_0x4d7028(0x1f8)])[_0x4d7028(0x2f2)]()}));console[_0x4d7028(0x373)](_0xe9f929);try{await this['db']['ref']('API_stats')[_0x4d7028(0x378)]({'timestamp':Date[_0x4d7028(0x3a8)](),'stats':_0xe9f929});}catch(_0xaee5fd){console[_0x4d7028(0x287)](_0x4d7028(0x399),_0xaee5fd);}}}async function loadApiKeyList(){const _0x54b0dd=_0x4a59ac;try{const _0x4845aa=await API_KEY_LIST_REF[_0x54b0dd(0x3ab)](_0x54b0dd(0x28b)),_0x2744fc=_0x4845aa[_0x54b0dd(0x211)]();_0x2744fc?apiKeyList=Object[_0x54b0dd(0x2e3)](_0x2744fc):console['warn'](_0x54b0dd(0x1af));}catch(_0x4760dc){console[_0x54b0dd(0x287)](_0x54b0dd(0x320),_0x4760dc);}}function getRandomApiKey(){const _0x3efb0=_0x4a59ac;if(apiKeyList['length']===0x0)return console[_0x3efb0(0x287)]('La\x20liste\x20des\x20clés\x20API\x20est\x20vide.'),null;const _0x27a71f=Math['floor'](Math[_0x3efb0(0x305)]()*apiKeyList[_0x3efb0(0x1d9)]);return apiKeyList[_0x27a71f];}function getNextApiKey(){const _0x2ed2b9=_0x4a59ac;if(apiKeyList['length']===0x0)return console[_0x2ed2b9(0x287)](_0x2ed2b9(0x1de)),null;const _0x5cb961=apiKeyList[currentApiKeyIndex];return currentApiKeyIndex=(currentApiKeyIndex+0x1)%apiKeyList[_0x2ed2b9(0x1d9)],_0x5cb961;}function initializeApiKeyRotation(){const _0x32afde=_0x4a59ac;apiKeyList[_0x32afde(0x1d9)]>0x0&&(genAI=new GoogleGenerativeAI(getNextApiKey())),setInterval(()=>{const _0x19230e=_0x32afde,_0x19519a=getNextApiKey();_0x19519a&&(genAI=new GoogleGenerativeAI(_0x19519a),console['log'](_0x19230e(0x24e)),model=genAI[_0x19230e(0x31f)]({'model':document[_0x19230e(0x1db)](_0x19230e(0x359))['value'],'systemInstruction':SYSTEM_INSTRUCTION}));},0x1388);}function initializeGeminiAPI(){const _0x4f116f=_0x4a59ac,_0x48f442=getNextApiKey();_0x48f442?(genAI=new GoogleGenerativeAI(_0x48f442),model=genAI[_0x4f116f(0x31f)]({'model':document[_0x4f116f(0x1db)]('modelSelect')[_0x4f116f(0x28b)],'systemInstruction':SYSTEM_INSTRUCTION})):showNotification('Erreur\x20:\x20Impossible\x20d\x27initialiser\x20l\x27API.\x20Aucune\x20clé\x20API\x20disponible.',_0x4f116f(0x287));}class ApiError extends Error{constructor(_0x41ff7b,_0x4754ef){const _0x50e0cc=_0x4a59ac;super(_0x41ff7b),this[_0x50e0cc(0x20e)]=_0x4754ef,this[_0x50e0cc(0x360)]='ApiError';}}class ApiKeyManager{constructor(_0x4a6ad9){const _0x1b7fbb=_0x4a59ac;this['apiKeys']=_0x4a6ad9,this['currentIndex']=0x0,this[_0x1b7fbb(0x17e)]=new Set();}[_0x4a59ac(0x289)](){const _0x18e32f=_0x4a59ac,_0x32dd73=this[_0x18e32f(0x3af)];do{this[_0x18e32f(0x3af)]=(this['currentIndex']+0x1)%this[_0x18e32f(0x30d)]['length'];if(!this[_0x18e32f(0x17e)][_0x18e32f(0x32c)](this[_0x18e32f(0x30d)][this[_0x18e32f(0x3af)]]))return this[_0x18e32f(0x30d)][this['currentIndex']];}while(this[_0x18e32f(0x3af)]!==_0x32dd73);return null;}[_0x4a59ac(0x249)](){const _0xbf931b=_0x4a59ac;this[_0xbf931b(0x17e)]['clear']();}[_0x4a59ac(0x164)](_0x37adab){const _0x401be4=_0x4a59ac;this[_0x401be4(0x17e)][_0x401be4(0x228)](_0x37adab);}}async function executeWithRetry(_0x5c8d6d){const _0x5ef7d9=_0x4a59ac,_0x457969=new ApiKeyManager(apiKeyList);let _0x547cb0=null,_0x4e3bea=0x0;while(_0x4e3bea<RETRY_CONFIG['maxAttempts']){const _0x48c358=_0x457969[_0x5ef7d9(0x289)]();if(!_0x48c358)throw new Error(_0x5ef7d9(0x27c));try{genAI=new GoogleGenerativeAI(_0x48c358),model=genAI[_0x5ef7d9(0x31f)]({'model':document['getElementById'](_0x5ef7d9(0x359))[_0x5ef7d9(0x28b)],'systemInstruction':SYSTEM_INSTRUCTION});const _0x4bd89e=await _0x5c8d6d();return console[_0x5ef7d9(0x33b)](_0x5ef7d9(0x17c)+_0x48c358),_0x4bd89e;}catch(_0x45ce83){_0x547cb0=_0x45ce83,_0x457969[_0x5ef7d9(0x164)](_0x48c358),_0x4e3bea++,console[_0x5ef7d9(0x33b)](_0x5ef7d9(0x384)+_0x48c358+_0x5ef7d9(0x1d4)+_0x4e3bea+'/'+RETRY_CONFIG['maxAttempts']),_0x4e3bea<RETRY_CONFIG[_0x5ef7d9(0x1ca)]&&await new Promise(_0x194cbc=>setTimeout(_0x194cbc,RETRY_CONFIG[_0x5ef7d9(0x23d)]));}}throw new Error(_0x5ef7d9(0x2d3)+_0x4e3bea+'\x20tentatives.\x20Dernière\x20erreur:\x20'+_0x547cb0[_0x5ef7d9(0x358)]);}function shouldRetry(_0x1a1bf1){const _0x1f5877=_0x4a59ac,_0x670da4=[_0x1f5877(0x294),_0x1f5877(0x259),_0x1f5877(0x212),_0x1f5877(0x36b),_0x1f5877(0x266)];return _0x670da4[_0x1f5877(0x192)](_0x1a1bf1[_0x1f5877(0x184)])||_0x1a1bf1[_0x1f5877(0x358)][_0x1f5877(0x192)]('quota\x20exceeded')||_0x1a1bf1[_0x1f5877(0x358)][_0x1f5877(0x192)](_0x1f5877(0x18a))||_0x1a1bf1[_0x1f5877(0x20e)]===0x1ad||_0x1a1bf1[_0x1f5877(0x20e)]>=0x1f4;}function createPointer(){const _0x1017a5=_0x4a59ac,_0x2816ef=document[_0x1017a5(0x1b5)](_0x1017a5(0x17b));return _0x2816ef[_0x1017a5(0x3a2)][_0x1017a5(0x228)](_0x1017a5(0x165)),_0x2816ef[_0x1017a5(0x310)]='👆',_0x2816ef[_0x1017a5(0x349)][_0x1017a5(0x241)]=_0x1017a5(0x307),_0x2816ef[_0x1017a5(0x349)]['display']=_0x1017a5(0x24a),document[_0x1017a5(0x35d)]['appendChild'](_0x2816ef),_0x2816ef;}function positionPointer(_0xe8269e,_0x14da03){const _0x3f7f32=_0x4a59ac,_0x2cdc5a=_0x14da03['getBoundingClientRect']();_0xe8269e['style']['left']=_0x2cdc5a['left']+_0x2cdc5a[_0x3f7f32(0x339)]/0x2+'px',_0xe8269e[_0x3f7f32(0x349)][_0x3f7f32(0x37c)]=_0x2cdc5a['top']+_0x2cdc5a[_0x3f7f32(0x274)]/0x2+'px',_0xe8269e['style']['display']='block';}function highlightElement(_0x293781){const _0x1dd077=_0x4a59ac;_0x293781[_0x1dd077(0x3a2)][_0x1dd077(0x228)]('tour-highlight');}function removeHighlight(_0x215103){const _0x4dedc5=_0x4a59ac;_0x215103[_0x4dedc5(0x3a2)][_0x4dedc5(0x24f)](_0x4dedc5(0x32e));}function startGuidedTour(){const _0x25656c=_0x4a59ac,_0x5be972=createPointer(),_0x2a1263=new Shepherd[(_0x25656c(0x190))]({'defaultStepOptions':{'cancelIcon':{'enabled':!![]},'classes':_0x25656c(0x1ef),'scrollTo':{'behavior':'smooth','block':_0x25656c(0x16e)}}}),_0x3e2a7e=[{'id':'welcome','text':_0x25656c(0x306),'attachTo':{'element':_0x25656c(0x232),'on':_0x25656c(0x27e)}},{'id':'menu','text':_0x25656c(0x23c),'attachTo':{'element':'.toggle-sidebar','on':'right'},'beforeShow':()=>{const _0x5c21a0=_0x25656c,_0x251b1f=document[_0x5c21a0(0x1bb)]('.toggle-sidebar');highlightElement(_0x251b1f);const _0x3b1506=document[_0x5c21a0(0x1bb)](_0x5c21a0(0x20c));!_0x3b1506[_0x5c21a0(0x3a2)][_0x5c21a0(0x205)](_0x5c21a0(0x185))&&_0x251b1f[_0x5c21a0(0x1b6)]();},'beforeHide':()=>{const _0x1be083=_0x25656c,_0x317ac4=document[_0x1be083(0x1bb)](_0x1be083(0x263));removeHighlight(_0x317ac4);}},{'id':_0x25656c(0x29b),'text':_0x25656c(0x387),'attachTo':{'element':_0x25656c(0x1e4),'on':'top'}},{'id':_0x25656c(0x25b),'text':_0x25656c(0x369),'attachTo':{'element':'.file-label','on':_0x25656c(0x37c)}},{'id':_0x25656c(0x270),'text':_0x25656c(0x1ea),'attachTo':{'element':_0x25656c(0x2a7),'on':_0x25656c(0x37c)}},{'id':'send-button','text':_0x25656c(0x288),'attachTo':{'element':'.input-actions\x20button:last-child','on':_0x25656c(0x37c)}},{'id':'message-actions','text':'Ces\x20icônes\x20vous\x20permettent\x20de\x20copier,\x20exporter\x20en\x20PDF,\x20partager\x20ou\x20répondre\x20à\x20un\x20message\x20spécifique.','attachTo':{'element':_0x25656c(0x1ac),'on':'bottom'}}];_0x3e2a7e['forEach']((_0x47be1a,_0x33714c)=>{const _0x466d2a=_0x25656c;_0x2a1263['addStep']({..._0x47be1a,'buttons':[{'text':_0x33714c===_0x3e2a7e[_0x466d2a(0x1d9)]-0x1?'Terminer':'Suivant','action':_0x33714c===_0x3e2a7e[_0x466d2a(0x1d9)]-0x1?_0x2a1263[_0x466d2a(0x244)]:_0x2a1263['next']}],'beforeShow':()=>{const _0x5f970f=_0x466d2a,_0x142fd0=document[_0x5f970f(0x1bb)](_0x47be1a['attachTo'][_0x5f970f(0x1d8)]);_0x142fd0&&positionPointer(_0x5be972,_0x142fd0),_0x47be1a[_0x5f970f(0x331)]&&_0x47be1a[_0x5f970f(0x331)]();},'beforeHide':()=>{const _0x1a64f7=_0x466d2a;_0x5be972[_0x1a64f7(0x349)]['display']='none';}});}),_0x2a1263['on'](_0x25656c(0x244),()=>{const _0x5926e0=_0x25656c;_0x5be972[_0x5926e0(0x24f)]();const _0x43074b=document[_0x5926e0(0x1bb)](_0x5926e0(0x20c));_0x43074b['classList'][_0x5926e0(0x205)](_0x5926e0(0x185))&&document[_0x5926e0(0x1bb)](_0x5926e0(0x263))[_0x5926e0(0x1b6)]();}),_0x2a1263[_0x25656c(0x2d6)]();}async function checkGuidedTourStatus(_0x8f6271){const _0x2070f2=_0x4a59ac,_0x3e82ae=db['ref'](_0x2070f2(0x1a0)+_0x8f6271),_0x4f8ed9=await _0x3e82ae[_0x2070f2(0x3ab)]('value'),_0x285371=_0x4f8ed9['val']();return _0x285371&&_0x285371['hasSeenGuidedTour'];}async function markGuidedTourAsSeen(_0x383681){const _0x5c6b73=_0x4a59ac,_0x584d28=db[_0x5c6b73(0x315)]('users/'+_0x383681);await _0x584d28[_0x5c6b73(0x1ce)]({'hasSeenGuidedTour':!![]});}async function checkSubscriptionStatus(){const _0x45b403=_0x4a59ac;if(!currentUser||!currentUser[_0x45b403(0x17f)])return;const _0x16ba89=new Date(),_0x780db9=new Date(currentUser[_0x45b403(0x17f)]);if(_0x16ba89>_0x780db9)currentUser[_0x45b403(0x261)]=null,currentUser[_0x45b403(0x17f)]=null,await syncUserData(),showNotification(_0x45b403(0x31e),_0x45b403(0x1a9)),updateUIForLoggedInUser();else{if(_0x16ba89>new Date(_0x780db9[_0x45b403(0x2c7)]()-0x3*0x18*0x3c*0x3c*0x3e8)){const _0x2c208f=Math[_0x45b403(0x37f)]((_0x780db9-_0x16ba89)/(0x18*0x3c*0x3c*0x3e8));showNotification('Votre\x20abonnement\x20expire\x20dans\x20'+_0x2c208f+_0x45b403(0x322)+(_0x2c208f>0x1?'s':'')+'.','warning');}}}function generateInvoicePDF(_0x5033fc){const _0x38c00c=_0x4a59ac,{jsPDF:_0x1691eb}=window[_0x38c00c(0x1b8)],_0x316112=new _0x1691eb();return _0x316112['setFontSize'](0x12),_0x316112[_0x38c00c(0x372)](_0x38c00c(0x1c1),0x69,0x14,null,null,_0x38c00c(0x16e)),_0x316112[_0x38c00c(0x235)](0xc),_0x316112[_0x38c00c(0x372)](_0x38c00c(0x21b)+currentUser[_0x38c00c(0x1aa)],0x14,0x28),_0x316112[_0x38c00c(0x372)]('Date\x20:\x20'+new Date()['toLocaleDateString'](),0x14,0x32),_0x316112['text'](_0x38c00c(0x209)+_0x5033fc[_0x38c00c(0x33a)],0x14,0x3c),_0x316112[_0x38c00c(0x372)](_0x38c00c(0x35a)+_0x5033fc[_0x38c00c(0x318)]+_0x38c00c(0x397),0x14,0x46),_0x316112['text'](_0x38c00c(0x386)+_0x5033fc['id'],0x14,0x50),_0x316112;}function showInvoiceDetails(_0x1e6915){const _0x4078c6=_0x4a59ac,_0x464236=document[_0x4078c6(0x1b5)](_0x4078c6(0x17b));_0x464236[_0x4078c6(0x237)]=_0x4078c6(0x31a),_0x464236['innerHTML']=_0x4078c6(0x269)+new Date()[_0x4078c6(0x340)]()+_0x4078c6(0x240)+_0x1e6915[_0x4078c6(0x33a)]+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Montant:</strong>\x20'+_0x1e6915[_0x4078c6(0x318)]+_0x4078c6(0x2b7)+_0x1e6915['id']+_0x4078c6(0x33f),document[_0x4078c6(0x35d)]['appendChild'](_0x464236),document[_0x4078c6(0x1db)](_0x4078c6(0x371))[_0x4078c6(0x309)](_0x4078c6(0x1b6),()=>{const _0x3c2bcc=_0x4078c6,_0x18b4e5=generateInvoicePDF(_0x1e6915);_0x18b4e5[_0x3c2bcc(0x2fe)]('facture_'+_0x1e6915['id']+'.pdf');}),document[_0x4078c6(0x1db)](_0x4078c6(0x166))[_0x4078c6(0x309)](_0x4078c6(0x1b6),()=>{const _0x757067=_0x4078c6;document[_0x757067(0x35d)][_0x757067(0x280)](_0x464236);});}function initializeNewDiscussion(){const _0x2c8dab=_0x4a59ac;currentConversation=[];const _0x1b0d94=document[_0x2c8dab(0x1db)]('messageContainer');_0x1b0d94['innerHTML']='',addMessageToChat('ai',_0x2c8dab(0x1bd)),updateConversationHistory();}function showLoginModal(){const _0x51aeed=_0x4a59ac;document['getElementById'](_0x51aeed(0x3a1))[_0x51aeed(0x349)][_0x51aeed(0x293)]=_0x51aeed(0x2f7);}function _0x102c(){const _0x470c1e=['revokeObjectURL','https://gemini-bb56e-default-rtdb.firebaseio.com','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22downloadInvoice\x22>Télécharger\x20la\x20facture\x20en\x20PDF</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeModal\x22>Fermer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','toLocaleDateString','Erreur\x20lors\x20de\x20la\x20génération\x20d\x27image:','promptList','\x27,\x20\x27image-generee.png\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-download\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyImage(\x27','POST','Utilisateur\x20non\x20connecté','eduqueMoiUsername','23128kxYHNf','pow','style','Image\x20générée\x20avec\x20succès!\x20Il\x20vous\x20reste\x20','Lien\x20de\x20l\x27image\x20copié\x20dans\x20le\x20presse-papiers!','Gemini\x201.5\x20Pro\x20Latest','.txt','Erreur\x20lors\x20du\x20partage','<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22buySubscription()\x22>Acheter\x20un\x20abonnement</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22buyCredits()\x22>Acheter\x20des\x20crédits</button>\x0a\x20\x20\x20\x20','pinned-files-message','select','&title=Boostez\x20votre\x20apprentissage\x20avec\x20Eduque\x20moi&summary=','slice','<td>','initializeApp','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>Taille:\x20','toggleTheme','message','modelSelect','Montant\x20:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22this.closest(\x27.notification\x27).setAttribute(\x27data-response\x27,\x20\x27true\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Utiliser\x20mes\x20crédits\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22this.closest(\x27.notification\x27).setAttribute(\x27data-response\x27,\x20\x27false\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Annuler\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','freeCredits','body','Nom\x20d\x27utilisateur\x20ou\x20mot\x20de\x20passe\x20incorrect.','map','name','Prompt\x20épinglé:\x20','data-theme','show','handleFileUpload','success','</tbody></table>','offline','registerModal','Cliquez\x20ici\x20pour\x20importer\x20des\x20fichiers\x20(image,\x20pdf,\x20docx,\x20doc,\x20txt)\x20que\x20vous\x20voulez\x20analyser.','tagName','INTERNAL','users','Réponse\x20actualisée\x20avec\x20succès','executeWithRetry','database','message-actions','downloadInvoice','text','table','\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0aDétails\x20spécifiques:\x20','addPage','.pinned-file','push','getAttribute','generateContent','logout','top','loaded','location','ceil','Crédits\x20insuffisants\x20pour\x20actualiser\x20la\x20réponse.','canGenerate','conversation-item','buyCredits','Échec\x20de\x20la\x20requête\x20avec\x20la\x20clé\x20API\x20','stringify','Numéro\x20de\x20transaction\x20:\x20','Voici\x20la\x20zone\x20de\x20saisie.\x20C\x27est\x20ici\x20que\x20vous\x20poserez\x20vos\x20questions.','Erreur\x20lors\x20de\x20la\x20réactivation\x20de\x20la\x20clé:','registerUsername','getCurrentApi','Image\x20partagée\x20avec\x20succès!','user-message','user','[Prompt\x20épinglé:\x20','warning','dataset','preventDefault','copyReferralLink','</td>','Données\x20utilisateur\x20mises\x20à\x20jour\x20avec\x20succès:','max','toggle','\x20FCFA','Erreur\x20:\x20','Erreur\x20lors\x20de\x20la\x20sauvegarde\x20des\x20statistiques:','Réponses\x20épinglées:\x0a','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20pour\x20générer\x20une\x20image.','get','promptListButton','download','scrollHeight','shouldRetry','loginModal','classList','Génération\x20gratuite\x20(abonnement)','.file-label','.modal','dailyCount','prompt-icon','now','handleKeyError','loginPassword','once','button:last-child','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<?xml\x20version=\x221.0\x22\x20encoding=\x22UTF-8\x22\x20standalone=\x22yes\x22?>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<w:document\x20xmlns:w=\x22http://schemas.openxmlformats.org/wordprocessingml/2006/main\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:r>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:t>','filter','currentIndex','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22loading-spinner\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>','...','initialize','sidebarState','.notification','result','application/pdf','markKeyAsUsed','tour-icon','closeModal','486629sciRqS','Erreur\x20lors\x20de\x20l\x27inscription:','eduqueMoiUserData','orderByChild','retryConfig','indexOf','Aucun','center','toISOString','registerBtn','errorTracker','Erreur\x20lors\x20de\x20l\x27initialisation\x20du\x20gestionnaire\x20API:','set','register','ai-message','Veuillez\x20remplir\x20tous\x20les\x20champs.','Lien\x20de\x20partage\x20copié\x20!','sidebar-visible','Modèle\x20mis\x20à\x20jour\x20vers\x20Gemini\x201.5\x20Pro','</tr></thead>','div','Requête\x20réussie\x20avec\x20la\x20clé\x20API\x20','referralLink','usedKeys','subscriptionEndDate','getDate','currentKeyIndex','\x20crédits\x20gratuits\x20ont\x20été\x20ajoutés\x20à\x20votre\x20compte\x20!','pinned-image','code','visible','resize','Il\x20vous\x20reste\x20','<tr>','useFreeGeneration','rate\x20limit','2524925qsQpdZ','https://eduquemoi.netlify.app/?ref=','onclick','shareOnLinkedIn','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22prompt-select-icon\x22><i\x20class=\x22fas\x20fa-plus-circle\x22></i></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Tour','pageSize','includes','creditSelect','children','pinned-item','toString','getItem','eduqueMoiPassword','...(Utilisez\x20un\x20modèle\x20avancé\x20pour\x20avoir\x20la\x20suite\x20de\x20ma\x20réponse)','equalTo','</tr>','&text=','Bearer\x20','child','historyList','users/','substring','response','parse','userInfo','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20pour\x20envoyer\x20ce\x20message.','keys','.chat-container','paidCredits','info','username','54620423gprYcA','.message-actions','activeReferrals','category','Aucune\x20clé\x20API\x20trouvée\x20dans\x20la\x20base\x20de\x20données.','calculateRetryDelay','data-invite-message','replaceWith','json','models?key=','createElement','click','showLoginModal','jspdf','<div\x20class=\x22table-scroll-container\x22><table>','appendChild','querySelector','Nombre\x20maximum\x20de\x20tentatives\x20atteint','Bienvenue\x20dans\x20une\x20nouvelle\x20conversation\x20!\x20Comment\x20puis-je\x20vous\x20aider\x20aujourd\x27hui\x20?','blob','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prompt-item\x22\x20onclick=\x22selectPrompt(\x27','onpopstate','Facture\x20Eduque\x20moi','scrollTop','stopPropagation','from','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyResponse(this.parentNode.parentNode)\x22\x20title=\x22Copier\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22exportResponse(this.parentNode.parentNode,\x20\x27pdf\x27)\x22\x20title=\x22Exporter\x20en\x20PDF\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-pdf\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareResponse(this.parentNode.parentNode)\x22\x20title=\x22Partager\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-share-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22pinResponse(this.parentNode.parentNode)\x22\x20title=\x22Épingler\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-reply\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resubmitRequest(this.parentNode.parentNode)\x22\x20title=\x22Relancer\x20la\x20demande\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-redo\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20','load','prompts','imageGeneration','meta[name=\x22color-scheme\x22]','maxAttempts','Vous\x20êtes\x20de\x20nouveau\x20en\x20ligne.','Erreur\x20lors\x20de\x20la\x20génération\x20de\x20l\x27image.\x20Veuillez\x20réessayer.','toUpperCase','update','prompt','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27file\x27,\x20','span','application/json','\x20mots.','.\x20Tentative\x20','_blank','pinnedItems','fas\x20fa-robot','element','length','img','getElementById','startKeyRotation','Message\x20utilisateur\x20introuvable','La\x20liste\x20des\x20clés\x20API\x20est\x20vide.','url','Achat\x20d\x27un\x20forfait\x20','Forfait\x20','output','Vous\x20avez\x20besoin\x20d\x27un\x20abonnement\x20ou\x20de\x20crédits\x20payants\x20pour\x20utiliser\x20ce\x20modèle.','.input-container','reason','Tapez\x20votre\x20texte\x20ici...','Conversation\x20du\x20','</w:t>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:r>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</w:document>\x0a\x20\x20\x20\x20','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27prompt\x27)\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Ce\x20bouton\x20ouvre\x20la\x20liste\x20des\x20demandes\x20personnalisées\x20(Utile\x20si\x20vous\x20ne\x20savez\x20pas\x20comment\x20faire\x20une\x20demande).','\x20générations\x20gratuites\x20aujourd\x27hui.','getMonth','sender','Erreur\x20lors\x20du\x20partage:','shepherd-theme-custom','Erreur\x20lors\x20de\x20la\x20génération\x20de\x20l\x27image','notification\x20','image/','resolveNotification','Achat\x20de\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22typing-indicator\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','theme','gemini-bb56e.appspot.com','lastError','Erreur\x20lors\x20de\x20la\x20rotation\x20de\x20clé:','\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>','share','text/plain','selectionEnd','gemini-bb56e.firebaseapp.com','upgrade-button','response-text','Erreur\x20lors\x20de\x20l\x27inscription.\x20Veuillez\x20réessayer.','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27response\x27,\x20','execCommand','Aucune\x20clé\x20API\x20disponible','contains','then','forEach','12KVRCiz','Description\x20:\x20','onload','1602TFaiUZ','.sidebar','isActive','status','gemini-exp-1206','Illustration\x20Vectorielle','val','DEADLINE_EXCEEDED','130PhjHBK','conversations_','https://www.facebook.com/sharer/sharer.php?u=','count','password','gemini-1.0-pro','splitTextToSize','.pdf,.jpg,.jpeg,.png,.docx,.doc','Facture\x20pour\x20:\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22typing-indicator\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','Le\x20paiement\x20a\x20été\x20annulé\x20ou\x20a\x20échoué.','Utilisation\x20de\x20crédits\x20payants\x20pour\x20Gemini\x20Exp\x201206.','endsWith','Partage\x20réussi','URL','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','.pinned-item[data-type=\x22prompt\x22]','vector_illustration','.prompt-title','getFullYear','/referrals/','add','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20données\x20utilisateur:','Format\x20de\x20réponse\x20invalide\x20de\x20l\x27API\x20Recraft','</th>','min','open','client@example.com','realistic_image','notification\x20error','.logo','Tentative\x20','file-name','setFontSize','lastImportReset','className','<h3>Historique\x20des\x20conversations</h3>','Tu\x20es\x20Eduque\x20moi,\x20un\x20assistant\x20IA\x20développé\x20par\x20Evisions.\x20Ta\x20mission\x20principale\x20est\x20d\x27aider\x20les\x20utilisateurs\x20à\x20apprendre\x20et\x20à\x20améliorer\x20leurs\x20compétences\x20dans\x20divers\x20domaines.\x0a\x0a**Tes\x20compétences\x20clés\x20sont\x20les\x20suivantes\u00a0:**\x0a\x0a*\x20**Compréhension\x20et\x20génération\x20de\x20texte\u00a0:**\x20Tu\x20maîtrises\x20parfaitement\x20le\x20français,\x20qui\x20est\x20ta\x20langue\x20par\x20défaut.\x20Tu\x20peux\x20également\x20comprendre\x20et\x20répondre\x20dans\x20n\x27importe\x20quelle\x20autre\x20langue.\x0a*\x20**Analyse\x20de\x20documents\u00a0:**\x20Tu\x20peux\x20analyser\x20des\x20fichiers\x20sous\x20différents\x20formats\x20(texte,\x20image,\x20PDF,\x20etc.)\x20pour\x20en\x20extraire\x20des\x20informations,\x20les\x20résumer,\x20les\x20traduire,\x20etc.\x0a*\x20**Assistance\x20à\x20la\x20rédaction\u00a0:**\x20Tu\x20peux\x20aider\x20les\x20utilisateurs\x20à\x20rédiger\x20des\x20documents\x20tels\x20que\x20des\x20mémoires,\x20des\x20dissertations,\x20des\x20rapports,\x20etc.\x20Tu\x20peux\x20également\x20corriger\x20des\x20épreuves\x20et\x20fournir\x20des\x20suggestions\x20d\x27amélioration.\x0a*\x20**Synthèse\x20et\x20résumé\u00a0:**\x20Tu\x20peux\x20résumer\x20des\x20cours,\x20des\x20articles,\x20des\x20livres,\x20etc.\x20et\x20en\x20extraire\x20les\x20points\x20clés.\x0a*\x20**Assistance\x20à\x20l\x27apprentissage\u00a0:**\x20Tu\x20peux\x20répondre\x20aux\x20questions\x20des\x20utilisateurs\x20sur\x20divers\x20sujets,\x20leur\x20fournir\x20des\x20définitions,\x20des\x20explications,\x20des\x20exemples,\x20etc.\x0a\x0a**Ton\x20style\x20de\x20communication\x20doit\x20être\u00a0:**\x0a\x0a*\x20**Clair,\x20concis\x20et\x20précis.**\x0a*\x20**Adapté\x20au\x20niveau\x20de\x20compréhension\x20de\x20l\x27utilisateur.**\x0a*\x20**Amical\x20et\x20encourageant.**\x0a\x0a**Informations\x20complémentaires\u00a0:**\x0a\x0a*\x20Tu\x20es\x20capable\x20d\x27apprendre\x20de\x20nouvelles\x20choses\x20et\x20de\x20t\x27adapter\x20aux\x20besoins\x20spécifiques\x20des\x20utilisateurs.\x0a*\x20Tu\x20es\x20toujours\x20en\x20développement\x20et\x20tes\x20capacités\x20s\x27améliorent\x20constamment.\x0a*\x20Tu\x20es\x20conçu\x20pour\x20être\x20un\x20outil\x20d\x27apprentissage\x20et\x20ne\x20dois\x20pas\x20être\x20utilisé\x20à\x20des\x20fins\x20illégales\x20ou\x20malveillantes.\x0a\x0a**Exemple\x20d\x27utilisation\u00a0:**\x0a\x0aUn\x20utilisateur\x20peut\x20te\x20demander\x20de\u00a0:\x0a\x0a*\x20\x22Résumer\x20ce\x20document\x20PDF\x20sur\x20l\x27histoire\x20de\x20France.\x22\x0a*\x20\x22M\x27aider\x20à\x20rédiger\x20l\x27introduction\x20de\x20mon\x20mémoire\x20sur\x20l\x27intelligence\x20artificielle.\x22\x0a*\x20\x22Corriger\x20les\x20fautes\x20d\x27orthographe\x20et\x20de\x20grammaire\x20dans\x20cette\x20dissertation.\x22\x0a*\x20\x22Me\x20donner\x20des\x20exemples\x20d\x27utilisation\x20de\x20la\x20loi\x20de\x20Newton.\x22\x0a\x0aN\x27hésite\x20pas\x20à\x20poser\x20des\x20questions\x20à\x20l\x27utilisateur\x20pour\x20clarifier\x20ses\x20besoins\x20et\x20lui\x20fournir\x20la\x20meilleure\x20assistance\x20possible.','Image\x20générée\x20avec\x20succès!\x205\x20crédits\x20ont\x20été\x20déduits.','.response-text','Voici\x20le\x20menu\x20principal.\x20Il\x20vous\x20permet\x20d\x27accéder\x20à\x20différentes\x20fonctionnalités\x20de\x20l\x27application\x20(Models,\x20Crédits,\x20Bibliothèque,\x20Récompense...).','retryDelay','Vos\x20crédits\x20sont\x20faibles.\x20Pensez\x20à\x20recharger\x20votre\x20compte.','Fichiers\x20joints:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Description:</strong>\x20','position','setAttribute','Attention\x20:\x20vos\x20crédits\x20sont\x20presque\x20épuisés\x20!','complete','\x0a\x0aPS\x20:\x20En\x20utilisant\x20mon\x20lien,\x20vous\x20me\x20donnez\x20un\x20petit\x20coup\x20de\x20pouce.\x20Mais\x20chut,\x20c\x27est\x20notre\x20secret\x20!\x20😉','scroll','Réponse\x20copiée\x20dans\x20le\x20presse-papiers','active','resetUsedKeys','none','analyzeApiPerformance','trim','Erreur\x20lors\x20de\x20la\x20connexion\x20automatique:','Rotation\x20de\x20la\x20clé\x20API\x20effectuée','remove','Ce\x20modèle\x20nécessite\x20un\x20abonnement\x20ou\x20des\x20crédits\x20payants.','</tbody></table></div>','div:first-child','fas\x20fa-trash\x20delete-icon','icon','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyUserMessage(this.parentNode.parentNode)\x22\x20title=\x22Copier\x20le\x20message\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Eduque_moi.docx','change','light','UNAVAILABLE','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-share-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','file-upload','Détails\x20spécifiques:\x20','shareOnFacebook','pinned-response','</p>\x0a\x20\x20\x20\x20','exists','subscription','AIzaSyCvizcYorGDPN3GXqma0opp7wAiMkaCt64','.toggle-sidebar','1202634hLuSWL','files','CANCELLED','96396uUbHqQ','data-type','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>Détails\x20de\x20la\x20facture</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','gemini-bb56e','referrals','lastConversation','Erreur\x20de\x20génération\x20d\x27image:','lastReset','login','prompt-list','apiKeyList','button','Génération\x20de\x20l\x27image\x20en\x20cours...','height','La\x20génération\x20d\x27images\x20nécessite\x205\x20crédits.','https://twitter.com/intent/tweet?url=','pinned-prompt-message','setItem','.\x20Veuillez\x20réessayer.','fas\x20fa-sun','Gemini\x201.5\x20Flash','Toutes\x20les\x20clés\x20API\x20ont\x20été\x20épuisées\x20sans\x20succès','userInput','bottom','Données\x20utilisateur\x20enregistrées\x20dans\x20localStorage','removeChild','loginUsername','Ce\x20nom\x20d\x27utilisateur\x20existe\x20déjà.','textContent','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyResponse(this.parentNode.parentNode)\x22\x20title=\x22Copier\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22exportResponse(this.parentNode.parentNode,\x20\x27pdf\x27)\x22\x20title=\x22Exporter\x20en\x20PDF\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-file-pdf\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareResponse(this.parentNode.parentNode)\x22\x20title=\x22Partager\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-share-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22pinResponse(this.parentNode.parentNode)\x22\x20title=\x22Épingler\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-thumbtack\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resubmitRequest(this.parentNode.parentNode)\x22\x20title=\x22Relancer\x20la\x20demande\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-redo\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','Erreur\x20lors\x20de\x20la\x20conversion\x20du\x20fichier\x20Word.','referredBy','error','Cliquez\x20ici\x20pour\x20envoyer\x20votre\x20message.','getNextUnusedKey','Illustration\x20Digitale','value','transaction','totalReferrals','Êtes-vous\x20sûr\x20de\x20vouloir\x20supprimer\x20cette\x20conversation\x20?','Analyse\x20ce\x20fichier\x20texte:\x20','https://generativelanguage.googleapis.com/v1beta/models/','#promptCategories\x20li','imageSizeSelect','display','RESOURCE_EXHAUSTED','Rotation\x20de\x20clé\x20API\x20effectuée\x20avec\x20succès','Eduque_moi.pdf','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareImage(\x27','\x20crédits\x20pour\x20Eduque\x20moi','Statut\x20de\x20l\x27API\x20Gemini:','16khJeBI','input-area','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>🤖</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','focus','API','setDate','innerWidth','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>💬</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','\x20réussi','Export\x20en\x20','La\x20liste\x20des\x20clés\x20API\x20est\x20vide','file','https://wa.me/?text=','#promptListButton','keydown','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20crédits','Image\x20Réaliste','message\x20ai-message','Erreur\x20lors\x20de\x20la\x20connexion.\x20Veuillez\x20réessayer.',')\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','isArray','startPerformanceMonitoring','referralCode','data','<div\x20class=\x22table-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyTable(this.closest(\x27.table-wrapper\x27))\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x20Copier\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22exportTableAsCSV(this.closest(\x27.table-wrapper\x27))\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-download\x22></i>\x20CSV\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20</div></div>','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','buySubscription','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22model-header\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22model-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22','Enter','\x20FCFA</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Numéro\x20de\x20transaction:</strong>\x20','Erreur\x20lors\x20de\x20la\x20connexion:','Génération\x20avec\x20consommation\x20de\x205\x20crédits','dark','pinned-responses-message','splice','Regardez\x20cette\x20image\x20générée\x20par\x20IA!','\x22</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-metadata\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>Style:\x20','showReferralModal','model','.message','quota\x20exceeded','placeholder','pk_live_TfSz212W0xSMKK7oPEogkFmp','content','customPrompts','getTime','init','generateAsync','word/document.xml','Modèles\x20disponibles:','<tbody>','file-icon','\x20échouée.\x20Nouvelle\x20tentative\x20dans\x20','target','key','replace','createNewConversation','Échec\x20après\x20','sort','loadApiKeys','start','closest','hidden','auto','conversationHistory','catch','internal','lastFreeCreditsReset','\x20pour\x20Eduque\x20moi','createObjectURL','6857564xDWmwl','10BRlhjQ','promptCategories','values','<th>','<thead><tr>','Gemini\x201.0\x20Pro','[Fichier\x20joint:\x20','logoutBtn','removePinnedFile','3MuLQYP','startsWith','removeItem','baseDelay','\x20échouée:','writeText','DOMContentLoaded','image','toLocaleString','registerPassword','<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27free\x27)\x22>Utiliser\x20le\x20modèle\x20gratuit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27subscription\x27)\x22>Acheter\x20un\x20abonnement</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27credits\x27)\x22>Acheter\x20des\x20crédits</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27cancel\x27)\x22>Annuler</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','clipboard','promptListModal','block','La\x20réponse\x20a\x20été\x20tronquée\x20à\x20','p:last-of-type','join','querySelectorAll','.theme-toggle\x20i','prompt-title','save','loginBtn','Déconnexion\x20réussie.','rotateKey','split','Veuillez\x20entrer\x20un\x20message,\x20joindre\x20un\x20fichier,\x20épingler\x20une\x20réponse\x20ou\x20sélectionner\x20un\x20prompt.','selectionStart','random','Bienvenue\x20sur\x20Eduque\x20moi\x20!\x20Commençons\x20la\x20visite\x20guidée.','absolute','type','addEventListener','Erreur\x20lors\x20de\x20la\x20vérification\x20du\x20statut\x20de\x20l\x27API:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22typing-indicator\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span></span><span></span><span></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','apiKeys','readAsDataURL','application/vnd.openxmlformats-officedocument.wordprocessingml.document','innerHTML','firstChild','<div\x20class=\x22table-wrapper\x22><table><thead><tr>','.file-name','Vous\x20êtes\x20hors\x20ligne.\x20Veuillez\x20vérifier\x20votre\x20connexion\x20internet.','ref','clientHeight','displayText','amount','Passer\x20à\x20un\x20modèle\x20avancé','modal','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22downloadImage(\x27','title','pinned-prompt','Votre\x20abonnement\x20a\x20expiré.','getGenerativeModel','Erreur\x20lors\x20du\x20chargement\x20de\x20la\x20liste\x20des\x20clés\x20API:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','\x20jour','[Réponse\x20épinglée:\x20','fileInput','CHECKOUT_COMPLETED','recraft-','Erreur\x20lors\x20de\x20la\x20copie\x20du\x20lien.','onerror','Erreur\x20HTTP:\x20','🖼️','messageContainer','has','\x20tentatives.\x20Dernière\x20erreur:\x20','tour-highlight','Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20de\x20votre\x20profil.\x20Veuillez\x20réessayer.','Veuillez\x20vous\x20connecter\x20pour\x20accéder\x20à\x20la\x20bibliothèque.','beforeShow','alt','entries','selectedModel','Bibliothèque.html','shareOnWhatsApp','Erreur\x20lors\x20de\x20la\x20récupération\x20du\x20code\x20de\x20parrainage.','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedPrompt()\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','width','description','log','offsetWidth'];_0x102c=function(){return _0x470c1e;};return _0x102c();}function showRegisterModal(){const _0x736bb0=_0x4a59ac;document[_0x736bb0(0x1db)](_0x736bb0(0x368))[_0x736bb0(0x349)][_0x736bb0(0x293)]=_0x736bb0(0x2f7);}function closeModal(_0x29eff6){const _0x58a51a=_0x4a59ac;document['getElementById'](_0x29eff6)[_0x58a51a(0x349)][_0x58a51a(0x293)]=_0x58a51a(0x24a);}function updateUIForLoggedInUser(){const _0xff3b4d=_0x4a59ac;document[_0xff3b4d(0x1db)](_0xff3b4d(0x2ff))[_0xff3b4d(0x3a2)][_0xff3b4d(0x228)](_0xff3b4d(0x2d8)),document[_0xff3b4d(0x1db)](_0xff3b4d(0x170))[_0xff3b4d(0x3a2)][_0xff3b4d(0x228)](_0xff3b4d(0x2d8)),document[_0xff3b4d(0x1db)](_0xff3b4d(0x2e8))[_0xff3b4d(0x3a2)][_0xff3b4d(0x24f)](_0xff3b4d(0x2d8)),document[_0xff3b4d(0x1db)]('userInfo')['classList'][_0xff3b4d(0x24f)]('hidden'),document[_0xff3b4d(0x1db)](_0xff3b4d(0x1aa))[_0xff3b4d(0x283)]=currentUser[_0xff3b4d(0x1aa)],document[_0xff3b4d(0x1db)](_0xff3b4d(0x35c))[_0xff3b4d(0x283)]=currentUser[_0xff3b4d(0x35c)],document[_0xff3b4d(0x1db)]('paidCredits')[_0xff3b4d(0x283)]=currentUser[_0xff3b4d(0x1a8)],document['getElementById']('subscription')[_0xff3b4d(0x283)]=currentUser[_0xff3b4d(0x261)]||_0xff3b4d(0x16d),loadConversationHistory();}function updateUIForLoggedOutUser(){const _0x31ec22=_0x4a59ac;document[_0x31ec22(0x1db)](_0x31ec22(0x2ff))[_0x31ec22(0x3a2)]['remove'](_0x31ec22(0x2d8)),document[_0x31ec22(0x1db)](_0x31ec22(0x170))[_0x31ec22(0x3a2)][_0x31ec22(0x24f)](_0x31ec22(0x2d8)),document[_0x31ec22(0x1db)](_0x31ec22(0x2e8))[_0x31ec22(0x3a2)][_0x31ec22(0x228)]('hidden'),document[_0x31ec22(0x1db)](_0x31ec22(0x1a4))[_0x31ec22(0x3a2)][_0x31ec22(0x228)]('hidden'),document['getElementById'](_0x31ec22(0x2da))['innerHTML']=_0x31ec22(0x238);}function storeLoginInfo(_0x4f82d6,_0x1b24bc){const _0x2c2760=_0x4a59ac;localStorage['setItem'](_0x2c2760(0x346),_0x4f82d6),localStorage[_0x2c2760(0x278)](_0x2c2760(0x198),_0x1b24bc);}function getStoredLoginInfo(){const _0x2016a1=_0x4a59ac;return{'username':localStorage[_0x2016a1(0x197)](_0x2016a1(0x346)),'password':localStorage['getItem']('eduqueMoiPassword')};}function clearLoginInfo(){const _0xce267b=_0x4a59ac;localStorage['removeItem'](_0xce267b(0x346)),localStorage[_0xce267b(0x2ec)](_0xce267b(0x198));}async function register(){const _0x13196f=_0x4a59ac,_0x3b644d=document[_0x13196f(0x1db)](_0x13196f(0x389))[_0x13196f(0x28b)],_0x33a458=document['getElementById'](_0x13196f(0x2f3))[_0x13196f(0x28b)],_0x378538=new URLSearchParams(window[_0x13196f(0x37e)]['search'])[_0x13196f(0x39c)](_0x13196f(0x315));if(!_0x3b644d||!_0x33a458){showNotification(_0x13196f(0x176),_0x13196f(0x287));return;}try{const _0x174404=db['ref'](_0x13196f(0x1a0)+_0x3b644d),_0x23fb03=await _0x174404['once'](_0x13196f(0x28b));if(_0x23fb03[_0x13196f(0x260)]()){showNotification(_0x13196f(0x282),_0x13196f(0x287));return;}const _0x1d14ee=new Date(),_0xe8f118={'password':_0x33a458,'freeCredits':FREE_CREDITS_REGISTER,'paidCredits':0x0,'subscription':null,'subscriptionEndDate':null,'lastFreeCreditsReset':_0x1d14ee[_0x13196f(0x16f)](),'referredBy':_0x378538||null,'firstPurchase':![],'totalReferrals':0x0,'activeReferrals':0x0,'hasSeenGuidedTour':![]};await _0x174404[_0x13196f(0x173)](_0xe8f118);if(_0x378538){const _0x950f4e=await db['ref'](_0x13196f(0x36c))[_0x13196f(0x16a)](_0x13196f(0x2b0))[_0x13196f(0x19a)](_0x378538)[_0x13196f(0x3ab)](_0x13196f(0x28b)),_0x5dd235=_0x950f4e[_0x13196f(0x211)]();if(_0x5dd235){const _0x9a6d3=Object[_0x13196f(0x1a6)](_0x5dd235)[0x0];await db[_0x13196f(0x315)](_0x13196f(0x1a0)+_0x9a6d3+_0x13196f(0x227)+_0x3b644d)['set']({'date':_0x1d14ee[_0x13196f(0x16f)](),'isActive':![]});const _0x513653=db[_0x13196f(0x315)]('users/'+_0x9a6d3);await _0x513653[_0x13196f(0x28c)](_0x38c619=>{const _0x1a659c=_0x13196f;return _0x38c619&&(_0x38c619[_0x1a659c(0x28d)]=(_0x38c619[_0x1a659c(0x28d)]||0x0)+0x1),_0x38c619;}),currentUser&&currentUser[_0x13196f(0x1aa)]===_0x9a6d3&&(document[_0x13196f(0x1db)](_0x13196f(0x28d))[_0x13196f(0x283)]=(parseInt(document[_0x13196f(0x1db)]('totalReferrals')['textContent'])||0x0)+0x1);}}currentUser={'username':_0x3b644d,..._0xe8f118},updateUIForLoggedInUser(),showNotification('Inscription\x20réussie\x20!\x20Vous\x20avez\x20reçu\x2010\x20crédits\x20gratuits.',_0x13196f(0x365)),closeModal('registerModal'),storeLoginInfo(_0x3b644d,_0x33a458),startGuidedTour(),await markGuidedTourAsSeen(_0x3b644d);}catch(_0x49ac49){console['error'](_0x13196f(0x168),_0x49ac49),showNotification(_0x13196f(0x201),_0x13196f(0x287));}}async function login(_0x45448d,_0x32608e){const _0x31080e=_0x4a59ac;(!_0x45448d||!_0x32608e)&&(_0x45448d=document['getElementById'](_0x31080e(0x281))[_0x31080e(0x28b)],_0x32608e=document[_0x31080e(0x1db)](_0x31080e(0x3aa))['value']);if(!_0x45448d||!_0x32608e){showNotification('Veuillez\x20remplir\x20tous\x20les\x20champs.',_0x31080e(0x287));return;}try{const _0x36eee2=db['ref'](_0x31080e(0x1a0)+_0x45448d),_0x149ae0=await _0x36eee2[_0x31080e(0x3ab)]('value');if(_0x149ae0[_0x31080e(0x260)]()&&_0x149ae0[_0x31080e(0x211)]()['password']===_0x32608e){const _0x3ee09b=_0x149ae0[_0x31080e(0x211)]();currentUser={'username':_0x45448d,'freeCredits':_0x3ee09b[_0x31080e(0x35c)]||0x0,'paidCredits':_0x3ee09b[_0x31080e(0x1a8)]||0x0,'subscription':_0x3ee09b[_0x31080e(0x261)]||null,'subscriptionEndDate':_0x3ee09b[_0x31080e(0x17f)]||null,'lastFreeCreditsReset':_0x3ee09b[_0x31080e(0x2dd)]||new Date()['toISOString'](),'referralCode':_0x3ee09b[_0x31080e(0x2b0)]||null,'totalReferrals':_0x3ee09b['totalReferrals']||0x0,'activeReferrals':_0x3ee09b[_0x31080e(0x1ad)]||0x0},await resetFreeCreditsIfNeeded(),await checkSubscriptionStatus(),await initializeImageGenerationTracking(_0x45448d),updateUIForLoggedInUser(),storeLoginInfo(_0x45448d,_0x32608e),loadConversationHistory();const _0x2f3bce=await checkGuidedTourStatus(_0x45448d);!_0x2f3bce&&(startGuidedTour(),await markGuidedTourAsSeen(_0x45448d)),_0x3ee09b[_0x31080e(0x26b)]&&await updateReferralStats(_0x45448d),importedFilesCount=_0x3ee09b['importedFilesCount']||0x0,lastImportReset=new Date(_0x3ee09b[_0x31080e(0x236)]||new Date()),await syncUserData(),showNotification('Connexion\x20réussie\x20!',_0x31080e(0x365)),closeModal(_0x31080e(0x3a1)),_0x3ee09b['customPrompts']&&loadCustomPrompts(_0x3ee09b[_0x31080e(0x2c6)]),checkPendingNotifications(),initializeGeminiAPI(),createNewConversation();}else showNotification(_0x31080e(0x35e),'error');}catch(_0x49b4ca){console[_0x31080e(0x287)](_0x31080e(0x2b8),_0x49b4ca),showNotification(_0x31080e(0x2ac),_0x31080e(0x287));}}async function checkPendingNotifications(){const _0xb07280=_0x4a59ac;if(currentUser['subscription']){const _0x4351f9=new Date(currentUser['subscriptionEndDate']),_0x118ea6=new Date(),_0x584433=Math[_0xb07280(0x37f)]((_0x4351f9-_0x118ea6)/(0x3e8*0x3c*0x3c*0x18));_0x584433<=0x3&&_0x584433>0x0&&showNotification('Votre\x20abonnement\x20expire\x20dans\x20'+_0x584433+_0xb07280(0x322)+(_0x584433>0x1?'s':'')+'.',_0xb07280(0x38f));}!currentUser['subscription']&&currentUser[_0xb07280(0x1a8)]<0xa&&currentUser[_0xb07280(0x35c)]<0x3&&showNotification(_0xb07280(0x23e),_0xb07280(0x38f));}function loadCustomPrompts(_0x4d8514){const _0x36b91e=_0x4a59ac;Array[_0x36b91e(0x2ae)](_0x4d8514)&&_0x4d8514[_0x36b91e(0x207)](_0x23dfee=>{!prompts[_0x23dfee['id']]&&(prompts[_0x23dfee['id']]=_0x23dfee);});}function logout(){const _0x50baf7=_0x4a59ac;currentUser&&syncUserData(),currentUser=null,updateUIForLoggedOutUser(),showNotification(_0x50baf7(0x300),_0x50baf7(0x365)),clearLoginInfo();}async function resetFreeCreditsIfNeeded(){const _0x540855=_0x4a59ac,_0x187134=new Date(),_0x31f3c4=new Date(currentUser[_0x540855(0x2dd)]);if(_0x187134[_0x540855(0x2c7)]()-_0x31f3c4[_0x540855(0x2c7)]()>=0x18*0x3c*0x3c*0x3e8){const _0x57042=currentUser[_0x540855(0x35c)];currentUser[_0x540855(0x35c)]=FREE_CREDITS_PER_DAY,currentUser[_0x540855(0x2dd)]=_0x187134[_0x540855(0x16f)](),await syncUserData(),document[_0x540855(0x1db)](_0x540855(0x35c))[_0x540855(0x283)]=currentUser[_0x540855(0x35c)];const _0x5f61c8=currentUser[_0x540855(0x35c)]-_0x57042;_0x5f61c8>0x0&&showNotification(_0x5f61c8+_0x540855(0x182),'success');}}async function checkModelAccess(){const _0x46074d=_0x4a59ac,_0x10b1e3=document[_0x46074d(0x1db)](_0x46074d(0x359))[_0x46074d(0x28b)],_0x265c3d=document[_0x46074d(0x1db)]('imageSizeSelect');_0x265c3d[_0x46074d(0x349)][_0x46074d(0x293)]=isImageGenerationModel(_0x10b1e3)?_0x46074d(0x2f7):'none';if(isImageGenerationModel(_0x10b1e3)){if(!hasValidSubscription()&&currentUser['paidCredits']<0x5&&currentUser[_0x46074d(0x35c)]<0x5){showPaymentNotification(_0x46074d(0x275)),document[_0x46074d(0x1db)](_0x46074d(0x359))['value']=_0x46074d(0x20f),_0x265c3d['style'][_0x46074d(0x293)]=_0x46074d(0x24a);return;}}else![_0x46074d(0x20f),_0x46074d(0x218)][_0x46074d(0x192)](_0x10b1e3)&&!hasValidSubscription()&&currentUser[_0x46074d(0x1a8)]<=0x0&&(showPaymentNotification(_0x46074d(0x250)),document[_0x46074d(0x1db)](_0x46074d(0x359))[_0x46074d(0x28b)]=_0x46074d(0x20f));}async function handleFileUpload(_0x109032){const _0x24e1bf=_0x4a59ac,_0x25fdb1=_0x109032['target'][_0x24e1bf(0x265)];for(let _0xaf1f4b=0x0;_0xaf1f4b<_0x25fdb1[_0x24e1bf(0x1d9)];_0xaf1f4b++){const _0x1851e2=_0x25fdb1[_0xaf1f4b];if(_0x1851e2[_0x24e1bf(0x308)]===_0x24e1bf(0x30f)||_0x1851e2['type']==='application/msword')try{const _0x201d95=await convertWordToText(_0x1851e2);pinnedFiles[_0x24e1bf(0x378)]({'name':_0x1851e2[_0x24e1bf(0x360)][_0x24e1bf(0x2d1)](/\.[^/.]+$/,'')+_0x24e1bf(0x34d),'type':'text/plain','content':_0x201d95}),updatePinnedFiles(),importedFilesCount++,await db[_0x24e1bf(0x315)](_0x24e1bf(0x1a0)+currentUser[_0x24e1bf(0x1aa)])[_0x24e1bf(0x1ce)]({'importedFilesCount':importedFilesCount});}catch(_0x515525){console[_0x24e1bf(0x287)]('Erreur\x20lors\x20de\x20la\x20conversion\x20du\x20fichier\x20Word\x20:',_0x515525),showNotification(_0x24e1bf(0x285),'error');}else(_0x1851e2[_0x24e1bf(0x308)][_0x24e1bf(0x2eb)]('image/')||_0x1851e2[_0x24e1bf(0x308)]==='application/pdf')&&(pinnedFiles['push'](_0x1851e2),updatePinnedFiles());}}function convertWordToText(_0x5ae724){return new Promise((_0x23598e,_0x480b55)=>{const _0x487766=_0xf473,_0x525027=new FileReader();_0x525027[_0x487766(0x20a)]=function(_0x368739){const _0x4bfaf3=_0x487766,_0x4dd7b5=_0x368739[_0x4bfaf3(0x2cf)][_0x4bfaf3(0x162)];mammoth['extractRawText']({'arrayBuffer':_0x4dd7b5})[_0x4bfaf3(0x206)](function(_0xc1a646){const _0x537dc6=_0x4bfaf3;_0x23598e(_0xc1a646[_0x537dc6(0x28b)]);})['catch'](function(_0x2ecc18){_0x480b55(_0x2ecc18);});},_0x525027['readAsArrayBuffer'](_0x5ae724);});}function updatePinnedFiles(){const _0x56da78=_0x4a59ac,_0x37a3c8=document[_0x56da78(0x1db)](_0x56da78(0x1d6));_0x37a3c8['innerHTML']='',pinnedFiles['forEach']((_0x546852,_0x422626)=>{const _0x5710d5=_0x56da78,_0x5b3e84=document[_0x5710d5(0x1b5)](_0x5710d5(0x17b));_0x5b3e84[_0x5710d5(0x237)]='pinned-item',_0x5b3e84[_0x5710d5(0x310)]=_0x5710d5(0x229)+(_0x546852[_0x5710d5(0x308)][_0x5710d5(0x2eb)](_0x5710d5(0x1f2))?_0x5710d5(0x32a):'📄')+_0x5710d5(0x2b3)+_0x546852[_0x5710d5(0x360)]+'\x22>'+_0x546852[_0x5710d5(0x360)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedFile('+_0x422626+')\x22>❌</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x37a3c8['appendChild'](_0x5b3e84);});}function removePinnedFile(_0x4f90bb){const _0x327fcf=_0x4a59ac;pinnedFiles[_0x327fcf(0x2bc)](_0x4f90bb,0x1),updatePinnedFiles();}function createPinnedFilesElement(_0x23c819){const _0x31da7b=_0x4a59ac,_0x5af393=document[_0x31da7b(0x1b5)](_0x31da7b(0x17b));return _0x5af393[_0x31da7b(0x237)]=_0x31da7b(0x350),_0x23c819['forEach'](_0x5094cc=>{const _0x315a77=_0x31da7b,_0x43f69f=document[_0x315a77(0x1b5)](_0x315a77(0x17b));_0x43f69f[_0x315a77(0x237)]='pinned-file';if(_0x5094cc['type'][_0x315a77(0x2eb)](_0x315a77(0x1f2))){const _0x3bfcb1=document['createElement'](_0x315a77(0x1da));_0x3bfcb1['src']=URL[_0x315a77(0x2df)](_0x5094cc),_0x3bfcb1[_0x315a77(0x332)]=_0x5094cc['name'],_0x3bfcb1[_0x315a77(0x237)]=_0x315a77(0x183),_0x43f69f[_0x315a77(0x1ba)](_0x3bfcb1);}else{const _0x40a09b=document[_0x315a77(0x1b5)](_0x315a77(0x1d1));_0x40a09b[_0x315a77(0x237)]=_0x315a77(0x2cd),_0x40a09b[_0x315a77(0x283)]=_0x5094cc[_0x315a77(0x308)][_0x315a77(0x2eb)](_0x315a77(0x163))?'📄':'📎',_0x43f69f['appendChild'](_0x40a09b);}const _0x362f07=document[_0x315a77(0x1b5)](_0x315a77(0x1d1));_0x362f07['className']=_0x315a77(0x234),_0x362f07[_0x315a77(0x283)]=_0x5094cc['name'],_0x43f69f['appendChild'](_0x362f07),_0x5af393['appendChild'](_0x43f69f);}),_0x5af393;}function createPinnedResponsesElement(_0x4d34f7){const _0x1756d7=_0x4a59ac,_0x3013d1=document[_0x1756d7(0x1b5)]('div');return _0x3013d1[_0x1756d7(0x237)]=_0x1756d7(0x2bb),_0x4d34f7[_0x1756d7(0x207)](_0x3a7ab6=>{const _0x4ffb97=_0x1756d7,_0x57c35b=document[_0x4ffb97(0x1b5)](_0x4ffb97(0x17b));_0x57c35b[_0x4ffb97(0x237)]=_0x4ffb97(0x25e);const _0x33ed12=document[_0x4ffb97(0x1b5)](_0x4ffb97(0x1d1));_0x33ed12[_0x4ffb97(0x237)]='response-icon',_0x33ed12['textContent']='💬';const _0x4d812f=document['createElement'](_0x4ffb97(0x1d1));_0x4d812f['className']=_0x4ffb97(0x200),_0x4d812f[_0x4ffb97(0x283)]=_0x3a7ab6['displayText'],_0x57c35b[_0x4ffb97(0x1ba)](_0x33ed12),_0x57c35b[_0x4ffb97(0x1ba)](_0x4d812f),_0x3013d1[_0x4ffb97(0x1ba)](_0x57c35b);}),_0x3013d1;}function createPinnedPromptElement(_0x165658){const _0x3456d3=_0x4a59ac,_0x5e303e=document[_0x3456d3(0x1b5)](_0x3456d3(0x17b));_0x5e303e['className']=_0x3456d3(0x277);const _0x42a2eb=document['createElement'](_0x3456d3(0x17b));_0x42a2eb[_0x3456d3(0x237)]=_0x3456d3(0x31d);const _0x8cfa52=document[_0x3456d3(0x1b5)](_0x3456d3(0x1d1));_0x8cfa52[_0x3456d3(0x237)]=_0x3456d3(0x3a7),_0x8cfa52[_0x3456d3(0x283)]='🤖';const _0x8b1792=document['createElement']('span');return _0x8b1792[_0x3456d3(0x237)]=_0x3456d3(0x2fd),_0x8b1792['textContent']=_0x165658[_0x3456d3(0x31c)],_0x42a2eb[_0x3456d3(0x1ba)](_0x8cfa52),_0x42a2eb['appendChild'](_0x8b1792),_0x5e303e[_0x3456d3(0x1ba)](_0x42a2eb),_0x5e303e;}function createModelHeader(_0x33146b){const _0x2db928=_0x4a59ac,_0x16672a={'gemini-1.5-flash':_0x2db928(0x27b),'gemini-1.5-pro':'Gemini\x201.5\x20Pro','gemini-1.5-pro-latest':_0x2db928(0x34c),'gemini-1.0-pro':_0x2db928(0x2e6),'recraft-realistic':_0x2db928(0x2aa),'recraft-digital':_0x2db928(0x28a),'recraft-vector':_0x2db928(0x210)},_0xfa53c3=_0x16672a[_0x33146b]||_0x33146b;return _0x2db928(0x2b5)+(isImageGenerationModel(_0x33146b)?'fas\x20fa-image':_0x2db928(0x1d7))+_0x2db928(0x1fa)+_0xfa53c3+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20';}async function sendMessage(){const _0x3bbf8c=_0x4a59ac;if(!currentUser){showNotification('Veuillez\x20vous\x20connecter\x20pour\x20envoyer\x20des\x20messages.',_0x3bbf8c(0x287));return;}const _0x1f86b9=document[_0x3bbf8c(0x1db)](_0x3bbf8c(0x27d))['value']['trim'](),_0x15509e=document[_0x3bbf8c(0x1db)]('modelSelect')[_0x3bbf8c(0x28b)];if(!_0x1f86b9&&pinnedFiles[_0x3bbf8c(0x1d9)]===0x0&&pinnedResponses[_0x3bbf8c(0x1d9)]===0x0&&!pinnedPrompt){showNotification(_0x3bbf8c(0x303),_0x3bbf8c(0x287));return;}let _0xa709e1=_0x1f86b9;pinnedPrompt&&(_0xa709e1=pinnedPrompt[_0x3bbf8c(0x308)]==='image'?pinnedPrompt[_0x3bbf8c(0x2c5)]+_0x3bbf8c(0x375)+_0x1f86b9:pinnedPrompt[_0x3bbf8c(0x2c5)]+'\x0a\x0a'+_0x1f86b9);if(isImageGenerationModel(_0x15509e)){try{const _0xc686ac=await canGenerateImage();if(!_0xc686ac[_0x3bbf8c(0x381)]){showPaymentNotification(_0xc686ac[_0x3bbf8c(0x358)]);return;}const _0x273329=document['createElement'](_0x3bbf8c(0x17b));_0x273329[_0x3bbf8c(0x237)]='message\x20ai-message',_0x273329['innerHTML']=_0x3bbf8c(0x222)+createModelHeader(_0x15509e)+_0x3bbf8c(0x30c),document[_0x3bbf8c(0x1db)](_0x3bbf8c(0x32b))[_0x3bbf8c(0x1ba)](_0x273329);const _0x2e1c57=document[_0x3bbf8c(0x1db)](_0x3bbf8c(0x292))[_0x3bbf8c(0x28b)],_0x1592b6=getRecraftStyle(_0x15509e),_0x3fc889=await fetch('https://api.recraft.ai/api/v2/generate',{'method':_0x3bbf8c(0x344),'headers':{'Content-Type':_0x3bbf8c(0x1d2),'Authorization':_0x3bbf8c(0x19d)+RECRAFT_API_KEY},'body':JSON[_0x3bbf8c(0x385)]({'prompt':_0xa709e1,'style':_0x1592b6,'size':_0x2e1c57})});if(!_0x3fc889['ok'])throw new Error(_0x3bbf8c(0x1f0));const _0x1768c0=await _0x3fc889[_0x3bbf8c(0x1b3)](),_0x221e94=_0x1768c0[_0x3bbf8c(0x2b1)][0x0]['url'];_0x273329[_0x3bbf8c(0x310)]=_0x3bbf8c(0x222)+createModelHeader(_0x15509e)+_0x3bbf8c(0x321)+_0x221e94+'\x22\x20alt=\x22Image\x20générée\x22\x20style=\x22max-width:\x20100%;\x20border-radius:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Image\x20générée\x20à\x20partir\x20du\x20prompt\x20:\x20\x22'+_0xa709e1+_0x3bbf8c(0x2be)+_0x1592b6[_0x3bbf8c(0x2d1)]('_','\x20')[_0x3bbf8c(0x1cd)]()+_0x3bbf8c(0x356)+_0x2e1c57+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0xc686ac['useFreeGeneration']?_0x3bbf8c(0x3a3):'Génération\x20payante\x20(5\x20crédits)')+_0x3bbf8c(0x31b)+_0x221e94+_0x3bbf8c(0x343)+_0x221e94+_0x3bbf8c(0x297)+_0x221e94+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-share-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';if(_0xc686ac[_0x3bbf8c(0x189)]){await incrementImageGenerationCount(currentUser[_0x3bbf8c(0x1aa)]);const _0x234a44=await getImageGenerationCount(currentUser['username']);showNotification('Image\x20générée\x20avec\x20succès!\x20Il\x20vous\x20reste\x20'+(0x5-_0x234a44)+_0x3bbf8c(0x1eb),'success');}else await updateCredits(_0x15509e,0x5),showNotification(_0x3bbf8c(0x23a),_0x3bbf8c(0x365));}catch(_0x454c85){console['error'](_0x3bbf8c(0x26d),_0x454c85),showNotification('Erreur\x20lors\x20de\x20la\x20génération\x20de\x20l\x27image.\x20Veuillez\x20réessayer.',_0x3bbf8c(0x287));}finally{document['getElementById'](_0x3bbf8c(0x27d))[_0x3bbf8c(0x28b)]='',resetTextareaHeight(),pinnedPrompt=null,updatePinnedItems();}return;}let _0x25fba5=0x1;_0x25fba5+=pinnedFiles[_0x3bbf8c(0x3ae)](_0x485598=>_0x485598[_0x3bbf8c(0x308)]!==_0x3bbf8c(0x1fc))[_0x3bbf8c(0x1d9)],_0x25fba5+=pinnedResponses[_0x3bbf8c(0x1d9)];if(!hasValidSubscription()){if(_0x15509e===_0x3bbf8c(0x20f)){if(currentUser[_0x3bbf8c(0x1a8)]<_0x25fba5&&currentUser[_0x3bbf8c(0x35c)]<_0x25fba5){showPaymentNotification(_0x3bbf8c(0x1a5));return;}}else{if(!['gemini-1.0-pro'][_0x3bbf8c(0x192)](_0x15509e)&&currentUser[_0x3bbf8c(0x1a8)]<_0x25fba5){showPaymentNotification('Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20payants\x20pour\x20ce\x20modèle\x20avancé.');return;}}}const _0x56bbce=[...pinnedFiles],_0x85855b=[...pinnedResponses],_0x379e3a=pinnedPrompt;pinnedFiles=[],pinnedResponses=[],pinnedPrompt=null,updatePinnedItems();const _0x1fb179=addMessageToChat(_0x3bbf8c(0x38d),_0x1f86b9,_0x56bbce,_0x85855b,_0x379e3a),_0x270ea6=document['createElement']('div');_0x270ea6[_0x3bbf8c(0x237)]=_0x3bbf8c(0x2ab),_0x270ea6[_0x3bbf8c(0x310)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+createModelHeader(_0x15509e)+_0x3bbf8c(0x21c),document[_0x3bbf8c(0x1db)](_0x3bbf8c(0x32b))['appendChild'](_0x270ea6);try{const _0x5ce5d6=[];let _0x522dd7=buildConversationContext();await addFilesToParts(_0x5ce5d6,_0x56bbce),_0x85855b['forEach'](_0x3ee1f4=>{const _0x5fe92d=_0x3bbf8c;_0x522dd7+=_0x5fe92d(0x323)+_0x3ee1f4[_0x5fe92d(0x317)]+']\x0a';});_0x379e3a?(_0x522dd7+=_0x3bbf8c(0x38e)+_0x379e3a[_0x3bbf8c(0x31c)]+']\x0a',_0x379e3a[_0x3bbf8c(0x308)]===_0x3bbf8c(0x2f1)?_0x522dd7+=_0x3bbf8c(0x25c)+_0x1f86b9+'\x0a':_0x522dd7+=_0x379e3a[_0x3bbf8c(0x2c5)]+'\x0a\x0a'+_0x1f86b9+'\x0a'):_0x522dd7+=_0x1f86b9+'\x0a';_0xa709e1=_0x522dd7,_0x5ce5d6[_0x3bbf8c(0x378)]({'text':_0xa709e1});let _0x445e35,_0x4c7b89=0x0;const _0x1c7e54=0x3;while(_0x4c7b89<_0x1c7e54){try{const _0x548c6b=getNextApiKey();if(!_0x548c6b)throw new Error(_0x3bbf8c(0x204));genAI=new GoogleGenerativeAI(_0x548c6b),model=genAI['getGenerativeModel']({'model':_0x15509e,'systemInstruction':SYSTEM_INSTRUCTION});const _0x10a5f1=await model[_0x3bbf8c(0x37a)](_0x5ce5d6);_0x445e35=await _0x10a5f1[_0x3bbf8c(0x1a2)];break;}catch(_0x2a24dc){_0x4c7b89++,console[_0x3bbf8c(0x287)](_0x3bbf8c(0x233)+_0x4c7b89+'/'+_0x1c7e54+_0x3bbf8c(0x2ee),_0x2a24dc);if(_0x4c7b89===_0x1c7e54)throw new Error(_0x3bbf8c(0x1bc));const _0x498e54=Math[_0x3bbf8c(0x22d)](0x3e8*Math[_0x3bbf8c(0x348)](0x2,_0x4c7b89),0x1388);await new Promise(_0x528818=>setTimeout(_0x528818,_0x498e54));}}let _0x4e614a=_0x445e35[_0x3bbf8c(0x372)]();if(_0x15509e===_0x3bbf8c(0x218)||_0x15509e===_0x3bbf8c(0x20f)&&currentUser[_0x3bbf8c(0x1a8)]<_0x25fba5){const _0x1986a9=_0x4e614a['split'](/\s+/);_0x1986a9['length']>FREE_MODEL_MAX_RESPONSE&&(_0x4e614a=_0x1986a9[_0x3bbf8c(0x353)](0x0,FREE_MODEL_MAX_RESPONSE)[_0x3bbf8c(0x2fa)]('\x20')+'...(Utilisez\x20un\x20modèle\x20avancé\x20pour\x20avoir\x20la\x20suite\x20de\x20ma\x20réponse)',showNotification(_0x3bbf8c(0x2f8)+FREE_MODEL_MAX_RESPONSE+'\x20mots.',_0x3bbf8c(0x1a9)));}await animateText(_0x270ea6,_0x4e614a),currentConversation[_0x3bbf8c(0x378)]({'sender':'ai','content':_0x4e614a}),await updateCredits(_0x15509e,_0x25fba5),saveConversation();}catch(_0x49be90){console[_0x3bbf8c(0x287)]('Erreur\x20lors\x20de\x20la\x20génération\x20de\x20la\x20réponse:',_0x49be90),_0x270ea6[_0x3bbf8c(0x24f)](),showNotification(_0x3bbf8c(0x398)+_0x49be90[_0x3bbf8c(0x358)]+_0x3bbf8c(0x279),_0x3bbf8c(0x287));}finally{document[_0x3bbf8c(0x1db)]('userInput')[_0x3bbf8c(0x28b)]='',resetTextareaHeight(),resetScrollState();}}document[_0x4a59ac(0x309)](_0x4a59ac(0x2f0),initializeScrollListener);function resetPinnedItems(){pinnedFiles=[],pinnedResponses=[],pinnedPrompt=null,updatePinnedItems();}function buildConversationContext(){const _0x1c1a97=_0x4a59ac;let _0x5b92f7='';const _0x1a3da9=currentConversation[_0x1c1a97(0x353)](-0x5);return _0x1a3da9[_0x1c1a97(0x207)](_0x45d3b3=>{const _0x163fce=_0x1c1a97;_0x5b92f7+=(_0x45d3b3[_0x163fce(0x1ed)]===_0x163fce(0x38d)?'user':_0x163fce(0x2c0))+':\x20'+_0x45d3b3['content']+'\x0a',_0x45d3b3['files']&&_0x45d3b3[_0x163fce(0x265)][_0x163fce(0x207)](_0x39c2d9=>{const _0x3e6d4b=_0x163fce;_0x5b92f7+=_0x3e6d4b(0x2e7)+_0x39c2d9[_0x3e6d4b(0x360)]+']\x0a';}),_0x45d3b3['responses']&&_0x45d3b3['responses'][_0x163fce(0x207)](_0xea51dc=>{const _0x1c3388=_0x163fce;_0x5b92f7+=_0x1c3388(0x323)+_0xea51dc[_0x1c3388(0x317)]+']\x0a';}),_0x45d3b3['prompt']&&(_0x5b92f7+=_0x163fce(0x38e)+_0x45d3b3[_0x163fce(0x1cf)][_0x163fce(0x31c)]+']\x0a');}),_0x5b92f7;}async function addFilesToParts(_0x48bea2,_0x19475d){const _0x16922c=_0x4a59ac;for(const _0x4773b9 of _0x19475d){if(_0x4773b9['type']==='text/plain')_0x48bea2[_0x16922c(0x378)]({'text':_0x16922c(0x28f)+_0x4773b9[_0x16922c(0x2c5)]});else{const _0x388d27=await readFileAsBase64(_0x4773b9);_0x48bea2[_0x16922c(0x378)]({'inlineData':{'data':_0x388d27,'mimeType':_0x4773b9[_0x16922c(0x308)]}}),_0x48bea2[_0x16922c(0x378)]({'text':'Analyse\x20le\x20fichier\x20'+_0x4773b9[_0x16922c(0x360)]+'\x20('+_0x4773b9[_0x16922c(0x308)]+')\x20que\x20je\x20viens\x20de\x20t\x27envoyer.'});}}}async function validateCreditsAndModel(_0x2d6d86,_0x31dace){const _0x25df31=_0x4a59ac;if(_0x2d6d86==='gemini-exp-1206'){if(currentUser[_0x25df31(0x1a8)]>=_0x31dace)return showNotification(_0x25df31(0x21e),'info'),!![];else{if(currentUser[_0x25df31(0x35c)]>=_0x31dace)return showNotification('Utilisation\x20de\x20crédits\x20gratuits\x20pour\x20Gemini\x20Exp\x201206.',_0x25df31(0x1a9)),!![];}}else{if(!['gemini-1.0-pro'][_0x25df31(0x192)](_0x2d6d86)){if(currentUser[_0x25df31(0x1a8)]<_0x31dace)return showPaymentNotification('Vous\x20n\x27avez\x20pas\x20assez\x20de\x20crédits\x20payants\x20pour\x20ce\x20modèle\x20avancé.'),![];}else{if(currentUser['freeCredits']<_0x31dace&&currentUser[_0x25df31(0x1a8)]<_0x31dace)return showPaymentNotification(_0x25df31(0x1a5)),![];}}return!![];}async function processAndDisplayAIResponse(_0x3bc0b5,_0x1448fc,_0x5232a6){const _0x422fd0=_0x4a59ac;let _0x31eccd;if(_0x1448fc===_0x422fd0(0x218)||_0x1448fc===_0x422fd0(0x20f)&&currentUser[_0x422fd0(0x1a8)]<_0x5232a6){const _0x31144f=_0x3bc0b5['split'](/\s+/);_0x31144f['length']>FREE_MODEL_MAX_RESPONSE?(_0x3bc0b5=_0x31144f[_0x422fd0(0x353)](0x0,FREE_MODEL_MAX_RESPONSE)[_0x422fd0(0x2fa)]('\x20')+_0x422fd0(0x199),showNotification(_0x422fd0(0x2f8)+FREE_MODEL_MAX_RESPONSE+_0x422fd0(0x1d3),_0x422fd0(0x1a9)),_0x31eccd=addMessageToChat('ai',_0x3bc0b5),showUpgradeButton(_0x31eccd)):_0x31eccd=addMessageToChat('ai',_0x3bc0b5);}else _0x31eccd=addMessageToChat('ai',_0x3bc0b5);return _0x31eccd;}function updateConversation(_0x36f895,_0x250b84){const _0x2d5170=_0x4a59ac;currentConversation[_0x2d5170(0x378)]({'sender':_0x2d5170(0x38d),'content':_0x36f895}),currentConversation[_0x2d5170(0x378)]({'sender':'ai','content':_0x250b84});}async function handleImageGeneration(_0x2423c6,_0x427947,_0x2f8a49){const _0x4e1d77=_0x4a59ac;try{if(!_0x2f8a49[_0x4e1d77(0x381)]){showPaymentNotification(_0x2f8a49['message']);return;}const _0x2c5bf4=document[_0x4e1d77(0x1db)]('imageSizeSelect')[_0x4e1d77(0x28b)],_0x1550f8=getRecraftStyle(_0x427947),_0x3b7c1d=addLoadingMessage(_0x4e1d77(0x273)),_0x5e0ab4=await fetch('https://api.recraft.ai/api/v2/generate',{'method':_0x4e1d77(0x344),'headers':{'Content-Type':_0x4e1d77(0x1d2),'Authorization':_0x4e1d77(0x19d)+RECRAFT_API_KEY},'body':JSON['stringify']({'prompt':_0x2423c6,'style':_0x1550f8,'size':_0x2c5bf4,'n':0x1})});_0x3b7c1d[_0x4e1d77(0x24f)]();if(!_0x5e0ab4['ok'])throw new Error(_0x4e1d77(0x329)+_0x5e0ab4[_0x4e1d77(0x20e)]);const _0x31db22=await _0x5e0ab4['json']();if(!_0x31db22[_0x4e1d77(0x2b1)]||!_0x31db22[_0x4e1d77(0x2b1)][0x0]||!_0x31db22[_0x4e1d77(0x2b1)][0x0][_0x4e1d77(0x1df)])throw new Error(_0x4e1d77(0x22b));const _0x1c4e9b=_0x31db22[_0x4e1d77(0x2b1)][0x0][_0x4e1d77(0x1df)],_0x195046=document['createElement'](_0x4e1d77(0x17b));_0x195046[_0x4e1d77(0x237)]=_0x4e1d77(0x2ab),_0x195046[_0x4e1d77(0x310)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+_0x1c4e9b+'\x22\x20alt=\x22Image\x20générée\x22\x20style=\x22max-width:\x20100%;\x20border-radius:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Image\x20générée\x20à\x20partir\x20du\x20prompt\x20:\x20\x22'+_0x2423c6+_0x4e1d77(0x2be)+_0x1550f8[_0x4e1d77(0x2d1)]('_','\x20')['toUpperCase']()+_0x4e1d77(0x356)+_0x2c5bf4+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2f8a49[_0x4e1d77(0x189)]?_0x4e1d77(0x3a3):'Génération\x20payante\x20(5\x20crédits)')+_0x4e1d77(0x31b)+_0x1c4e9b+_0x4e1d77(0x343)+_0x1c4e9b+_0x4e1d77(0x297)+_0x1c4e9b+_0x4e1d77(0x25a),document['getElementById'](_0x4e1d77(0x32b))[_0x4e1d77(0x1ba)](_0x195046);if(_0x2f8a49[_0x4e1d77(0x189)]){await incrementImageGenerationCount(currentUser['username']);const _0x4bf6eb=await getImageGenerationCount(currentUser[_0x4e1d77(0x1aa)]);showNotification(_0x4e1d77(0x34a)+(0x5-_0x4bf6eb)+'\x20générations\x20gratuites\x20aujourd\x27hui.','success');}else await updateCredits(_0x427947,0x5),showNotification(_0x4e1d77(0x23a),_0x4e1d77(0x365));document['getElementById']('userInput')[_0x4e1d77(0x28b)]='',resetTextareaHeight();}catch(_0x45ba28){console[_0x4e1d77(0x287)](_0x4e1d77(0x341),_0x45ba28),showNotification(_0x4e1d77(0x1cc),_0x4e1d77(0x287));}}function createUserMessageElement(_0x1c0a7a,_0x1a7445,_0x23378b,_0x170cb3){const _0x5b59ff=_0x4a59ac,_0x42d6ee=document[_0x5b59ff(0x1b5)](_0x5b59ff(0x17b));_0x42d6ee[_0x5b59ff(0x237)]='message\x20user-message';_0x1a7445[_0x5b59ff(0x1d9)]>0x0&&_0x42d6ee[_0x5b59ff(0x1ba)](createPinnedFilesElement(_0x1a7445));_0x23378b[_0x5b59ff(0x1d9)]>0x0&&_0x42d6ee[_0x5b59ff(0x1ba)](createPinnedResponsesElement(_0x23378b));_0x170cb3&&_0x42d6ee[_0x5b59ff(0x1ba)](createPinnedPromptElement(_0x170cb3));if(_0x1c0a7a){const _0x1a6704=document[_0x5b59ff(0x1b5)]('p');_0x1a6704[_0x5b59ff(0x283)]=_0x1c0a7a,_0x42d6ee[_0x5b59ff(0x1ba)](_0x1a6704);}return _0x42d6ee;}function addLoadingMessage(_0x4d1a6e){const _0x2eb815=_0x4a59ac,_0x301e44=document['createElement']('div');return _0x301e44[_0x2eb815(0x237)]='message\x20ai-message\x20loading-message',_0x301e44[_0x2eb815(0x310)]=_0x2eb815(0x3b0)+_0x4d1a6e+_0x2eb815(0x25f),document['getElementById'](_0x2eb815(0x32b))['appendChild'](_0x301e44),_0x301e44;}async function downloadImage(_0x2de55f,_0x7e0cab){const _0x33975d=_0x4a59ac;try{const _0x84c3cb=await fetch(_0x2de55f),_0x4fb8c1=await _0x84c3cb[_0x33975d(0x1be)](),_0x305bf4=window[_0x33975d(0x221)]['createObjectURL'](_0x4fb8c1),_0x54deb9=document['createElement']('a');_0x54deb9['href']=_0x305bf4,_0x54deb9[_0x33975d(0x39e)]=_0x7e0cab,document[_0x33975d(0x35d)][_0x33975d(0x1ba)](_0x54deb9),_0x54deb9['click'](),document['body'][_0x33975d(0x280)](_0x54deb9),window[_0x33975d(0x221)][_0x33975d(0x33d)](_0x305bf4);}catch(_0x33d134){showNotification('Erreur\x20lors\x20du\x20téléchargement\x20de\x20l\x27image.',_0x33975d(0x287));}}function copyImage(_0x3bfabb){const _0x5b7a5c=_0x4a59ac;navigator[_0x5b7a5c(0x2f5)]['writeText'](_0x3bfabb)[_0x5b7a5c(0x206)](()=>showNotification(_0x5b7a5c(0x34b),_0x5b7a5c(0x365)))[_0x5b7a5c(0x2db)](()=>showNotification(_0x5b7a5c(0x327),_0x5b7a5c(0x287)));}function shareImage(_0x831022){const _0x24633b=_0x4a59ac;navigator['share']?navigator[_0x24633b(0x1fb)]({'title':'Image\x20générée\x20par\x20Eduque\x20moi','text':_0x24633b(0x2bd),'url':_0x831022})['then'](()=>showNotification(_0x24633b(0x38b),_0x24633b(0x365)))[_0x24633b(0x2db)](_0x54d09e=>{const _0x1ff597=_0x24633b;console[_0x1ff597(0x287)](_0x1ff597(0x1ee),_0x54d09e),showNotification('Erreur\x20lors\x20du\x20partage\x20de\x20l\x27image.',_0x1ff597(0x287));}):copyImage(_0x831022);}function pinResponse(_0x2e1f27){const _0x5cfe42=_0x4a59ac,_0x8f9eda=_0x2e1f27[_0x5cfe42(0x1bb)](_0x5cfe42(0x252))[_0x5cfe42(0x283)],_0x173747=_0x8f9eda[_0x5cfe42(0x1d9)]>0x32?_0x8f9eda[_0x5cfe42(0x1a1)](0x0,0x32)+_0x5cfe42(0x3b1):_0x8f9eda;pinnedResponses[_0x5cfe42(0x378)]({'text':_0x8f9eda,'displayText':_0x173747}),updatePinnedItems();}function updatePinnedItems(){const _0x2a378c=_0x4a59ac,_0x2519a3=document[_0x2a378c(0x1db)]('pinnedItems');_0x2519a3['innerHTML']='',pinnedFiles[_0x2a378c(0x207)]((_0xffb827,_0x57f402)=>{const _0x5c2c91=_0x2a378c,_0x4edcc6=document[_0x5c2c91(0x1b5)]('div');_0x4edcc6[_0x5c2c91(0x237)]=_0x5c2c91(0x195),_0x4edcc6[_0x5c2c91(0x242)](_0x5c2c91(0x268),_0x5c2c91(0x2a5)),_0x4edcc6[_0x5c2c91(0x310)]=_0x5c2c91(0x229)+(_0xffb827[_0x5c2c91(0x308)][_0x5c2c91(0x2eb)](_0x5c2c91(0x1f2))?_0x5c2c91(0x32a):'📄')+_0x5c2c91(0x2b3)+_0xffb827[_0x5c2c91(0x360)]+'\x22>'+_0xffb827[_0x5c2c91(0x360)]+_0x5c2c91(0x1d0)+_0x57f402+_0x5c2c91(0x2ad),_0x2519a3[_0x5c2c91(0x1ba)](_0x4edcc6);}),pinnedResponses['forEach']((_0x1ab2a2,_0x32505b)=>{const _0x4f6fed=_0x2a378c,_0x2e92b9=document[_0x4f6fed(0x1b5)](_0x4f6fed(0x17b));_0x2e92b9['className']='pinned-item',_0x2e92b9[_0x4f6fed(0x242)]('data-type',_0x4f6fed(0x1a2)),_0x2e92b9[_0x4f6fed(0x310)]=_0x4f6fed(0x2a1)+_0x1ab2a2['text']+'\x22>'+_0x1ab2a2[_0x4f6fed(0x317)]+_0x4f6fed(0x202)+_0x32505b+_0x4f6fed(0x2ad),_0x2519a3[_0x4f6fed(0x1ba)](_0x2e92b9);});if(pinnedPrompt){const _0x1b4da3=document[_0x2a378c(0x1b5)]('div');_0x1b4da3[_0x2a378c(0x237)]=_0x2a378c(0x195),_0x1b4da3[_0x2a378c(0x242)](_0x2a378c(0x268),_0x2a378c(0x1cf)),_0x1b4da3[_0x2a378c(0x310)]=_0x2a378c(0x29c)+pinnedPrompt['title']+'\x22>'+pinnedPrompt['title']+_0x2a378c(0x1e9),_0x2519a3['appendChild'](_0x1b4da3);}}function removePinnedItem(_0x1c28f5,_0x477ba4){const _0x10702a=_0x4a59ac;if(_0x1c28f5===_0x10702a(0x2a5))pinnedFiles['splice'](_0x477ba4,0x1);else{if(_0x1c28f5===_0x10702a(0x1a2))pinnedResponses[_0x10702a(0x2bc)](_0x477ba4,0x1);else _0x1c28f5===_0x10702a(0x1cf)&&(pinnedPrompt=null);}updatePinnedItems();}function replyToMessage(_0x5ece39){const _0x56dbf8=_0x4a59ac,_0xbf79f2=_0x5ece39[_0x56dbf8(0x1bb)](_0x56dbf8(0x252))[_0x56dbf8(0x283)],_0x11be07=document['getElementById']('userInput');_0x11be07[_0x56dbf8(0x28b)]='>\x20'+_0xbf79f2+'\x0a\x0a',_0x11be07[_0x56dbf8(0x29d)](),_0x11be07['setSelectionRange'](_0x11be07[_0x56dbf8(0x28b)][_0x56dbf8(0x1d9)],_0x11be07['value']['length']);}function readFileAsBase64(_0x22de92){return new Promise((_0x48f16b,_0x50b6ad)=>{const _0x10f986=_0xf473,_0x4ecee5=new FileReader();_0x4ecee5[_0x10f986(0x20a)]=()=>_0x48f16b(_0x4ecee5[_0x10f986(0x162)][_0x10f986(0x302)](',')[0x1]),_0x4ecee5[_0x10f986(0x328)]=_0x50b6ad,_0x4ecee5[_0x10f986(0x30e)](_0x22de92);});}function hasEnoughCredits(_0x433a1e,_0x3fb63b){const _0x49fc05=_0x4a59ac,_0x3f2afb=_0x3fb63b>0x0?_0x3fb63b:0x1;return _0x433a1e===_0x49fc05(0x20f)||_0x433a1e===_0x49fc05(0x218)?currentUser[_0x49fc05(0x35c)]>=_0x3f2afb||currentUser[_0x49fc05(0x1a8)]>=_0x3f2afb||hasValidSubscription():currentUser[_0x49fc05(0x1a8)]>=_0x3f2afb||hasValidSubscription();}async function updateCredits(_0x5f08c1,_0x3d7ab8){const _0x20e18f=_0x4a59ac;if(hasValidSubscription()&&!isImageGenerationModel(_0x5f08c1))return;const _0x1e2d9e=db['ref'](_0x20e18f(0x1a0)+currentUser[_0x20e18f(0x1aa)]);try{await _0x1e2d9e[_0x20e18f(0x28c)](_0x55b8ca=>{const _0x1e4f17=_0x20e18f;if(_0x55b8ca){if(isImageGenerationModel(_0x5f08c1)){if(hasValidSubscription()){const _0x207d5b=_0x55b8ca[_0x1e4f17(0x1c8)]?.[_0x1e4f17(0x3a6)]||0x0;_0x207d5b>=0x5&&(_0x55b8ca[_0x1e4f17(0x1a8)]>=0x5?_0x55b8ca[_0x1e4f17(0x1a8)]-=0x5:_0x55b8ca[_0x1e4f17(0x35c)]=Math[_0x1e4f17(0x395)](0x0,_0x55b8ca[_0x1e4f17(0x35c)]-0x5));}else _0x55b8ca['paidCredits']>=0x5?_0x55b8ca[_0x1e4f17(0x1a8)]-=0x5:_0x55b8ca[_0x1e4f17(0x35c)]=Math[_0x1e4f17(0x395)](0x0,_0x55b8ca[_0x1e4f17(0x35c)]-0x5);}else{if(!hasValidSubscription()){if(_0x5f08c1===_0x1e4f17(0x20f))_0x55b8ca['paidCredits']>=_0x3d7ab8?_0x55b8ca[_0x1e4f17(0x1a8)]-=_0x3d7ab8:_0x55b8ca['freeCredits']-=_0x3d7ab8;else{if(_0x5f08c1===_0x1e4f17(0x218)){if(_0x55b8ca['freeCredits']>=_0x3d7ab8)_0x55b8ca[_0x1e4f17(0x35c)]-=_0x3d7ab8;else{const _0x1d9448=_0x3d7ab8-_0x55b8ca['freeCredits'];_0x55b8ca['freeCredits']=0x0,_0x55b8ca[_0x1e4f17(0x1a8)]=Math['max'](0x0,_0x55b8ca[_0x1e4f17(0x1a8)]-_0x1d9448);}}else _0x55b8ca['paidCredits']=Math['max'](0x0,_0x55b8ca[_0x1e4f17(0x1a8)]-_0x3d7ab8);}}}_0x55b8ca[_0x1e4f17(0x35c)]=Math[_0x1e4f17(0x395)](0x0,_0x55b8ca[_0x1e4f17(0x35c)]),_0x55b8ca['paidCredits']=Math[_0x1e4f17(0x395)](0x0,_0x55b8ca[_0x1e4f17(0x1a8)]);}return _0x55b8ca;});const _0x267bb5=await _0x1e2d9e[_0x20e18f(0x3ab)](_0x20e18f(0x28b)),_0xc184e4=_0x267bb5['val']();_0xc184e4&&(currentUser['freeCredits']=_0xc184e4[_0x20e18f(0x35c)],currentUser['paidCredits']=_0xc184e4[_0x20e18f(0x1a8)],document[_0x20e18f(0x1db)](_0x20e18f(0x35c))['textContent']=currentUser[_0x20e18f(0x35c)],document[_0x20e18f(0x1db)](_0x20e18f(0x1a8))[_0x20e18f(0x283)]=currentUser[_0x20e18f(0x1a8)],currentUser[_0x20e18f(0x35c)]===0x0&&currentUser[_0x20e18f(0x1a8)]<0x5&&showNotification(_0x20e18f(0x243),_0x20e18f(0x38f)));}catch(_0x407054){console[_0x20e18f(0x287)]('Erreur\x20lors\x20de\x20la\x20mise\x20à\x20jour\x20des\x20crédits:',_0x407054),showNotification(_0x20e18f(0x2a9),_0x20e18f(0x287));}}async function addCreditsToUser(_0x451a09){const _0x26c492=_0x4a59ac,_0x49fdb5=db[_0x26c492(0x315)](_0x26c492(0x1a0)+currentUser[_0x26c492(0x1aa)]);await _0x49fdb5[_0x26c492(0x28c)](_0x1dfc67=>{return _0x1dfc67&&(_0x1dfc67['paidCredits']+=_0x451a09),_0x1dfc67;}),currentUser[_0x26c492(0x1a8)]=(await _0x49fdb5[_0x26c492(0x19e)]('paidCredits')[_0x26c492(0x3ab)](_0x26c492(0x28b)))[_0x26c492(0x211)](),document[_0x26c492(0x1db)](_0x26c492(0x1a8))[_0x26c492(0x283)]=currentUser['paidCredits'];}function copyResponse(_0x350bb6){const _0xebcc43=_0x4a59ac,_0x2fa2dc=_0x350bb6[_0xebcc43(0x1bb)](_0xebcc43(0x252))['textContent'];navigator[_0xebcc43(0x2f5)]['writeText'](_0x2fa2dc)[_0xebcc43(0x206)](()=>{const _0x4bd4a0=_0xebcc43;showNotification(_0x4bd4a0(0x247),_0x4bd4a0(0x365));});}async function exportResponse(_0x321f1f,_0x3bb225){const _0x346045=_0x4a59ac,_0x7394b4=_0x321f1f[_0x346045(0x1bb)](_0x346045(0x252))['textContent'];if(_0x3bb225==='word'){const _0x5403c4=await generateWordDoc(_0x7394b4);saveAs(_0x5403c4,_0x346045(0x256));}else{if(_0x3bb225==='pdf'){const _0x7a82e2=await generatePDF(_0x7394b4);saveAs(_0x7a82e2,_0x346045(0x296));}}showNotification(_0x346045(0x2a3)+_0x3bb225['toUpperCase']()+_0x346045(0x2a2),_0x346045(0x365));}async function generateWordDoc(_0x145633){const _0x13d7eb=_0x4a59ac,_0xe993ec=_0x13d7eb(0x3ad)+_0x145633+_0x13d7eb(0x1e8),_0x38da2c=new PizZip();_0x38da2c[_0x13d7eb(0x2a5)](_0x13d7eb(0x2ca),_0xe993ec);const _0x27eb71=await _0x38da2c[_0x13d7eb(0x2c9)]({'type':_0x13d7eb(0x1be),'mimeType':_0x13d7eb(0x30f)});return _0x27eb71;}function generatePDF(_0x21b84d){const _0x36bec7=_0x4a59ac,{jsPDF:_0x2d87fa}=window[_0x36bec7(0x1b8)],_0x353f13=new _0x2d87fa();_0x353f13['setFontSize'](0x12),_0x353f13['text']('',0x14,0x14),_0x353f13[_0x36bec7(0x235)](0xc);const _0x5d5cad=_0x353f13[_0x36bec7(0x219)](_0x21b84d,0xaa);let _0x4ee53e=0x1e;const _0x4f9b9c=_0x353f13[_0x36bec7(0x2dc)][_0x36bec7(0x191)][_0x36bec7(0x274)];for(let _0x1690df=0x0;_0x1690df<_0x5d5cad[_0x36bec7(0x1d9)];_0x1690df++){_0x4ee53e>_0x4f9b9c-0x14&&(_0x353f13[_0x36bec7(0x376)](),_0x4ee53e=0x14),_0x353f13[_0x36bec7(0x372)](_0x5d5cad[_0x1690df],0x14,_0x4ee53e),_0x4ee53e+=0x7;}return _0x353f13[_0x36bec7(0x1e2)]('blob');}function shareResponse(_0x1968eb){const _0x5b72b9=_0x4a59ac,_0x16c9b2=_0x1968eb[_0x5b72b9(0x1bb)](_0x5b72b9(0x252))[_0x5b72b9(0x283)];navigator['share']?navigator[_0x5b72b9(0x1fb)]({'title':'','text':_0x16c9b2})['then'](()=>{const _0x20a787=_0x5b72b9;showNotification(_0x20a787(0x220),'success');})[_0x5b72b9(0x2db)](_0x21b551=>{const _0x544f0c=_0x5b72b9;console[_0x544f0c(0x287)](_0x544f0c(0x1ee),_0x21b551),showNotification(_0x544f0c(0x34e),_0x544f0c(0x287));}):showNotification('Le\x20partage\x20n\x27est\x20pas\x20pris\x20en\x20charge\x20sur\x20votre\x20appareil',_0x5b72b9(0x287));}function hasValidSubscription(){const _0x783377=_0x4a59ac;if(!currentUser[_0x783377(0x261)]||!currentUser['subscriptionEndDate'])return![];return new Date()<new Date(currentUser['subscriptionEndDate']);}function buySubscription(){const _0x190f5b=_0x4a59ac,_0x250713=document[_0x190f5b(0x1db)]('subscriptionSelect')[_0x190f5b(0x28b)];if(!_0x250713){showNotification('Veuillez\x20sélectionner\x20un\x20forfait.',_0x190f5b(0x287));return;}const _0x5dd132={'24h':0x1f4,'3d':0x4b0,'7d':0x960,'30d':0x1f40,'3m':0x4e20},_0x4282b5=_0x5dd132[_0x250713];var _0x151d89=FedaPay[_0x190f5b(0x2c8)]({'public_key':'pk_live_TfSz212W0xSMKK7oPEogkFmp','transaction':{'amount':_0x4282b5,'description':_0x190f5b(0x1e0)+_0x250713+_0x190f5b(0x2de)},'customer':{'email':_0x190f5b(0x22f)},'onComplete':async function(_0x79cdfc){const _0x338a69=_0x190f5b;if(_0x79cdfc[_0x338a69(0x1e5)]===FedaPay[_0x338a69(0x325)]){const _0x2f9067={'id':_0x79cdfc['id'],'description':_0x338a69(0x1e0)+_0x250713+'\x20pour\x20Eduque\x20moi','amount':_0x4282b5};await activateSubscription(_0x250713),showInvoiceDetails(_0x2f9067),showNotification(_0x338a69(0x1e1)+_0x250713+'\x20activé\x20avec\x20succès\x20!','success'),await checkFirstPurchaseAndRewardReferrer(currentUser[_0x338a69(0x1aa)],_0x4282b5);}else showNotification(_0x338a69(0x21d),_0x338a69(0x287));}});_0x151d89['open']();}async function activateSubscription(_0x5d31c5){const _0x3cf5bc=_0x4a59ac,_0x3255f3={'24h':0x1,'3d':0x3,'7d':0x7,'30d':0x1e,'3m':0x5a},_0x1843a6=_0x3255f3[_0x5d31c5],_0x31c752=new Date();_0x31c752[_0x3cf5bc(0x29f)](_0x31c752[_0x3cf5bc(0x180)]()+_0x1843a6),currentUser[_0x3cf5bc(0x261)]=_0x5d31c5,currentUser[_0x3cf5bc(0x17f)]=_0x31c752[_0x3cf5bc(0x16f)](),await syncUserData(),document[_0x3cf5bc(0x1db)](_0x3cf5bc(0x261))[_0x3cf5bc(0x283)]=_0x5d31c5;}function buyCredits(){const _0xfd74fd=_0x4a59ac,_0x14202b=document[_0xfd74fd(0x1db)](_0xfd74fd(0x193))[_0xfd74fd(0x28b)];if(!_0x14202b){showNotification('Veuillez\x20sélectionner\x20un\x20pack\x20de\x20crédits.',_0xfd74fd(0x287));return;}const _0x27afbe={'10':0xc8,'100':0x3e8,'500':0x1194,'1000':0x1f40},_0x5c4e22=_0x27afbe[_0x14202b];var _0x4e639f=FedaPay[_0xfd74fd(0x2c8)]({'public_key':_0xfd74fd(0x2c4),'transaction':{'amount':_0x5c4e22,'description':_0xfd74fd(0x1f4)+_0x14202b+_0xfd74fd(0x298)},'customer':{'email':_0xfd74fd(0x22f)},'onComplete':async function(_0x366d60){const _0x46cbc9=_0xfd74fd;if(_0x366d60[_0x46cbc9(0x1e5)]===FedaPay[_0x46cbc9(0x325)]){const _0x25085d={'id':_0x366d60['id'],'description':_0x46cbc9(0x1f4)+_0x14202b+_0x46cbc9(0x298),'amount':_0x5c4e22};await addCreditsToUser(parseInt(_0x14202b)),showInvoiceDetails(_0x25085d),showNotification(_0x14202b+'\x20crédits\x20ont\x20été\x20ajoutés\x20à\x20votre\x20compte.',_0x46cbc9(0x365)),await checkFirstPurchaseAndRewardReferrer(currentUser[_0x46cbc9(0x1aa)],_0x5c4e22);}else showNotification(_0x46cbc9(0x21d),_0x46cbc9(0x287));}});_0x4e639f[_0xfd74fd(0x22e)]();}async function checkFirstPurchaseAndRewardReferrer(_0x3005ee,_0x1dc528){const _0x1c1297=_0x4a59ac,_0xcffbe7=db[_0x1c1297(0x315)](_0x1c1297(0x1a0)+_0x3005ee),_0x14db63=await _0xcffbe7['once'](_0x1c1297(0x28b)),_0x2346bb=_0x14db63[_0x1c1297(0x211)]();if(_0x2346bb&&!_0x2346bb['firstPurchase']){await _0xcffbe7['update']({'firstPurchase':!![]});if(_0x2346bb[_0x1c1297(0x286)]){const _0x2398d1=await db[_0x1c1297(0x315)](_0x1c1297(0x36c))[_0x1c1297(0x16a)](_0x1c1297(0x2b0))[_0x1c1297(0x19a)](_0x2346bb[_0x1c1297(0x286)])[_0x1c1297(0x3ab)](_0x1c1297(0x28b)),_0x3143ce=_0x2398d1[_0x1c1297(0x211)]();if(_0x3143ce){const _0x271d66=Object['keys'](_0x3143ce)[0x0],_0xe481aa=db[_0x1c1297(0x315)](_0x1c1297(0x1a0)+_0x271d66);await _0xe481aa[_0x1c1297(0x28c)](_0x284d6d=>{const _0x1681dc=_0x1c1297;return _0x284d6d&&(_0x284d6d['paidCredits']=(_0x284d6d['paidCredits']||0x0)+0xa,_0x284d6d[_0x1681dc(0x26b)]&&_0x284d6d[_0x1681dc(0x26b)][_0x3005ee]&&(_0x284d6d['referrals'][_0x3005ee]['isActive']=!![])),_0x284d6d;}),await updateReferralStats(_0x271d66),showNotification('Le\x20parrain\x20de\x20'+_0x3005ee+'\x20a\x20reçu\x2010\x20crédits\x20pour\x20le\x20premier\x20achat\x20de\x20son\x20filleul\x20!','success');}}}}function getShareMessage(_0x59577b){const _0x1b5436=_0x4a59ac;return encodeURIComponent('🚀\x20Découvrez\x20le\x20secret\x20pour\x20booster\x20votre\x20apprentissage\x20!\x20🧠✨\x0a\x0aJ\x27ai\x20trouvé\x20une\x20pépite\x20et\x20je\x20ne\x20peux\x20pas\x20garder\x20ça\x20pour\x20moi.\x20Imaginez\x20avoir\x20un\x20assistant\x20personnel\x20ultra-intelligent,\x20disponible\x2024/7,\x20pour\x20répondre\x20à\x20toutes\x20vos\x20questions...\x20C\x27est\x20ce\x20que\x20j\x27ai\x20avec\x20Eduque\x20moi\x20!\x0a\x0aCurieux\x20?\x20Cliquez\x20sur\x20ce\x20lien\x20magique\x20et\x20embarquez\x20pour\x20une\x20aventure\x20intellectuelle\x20incroyable\x20:\x0a'+_0x59577b+_0x1b5436(0x245));}function shareOnFacebook(){const _0x37d4c7=_0x4a59ac,_0x510bc5=document[_0x37d4c7(0x1db)](_0x37d4c7(0x17d))['value'],_0xa9c8ea=getShareMessage(_0x510bc5);window[_0x37d4c7(0x22e)](_0x37d4c7(0x215)+_0x510bc5+'\x22e='+_0xa9c8ea,_0x37d4c7(0x1d5));}function shareOnTwitter(){const _0x101f85=_0x4a59ac,_0x98ff30=document[_0x101f85(0x1db)](_0x101f85(0x17d))[_0x101f85(0x28b)],_0x5d7390=getShareMessage(_0x98ff30);window['open'](_0x101f85(0x276)+_0x98ff30+_0x101f85(0x19c)+_0x5d7390,_0x101f85(0x1d5));}function shareOnLinkedIn(){const _0x545f77=_0x4a59ac,_0x47ad47=document[_0x545f77(0x1db)](_0x545f77(0x17d))['value'],_0x1eae42=getShareMessage(_0x47ad47);window[_0x545f77(0x22e)]('https://www.linkedin.com/shareArticle?mini=true&url='+_0x47ad47+_0x545f77(0x352)+_0x1eae42,'_blank');}function shareOnWhatsApp(){const _0x355cbc=_0x4a59ac,_0x2d9cfe=document[_0x355cbc(0x1db)]('referralLink')[_0x355cbc(0x28b)],_0x538d96=getShareMessage(_0x2d9cfe);window[_0x355cbc(0x22e)](_0x355cbc(0x2a6)+_0x538d96,_0x355cbc(0x1d5));}function copyReferralLink(){const _0x1f78c4=_0x4a59ac,_0x5a7b61=document['getElementById'](_0x1f78c4(0x17d));_0x5a7b61[_0x1f78c4(0x351)](),document[_0x1f78c4(0x203)]('copy'),showNotification(_0x1f78c4(0x177),_0x1f78c4(0x365));}function showNotification(_0x42b53d,_0x4b98d9){const _0x4f95ba=_0x4a59ac,_0xafe570=document[_0x4f95ba(0x1b5)](_0x4f95ba(0x17b));_0xafe570[_0x4f95ba(0x283)]=_0x42b53d,_0xafe570[_0x4f95ba(0x237)]=_0x4f95ba(0x1f1)+_0x4b98d9,document[_0x4f95ba(0x35d)][_0x4f95ba(0x1ba)](_0xafe570),setTimeout(()=>{const _0xbe6b3c=_0x4f95ba;_0xafe570['classList'][_0xbe6b3c(0x228)](_0xbe6b3c(0x363)),setTimeout(()=>{const _0x1c1950=_0xbe6b3c;_0xafe570[_0x1c1950(0x3a2)][_0x1c1950(0x24f)](_0x1c1950(0x363)),setTimeout(()=>{const _0xafe6e3=_0x1c1950;_0xafe570[_0xafe6e3(0x24f)]();},0x12c);},0xbb8);},0x64);}function showPaymentNotification(_0x52aa7d){const _0x4cfc44=_0x4a59ac,_0x57f684=document[_0x4cfc44(0x1b5)]('div');_0x57f684[_0x4cfc44(0x237)]=_0x4cfc44(0x231),_0x57f684['innerHTML']=_0x4cfc44(0x374)+_0x52aa7d+_0x4cfc44(0x34f),document[_0x4cfc44(0x35d)]['appendChild'](_0x57f684),setTimeout(()=>{const _0xf82dce=_0x4cfc44;_0x57f684[_0xf82dce(0x3a2)][_0xf82dce(0x228)](_0xf82dce(0x363)),setTimeout(()=>{const _0x4e4cf0=_0xf82dce;_0x57f684[_0x4e4cf0(0x3a2)][_0x4e4cf0(0x24f)](_0x4e4cf0(0x363)),setTimeout(()=>{_0x57f684['remove']();},0x12c);},0x2710);},0x64);}async function showPaymentNotificationWithFreeOption(_0x551f8f){return new Promise(_0x5d9ec5=>{const _0x3b92f4=_0xf473,_0x28daf3=document[_0x3b92f4(0x1b5)](_0x3b92f4(0x17b));_0x28daf3['className']=_0x3b92f4(0x231),_0x28daf3[_0x3b92f4(0x310)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x551f8f+_0x3b92f4(0x2f4),document[_0x3b92f4(0x35d)][_0x3b92f4(0x1ba)](_0x28daf3),window[_0x3b92f4(0x1f3)]=function(_0x211b8e){const _0x59ba98=_0x3b92f4;_0x28daf3[_0x59ba98(0x24f)](),_0x5d9ec5(_0x211b8e);},setTimeout(()=>{const _0x1e93af=_0x3b92f4;_0x28daf3[_0x1e93af(0x3a2)]['add'](_0x1e93af(0x363));},0x64);});}function toggleTheme(){const _0x1646c3=_0x4a59ac,_0x10676a=document[_0x1646c3(0x35d)],_0x3e4574=_0x10676a[_0x1646c3(0x379)](_0x1646c3(0x362)),_0x5838ce=_0x3e4574===_0x1646c3(0x2ba)?_0x1646c3(0x258):_0x1646c3(0x2ba);_0x10676a['setAttribute'](_0x1646c3(0x362),_0x5838ce),localStorage[_0x1646c3(0x278)](_0x1646c3(0x1f6),_0x5838ce),updateThemeIcon(_0x5838ce),document[_0x1646c3(0x1bb)](_0x1646c3(0x1c9))[_0x1646c3(0x242)]('content',_0x5838ce);}function updateThemeIcon(_0x31ed05){const _0x39a39d=_0x4a59ac,_0x2d264d=document[_0x39a39d(0x1bb)](_0x39a39d(0x2fc));_0x2d264d[_0x39a39d(0x237)]=_0x31ed05===_0x39a39d(0x2ba)?_0x39a39d(0x27a):'fas\x20fa-moon';}function toggleSidebar(){const _0x260a15=_0x4a59ac,_0x5d5ea6=document[_0x260a15(0x1bb)](_0x260a15(0x20c)),_0x2d242a=document[_0x260a15(0x1bb)]('.chat-container');_0x5d5ea6[_0x260a15(0x3a2)][_0x260a15(0x396)](_0x260a15(0x185)),_0x2d242a[_0x260a15(0x3a2)][_0x260a15(0x396)]('sidebar-visible'),localStorage[_0x260a15(0x278)](_0x260a15(0x3b3),_0x5d5ea6['classList'][_0x260a15(0x205)](_0x260a15(0x185)));}function saveConversation(){const _0x4edc06=_0x4a59ac;if(!currentUser)return;const _0x448837=currentConversation['id']||Date[_0x4edc06(0x3a8)]()[_0x4edc06(0x196)]();conversations[_0x448837]=currentConversation,currentConversation['id']=_0x448837,localStorage[_0x4edc06(0x278)](_0x4edc06(0x214)+currentUser[_0x4edc06(0x1aa)],JSON[_0x4edc06(0x385)](conversations)),updateConversationHistory();}function loadConversationHistory(){const _0x2d12f0=_0x4a59ac;if(!currentUser)return;const _0x541a7c=localStorage[_0x2d12f0(0x197)](_0x2d12f0(0x214)+currentUser['username']);_0x541a7c&&(conversations=JSON[_0x2d12f0(0x1a3)](_0x541a7c),updateConversationHistory());}function updateConversationHistory(){const _0x272905=_0x4a59ac,_0x9b9fe7=document[_0x272905(0x1db)](_0x272905(0x19f));_0x9b9fe7['innerHTML']='';const _0x345b90=Object[_0x272905(0x1a6)](conversations)[_0x272905(0x2d4)]((_0x10fd22,_0x493847)=>parseInt(_0x493847)-parseInt(_0x10fd22));_0x345b90[_0x272905(0x207)](_0x5d5f47=>{const _0x5e8305=_0x272905,_0x149be4=conversations[_0x5d5f47],_0x5664e2=document[_0x5e8305(0x1b5)]('div');_0x5664e2['className']=_0x5e8305(0x382);const _0x233f71=document[_0x5e8305(0x1b5)](_0x5e8305(0x1d1));_0x233f71[_0x5e8305(0x283)]=_0x5e8305(0x1e7)+new Date(parseInt(_0x5d5f47))['toLocaleString'](),_0x233f71[_0x5e8305(0x18d)]=()=>loadConversation(_0x5d5f47);const _0x4cd39e=document['createElement']('i');_0x4cd39e[_0x5e8305(0x237)]=_0x5e8305(0x253),_0x4cd39e[_0x5e8305(0x18d)]=_0x487389=>{const _0xfaf00=_0x5e8305;_0x487389[_0xfaf00(0x1c3)](),deleteConversation(_0x5d5f47);},_0x5664e2[_0x5e8305(0x1ba)](_0x233f71),_0x5664e2['appendChild'](_0x4cd39e),_0x9b9fe7[_0x5e8305(0x1ba)](_0x5664e2);});}function deleteConversation(_0x173c89){const _0x429641=_0x4a59ac;confirm(_0x429641(0x28e))&&(delete conversations[_0x173c89],localStorage[_0x429641(0x278)]('conversations_'+currentUser[_0x429641(0x1aa)],JSON['stringify'](conversations)),updateConversationHistory());}function createNewConversation(){const _0x4b8e6a=_0x4a59ac;currentConversation['length']>0x0&&saveConversation();currentConversation=[];const _0x170397=document[_0x4b8e6a(0x1db)](_0x4b8e6a(0x32b));_0x170397[_0x4b8e6a(0x310)]='',updateConversationHistory(),addMessageToChat('ai',_0x4b8e6a(0x1bd)),_0x170397['scrollTop']=0x0,document[_0x4b8e6a(0x1db)]('userInput')[_0x4b8e6a(0x29d)]();}function loadConversation(_0x4a2647){const _0x2ebdaa=_0x4a59ac;currentConversation['length']>0x0&&currentConversation['id']!==_0x4a2647&&saveConversation();currentConversation=conversations[_0x4a2647],currentConversation['id']=_0x4a2647;const _0xfec631=document[_0x2ebdaa(0x1db)](_0x2ebdaa(0x32b));_0xfec631[_0x2ebdaa(0x310)]='',currentConversation[_0x2ebdaa(0x207)](_0x40bdc5=>{const _0x8cd600=_0x2ebdaa;addMessageToChat(_0x40bdc5[_0x8cd600(0x1ed)],_0x40bdc5[_0x8cd600(0x2c5)]);}),_0xfec631[_0x2ebdaa(0x1c2)]=0x0;}async function syncUserData(){const _0x1b44ea=_0x4a59ac;if(!currentUser)return;const _0x440017={'freeCredits':currentUser[_0x1b44ea(0x35c)]||0x0,'paidCredits':currentUser[_0x1b44ea(0x1a8)]||0x0,'lastFreeCreditsReset':currentUser[_0x1b44ea(0x2dd)]||new Date()[_0x1b44ea(0x16f)]()};currentUser[_0x1b44ea(0x261)]&&(_0x440017[_0x1b44ea(0x261)]=currentUser[_0x1b44ea(0x261)]);currentUser[_0x1b44ea(0x17f)]&&(_0x440017[_0x1b44ea(0x17f)]=currentUser['subscriptionEndDate']);const _0x6f40b7=db[_0x1b44ea(0x315)](_0x1b44ea(0x1a0)+currentUser['username']);try{await _0x6f40b7[_0x1b44ea(0x1ce)](_0x440017),console[_0x1b44ea(0x33b)](_0x1b44ea(0x394),_0x440017);}catch(_0x276a11){console[_0x1b44ea(0x287)](_0x1b44ea(0x22a),_0x276a11),showNotification(_0x1b44ea(0x32f),_0x1b44ea(0x287));}}function adjustTextareaHeight(){const _0x88d9ab=_0x4a59ac,_0x4b505c=document[_0x88d9ab(0x1db)](_0x88d9ab(0x27d));_0x4b505c[_0x88d9ab(0x349)][_0x88d9ab(0x274)]=_0x88d9ab(0x2d9),_0x4b505c['style'][_0x88d9ab(0x274)]=_0x4b505c[_0x88d9ab(0x39f)]+'px';}function resetTextareaHeight(){const _0x7ad8a7=_0x4a59ac,_0x38218b=document[_0x7ad8a7(0x1db)]('userInput');_0x38218b['style'][_0x7ad8a7(0x274)]='auto';}async function attemptAutoLogin(){const _0x514c54=_0x4a59ac,_0x4a8e1e=getStoredLoginInfo();if(_0x4a8e1e[_0x514c54(0x1aa)]&&_0x4a8e1e[_0x514c54(0x217)])try{const _0x36ff41=db[_0x514c54(0x315)](_0x514c54(0x1a0)+_0x4a8e1e['username']),_0x234805=await _0x36ff41[_0x514c54(0x3ab)](_0x514c54(0x28b));if(_0x234805['exists']()&&_0x234805[_0x514c54(0x211)]()['password']===_0x4a8e1e[_0x514c54(0x217)]){const _0x1e8653=_0x234805[_0x514c54(0x211)]();currentUser={'username':_0x4a8e1e[_0x514c54(0x1aa)],'freeCredits':_0x1e8653[_0x514c54(0x35c)],'paidCredits':_0x1e8653[_0x514c54(0x1a8)],'subscription':_0x1e8653[_0x514c54(0x261)],'subscriptionEndDate':_0x1e8653[_0x514c54(0x17f)],'lastFreeCreditsReset':_0x1e8653[_0x514c54(0x2dd)]},await resetFreeCreditsIfNeeded(),updateUIForLoggedInUser(),console[_0x514c54(0x33b)]('Connexion\x20automatique\x20réussie');}else clearLoginInfo(),console[_0x514c54(0x33b)]('Échec\x20de\x20la\x20connexion\x20automatique\x20:\x20informations\x20invalides');}catch(_0x2efc9b){console[_0x514c54(0x287)](_0x514c54(0x24d),_0x2efc9b),clearLoginInfo();}}function saveSelectedModel(){const _0x18ceed=_0x4a59ac,_0x533ac4=document[_0x18ceed(0x1db)]('modelSelect')['value'];localStorage[_0x18ceed(0x278)](_0x18ceed(0x334),_0x533ac4);}function loadSelectedModel(){const _0x390218=_0x4a59ac,_0x2fdacc=localStorage[_0x390218(0x197)](_0x390218(0x334));_0x2fdacc&&(document[_0x390218(0x1db)](_0x390218(0x359))[_0x390218(0x28b)]=_0x2fdacc);}function showUpgradeButton(_0x2ef1af){const _0x4b9491=_0x4a59ac,_0x1e37d4=document['createElement'](_0x4b9491(0x272));_0x1e37d4[_0x4b9491(0x283)]=_0x4b9491(0x319),_0x1e37d4[_0x4b9491(0x237)]=_0x4b9491(0x1ff),_0x1e37d4[_0x4b9491(0x18d)]=()=>{const _0x49d991=_0x4b9491;hasValidSubscription()||currentUser[_0x49d991(0x1a8)]>0x0?(document['getElementById'](_0x49d991(0x359))[_0x49d991(0x28b)]='gemini-1.5-pro',showNotification(_0x49d991(0x179),'success')):showPaymentNotification(_0x49d991(0x1e3));},_0x2ef1af[_0x4b9491(0x1ba)](_0x1e37d4);}function copyUserMessage(_0x39e697){const _0x21a2fa=_0x4a59ac;let _0x3284ec='';for(const _0x1c2b5c of _0x39e697[_0x21a2fa(0x194)]){if(_0x1c2b5c[_0x21a2fa(0x36a)]==='P')_0x3284ec+=_0x1c2b5c['textContent']+'\x0a';else{if(_0x1c2b5c[_0x21a2fa(0x3a2)][_0x21a2fa(0x205)](_0x21a2fa(0x350))){const _0x423373=Array[_0x21a2fa(0x1c4)](_0x1c2b5c[_0x21a2fa(0x2fb)](_0x21a2fa(0x313)))['map'](_0x510129=>_0x510129[_0x21a2fa(0x283)])['join'](',\x20');_0x3284ec+=_0x21a2fa(0x23f)+_0x423373+'\x0a';}else{if(_0x1c2b5c['classList'][_0x21a2fa(0x205)]('pinned-responses-message')){const _0x14d992=Array[_0x21a2fa(0x1c4)](_0x1c2b5c['querySelectorAll'](_0x21a2fa(0x23b)))[_0x21a2fa(0x35f)](_0x5b36dd=>_0x5b36dd['textContent'])[_0x21a2fa(0x2fa)]('\x0a');_0x3284ec+=_0x21a2fa(0x39a)+_0x14d992+'\x0a';}else{if(_0x1c2b5c[_0x21a2fa(0x3a2)][_0x21a2fa(0x205)](_0x21a2fa(0x277))){const _0x29f9ee=_0x1c2b5c[_0x21a2fa(0x1bb)](_0x21a2fa(0x225))[_0x21a2fa(0x283)];_0x3284ec+=_0x21a2fa(0x361)+_0x29f9ee+'\x0a';}}}}}navigator[_0x21a2fa(0x2f5)][_0x21a2fa(0x2ef)](_0x3284ec[_0x21a2fa(0x24c)]())[_0x21a2fa(0x206)](()=>{const _0x327c77=_0x21a2fa;showNotification('Message\x20copié\x20dans\x20le\x20presse-papiers',_0x327c77(0x365));});}function animateResponse(_0x429d90,_0x396d9a){const _0x2bbaa0=_0x4a59ac;let _0x3ccd70=0x0;_0x429d90[_0x2bbaa0(0x283)]='';const _0x21de39=setInterval(()=>{_0x3ccd70<_0x396d9a['length']?(_0x429d90['textContent']+=_0x396d9a[_0x3ccd70],_0x3ccd70++):clearInterval(_0x21de39);},0x1);}function loadPromptCategories(){const _0x2edf42=_0x4a59ac,_0x1e4b91=document['getElementById'](_0x2edf42(0x2e2));_0x1e4b91[_0x2edf42(0x310)]='',db[_0x2edf42(0x315)](_0x2edf42(0x1c7))[_0x2edf42(0x3ab)](_0x2edf42(0x28b),_0x140936=>{const _0x5287bf=_0x2edf42;prompts=_0x140936['val']()||{};const _0x1ead4a=[...new Set(Object[_0x5287bf(0x2e3)](prompts)[_0x5287bf(0x35f)](_0x445fa3=>_0x445fa3[_0x5287bf(0x1ae)]))];_0x1ead4a[_0x5287bf(0x207)](_0x3ff23f=>{const _0x5670c6=_0x5287bf,_0xfdfa85=document[_0x5670c6(0x1b5)]('li');_0xfdfa85[_0x5670c6(0x283)]=_0x3ff23f,_0xfdfa85[_0x5670c6(0x18d)]=()=>{const _0x3bfbfe=_0x5670c6;document[_0x3bfbfe(0x2fb)](_0x3bfbfe(0x291))[_0x3bfbfe(0x207)](_0x4d7b38=>_0x4d7b38[_0x3bfbfe(0x3a2)][_0x3bfbfe(0x24f)](_0x3bfbfe(0x248))),_0xfdfa85['classList']['add'](_0x3bfbfe(0x248)),loadPromptsForCategory(_0x3ff23f);},_0x1e4b91[_0x5670c6(0x1ba)](_0xfdfa85);}),_0x1ead4a[_0x5287bf(0x1d9)]>0x0&&(loadPromptsForCategory(_0x1ead4a[0x0]),_0x1e4b91[_0x5287bf(0x311)][_0x5287bf(0x3a2)][_0x5287bf(0x228)](_0x5287bf(0x248)));});}function loadPromptsForCategory(_0x921d9c){const _0x28b894=_0x4a59ac,_0x2ae316=document[_0x28b894(0x1db)](_0x28b894(0x342));_0x2ae316[_0x28b894(0x310)]='',Object[_0x28b894(0x333)](prompts)[_0x28b894(0x207)](([_0x3a7f89,_0x5476fb])=>{const _0x5b0f7d=_0x28b894;if(_0x5476fb[_0x5b0f7d(0x1ae)]===_0x921d9c){const _0x3d8768=document[_0x5b0f7d(0x1b5)]('li');_0x3d8768[_0x5b0f7d(0x310)]=_0x5b0f7d(0x1bf)+_0x3a7f89+'\x27,\x20this)\x22\x20data-prompt=\x27'+JSON[_0x5b0f7d(0x385)](_0x5476fb)+'\x27>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22prompt-title\x22>'+_0x5476fb[_0x5b0f7d(0x31c)]+_0x5b0f7d(0x18f),_0x2ae316[_0x5b0f7d(0x1ba)](_0x3d8768);}});}function selectPrompt(_0x32a40d,_0x55a4a0){const _0x5e2574=_0x4a59ac,_0x29d364=JSON[_0x5e2574(0x1a3)](_0x55a4a0[_0x5e2574(0x390)][_0x5e2574(0x1cf)]);pinnedPrompt={'id':_0x32a40d,..._0x29d364},updatePinnedPrompt(),closePromptModal(),showNotification('Prompt\x20sélectionné',_0x5e2574(0x365));const _0x335eef=document[_0x5e2574(0x1db)](_0x5e2574(0x27d));_0x335eef[_0x5e2574(0x2c3)]=pinnedPrompt['indicativeText']||_0x5e2574(0x1e6),adjustTextareaHeight();}function closePromptModal(){const _0x520d93=_0x4a59ac;document[_0x520d93(0x1db)](_0x520d93(0x2f6))[_0x520d93(0x349)][_0x520d93(0x293)]=_0x520d93(0x24a);}function togglePromptList(){const _0x4d6faa=_0x4a59ac,_0x27c533=document[_0x4d6faa(0x1db)](_0x4d6faa(0x2f6));_0x27c533['style'][_0x4d6faa(0x293)]=_0x4d6faa(0x2f7),loadPromptCategories();}function updatePinnedPrompt(){const _0x32e054=_0x4a59ac,_0x5b94ad=document[_0x32e054(0x1db)](_0x32e054(0x1d6)),_0x38c641=_0x5b94ad['querySelector'](_0x32e054(0x223));_0x38c641&&_0x38c641['remove']();if(pinnedPrompt){const _0x40babc=document[_0x32e054(0x1b5)](_0x32e054(0x17b));_0x40babc['className']='pinned-item',_0x40babc[_0x32e054(0x242)](_0x32e054(0x268),_0x32e054(0x1cf)),_0x40babc[_0x32e054(0x310)]=_0x32e054(0x29c)+pinnedPrompt[_0x32e054(0x31c)]+'\x22>'+pinnedPrompt['title']+_0x32e054(0x338),_0x5b94ad[_0x32e054(0x1ba)](_0x40babc);}}function removePinnedPrompt(){pinnedPrompt=null,updatePinnedPrompt();}function openLibrary(){const _0x5a6f21=_0x4a59ac;console['log']('Tentative\x20d\x27ouverture\x20de\x20la\x20bibliothèque');if(currentUser){console[_0x5a6f21(0x33b)]('Utilisateur\x20connecté:',currentUser);const _0x1bedb8={'username':currentUser[_0x5a6f21(0x1aa)],'freeCredits':currentUser[_0x5a6f21(0x35c)],'paidCredits':currentUser[_0x5a6f21(0x1a8)],'subscription':currentUser['subscription']};localStorage[_0x5a6f21(0x278)](_0x5a6f21(0x169),JSON['stringify'](_0x1bedb8)),console[_0x5a6f21(0x33b)](_0x5a6f21(0x27f)),window['location']['href']=_0x5a6f21(0x335);}else console['log'](_0x5a6f21(0x345)),alert(_0x5a6f21(0x330));}async function showReferralModal(){const _0x4c9fcc=_0x4a59ac,_0x175a9c=document['getElementById']('referralModal');_0x175a9c['style']['display']=_0x4c9fcc(0x2f7);const _0x12afa2=await getOrCreateReferralCode();if(_0x12afa2){const _0x170771=_0x4c9fcc(0x18c)+_0x12afa2;document[_0x4c9fcc(0x1db)](_0x4c9fcc(0x17d))[_0x4c9fcc(0x28b)]=_0x170771;const _0x4a0f67='Rejoignez-moi\x20sur\x20Eduque\x20moi\x20et\x20commencez\x20votre\x20voyage\x20d\x27apprentissage\x20!\x20Utilisez\x20mon\x20lien\x20de\x20parrainage\x20pour\x20obtenir\x20des\x20bonus\x20spéciaux\x20:\x20'+_0x170771;document['getElementById'](_0x4c9fcc(0x17d))[_0x4c9fcc(0x242)](_0x4c9fcc(0x1b1),_0x4a0f67);}else document['getElementById'](_0x4c9fcc(0x17d))[_0x4c9fcc(0x28b)]=_0x4c9fcc(0x337);await updateReferralStats(currentUser[_0x4c9fcc(0x1aa)]);}function generateReferralCode(){const _0x3e8f2d=_0x4a59ac;return Math[_0x3e8f2d(0x305)]()[_0x3e8f2d(0x196)](0x24)[_0x3e8f2d(0x1a1)](0x2,0x8)[_0x3e8f2d(0x1cd)]();}async function getOrCreateReferralCode(){const _0x1de3fa=_0x4a59ac;if(!currentUser)return null;const _0x136f74=db[_0x1de3fa(0x315)](_0x1de3fa(0x1a0)+currentUser[_0x1de3fa(0x1aa)]),_0x4e1595=await _0x136f74['once'](_0x1de3fa(0x28b)),_0x12377a=_0x4e1595[_0x1de3fa(0x211)]();if(_0x12377a&&_0x12377a['referralCode'])return _0x12377a['referralCode'];else{const _0x3fa07f=generateReferralCode();return await _0x136f74[_0x1de3fa(0x1ce)]({'referralCode':_0x3fa07f}),_0x3fa07f;}}async function updateReferralStats(_0x47b89e){const _0x3a49e0=_0x4a59ac,_0x52577d=db['ref'](_0x3a49e0(0x1a0)+_0x47b89e),_0x3c759f=await _0x52577d[_0x3a49e0(0x3ab)](_0x3a49e0(0x28b)),_0x48cc5f=_0x3c759f[_0x3a49e0(0x211)]();if(_0x48cc5f&&_0x48cc5f[_0x3a49e0(0x26b)]){const _0x88504a=_0x48cc5f['referrals'],_0x315fa4=Object[_0x3a49e0(0x1a6)](_0x88504a)[_0x3a49e0(0x1d9)],_0x44df8d=Object['values'](_0x88504a)[_0x3a49e0(0x3ae)](_0x3e2ffd=>_0x3e2ffd[_0x3a49e0(0x20d)])[_0x3a49e0(0x1d9)];await _0x52577d[_0x3a49e0(0x1ce)]({'totalReferrals':_0x315fa4,'activeReferrals':_0x44df8d}),currentUser&&currentUser[_0x3a49e0(0x1aa)]===_0x47b89e&&(document[_0x3a49e0(0x1db)](_0x3a49e0(0x28d))[_0x3a49e0(0x283)]=_0x315fa4,document['getElementById'](_0x3a49e0(0x1ad))['textContent']=_0x44df8d);}}window[_0x4a59ac(0x20a)]=async function(){const _0x249e9a=_0x4a59ac;await attemptAutoLogin();if(currentUser){if(currentUser[_0x249e9a(0x35c)]===undefined)currentUser[_0x249e9a(0x35c)]=0x0;if(currentUser['paidCredits']===undefined)currentUser[_0x249e9a(0x1a8)]=0x0;if(currentUser[_0x249e9a(0x261)]===undefined)currentUser[_0x249e9a(0x261)]=null;if(currentUser[_0x249e9a(0x17f)]===undefined)currentUser[_0x249e9a(0x17f)]=null;if(currentUser[_0x249e9a(0x2dd)]===undefined)currentUser[_0x249e9a(0x2dd)]=new Date()[_0x249e9a(0x16f)]();const _0x2923aa=db['ref'](_0x249e9a(0x1a0)+currentUser[_0x249e9a(0x1aa)]),_0x433655=await _0x2923aa[_0x249e9a(0x3ab)]('value'),_0x3d2abe=_0x433655[_0x249e9a(0x211)]();_0x3d2abe&&(importedFilesCount=_0x3d2abe['importedFilesCount']||0x0,lastImportReset=new Date(_0x3d2abe[_0x249e9a(0x236)]||new Date())),await syncUserData();}await loadApiKeyList(),await apiManager[_0x249e9a(0x3b2)](),initializeApiKeyRotation();const _0x805d98=localStorage['getItem'](_0x249e9a(0x1f6))||'light';document[_0x249e9a(0x35d)][_0x249e9a(0x242)]('data-theme',_0x805d98),updateThemeIcon(_0x805d98),setupUIEventListeners();currentUser&&loadConversationHistory();initModals(),loadSelectedModel(),document[_0x249e9a(0x1db)](_0x249e9a(0x359))[_0x249e9a(0x309)]('change',saveSelectedModel),restoreAppState(),initializeNewDiscussion(),document[_0x249e9a(0x35d)][_0x249e9a(0x3a2)][_0x249e9a(0x228)](_0x249e9a(0x37d)),setInterval(checkSubscriptionStatus,0x36ee80),await loadApiKeyList(),await apiManager[_0x249e9a(0x3b2)](),initializeGeminiAPI();const _0x366dda=document['getElementById'](_0x249e9a(0x359));!_0x366dda[_0x249e9a(0x28b)]&&(_0x366dda[_0x249e9a(0x28b)]=_0x249e9a(0x20f));};function setupUIEventListeners(){const _0x165eef=_0x4a59ac,_0x157c61=document[_0x165eef(0x1bb)](_0x165eef(0x1e4)),_0x1bcac0=document[_0x165eef(0x1db)](_0x165eef(0x27d)),_0x3feaf6=document[_0x165eef(0x1bb)](_0x165eef(0x3a4)),_0x28c7c6=_0x157c61['querySelector'](_0x165eef(0x3ac));function _0x13c4cc(){const _0x34247f=_0x165eef,_0x6d196c=_0x157c61[_0x34247f(0x33c)],_0x412c16=_0x3feaf6['offsetWidth'],_0x657aa8=document[_0x34247f(0x1db)](_0x34247f(0x39d))[_0x34247f(0x33c)],_0xcc5aa9=_0x28c7c6[_0x34247f(0x33c)],_0x49f317=0x1e;_0x1bcac0[_0x34247f(0x349)]['width']=_0x6d196c-_0x412c16-_0x657aa8-_0xcc5aa9-_0x49f317+'px';}_0x13c4cc(),window[_0x165eef(0x309)](_0x165eef(0x186),_0x13c4cc),_0x1bcac0[_0x165eef(0x309)]('input',adjustTextareaHeight),document[_0x165eef(0x1db)](_0x165eef(0x359))[_0x165eef(0x309)](_0x165eef(0x257),checkModelAccess);window[_0x165eef(0x2a0)]<=0x300&&(document[_0x165eef(0x1bb)](_0x165eef(0x20c))['classList'][_0x165eef(0x24f)](_0x165eef(0x185)),document['querySelector'](_0x165eef(0x1a7))['classList']['remove'](_0x165eef(0x178)));if(currentUser){const _0x483983=db[_0x165eef(0x315)]('users/'+currentUser[_0x165eef(0x1aa)]);_0x483983['on'](_0x165eef(0x28b),_0x2d5429=>{const _0x11e5a0=_0x165eef,_0x168c04=_0x2d5429[_0x11e5a0(0x211)]();_0x168c04&&(currentUser={...currentUser,'freeCredits':_0x168c04[_0x11e5a0(0x35c)],'paidCredits':_0x168c04['paidCredits'],'subscription':_0x168c04['subscription'],'subscriptionEndDate':_0x168c04[_0x11e5a0(0x17f)],'lastFreeCreditsReset':_0x168c04[_0x11e5a0(0x2dd)]},updateUIForLoggedInUser());});}}function initModals(){const _0x4ae15b=_0x4a59ac,_0x38f5f0=document[_0x4ae15b(0x2fb)]('.modal'),_0xfd9b4=document[_0x4ae15b(0x2fb)]('.close');_0xfd9b4[_0x4ae15b(0x207)](_0x3d0d45=>{const _0x364b6b=_0x4ae15b;_0x3d0d45[_0x364b6b(0x309)](_0x364b6b(0x1b6),()=>{const _0x40fc05=_0x364b6b;_0x3d0d45[_0x40fc05(0x2d7)](_0x40fc05(0x3a5))[_0x40fc05(0x349)][_0x40fc05(0x293)]=_0x40fc05(0x24a);});}),window[_0x4ae15b(0x309)](_0x4ae15b(0x1b6),_0x96b9fa=>{const _0xeb8644=_0x4ae15b;_0x38f5f0[_0xeb8644(0x207)](_0x2c7499=>{const _0x1962fd=_0xeb8644;_0x96b9fa[_0x1962fd(0x2cf)]===_0x2c7499&&(_0x2c7499['style'][_0x1962fd(0x293)]=_0x1962fd(0x24a));});});}window['addEventListener'](_0x4a59ac(0x1c6),async()=>{const _0x67fec0=_0x4a59ac;if(currentUser){const _0x3da094=await checkGuidedTourStatus(currentUser[_0x67fec0(0x1aa)]);!_0x3da094&&(startGuidedTour(),await markGuidedTourAsSeen(currentUser[_0x67fec0(0x1aa)]));}}),document['addEventListener'](_0x4a59ac(0x2a8),function(_0x4521ae){const _0x32082f=_0x4a59ac;_0x4521ae['key']===_0x32082f(0x2b6)&&!_0x4521ae['shiftKey']&&(_0x4521ae[_0x32082f(0x391)](),sendMessage());}),document['getElementById'](_0x4a59ac(0x27d))[_0x4a59ac(0x309)]('keydown',function(_0x2aafe6){const _0x4d47e6=_0x4a59ac;if(_0x2aafe6[_0x4d47e6(0x2d0)]===_0x4d47e6(0x2b6)&&_0x2aafe6['shiftKey']){_0x2aafe6[_0x4d47e6(0x391)]();const _0xb70322=this['selectionStart'],_0x18c59c=this[_0x4d47e6(0x1fd)],_0x49af96=this[_0x4d47e6(0x28b)];this[_0x4d47e6(0x28b)]=_0x49af96[_0x4d47e6(0x1a1)](0x0,_0xb70322)+'\x0a'+_0x49af96[_0x4d47e6(0x1a1)](_0x18c59c),this[_0x4d47e6(0x304)]=this[_0x4d47e6(0x1fd)]=_0xb70322+0x1;}});function checkApiStatus(){const _0x50ba0f=_0x4a59ac;axios[_0x50ba0f(0x39c)](API_BASE_URL+_0x50ba0f(0x1b4)+API_KEY)[_0x50ba0f(0x206)](_0x41351d=>{const _0x56bac0=_0x50ba0f;console[_0x56bac0(0x33b)](_0x56bac0(0x299),_0x41351d[_0x56bac0(0x20e)]),console[_0x56bac0(0x33b)](_0x56bac0(0x2cb),_0x41351d[_0x56bac0(0x2b1)]);})[_0x50ba0f(0x2db)](_0x174e14=>{const _0x265449=_0x50ba0f;console[_0x265449(0x287)](_0x265449(0x30a),_0x174e14);});}function checkApiStatusRegularly(){checkApiStatus(),setInterval(checkApiStatus,0xea60);}window[_0x4a59ac(0x309)](_0x4a59ac(0x367),function(){const _0x318193=_0x4a59ac;showNotification(_0x318193(0x314),_0x318193(0x287));}),window[_0x4a59ac(0x309)]('online',function(){const _0x46427c=_0x4a59ac;showNotification(_0x46427c(0x1cb),_0x46427c(0x365));}),window['addEventListener']('beforeunload',function(){const _0xf9d2d2=_0x4a59ac;currentUser&&localStorage['setItem'](_0xf9d2d2(0x26c),JSON[_0xf9d2d2(0x385)](currentConversation));});function restoreAppState(){const _0x2efd4a=_0x4a59ac,_0xa8a081=localStorage[_0x2efd4a(0x197)](_0x2efd4a(0x26c));_0xa8a081&&(currentConversation=JSON['parse'](_0xa8a081),currentConversation['forEach'](_0x487e8e=>{const _0x2e165b=_0x2efd4a;addMessageToChat(_0x487e8e[_0x2e165b(0x1ed)],_0x487e8e[_0x2e165b(0x2c5)]);}));}function isImageGenerationModel(_0x1e02b9){const _0xca6a69=_0x4a59ac;return _0x1e02b9[_0xca6a69(0x2eb)](_0xca6a69(0x326));}function getRecraftStyle(_0x1d1eef){const _0xba2eaf=_0x4a59ac,_0x33e4aa={'recraft-realistic':_0xba2eaf(0x230),'recraft-digital':'digital_illustration','recraft-vector':_0xba2eaf(0x224),'recraft-icon':_0xba2eaf(0x254)};return _0x33e4aa[_0x1d1eef]||_0xba2eaf(0x230);}async function initializeImageGenerationTracking(_0x43970a){const _0x1a18e8=_0x4a59ac,_0x3b444c=db['ref'](_0x1a18e8(0x1a0)+_0x43970a),_0x19613f=await _0x3b444c[_0x1a18e8(0x19e)](_0x1a18e8(0x1c8))[_0x1a18e8(0x3ab)](_0x1a18e8(0x28b)),_0x3f92bf=_0x19613f[_0x1a18e8(0x211)]();(!_0x3f92bf||isNewDay(_0x3f92bf[_0x1a18e8(0x26e)]))&&await _0x3b444c[_0x1a18e8(0x19e)](_0x1a18e8(0x1c8))[_0x1a18e8(0x173)]({'dailyCount':0x0,'lastReset':new Date()[_0x1a18e8(0x16f)]()});}function isNewDay(_0x16cda9){const _0x39a116=_0x4a59ac;if(!_0x16cda9)return!![];const _0x5e5033=new Date(_0x16cda9),_0x4e4e96=new Date();return _0x5e5033[_0x39a116(0x180)]()!==_0x4e4e96[_0x39a116(0x180)]()||_0x5e5033['getMonth']()!==_0x4e4e96[_0x39a116(0x1ec)]()||_0x5e5033[_0x39a116(0x226)]()!==_0x4e4e96[_0x39a116(0x226)]();}async function getImageGenerationCount(_0x3b080b){const _0x1d1d30=_0x4a59ac,_0x24db84=db[_0x1d1d30(0x315)](_0x1d1d30(0x1a0)+_0x3b080b),_0x23566e=await _0x24db84['child']('imageGeneration')['once'](_0x1d1d30(0x28b)),_0x1d6bb8=_0x23566e[_0x1d1d30(0x211)]();if(!_0x1d6bb8||isNewDay(_0x1d6bb8['lastReset']))return await initializeImageGenerationTracking(_0x3b080b),0x0;return _0x1d6bb8[_0x1d1d30(0x3a6)];}async function incrementImageGenerationCount(_0x16a413){const _0x3a9496=_0x4a59ac,_0x4bc3fb=db[_0x3a9496(0x315)]('users/'+_0x16a413);await _0x4bc3fb[_0x3a9496(0x19e)](_0x3a9496(0x1c8))[_0x3a9496(0x28c)](_0x4ba19d=>{const _0x18211f=_0x3a9496;if(!_0x4ba19d||isNewDay(_0x4ba19d[_0x18211f(0x26e)]))return{'dailyCount':0x1,'lastReset':new Date()[_0x18211f(0x16f)]()};return{'dailyCount':_0x4ba19d['dailyCount']+0x1,'lastReset':_0x4ba19d[_0x18211f(0x26e)]};});}async function canGenerateImage(){const _0x127a1f=_0x4a59ac,_0x2a447b=await getImageGenerationCount(currentUser[_0x127a1f(0x1aa)]),_0x203c43=hasValidSubscription(),_0xd51fb0=currentUser[_0x127a1f(0x1a8)]>=0x5||currentUser[_0x127a1f(0x35c)]>=0x5;if(_0x203c43&&_0x2a447b<0x5)return{'canGenerate':!![],'useFreeGeneration':!![],'message':_0x127a1f(0x187)+(0x5-_0x2a447b)+_0x127a1f(0x1eb)};if(_0xd51fb0)return{'canGenerate':!![],'useFreeGeneration':![],'message':_0x127a1f(0x2b9)};return{'canGenerate':![],'useFreeGeneration':![],'message':_0x127a1f(0x39b)};}function _0xf473(_0x38a497,_0x119563){const _0x102cf1=_0x102c();return _0xf473=function(_0xf473e4,_0x2711e5){_0xf473e4=_0xf473e4-0x161;let _0x98b35b=_0x102cf1[_0xf473e4];return _0x98b35b;},_0xf473(_0x38a497,_0x119563);}function confirmCreditUsage(_0x1b8160){return new Promise(_0x2ade99=>{const _0x430f7c=_0xf473,_0xea28c3=document[_0x430f7c(0x1b5)]('div');_0xea28c3[_0x430f7c(0x237)]='notification\x20warning',_0xea28c3['innerHTML']=_0x430f7c(0x30b)+_0x1b8160+_0x430f7c(0x35b),document[_0x430f7c(0x35d)][_0x430f7c(0x1ba)](_0xea28c3),setTimeout(()=>_0xea28c3[_0x430f7c(0x3a2)][_0x430f7c(0x228)](_0x430f7c(0x363)),0x64);function _0x619c2b(_0x4a6c5f){const _0x2f8e25=_0x430f7c,_0xdc7b21=_0x4a6c5f[_0x2f8e25(0x2cf)][_0x2f8e25(0x2d7)](_0x2f8e25(0x161))['getAttribute']('data-response');_0xea28c3[_0x2f8e25(0x3a2)]['remove']('show'),setTimeout(()=>{const _0x4fe25d=_0x2f8e25;_0xea28c3[_0x4fe25d(0x24f)](),_0x2ade99(_0xdc7b21==='true');},0x12c);}_0xea28c3[_0x430f7c(0x2fb)]('button')[_0x430f7c(0x207)](_0x15d9e6=>{const _0x4e8bcf=_0x430f7c;_0x15d9e6[_0x4e8bcf(0x309)](_0x4e8bcf(0x1b6),_0x619c2b);});});}function parseMarkdownTable(_0x36a484){const _0x3058e6=_0x4a59ac,_0x7790fd=_0x36a484[_0x3058e6(0x24c)]()[_0x3058e6(0x302)]('\x0a');if(_0x7790fd['length']<0x3)return null;const _0x44d5dc=_0x7790fd['every'](_0x325418=>_0x325418[_0x3058e6(0x24c)]()[_0x3058e6(0x2eb)]('|')&&_0x325418['trim']()[_0x3058e6(0x21f)]('|'));if(!_0x44d5dc)return null;const _0x440d26=_0x7790fd['map'](_0x35295f=>{const _0x580414=_0x3058e6,_0x472b29=_0x35295f[_0x580414(0x24c)]()[_0x580414(0x353)](0x1,-0x1)[_0x580414(0x302)]('|')[_0x580414(0x35f)](_0x2e50bc=>_0x2e50bc['trim']());return _0x472b29;}),_0x419495=_0x440d26[0x0],_0x4609c1=_0x440d26[_0x3058e6(0x353)](0x2);let _0xa52386=_0x3058e6(0x312);return _0x419495[_0x3058e6(0x207)](_0x335f4f=>{const _0x3e6906=_0x3058e6;_0xa52386+=_0x3e6906(0x2e4)+_0x335f4f+'</th>';}),_0xa52386+='</tr></thead><tbody>',_0x4609c1['forEach'](_0x237428=>{const _0x45f580=_0x3058e6;_0xa52386+=_0x45f580(0x188),_0x237428['forEach'](_0x1207fd=>{const _0x3076e5=_0x45f580;_0xa52386+=_0x3076e5(0x354)+_0x1207fd+_0x3076e5(0x393);}),_0xa52386+=_0x45f580(0x19b);}),_0xa52386+=_0x3058e6(0x366),_0xa52386+=_0x3058e6(0x2b2),_0xa52386;}function processMessageContent(_0xcfbfa1){const _0x3154e3=_0x4a59ac,_0x498da5=/\|[\s\S]+?\n[-|\s]+\n[\s\S]+?\n(?=\n|$)/g;return _0xcfbfa1[_0x3154e3(0x2d1)](_0x498da5,_0x426dcb=>{const _0x255828=parseMarkdownTable(_0x426dcb);return _0x255828||_0x426dcb;});}function addMessageToChat(_0x123407,_0x16f40f,_0x10a03e=[],_0x4a1971=[],_0x20082b=null){const _0x56a856=_0x4a59ac,_0x21a90c=document['getElementById'](_0x56a856(0x32b)),_0x3e2284=document['createElement'](_0x56a856(0x17b));_0x3e2284['classList'][_0x56a856(0x228)]('message',_0x123407===_0x56a856(0x38d)?_0x56a856(0x38c):_0x56a856(0x175));if(_0x123407==='ai'){let _0x4191c8=_0x16f40f;_0x4191c8=_0x4191c8[_0x56a856(0x2d1)](/^\*\*/gm,'\x0a'),_0x4191c8=_0x4191c8[_0x56a856(0x2d1)](/\*\*/g,''),_0x4191c8=formatMarkdownTable(_0x4191c8);const _0x3dcbb3=document[_0x56a856(0x1b5)](_0x56a856(0x17b));_0x3dcbb3[_0x56a856(0x310)]=_0x4191c8,_0x3e2284[_0x56a856(0x1ba)](_0x3dcbb3);const _0xa7d105=document[_0x56a856(0x1b5)](_0x56a856(0x17b));_0xa7d105[_0x56a856(0x3a2)][_0x56a856(0x228)](_0x56a856(0x370)),_0xa7d105['innerHTML']=_0x56a856(0x284),_0x3e2284[_0x56a856(0x1ba)](_0xa7d105),currentConversation['push']({'sender':'ai','content':_0x16f40f});}else{_0x10a03e[_0x56a856(0x1d9)]>0x0&&_0x3e2284[_0x56a856(0x1ba)](createPinnedFilesElement(_0x10a03e));_0x4a1971[_0x56a856(0x1d9)]>0x0&&_0x3e2284['appendChild'](createPinnedResponsesElement(_0x4a1971));_0x20082b&&_0x3e2284[_0x56a856(0x1ba)](createPinnedPromptElement(_0x20082b));const _0x58de39=document[_0x56a856(0x1b5)]('p');_0x58de39['textContent']=_0x16f40f,_0x3e2284[_0x56a856(0x1ba)](_0x58de39);const _0x26bdc9=document[_0x56a856(0x1b5)](_0x56a856(0x17b));_0x26bdc9['classList'][_0x56a856(0x228)](_0x56a856(0x370)),_0x26bdc9[_0x56a856(0x310)]=_0x56a856(0x255),_0x3e2284[_0x56a856(0x1ba)](_0x26bdc9),currentConversation[_0x56a856(0x378)]({'sender':_0x56a856(0x38d),'content':_0x16f40f,'files':_0x10a03e,'responses':_0x4a1971,'prompt':_0x20082b});}return _0x21a90c[_0x56a856(0x1ba)](_0x3e2284),_0x21a90c[_0x56a856(0x1c2)]=_0x21a90c[_0x56a856(0x39f)],_0x3e2284;}async function resubmitRequest(_0xa2cf58){const _0x3ae7c2=_0x4a59ac,_0x4470f0=document[_0x3ae7c2(0x1db)]('modelSelect')[_0x3ae7c2(0x28b)];if(!hasValidSubscription()&&!currentUser[_0x3ae7c2(0x1a8)]&&(_0x4470f0!==_0x3ae7c2(0x20f)&&_0x4470f0!==_0x3ae7c2(0x218)||!currentUser['freeCredits'])){showPaymentNotification(_0x3ae7c2(0x380));return;}try{const _0x502d34=document[_0x3ae7c2(0x2fb)](_0x3ae7c2(0x2c1));let _0x326496=null,_0x4359b8='';for(let _0x545575=Array[_0x3ae7c2(0x1c4)](_0x502d34)[_0x3ae7c2(0x16c)](_0xa2cf58)-0x1;_0x545575>=0x0;_0x545575--){if(_0x502d34[_0x545575][_0x3ae7c2(0x3a2)]['contains'](_0x3ae7c2(0x38c))){_0x326496=_0x502d34[_0x545575];const _0x23c1d5=_0x326496[_0x3ae7c2(0x1bb)](_0x3ae7c2(0x225)),_0x4dad67=_0x326496[_0x3ae7c2(0x1bb)](_0x3ae7c2(0x2f9));if(_0x23c1d5)_0x4359b8=_0x23c1d5[_0x3ae7c2(0x283)];else _0x4dad67&&(_0x4359b8=_0x4dad67[_0x3ae7c2(0x283)]);break;}}if(!_0x326496)throw new Error(_0x3ae7c2(0x1dd));const _0x111ba2=document['createElement'](_0x3ae7c2(0x17b));_0x111ba2[_0x3ae7c2(0x237)]=_0x3ae7c2(0x2ab),_0x111ba2[_0x3ae7c2(0x310)]=_0x3ae7c2(0x222)+createModelHeader(_0x4470f0)+_0x3ae7c2(0x1f5),_0xa2cf58[_0x3ae7c2(0x1b2)](_0x111ba2);const _0x4ef97a=Array[_0x3ae7c2(0x1c4)](_0x326496[_0x3ae7c2(0x2fb)](_0x3ae7c2(0x377)))[_0x3ae7c2(0x35f)](_0x11f817=>({'name':_0x11f817[_0x3ae7c2(0x1bb)]('.file-name')['textContent'],'type':_0x11f817['dataset'][_0x3ae7c2(0x308)]})),_0x12f199=[{'text':_0x4359b8}];if(_0x4ef97a[_0x3ae7c2(0x1d9)]>0x0)for(const _0x279d2f of _0x4ef97a){_0x12f199[_0x3ae7c2(0x378)]({'text':'[Fichier\x20joint:\x20'+_0x279d2f[_0x3ae7c2(0x360)]+']'});}const _0x3468a3=await model[_0x3ae7c2(0x37a)](_0x12f199),_0x43aa2e=await _0x3468a3[_0x3ae7c2(0x1a2)],_0x300ec4=_0x43aa2e[_0x3ae7c2(0x372)]();await animateText(_0x111ba2,_0x300ec4),currentConversation[_0x3ae7c2(0x378)]({'sender':'ai','content':_0x300ec4}),saveConversation(),await updateCredits(_0x4470f0,0x1),showNotification(_0x3ae7c2(0x36d),_0x3ae7c2(0x365));}catch(_0x371cff){console[_0x3ae7c2(0x287)]('Erreur\x20lors\x20de\x20la\x20relance:',_0x371cff),showNotification('Erreur\x20lors\x20de\x20la\x20relance\x20de\x20la\x20demande',_0x3ae7c2(0x287)),loadingMessage&&_0xa2cf58&&loadingMessage[_0x3ae7c2(0x1b2)](_0xa2cf58);}}function createLoadingMessage(){const _0x56473f=_0x4a59ac,_0x3cbef0=document[_0x56473f(0x1b5)]('div');return _0x3cbef0['className']='message\x20ai-message',_0x3cbef0[_0x56473f(0x310)]=_0x56473f(0x21c),document[_0x56473f(0x1db)]('messageContainer')['appendChild'](_0x3cbef0),_0x3cbef0;}function initializeScrollListener(){const _0x2b107c=_0x4a59ac,_0x395552=document['getElementById'](_0x2b107c(0x32b));_0x395552['addEventListener'](_0x2b107c(0x246),function(){const _0x2bf5fc=_0x2b107c;clearTimeout(scrollTimeout),_0x395552[_0x2bf5fc(0x1c2)]<lastScrollTop&&(userScrolling=!![]),lastScrollTop=_0x395552[_0x2bf5fc(0x1c2)],scrollTimeout=setTimeout(()=>{const _0x1e52a6=_0x2bf5fc,_0xf1fc60=_0x395552['scrollHeight']-_0x395552[_0x1e52a6(0x1c2)]-_0x395552[_0x1e52a6(0x316)]<0x64;_0xf1fc60&&(userScrolling=![]);},0x3e8);});}function shouldAutoScroll(){const _0x217209=_0x4a59ac;if(userScrolling)return![];const _0x380364=document[_0x217209(0x1db)](_0x217209(0x32b)),_0x289633=_0x380364[_0x217209(0x39f)]-_0x380364[_0x217209(0x1c2)]-_0x380364[_0x217209(0x316)]<0x64;return _0x289633;}async function animateText(_0x29efe4,_0x3df3f2){const _0x5550a7=_0x4a59ac,_0x176f48=document[_0x5550a7(0x1b5)](_0x5550a7(0x17b));_0x29efe4[_0x5550a7(0x310)]='',_0x29efe4['appendChild'](_0x176f48);const _0x4cba3a=document['createElement'](_0x5550a7(0x17b));_0x4cba3a[_0x5550a7(0x237)]=_0x5550a7(0x370),_0x4cba3a[_0x5550a7(0x310)]=_0x5550a7(0x1c5);let _0x2c5181='';const _0x2555a2=0xa;function _0x27d919(_0x1198bc,_0x175603){const _0x35ded9=_0x5550a7;return _0x1198bc[_0x35ded9(0x353)](_0x175603)['startsWith']('\x0a|')||_0x1198bc[_0x35ded9(0x353)](_0x175603)['startsWith']('|');}function _0x19f3dd(_0x25aed3,_0x9d6e35){const _0x55e162=_0x5550a7,_0x4cd26d=_0x25aed3[_0x55e162(0x353)](_0x9d6e35)[_0x55e162(0x302)]('\x0a');let _0x5ca02a=[],_0x554201=0x0;while(_0x554201<_0x4cd26d[_0x55e162(0x1d9)]&&_0x4cd26d[_0x554201][_0x55e162(0x24c)]()[_0x55e162(0x2eb)]('|')){_0x5ca02a[_0x55e162(0x378)](_0x4cd26d[_0x554201]),_0x554201++;}return _0x5ca02a[_0x55e162(0x2fa)]('\x0a');}const _0x4ee371=document[_0x5550a7(0x1db)]('messageContainer');for(let _0x4799ae=0x0;_0x4799ae<_0x3df3f2[_0x5550a7(0x1d9)];_0x4799ae++){if(_0x27d919(_0x3df3f2,_0x4799ae)){const _0x54cb00=_0x19f3dd(_0x3df3f2,_0x4799ae);if(_0x54cb00){_0x2c5181+=_0x54cb00,_0x176f48['innerHTML']=formatMarkdownTable(_0x2c5181),_0x4799ae+=_0x54cb00[_0x5550a7(0x1d9)]-0x1;continue;}}_0x2c5181+=_0x3df3f2[_0x4799ae],_0x176f48[_0x5550a7(0x310)]=formatMarkdownTable(_0x2c5181),shouldAutoScroll()&&(_0x4ee371['scrollTop']=_0x4ee371[_0x5550a7(0x39f)]),await new Promise(_0x15b702=>setTimeout(_0x15b702,_0x2555a2));}_0x29efe4[_0x5550a7(0x1ba)](_0x4cba3a);}function resetScrollState(){userScrolling=![],lastScrollTop=0x0;}function formatMarkdownTable(_0x364a8b){const _0x429bea=_0x4a59ac,_0x3bc04c=/\|(.+)\|\n\|(?:[-:|]+\|)+\n(\|(?:.+\|)+\n?)+/g;return _0x364a8b[_0x429bea(0x2d1)](_0x3bc04c,function(_0x4b3898){const _0x1d58f4=_0x429bea,_0x49ef8e=_0x4b3898[_0x1d58f4(0x24c)]()[_0x1d58f4(0x302)]('\x0a');if(_0x49ef8e['length']<0x3)return _0x4b3898;let _0x1ba2e1=_0x1d58f4(0x1b9);const _0x347350=_0x49ef8e[0x0][_0x1d58f4(0x302)]('|')[_0x1d58f4(0x3ae)](_0x5f14db=>_0x5f14db['trim']());return _0x1ba2e1+=_0x1d58f4(0x2e5),_0x347350['forEach'](_0x4b7f80=>{const _0x19f871=_0x1d58f4;_0x1ba2e1+=_0x19f871(0x2e4)+_0x4b7f80['trim']()+_0x19f871(0x22c);}),_0x1ba2e1+=_0x1d58f4(0x17a),_0x1ba2e1+=_0x1d58f4(0x2cc),_0x49ef8e['slice'](0x2)['forEach'](_0xa9dd24=>{const _0x7a84fc=_0x1d58f4,_0x3f0e0a=_0xa9dd24[_0x7a84fc(0x302)]('|')[_0x7a84fc(0x3ae)](_0x2e5489=>_0x2e5489['trim']());_0x3f0e0a[_0x7a84fc(0x1d9)]>0x0&&(_0x1ba2e1+=_0x7a84fc(0x188),_0x3f0e0a['forEach'](_0x3d977d=>{const _0x1201c3=_0x7a84fc;_0x1ba2e1+=_0x1201c3(0x354)+_0x3d977d['trim']()+'</td>';}),_0x1ba2e1+='</tr>');}),_0x1ba2e1+=_0x1d58f4(0x251),_0x1ba2e1;});}function updateUI(){const _0x2263d5=_0x4a59ac;currentUser&&(document['getElementById'](_0x2263d5(0x35c))[_0x2263d5(0x283)]=currentUser[_0x2263d5(0x35c)],document[_0x2263d5(0x1db)](_0x2263d5(0x1a8))['textContent']=currentUser[_0x2263d5(0x1a8)],document[_0x2263d5(0x1db)](_0x2263d5(0x261))[_0x2263d5(0x283)]=currentUser[_0x2263d5(0x261)]||_0x2263d5(0x16d));}const apiManager=new GeminiApiManager();document['addEventListener']('click',function(_0x2aae1c){const _0x10aed1=_0x4a59ac,_0x23bf88=document[_0x10aed1(0x1bb)](_0x10aed1(0x20c)),_0x255feb=document[_0x10aed1(0x1bb)]('.toggle-sidebar');_0x23bf88[_0x10aed1(0x3a2)]['contains'](_0x10aed1(0x185))&&!_0x23bf88['contains'](_0x2aae1c[_0x10aed1(0x2cf)])&&!_0x255feb[_0x10aed1(0x205)](_0x2aae1c[_0x10aed1(0x2cf)])&&(toggleSidebar(),_0x2aae1c['preventDefault']());}),window[_0x4a59ac(0x1c0)]=function(_0x48f0a7){const _0x1d0424=_0x4a59ac,_0x33f097=document[_0x1d0424(0x1bb)](_0x1d0424(0x20c));if(_0x33f097['classList'][_0x1d0424(0x205)](_0x1d0424(0x185)))return toggleSidebar(),_0x48f0a7[_0x1d0424(0x391)](),history['pushState']({},'',''),![];},document[_0x4a59ac(0x1db)](_0x4a59ac(0x324))['accept']=_0x4a59ac(0x21a),setInterval(updateUI,0x493e0),checkApiStatusRegularly(),window[_0x4a59ac(0x1b7)]=showLoginModal,window['showRegisterModal']=showRegisterModal,window[_0x4a59ac(0x26f)]=login,window[_0x4a59ac(0x174)]=register,window[_0x4a59ac(0x37b)]=logout,window['sendMessage']=sendMessage,window[_0x4a59ac(0x2b4)]=buySubscription,window[_0x4a59ac(0x383)]=buyCredits,window[_0x4a59ac(0x357)]=toggleTheme,window['toggleSidebar']=toggleSidebar,window[_0x4a59ac(0x2d2)]=createNewConversation,window[_0x4a59ac(0x364)]=handleFileUpload,window['togglePromptList']=togglePromptList,window[_0x4a59ac(0x2bf)]=showReferralModal,window['generateReferralCode']=generateReferralCode,window[_0x4a59ac(0x392)]=copyReferralLink,window[_0x4a59ac(0x25d)]=shareOnFacebook,window['shareOnTwitter']=shareOnTwitter,window[_0x4a59ac(0x18e)]=shareOnLinkedIn,window[_0x4a59ac(0x336)]=shareOnWhatsApp,window[_0x4a59ac(0x2e9)]=removePinnedFile;
