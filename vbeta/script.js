const _0x4e2ed5=_0x4b8e;(function(_0x43c40e,_0x2c881d){const _0x4b7157=_0x4b8e,_0x526f8b=_0x43c40e();while(!![]){try{const _0x357bc8=-parseInt(_0x4b7157(0x127))/0x1+-parseInt(_0x4b7157(0x1c3))/0x2*(-parseInt(_0x4b7157(0x266))/0x3)+-parseInt(_0x4b7157(0x22f))/0x4*(-parseInt(_0x4b7157(0x12e))/0x5)+-parseInt(_0x4b7157(0x1a9))/0x6*(parseInt(_0x4b7157(0x12b))/0x7)+parseInt(_0x4b7157(0x1d5))/0x8*(parseInt(_0x4b7157(0x302))/0x9)+-parseInt(_0x4b7157(0x14f))/0xa+parseInt(_0x4b7157(0x174))/0xb;if(_0x357bc8===_0x2c881d)break;else _0x526f8b['push'](_0x526f8b['shift']());}catch(_0x5c08a3){_0x526f8b['push'](_0x526f8b['shift']());}}}(_0x1afa,0x5bcde));const API_KEY=_0x4e2ed5(0x2ce),API_BASE_URL=_0x4e2ed5(0x2fc);let currentUser=null,pinnedFiles=[],currentConversation=[],conversations={},currentApiKeyIndex=0x0;const FREE_CREDITS_PER_DAY=0x3,FREE_CREDITS_REGISTER=0xa,FREE_MODEL_MAX_WORDS=0xc350,FREE_MODEL_MAX_RESPONSE=0x7d0,RETRY_CONFIG={'maxAttempts':0x3,'retryDelay':0x3e8},SYSTEM_INSTRUCTION=_0x4e2ed5(0x131),firebaseConfig={'apiKey':'AIzaSyCvizcYorGDPN3GXqma0opp7wAiMkaCt64','authDomain':'gemini-bb56e.firebaseapp.com','databaseURL':'https://gemini-bb56e-default-rtdb.firebaseio.com','projectId':_0x4e2ed5(0x20b),'storageBucket':_0x4e2ed5(0x124),'messagingSenderId':'277143630015','appId':'1:277143630015:web:78736f2cf52d29495d160a','measurementId':'G-CSN292219J'};firebase['initializeApp'](firebaseConfig);const db=firebase[_0x4e2ed5(0x324)]();let prompts={},pinnedPrompt=null,pinnedResponses=[],genAI;const API_KEY_LIST_REF=db[_0x4e2ed5(0x164)](_0x4e2ed5(0x209));let apiKeyList=[];async function loadApiKeyList(){const _0x77b9b=_0x4e2ed5;try{const _0x491436=await API_KEY_LIST_REF[_0x77b9b(0x20e)](_0x77b9b(0x2e4)),_0x189f1e=_0x491436[_0x77b9b(0x16c)]();_0x189f1e?apiKeyList=Object[_0x77b9b(0x2a9)](_0x189f1e):console['warn']('Aucune\x20cl√©\x20API\x20trouv√©e\x20dans\x20la\x20base\x20de\x20donn√©es.');}catch(_0x2c1c92){console[_0x77b9b(0x1ec)](_0x77b9b(0x13c),_0x2c1c92);}}function getRandomApiKey(){const _0x3df55f=_0x4e2ed5;if(apiKeyList['length']===0x0)return console['error'](_0x3df55f(0x286)),null;const _0x568d98=Math['floor'](Math[_0x3df55f(0x2c7)]()*apiKeyList[_0x3df55f(0x23f)]);return apiKeyList[_0x568d98];}function getNextApiKey(){const _0x5eb5fa=_0x4e2ed5;if(apiKeyList[_0x5eb5fa(0x23f)]===0x0)return console[_0x5eb5fa(0x1ec)](_0x5eb5fa(0x286)),null;const _0x3d2234=apiKeyList[currentApiKeyIndex];return currentApiKeyIndex=(currentApiKeyIndex+0x1)%apiKeyList['length'],_0x3d2234;}function initializeApiKeyRotation(){apiKeyList['length']>0x0&&(genAI=new GoogleGenerativeAI(getNextApiKey())),setInterval(()=>{const _0xf75054=_0x4b8e,_0x43bf9e=getNextApiKey();_0x43bf9e&&(genAI=new GoogleGenerativeAI(_0x43bf9e),console[_0xf75054(0x273)]('Rotation\x20de\x20la\x20cl√©\x20API\x20effectu√©e'),model=genAI['getGenerativeModel']({'model':document[_0xf75054(0x179)]('modelSelect')[_0xf75054(0x2e4)],'systemInstruction':SYSTEM_INSTRUCTION}));},0x1388);}function initializeGeminiAPI(){const _0x2ab1d4=_0x4e2ed5,_0x34e877=getNextApiKey();_0x34e877?(genAI=new GoogleGenerativeAI(_0x34e877),model=genAI[_0x2ab1d4(0x1d3)]({'model':document[_0x2ab1d4(0x179)](_0x2ab1d4(0x1cb))[_0x2ab1d4(0x2e4)],'systemInstruction':SYSTEM_INSTRUCTION})):showNotification('Erreur\x20:\x20Impossible\x20d\x27initialiser\x20l\x27API.\x20Aucune\x20cl√©\x20API\x20disponible.','error');}class ApiError extends Error{constructor(_0x5eebab,_0x5364d8){const _0xff271e=_0x4e2ed5;super(_0x5eebab),this[_0xff271e(0x30a)]=_0x5364d8,this['name']=_0xff271e(0x272);}}class ApiKeyManager{constructor(_0x29a3c3){const _0x31d545=_0x4e2ed5;this[_0x31d545(0x128)]=_0x29a3c3,this[_0x31d545(0x2b3)]=0x0,this[_0x31d545(0x232)]=new Set();}[_0x4e2ed5(0x138)](){const _0x46b7e1=_0x4e2ed5,_0x138b1e=this['currentIndex'];do{this[_0x46b7e1(0x2b3)]=(this[_0x46b7e1(0x2b3)]+0x1)%this[_0x46b7e1(0x128)]['length'];if(!this[_0x46b7e1(0x232)][_0x46b7e1(0x28d)](this['apiKeys'][this[_0x46b7e1(0x2b3)]]))return this[_0x46b7e1(0x128)][this[_0x46b7e1(0x2b3)]];}while(this[_0x46b7e1(0x2b3)]!==_0x138b1e);return null;}[_0x4e2ed5(0x12c)](){const _0x57b5a1=_0x4e2ed5;this[_0x57b5a1(0x232)][_0x57b5a1(0x141)]();}[_0x4e2ed5(0x21f)](_0x4d50da){const _0xe7bcc9=_0x4e2ed5;this[_0xe7bcc9(0x232)]['add'](_0x4d50da);}}async function executeWithRetry(_0x34a9fa){const _0x11eb45=_0x4e2ed5,_0x49825f=new ApiKeyManager(apiKeyList);let _0x260487=null,_0x57d1aa=0x0;while(_0x57d1aa<RETRY_CONFIG[_0x11eb45(0x19d)]){const _0x2a2ebb=_0x49825f['getNextUnusedKey']();if(!_0x2a2ebb)throw new Error(_0x11eb45(0x2f5));try{genAI=new GoogleGenerativeAI(_0x2a2ebb),model=genAI['getGenerativeModel']({'model':document[_0x11eb45(0x179)](_0x11eb45(0x1cb))[_0x11eb45(0x2e4)],'systemInstruction':SYSTEM_INSTRUCTION});const _0x2cdf40=await _0x34a9fa();return console['log'](_0x11eb45(0x1ba)+_0x2a2ebb),_0x2cdf40;}catch(_0x4fe7cc){_0x260487=_0x4fe7cc,_0x49825f[_0x11eb45(0x21f)](_0x2a2ebb),_0x57d1aa++,console[_0x11eb45(0x273)](_0x11eb45(0x29e)+_0x2a2ebb+'.\x20Tentative\x20'+_0x57d1aa+'/'+RETRY_CONFIG[_0x11eb45(0x19d)]),_0x57d1aa<RETRY_CONFIG[_0x11eb45(0x19d)]&&await new Promise(_0x3580a1=>setTimeout(_0x3580a1,RETRY_CONFIG[_0x11eb45(0x133)]));}}throw new Error(_0x11eb45(0x2e6)+_0x57d1aa+'\x20tentatives.\x20Derni√®re\x20erreur:\x20'+_0x260487['message']);}function shouldRetry(_0x20cffc){const _0x4b73f0=_0x4e2ed5,_0x277ecb=[_0x4b73f0(0x328),_0x4b73f0(0x28b),_0x4b73f0(0x277),_0x4b73f0(0x1a4),_0x4b73f0(0x231)];return _0x277ecb['includes'](_0x20cffc['code'])||_0x20cffc[_0x4b73f0(0x17a)][_0x4b73f0(0x26f)](_0x4b73f0(0x154))||_0x20cffc[_0x4b73f0(0x17a)][_0x4b73f0(0x26f)](_0x4b73f0(0x33b))||_0x20cffc['status']===0x1ad||_0x20cffc['status']>=0x1f4;}function createPointer(){const _0x44b969=_0x4e2ed5,_0x5f404f=document[_0x44b969(0x1d9)]('div');return _0x5f404f[_0x44b969(0x32d)][_0x44b969(0x18b)](_0x44b969(0x2c8)),_0x5f404f[_0x44b969(0x1a8)]='üëÜ',_0x5f404f[_0x44b969(0x23c)][_0x44b969(0x297)]=_0x44b969(0x149),_0x5f404f['style'][_0x44b969(0x1e5)]=_0x44b969(0x2fb),document[_0x44b969(0x27d)][_0x44b969(0x1b5)](_0x5f404f),_0x5f404f;}function positionPointer(_0x42b7de,_0x37fa42){const _0x28cb6e=_0x4e2ed5,_0x569eb6=_0x37fa42[_0x28cb6e(0x1f3)]();_0x42b7de[_0x28cb6e(0x23c)]['left']=_0x569eb6[_0x28cb6e(0x33d)]+_0x569eb6[_0x28cb6e(0x1b6)]/0x2+'px',_0x42b7de[_0x28cb6e(0x23c)]['top']=_0x569eb6[_0x28cb6e(0x2d4)]+_0x569eb6['height']/0x2+'px',_0x42b7de[_0x28cb6e(0x23c)][_0x28cb6e(0x1e5)]='block';}function highlightElement(_0x320038){const _0x329e34=_0x4e2ed5;_0x320038[_0x329e34(0x32d)][_0x329e34(0x18b)](_0x329e34(0x29f));}function removeHighlight(_0x13263c){const _0x51448a=_0x4e2ed5;_0x13263c['classList'][_0x51448a(0x29c)]('tour-highlight');}function startGuidedTour(){const _0x550e77=_0x4e2ed5,_0x1d2f03=createPointer(),_0x2edab9=new Shepherd['Tour']({'defaultStepOptions':{'cancelIcon':{'enabled':!![]},'classes':_0x550e77(0x1c7),'scrollTo':{'behavior':_0x550e77(0x13e),'block':_0x550e77(0x311)}}}),_0x58d89e=[{'id':_0x550e77(0x30f),'text':_0x550e77(0x271),'attachTo':{'element':_0x550e77(0x228),'on':_0x550e77(0x1f6)}},{'id':'menu','text':_0x550e77(0x2ae),'attachTo':{'element':_0x550e77(0x2ed),'on':_0x550e77(0x295)},'beforeShow':()=>{const _0x14dd77=_0x550e77,_0x16742b=document[_0x14dd77(0x255)]('.toggle-sidebar');highlightElement(_0x16742b);const _0x423954=document[_0x14dd77(0x255)](_0x14dd77(0x2ea));!_0x423954[_0x14dd77(0x32d)]['contains'](_0x14dd77(0x2de))&&_0x16742b[_0x14dd77(0x2c1)]();},'beforeHide':()=>{const _0x4d2de1=_0x550e77,_0x3b5ac2=document[_0x4d2de1(0x255)](_0x4d2de1(0x2ed));removeHighlight(_0x3b5ac2);}},{'id':'input-area','text':_0x550e77(0x2c2),'attachTo':{'element':_0x550e77(0x1c1),'on':_0x550e77(0x2d4)}},{'id':_0x550e77(0x2bc),'text':'Cliquez\x20ici\x20pour\x20importer\x20des\x20fichiers\x20(image,\x20pdf,\x20docx,\x20doc,\x20txt)\x20que\x20vous\x20voulez\x20analyser.','attachTo':{'element':_0x550e77(0x1f7),'on':'top'}},{'id':_0x550e77(0x1d1),'text':_0x550e77(0x335),'attachTo':{'element':_0x550e77(0x305),'on':'top'}},{'id':'send-button','text':'Cliquez\x20ici\x20pour\x20envoyer\x20votre\x20message.','attachTo':{'element':'.input-actions\x20button:last-child','on':_0x550e77(0x2d4)}},{'id':_0x550e77(0x2b2),'text':_0x550e77(0x183),'attachTo':{'element':_0x550e77(0x204),'on':_0x550e77(0x1f6)}}];_0x58d89e[_0x550e77(0x1f5)]((_0x4d4d91,_0x2f33d3)=>{const _0x696c20=_0x550e77;_0x2edab9[_0x696c20(0x20c)]({..._0x4d4d91,'buttons':[{'text':_0x2f33d3===_0x58d89e[_0x696c20(0x23f)]-0x1?_0x696c20(0x321):_0x696c20(0x2f6),'action':_0x2f33d3===_0x58d89e[_0x696c20(0x23f)]-0x1?_0x2edab9['complete']:_0x2edab9['next']}],'beforeShow':()=>{const _0x7fa1cc=_0x696c20,_0x94af41=document[_0x7fa1cc(0x255)](_0x4d4d91[_0x7fa1cc(0x12d)][_0x7fa1cc(0x229)]);_0x94af41&&positionPointer(_0x1d2f03,_0x94af41),_0x4d4d91[_0x7fa1cc(0x22c)]&&_0x4d4d91['beforeShow']();},'beforeHide':()=>{const _0x33ca39=_0x696c20;_0x1d2f03[_0x33ca39(0x23c)][_0x33ca39(0x1e5)]='none';}});}),_0x2edab9['on'](_0x550e77(0x1e4),()=>{const _0x2c1603=_0x550e77;_0x1d2f03[_0x2c1603(0x29c)]();const _0xfae079=document[_0x2c1603(0x255)](_0x2c1603(0x2ea));_0xfae079[_0x2c1603(0x32d)][_0x2c1603(0x283)](_0x2c1603(0x2de))&&document[_0x2c1603(0x255)]('.toggle-sidebar')[_0x2c1603(0x2c1)]();}),_0x2edab9[_0x550e77(0x2c3)]();}async function checkGuidedTourStatus(_0x297ce6){const _0x1279a0=_0x4e2ed5,_0x27ee6d=db[_0x1279a0(0x164)](_0x1279a0(0x1b9)+_0x297ce6),_0x9d7468=await _0x27ee6d[_0x1279a0(0x20e)](_0x1279a0(0x2e4)),_0x5b064b=_0x9d7468[_0x1279a0(0x16c)]();return _0x5b064b&&_0x5b064b['hasSeenGuidedTour'];}async function markGuidedTourAsSeen(_0x222ed0){const _0x369522=_0x4e2ed5,_0x59edfb=db[_0x369522(0x164)](_0x369522(0x1b9)+_0x222ed0);await _0x59edfb[_0x369522(0x192)]({'hasSeenGuidedTour':!![]});}async function checkSubscriptionStatus(){const _0x416fcd=_0x4e2ed5;if(!currentUser||!currentUser['subscriptionEndDate'])return;const _0xa19ef8=new Date(),_0x4a6e97=new Date(currentUser[_0x416fcd(0x1f9)]);if(_0xa19ef8>_0x4a6e97)currentUser['subscription']=null,currentUser[_0x416fcd(0x1f9)]=null,await syncUserData(),showNotification(_0x416fcd(0x2fd),'info'),updateUIForLoggedInUser();else{if(_0xa19ef8>new Date(_0x4a6e97['getTime']()-0x3*0x18*0x3c*0x3c*0x3e8)){const _0x4b3182=Math['ceil']((_0x4a6e97-_0xa19ef8)/(0x18*0x3c*0x3c*0x3e8));showNotification('Votre\x20abonnement\x20expire\x20dans\x20'+_0x4b3182+_0x416fcd(0x25f)+(_0x4b3182>0x1?'s':'')+'.',_0x416fcd(0x239));}}}function generateInvoicePDF(_0x350537){const _0x3e6e28=_0x4e2ed5,{jsPDF:_0x521233}=window[_0x3e6e28(0x241)],_0x4d614a=new _0x521233();return _0x4d614a[_0x3e6e28(0x2da)](0x12),_0x4d614a['text'](_0x3e6e28(0x13f),0x69,0x14,null,null,_0x3e6e28(0x311)),_0x4d614a[_0x3e6e28(0x2da)](0xc),_0x4d614a['text'](_0x3e6e28(0x27b)+currentUser[_0x3e6e28(0x182)],0x14,0x28),_0x4d614a[_0x3e6e28(0x18d)]('Date\x20:\x20'+new Date()[_0x3e6e28(0x17d)](),0x14,0x32),_0x4d614a[_0x3e6e28(0x18d)](_0x3e6e28(0x259)+_0x350537[_0x3e6e28(0x166)],0x14,0x3c),_0x4d614a[_0x3e6e28(0x18d)]('Montant\x20:\x20'+_0x350537['amount']+_0x3e6e28(0x14d),0x14,0x46),_0x4d614a[_0x3e6e28(0x18d)](_0x3e6e28(0x2bb)+_0x350537['id'],0x14,0x50),_0x4d614a;}function showInvoiceDetails(_0x4b15a1){const _0xc5d438=_0x4e2ed5,_0x3df6c6=document['createElement']('div');_0x3df6c6[_0xc5d438(0x25e)]=_0xc5d438(0x16a),_0x3df6c6[_0xc5d438(0x1a8)]=_0xc5d438(0x13d)+new Date()[_0xc5d438(0x17d)]()+_0xc5d438(0x1fa)+_0x4b15a1['description']+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Montant:</strong>\x20'+_0x4b15a1[_0xc5d438(0x275)]+_0xc5d438(0x177)+_0x4b15a1['id']+_0xc5d438(0x2f8),document[_0xc5d438(0x27d)]['appendChild'](_0x3df6c6),document['getElementById'](_0xc5d438(0x293))[_0xc5d438(0x2a5)](_0xc5d438(0x2c1),()=>{const _0x5886c6=_0xc5d438,_0x4a0079=generateInvoicePDF(_0x4b15a1);_0x4a0079[_0x5886c6(0x2ba)]('facture_'+_0x4b15a1['id']+_0x5886c6(0x1a6));}),document['getElementById']('closeModal')[_0xc5d438(0x2a5)]('click',()=>{const _0x5a8b15=_0xc5d438;document['body'][_0x5a8b15(0x1b2)](_0x3df6c6);});}function initializeNewDiscussion(){const _0x17285a=_0x4e2ed5;currentConversation=[];const _0x563aad=document[_0x17285a(0x179)]('messageContainer');_0x563aad[_0x17285a(0x1a8)]='',addMessageToChat('ai',_0x17285a(0x2c0)),updateConversationHistory();}function showLoginModal(){const _0x57841c=_0x4e2ed5;document['getElementById'](_0x57841c(0x195))[_0x57841c(0x23c)]['display']=_0x57841c(0x206);}function showRegisterModal(){const _0x355aea=_0x4e2ed5;document['getElementById'](_0x355aea(0x129))[_0x355aea(0x23c)][_0x355aea(0x1e5)]=_0x355aea(0x206);}function closeModal(_0x204c23){const _0x51208f=_0x4e2ed5;document[_0x51208f(0x179)](_0x204c23)[_0x51208f(0x23c)][_0x51208f(0x1e5)]='none';}function updateUIForLoggedInUser(){const _0x4f558e=_0x4e2ed5;document[_0x4f558e(0x179)](_0x4f558e(0x158))[_0x4f558e(0x32d)][_0x4f558e(0x18b)](_0x4f558e(0x245)),document[_0x4f558e(0x179)](_0x4f558e(0x333))['classList'][_0x4f558e(0x18b)](_0x4f558e(0x245)),document[_0x4f558e(0x179)](_0x4f558e(0x2e8))[_0x4f558e(0x32d)][_0x4f558e(0x29c)](_0x4f558e(0x245)),document[_0x4f558e(0x179)](_0x4f558e(0x222))['classList'][_0x4f558e(0x29c)]('hidden'),document[_0x4f558e(0x179)]('username')[_0x4f558e(0x338)]=currentUser[_0x4f558e(0x182)],document['getElementById'](_0x4f558e(0x15e))[_0x4f558e(0x338)]=currentUser[_0x4f558e(0x15e)],document['getElementById'](_0x4f558e(0x21c))[_0x4f558e(0x338)]=currentUser[_0x4f558e(0x21c)],document[_0x4f558e(0x179)]('subscription')['textContent']=currentUser['subscription']||_0x4f558e(0x2e1),loadConversationHistory();}function updateUIForLoggedOutUser(){const _0x24ba64=_0x4e2ed5;document[_0x24ba64(0x179)](_0x24ba64(0x158))['classList'][_0x24ba64(0x29c)](_0x24ba64(0x245)),document[_0x24ba64(0x179)]('registerBtn')[_0x24ba64(0x32d)][_0x24ba64(0x29c)]('hidden'),document['getElementById'](_0x24ba64(0x2e8))[_0x24ba64(0x32d)][_0x24ba64(0x18b)](_0x24ba64(0x245)),document[_0x24ba64(0x179)]('userInfo')[_0x24ba64(0x32d)][_0x24ba64(0x18b)](_0x24ba64(0x245)),document[_0x24ba64(0x179)](_0x24ba64(0x242))[_0x24ba64(0x1a8)]=_0x24ba64(0x212);}function storeLoginInfo(_0x344faf,_0x42d5dc){const _0x222bfb=_0x4e2ed5;localStorage[_0x222bfb(0x1e3)](_0x222bfb(0x253),_0x344faf),localStorage[_0x222bfb(0x1e3)](_0x222bfb(0x15a),_0x42d5dc);}function getStoredLoginInfo(){const _0x1511ce=_0x4e2ed5;return{'username':localStorage['getItem'](_0x1511ce(0x253)),'password':localStorage[_0x1511ce(0x1ac)]('eduqueMoiPassword')};}function clearLoginInfo(){const _0x551e04=_0x4e2ed5;localStorage[_0x551e04(0x2bf)]('eduqueMoiUsername'),localStorage['removeItem']('eduqueMoiPassword');}async function register(){const _0x1240de=_0x4e2ed5,_0x2b5da3=document[_0x1240de(0x179)]('registerUsername')['value'],_0xbf787e=document[_0x1240de(0x179)](_0x1240de(0x1ed))[_0x1240de(0x2e4)],_0x23ad8f=new URLSearchParams(window[_0x1240de(0x2ac)][_0x1240de(0x2b4)])[_0x1240de(0x2a0)]('ref');if(!_0x2b5da3||!_0xbf787e){showNotification(_0x1240de(0x193),'error');return;}try{const _0x3dfc16=db[_0x1240de(0x164)](_0x1240de(0x1b9)+_0x2b5da3),_0x38a2bf=await _0x3dfc16[_0x1240de(0x20e)](_0x1240de(0x2e4));if(_0x38a2bf['exists']()){showNotification('Ce\x20nom\x20d\x27utilisateur\x20existe\x20d√©j√†.',_0x1240de(0x1ec));return;}const _0x534a08=new Date(),_0x175290={'password':_0xbf787e,'freeCredits':FREE_CREDITS_REGISTER,'paidCredits':0x0,'subscription':null,'subscriptionEndDate':null,'lastFreeCreditsReset':_0x534a08[_0x1240de(0x2ca)](),'referredBy':_0x23ad8f||null,'firstPurchase':![],'totalReferrals':0x0,'activeReferrals':0x0,'hasSeenGuidedTour':![]};await _0x3dfc16[_0x1240de(0x32c)](_0x175290);if(_0x23ad8f){const _0x26477c=await db[_0x1240de(0x164)]('users')['orderByChild'](_0x1240de(0x312))[_0x1240de(0x2c6)](_0x23ad8f)[_0x1240de(0x20e)](_0x1240de(0x2e4)),_0x2215d7=_0x26477c[_0x1240de(0x16c)]();if(_0x2215d7){const _0x2a517b=Object[_0x1240de(0x218)](_0x2215d7)[0x0];await db[_0x1240de(0x164)]('users/'+_0x2a517b+_0x1240de(0x2e2)+_0x2b5da3)[_0x1240de(0x32c)]({'date':_0x534a08[_0x1240de(0x2ca)](),'isActive':![]});const _0x5d9ba5=db['ref']('users/'+_0x2a517b);await _0x5d9ba5[_0x1240de(0x1ce)](_0x2be8e7=>{const _0x3373d5=_0x1240de;return _0x2be8e7&&(_0x2be8e7[_0x3373d5(0x1e8)]=(_0x2be8e7[_0x3373d5(0x1e8)]||0x0)+0x1),_0x2be8e7;}),currentUser&&currentUser[_0x1240de(0x182)]===_0x2a517b&&(document[_0x1240de(0x179)](_0x1240de(0x1e8))[_0x1240de(0x338)]=(parseInt(document['getElementById'](_0x1240de(0x1e8))['textContent'])||0x0)+0x1);}}currentUser={'username':_0x2b5da3,..._0x175290},updateUIForLoggedInUser(),showNotification('Inscription\x20r√©ussie\x20!\x20Vous\x20avez\x20re√ßu\x2010\x20cr√©dits\x20gratuits.',_0x1240de(0x2be)),closeModal('registerModal'),storeLoginInfo(_0x2b5da3,_0xbf787e),startGuidedTour(),await markGuidedTourAsSeen(_0x2b5da3);}catch(_0x361c61){console['error'](_0x1240de(0x163),_0x361c61),showNotification(_0x1240de(0x2cd),_0x1240de(0x1ec));}}async function login(_0x2be57f,_0x456bdd){const _0x47708c=_0x4e2ed5;(!_0x2be57f||!_0x456bdd)&&(_0x2be57f=document[_0x47708c(0x179)](_0x47708c(0x2d9))[_0x47708c(0x2e4)],_0x456bdd=document[_0x47708c(0x179)](_0x47708c(0x269))[_0x47708c(0x2e4)]);if(!_0x2be57f||!_0x456bdd){showNotification(_0x47708c(0x193),_0x47708c(0x1ec));return;}try{const _0x21158b=db[_0x47708c(0x164)]('users/'+_0x2be57f),_0xff07b3=await _0x21158b[_0x47708c(0x20e)]('value');if(_0xff07b3[_0x47708c(0x181)]()&&_0xff07b3[_0x47708c(0x16c)]()[_0x47708c(0x186)]===_0x456bdd){const _0x3a0a71=_0xff07b3[_0x47708c(0x16c)]();currentUser={'username':_0x2be57f,'freeCredits':_0x3a0a71[_0x47708c(0x15e)]||0x0,'paidCredits':_0x3a0a71[_0x47708c(0x21c)]||0x0,'subscription':_0x3a0a71['subscription']||null,'subscriptionEndDate':_0x3a0a71[_0x47708c(0x1f9)]||null,'lastFreeCreditsReset':_0x3a0a71[_0x47708c(0x2b8)]||new Date()[_0x47708c(0x2ca)](),'referralCode':_0x3a0a71[_0x47708c(0x312)]||null,'totalReferrals':_0x3a0a71[_0x47708c(0x1e8)]||0x0,'activeReferrals':_0x3a0a71[_0x47708c(0x322)]||0x0},await resetFreeCreditsIfNeeded(),await checkSubscriptionStatus(),await initializeImageGenerationTracking(_0x2be57f),updateUIForLoggedInUser(),storeLoginInfo(_0x2be57f,_0x456bdd),loadConversationHistory();const _0x4684e3=await checkGuidedTourStatus(_0x2be57f);!_0x4684e3&&(startGuidedTour(),await markGuidedTourAsSeen(_0x2be57f)),_0x3a0a71[_0x47708c(0x196)]&&await updateReferralStats(_0x2be57f),importedFilesCount=_0x3a0a71['importedFilesCount']||0x0,lastImportReset=new Date(_0x3a0a71[_0x47708c(0x1eb)]||new Date()),await syncUserData(),showNotification(_0x47708c(0x32a),_0x47708c(0x2be)),closeModal('loginModal'),_0x3a0a71['customPrompts']&&loadCustomPrompts(_0x3a0a71[_0x47708c(0x1da)]),checkPendingNotifications(),initializeGeminiAPI(),createNewConversation();}else showNotification(_0x47708c(0x125),_0x47708c(0x1ec));}catch(_0x13fce4){console[_0x47708c(0x1ec)](_0x47708c(0x2b6),_0x13fce4),showNotification('Erreur\x20lors\x20de\x20la\x20connexion.\x20Veuillez\x20r√©essayer.','error');}}function _0x4b8e(_0x4d9eaa,_0x6faf5c){const _0x1afaac=_0x1afa();return _0x4b8e=function(_0x4b8ec2,_0x61e5ea){_0x4b8ec2=_0x4b8ec2-0x123;let _0x5087c6=_0x1afaac[_0x4b8ec2];return _0x5087c6;},_0x4b8e(_0x4d9eaa,_0x6faf5c);}async function checkPendingNotifications(){const _0x141c55=_0x4e2ed5;if(currentUser[_0x141c55(0x188)]){const _0xa81eab=new Date(currentUser[_0x141c55(0x1f9)]),_0x5ffd21=new Date(),_0x44f6ec=Math[_0x141c55(0x25d)]((_0xa81eab-_0x5ffd21)/(0x3e8*0x3c*0x3c*0x18));_0x44f6ec<=0x3&&_0x44f6ec>0x0&&showNotification(_0x141c55(0x200)+_0x44f6ec+_0x141c55(0x25f)+(_0x44f6ec>0x1?'s':'')+'.','warning');}!currentUser['subscription']&&currentUser['paidCredits']<0xa&&currentUser['freeCredits']<0x3&&showNotification(_0x141c55(0x150),_0x141c55(0x239));}function loadCustomPrompts(_0x41972e){const _0x48f415=_0x4e2ed5;Array[_0x48f415(0x31d)](_0x41972e)&&_0x41972e[_0x48f415(0x1f5)](_0x49caec=>{!prompts[_0x49caec['id']]&&(prompts[_0x49caec['id']]=_0x49caec);});}function logout(){const _0x117eb5=_0x4e2ed5;currentUser&&syncUserData(),currentUser=null,updateUIForLoggedOutUser(),showNotification(_0x117eb5(0x2a4),_0x117eb5(0x2be)),clearLoginInfo();}async function resetFreeCreditsIfNeeded(){const _0x5a361c=_0x4e2ed5,_0x3fbfb8=new Date(),_0xf07961=new Date(currentUser[_0x5a361c(0x2b8)]);if(_0x3fbfb8[_0x5a361c(0x310)]()-_0xf07961[_0x5a361c(0x310)]()>=0x18*0x3c*0x3c*0x3e8){const _0x42a2e6=currentUser[_0x5a361c(0x15e)];currentUser[_0x5a361c(0x15e)]=FREE_CREDITS_PER_DAY,currentUser[_0x5a361c(0x2b8)]=_0x3fbfb8[_0x5a361c(0x2ca)](),await syncUserData(),document['getElementById']('freeCredits')[_0x5a361c(0x338)]=currentUser[_0x5a361c(0x15e)];const _0x4bd5e5=currentUser[_0x5a361c(0x15e)]-_0x42a2e6;_0x4bd5e5>0x0&&showNotification(_0x4bd5e5+_0x5a361c(0x249),_0x5a361c(0x2be));}}async function checkModelAccess(){const _0x2fe384=_0x4e2ed5,_0x96df48=document[_0x2fe384(0x179)](_0x2fe384(0x1cb))['value'],_0x4717e6=document[_0x2fe384(0x179)]('imageSizeSelect');_0x4717e6[_0x2fe384(0x23c)][_0x2fe384(0x1e5)]=isImageGenerationModel(_0x96df48)?_0x2fe384(0x206):'none';if(isImageGenerationModel(_0x96df48)){if(!hasValidSubscription()&&currentUser[_0x2fe384(0x21c)]<0x5&&currentUser['freeCredits']<0x5){showPaymentNotification(_0x2fe384(0x300)),document[_0x2fe384(0x179)](_0x2fe384(0x1cb))[_0x2fe384(0x2e4)]=_0x2fe384(0x132),_0x4717e6['style'][_0x2fe384(0x1e5)]=_0x2fe384(0x2fb);return;}}else!['gemini-1.5-flash',_0x2fe384(0x2d5)][_0x2fe384(0x26f)](_0x96df48)&&!hasValidSubscription()&&currentUser[_0x2fe384(0x21c)]<=0x0&&(showPaymentNotification('Ce\x20mod√®le\x20n√©cessite\x20un\x20abonnement\x20ou\x20des\x20cr√©dits\x20payants.'),document[_0x2fe384(0x179)](_0x2fe384(0x1cb))['value']=_0x2fe384(0x132));}async function handleFileUpload(_0x491e8d){const _0x29892f=_0x4e2ed5,_0x3583b1=_0x491e8d['target'][_0x29892f(0x27a)];for(let _0x1bcdbc=0x0;_0x1bcdbc<_0x3583b1[_0x29892f(0x23f)];_0x1bcdbc++){const _0x2b382f=_0x3583b1[_0x1bcdbc];if(_0x2b382f[_0x29892f(0x221)]===_0x29892f(0x2d2)||_0x2b382f['type']===_0x29892f(0x1b8))try{const _0x2958bf=await convertWordToText(_0x2b382f);pinnedFiles['push']({'name':_0x2b382f['name'][_0x29892f(0x137)](/\.[^/.]+$/,'')+_0x29892f(0x227),'type':_0x29892f(0x194),'content':_0x2958bf}),updatePinnedFiles(),importedFilesCount++,await db[_0x29892f(0x164)](_0x29892f(0x1b9)+currentUser[_0x29892f(0x182)])[_0x29892f(0x192)]({'importedFilesCount':importedFilesCount});}catch(_0x3dc417){console['error']('Erreur\x20lors\x20de\x20la\x20conversion\x20du\x20fichier\x20Word\x20:',_0x3dc417),showNotification(_0x29892f(0x31b),'error');}else(_0x2b382f[_0x29892f(0x221)][_0x29892f(0x30d)]('image/')||_0x2b382f[_0x29892f(0x221)]===_0x29892f(0x31e))&&(pinnedFiles['push'](_0x2b382f),updatePinnedFiles());}}function convertWordToText(_0x2e9a0a){return new Promise((_0x3f3f12,_0x411b58)=>{const _0x2e4083=_0x4b8e,_0x22b16b=new FileReader();_0x22b16b[_0x2e4083(0x157)]=function(_0x1b62d0){const _0x3a10d9=_0x2e4083,_0x4a55e8=_0x1b62d0[_0x3a10d9(0x17e)][_0x3a10d9(0x1ae)];mammoth[_0x3a10d9(0x256)]({'arrayBuffer':_0x4a55e8})['then'](function(_0x577f97){_0x3f3f12(_0x577f97['value']);})[_0x3a10d9(0x2f0)](function(_0xecc9ee){_0x411b58(_0xecc9ee);});},_0x22b16b[_0x2e4083(0x170)](_0x2e9a0a);});}function updatePinnedFiles(){const _0x806c50=_0x4e2ed5,_0x48e0c4=document[_0x806c50(0x179)](_0x806c50(0x1bb));_0x48e0c4['innerHTML']='',pinnedFiles[_0x806c50(0x1f5)]((_0x36cbcc,_0x360e1b)=>{const _0xf4df06=_0x806c50,_0x2c277c=document[_0xf4df06(0x1d9)]('div');_0x2c277c[_0xf4df06(0x25e)]='pinned-item',_0x2c277c['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>'+(_0x36cbcc[_0xf4df06(0x221)][_0xf4df06(0x30d)](_0xf4df06(0x2f4))?_0xf4df06(0x226):'üìÑ')+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22'+_0x36cbcc[_0xf4df06(0x1dc)]+'\x22>'+_0x36cbcc[_0xf4df06(0x1dc)]+_0xf4df06(0x2dc)+_0x360e1b+_0xf4df06(0x14b),_0x48e0c4[_0xf4df06(0x1b5)](_0x2c277c);});}function removePinnedFile(_0x5a62a2){const _0x1126b9=_0x4e2ed5;pinnedFiles[_0x1126b9(0x33c)](_0x5a62a2,0x1),updatePinnedFiles();}function createPinnedFilesElement(_0x104c41){const _0x4c68af=_0x4e2ed5,_0x3d218f=document[_0x4c68af(0x1d9)](_0x4c68af(0x309));return _0x3d218f[_0x4c68af(0x25e)]=_0x4c68af(0x165),_0x104c41[_0x4c68af(0x1f5)](_0x71c9c9=>{const _0x421b8b=_0x4c68af,_0xa6b467=document[_0x421b8b(0x1d9)](_0x421b8b(0x309));_0xa6b467[_0x421b8b(0x25e)]=_0x421b8b(0x15c);if(_0x71c9c9[_0x421b8b(0x221)][_0x421b8b(0x30d)](_0x421b8b(0x2f4))){const _0x352cd0=document[_0x421b8b(0x1d9)](_0x421b8b(0x184));_0x352cd0[_0x421b8b(0x1e1)]=URL[_0x421b8b(0x2ef)](_0x71c9c9),_0x352cd0['alt']=_0x71c9c9['name'],_0x352cd0[_0x421b8b(0x25e)]='pinned-image',_0xa6b467[_0x421b8b(0x1b5)](_0x352cd0);}else{const _0x5dfc3e=document[_0x421b8b(0x1d9)](_0x421b8b(0x17b));_0x5dfc3e[_0x421b8b(0x25e)]=_0x421b8b(0x265),_0x5dfc3e['textContent']=_0x71c9c9[_0x421b8b(0x221)][_0x421b8b(0x30d)](_0x421b8b(0x31e))?'üìÑ':'üìé',_0xa6b467[_0x421b8b(0x1b5)](_0x5dfc3e);}const _0x39d832=document[_0x421b8b(0x1d9)](_0x421b8b(0x17b));_0x39d832[_0x421b8b(0x25e)]='file-name',_0x39d832[_0x421b8b(0x338)]=_0x71c9c9[_0x421b8b(0x1dc)],_0xa6b467[_0x421b8b(0x1b5)](_0x39d832),_0x3d218f['appendChild'](_0xa6b467);}),_0x3d218f;}function createPinnedResponsesElement(_0x3ebc8f){const _0x4dc0b8=_0x4e2ed5,_0x25c7ad=document[_0x4dc0b8(0x1d9)](_0x4dc0b8(0x309));return _0x25c7ad[_0x4dc0b8(0x25e)]=_0x4dc0b8(0x317),_0x3ebc8f[_0x4dc0b8(0x1f5)](_0xae3445=>{const _0x13a38a=_0x4dc0b8,_0xb30c8=document[_0x13a38a(0x1d9)]('div');_0xb30c8[_0x13a38a(0x25e)]='pinned-response';const _0xa74972=document[_0x13a38a(0x1d9)]('span');_0xa74972[_0x13a38a(0x25e)]=_0x13a38a(0x292),_0xa74972[_0x13a38a(0x338)]='üí¨';const _0x49ef69=document['createElement'](_0x13a38a(0x17b));_0x49ef69[_0x13a38a(0x25e)]='response-text',_0x49ef69['textContent']=_0xae3445[_0x13a38a(0x136)],_0xb30c8[_0x13a38a(0x1b5)](_0xa74972),_0xb30c8['appendChild'](_0x49ef69),_0x25c7ad[_0x13a38a(0x1b5)](_0xb30c8);}),_0x25c7ad;}function createPinnedPromptElement(_0x53f6d2){const _0x171b7f=_0x4e2ed5,_0x1ca5c5=document[_0x171b7f(0x1d9)](_0x171b7f(0x309));_0x1ca5c5[_0x171b7f(0x25e)]='pinned-prompt-message';const _0xe9c3e2=document[_0x171b7f(0x1d9)]('div');_0xe9c3e2[_0x171b7f(0x25e)]=_0x171b7f(0x1ad);const _0x265e36=document['createElement'](_0x171b7f(0x17b));_0x265e36[_0x171b7f(0x25e)]=_0x171b7f(0x258),_0x265e36[_0x171b7f(0x338)]='ü§ñ';const _0x1c0f0c=document[_0x171b7f(0x1d9)](_0x171b7f(0x17b));return _0x1c0f0c[_0x171b7f(0x25e)]='prompt-title',_0x1c0f0c['textContent']=_0x53f6d2[_0x171b7f(0x329)],_0xe9c3e2['appendChild'](_0x265e36),_0xe9c3e2[_0x171b7f(0x1b5)](_0x1c0f0c),_0x1ca5c5[_0x171b7f(0x1b5)](_0xe9c3e2),_0x1ca5c5;}async function sendMessage(){const _0x132734=_0x4e2ed5;if(!currentUser){showNotification(_0x132734(0x145),_0x132734(0x1ec));return;}const _0x1166bd=document['getElementById'](_0x132734(0x2ff))[_0x132734(0x2e4)][_0x132734(0x2aa)](),_0x4f479e=document['getElementById'](_0x132734(0x1cb))[_0x132734(0x2e4)];if(!_0x1166bd&&pinnedFiles[_0x132734(0x23f)]===0x0&&pinnedResponses[_0x132734(0x23f)]===0x0&&!pinnedPrompt){showNotification(_0x132734(0x1aa),_0x132734(0x1ec));return;}let _0x1f9926=_0x1166bd;pinnedPrompt&&(pinnedPrompt[_0x132734(0x221)]==='image'?_0x1f9926=pinnedPrompt['content']+_0x132734(0x19a)+_0x1166bd:_0x1f9926=pinnedPrompt['content']+'\x0a\x0a'+_0x1166bd);if(isImageGenerationModel(_0x4f479e)){try{const _0x2c5ed0=await canGenerateImage();if(!_0x2c5ed0[_0x132734(0x156)]){showPaymentNotification(_0x2c5ed0['message']);return;}const _0x253924=addLoadingMessage('G√©n√©ration\x20de\x20l\x27image\x20en\x20cours...'),_0x5a58f2=document[_0x132734(0x179)]('imageSizeSelect')[_0x132734(0x2e4)],_0x962894=getRecraftStyle(_0x4f479e),_0xac5728=await fetch(_0x132734(0x2d8),{'method':_0x132734(0x1a0),'headers':{'Content-Type':_0x132734(0x142),'Authorization':_0x132734(0x2ad)+RECRAFT_API_KEY},'body':JSON['stringify']({'prompt':_0x1f9926,'style':_0x962894,'size':_0x5a58f2})});_0x253924[_0x132734(0x29c)]();if(!_0xac5728['ok'])throw new Error('Erreur\x20lors\x20de\x20la\x20g√©n√©ration\x20de\x20l\x27image');const _0x1b2a4a=await _0xac5728[_0x132734(0x334)](),_0x23fe88=_0x1b2a4a['data'][0x0][_0x132734(0x18a)],_0x1e8831=document[_0x132734(0x1d9)](_0x132734(0x309));_0x1e8831[_0x132734(0x25e)]=_0x132734(0x230),_0x1e8831['innerHTML']=_0x132734(0x1e0)+_0x23fe88+_0x132734(0x2e0)+_0x1f9926+_0x132734(0x16d)+_0x962894[_0x132734(0x137)]('_','\x20')[_0x132734(0x27e)]()+_0x132734(0x21a)+_0x5a58f2+_0x132734(0x24f)+(_0x2c5ed0[_0x132734(0x1fe)]?'G√©n√©ration\x20gratuite\x20(abonnement)':'G√©n√©ration\x20payante\x20(5\x20cr√©dits)')+_0x132734(0x319)+_0x23fe88+_0x132734(0x22d)+_0x23fe88+_0x132734(0x2db)+_0x23fe88+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-share-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',document[_0x132734(0x179)]('messageContainer')[_0x132734(0x1b5)](_0x1e8831);if(_0x2c5ed0['useFreeGeneration']){await incrementImageGenerationCount(currentUser[_0x132734(0x182)]);const _0x5983bf=await getImageGenerationCount(currentUser[_0x132734(0x182)]);showNotification('Image\x20g√©n√©r√©e\x20avec\x20succ√®s!\x20Il\x20vous\x20reste\x20'+(0x5-_0x5983bf)+_0x132734(0x207),_0x132734(0x2be));}else await updateCredits(_0x4f479e,0x5),showNotification(_0x132734(0x140),_0x132734(0x2be));}catch(_0x263426){console[_0x132734(0x1ec)](_0x132734(0x1c4),_0x263426),showNotification(_0x132734(0x31a),_0x132734(0x1ec));}finally{document[_0x132734(0x179)]('userInput')[_0x132734(0x2e4)]='',resetTextareaHeight(),pinnedPrompt=null,updatePinnedItems();}return;}let _0x12821e=0x1;_0x12821e+=pinnedFiles[_0x132734(0x323)](_0x3b2f7d=>_0x3b2f7d[_0x132734(0x221)]!==_0x132734(0x194))[_0x132734(0x23f)],_0x12821e+=pinnedResponses[_0x132734(0x23f)];if(!hasValidSubscription()){if(_0x4f479e===_0x132734(0x132)){if(currentUser[_0x132734(0x21c)]>=_0x12821e)showNotification(_0x132734(0x32b),_0x132734(0x26a));else{if(currentUser[_0x132734(0x15e)]>=_0x12821e)showNotification(_0x132734(0x1ea),_0x132734(0x26a));else{showPaymentNotification(_0x132734(0x2ee));return;}}}else{if(![_0x132734(0x2d5)][_0x132734(0x26f)](_0x4f479e)){if(currentUser['paidCredits']<_0x12821e){showPaymentNotification(_0x132734(0x1f0));return;}}else{if(currentUser[_0x132734(0x15e)]<_0x12821e&&currentUser[_0x132734(0x21c)]<_0x12821e){showPaymentNotification(_0x132734(0x173));return;}}}}let _0x12c82a=_0x1166bd,_0x428056=_0x1166bd;const _0x508491=[...pinnedFiles],_0x105fb1=[...pinnedResponses],_0x3ed56f=pinnedPrompt;pinnedFiles=[],pinnedResponses=[],pinnedPrompt=null,updatePinnedItems();const _0x2cd92f=document['createElement']('div');_0x2cd92f['className']=_0x132734(0x197);if(_0x508491['length']>0x0){const _0x2fdc0f=createPinnedFilesElement(_0x508491);_0x2cd92f[_0x132734(0x1b5)](_0x2fdc0f),_0x428056+=_0x132734(0x26d),_0x508491[_0x132734(0x1f5)](_0x41de4c=>{const _0x41ff69=_0x132734;_0x428056+='-\x20'+_0x41de4c[_0x41ff69(0x1dc)]+'\x20('+_0x41de4c['type']+')\x0a';});}if(_0x105fb1[_0x132734(0x23f)]>0x0){const _0x3f39dc=createPinnedResponsesElement(_0x105fb1);_0x2cd92f['appendChild'](_0x3f39dc),_0x428056+=_0x132734(0x291),_0x105fb1[_0x132734(0x1f5)](_0x42fbe5=>{const _0x352579=_0x132734;_0x428056+='-\x20'+_0x42fbe5[_0x352579(0x18d)]+'\x0a';});}if(_0x3ed56f){const _0x599a68=createPinnedPromptElement(_0x3ed56f);_0x2cd92f[_0x132734(0x1b5)](_0x599a68),_0x428056=_0x3ed56f['content']+'\x0a\x0a'+_0x428056;}if(_0x12c82a){const _0x182543=document['createElement']('p');_0x182543[_0x132734(0x338)]=_0x12c82a,_0x2cd92f['appendChild'](_0x182543);}const _0x13ec42=document[_0x132734(0x179)](_0x132734(0x2c9));_0x13ec42[_0x132734(0x1b5)](_0x2cd92f),_0x13ec42[_0x132734(0x1e9)]=_0x13ec42[_0x132734(0x240)],document[_0x132734(0x179)](_0x132734(0x2ff))[_0x132734(0x2e4)]='',resetTextareaHeight();const _0xdda3ad=document[_0x132734(0x255)]('.input-actions\x20button:last-child');_0xdda3ad['classList']['add']('loading'),_0xdda3ad[_0x132734(0x1a3)]=!![];try{const _0x18bf2e=[];let _0x34e3f7='';const _0x35f9cc=currentConversation[_0x132734(0x1ab)](-0x5);_0x35f9cc[_0x132734(0x1f5)](_0x11087b=>{const _0x3961c5=_0x132734;_0x34e3f7+=(_0x11087b[_0x3961c5(0x15d)]===_0x3961c5(0x18e)?_0x3961c5(0x18e):'model')+':\x20'+_0x11087b[_0x3961c5(0x2d1)]+'\x0a';}),_0x428056=_0x34e3f7+'\x0a'+_0x428056,_0x18bf2e[_0x132734(0x190)]({'text':_0x428056});for(const _0x1ed499 of _0x508491){if(_0x1ed499[_0x132734(0x221)]===_0x132734(0x194))_0x18bf2e[_0x132734(0x190)]({'text':'Analyse\x20ce\x20fichier\x20texte:\x20'+_0x1ed499[_0x132734(0x2d1)]});else{const _0x10f453=await readFileAsBase64(_0x1ed499);_0x18bf2e[_0x132734(0x190)]({'inlineData':{'data':_0x10f453,'mimeType':_0x1ed499[_0x132734(0x221)]}}),_0x18bf2e[_0x132734(0x190)]({'text':_0x132734(0x26c)+_0x1ed499[_0x132734(0x1dc)]+'\x20('+_0x1ed499[_0x132734(0x221)]+_0x132734(0x243)});}}model=genAI[_0x132734(0x1d3)]({'model':_0x4f479e,'systemInstruction':SYSTEM_INSTRUCTION});const _0x27eaee=await model['generateContent'](_0x18bf2e),_0x4859e6=await _0x27eaee[_0x132734(0x202)];let _0x1a3ac=_0x4859e6[_0x132734(0x18d)](),_0x11b0a2;if(_0x4f479e===_0x132734(0x2d5)||_0x4f479e===_0x132734(0x132)&&currentUser['paidCredits']<_0x12821e){const _0x15d233=_0x1a3ac[_0x132734(0x198)](/\s+/);_0x15d233['length']>FREE_MODEL_MAX_RESPONSE?(_0x1a3ac=_0x15d233[_0x132734(0x1ab)](0x0,FREE_MODEL_MAX_RESPONSE)[_0x132734(0x282)]('\x20')+_0x132734(0x254),showNotification(_0x132734(0x1fb)+FREE_MODEL_MAX_RESPONSE+_0x132734(0x337),_0x132734(0x26a)),_0x11b0a2=addMessageToChat('ai',_0x1a3ac),showUpgradeButton(_0x11b0a2)):_0x11b0a2=addMessageToChat('ai',_0x1a3ac);}else _0x11b0a2=addMessageToChat('ai',_0x1a3ac);currentConversation['push']({'sender':_0x132734(0x18e),'content':_0x1166bd}),currentConversation[_0x132734(0x190)]({'sender':'ai','content':_0x1a3ac}),await updateCredits(_0x4f479e,_0x12821e),saveConversation();}catch(_0x5e2759){console[_0x132734(0x1ec)](_0x132734(0x13a),_0x5e2759),showNotification(_0x132734(0x33a)+_0x5e2759[_0x132734(0x17a)]+_0x132734(0x13b),_0x132734(0x1ec));}finally{_0xdda3ad[_0x132734(0x32d)][_0x132734(0x29c)]('loading'),_0xdda3ad['disabled']=![];}}function resetPinnedItems(){pinnedFiles=[],pinnedResponses=[],pinnedPrompt=null,updatePinnedItems();}function buildConversationContext(){const _0x223bbc=_0x4e2ed5;let _0x5104a9='';const _0x3a85c6=currentConversation[_0x223bbc(0x1ab)](-0x5);return _0x3a85c6['forEach'](_0x38516f=>{const _0x33f3be=_0x223bbc;_0x5104a9+=(_0x38516f[_0x33f3be(0x15d)]==='user'?_0x33f3be(0x18e):_0x33f3be(0x178))+':\x20'+_0x38516f[_0x33f3be(0x2d1)]+'\x0a';}),_0x5104a9;}async function addFilesToParts(_0x2300f0,_0x472f6c){const _0x4e4669=_0x4e2ed5;for(const _0xae73b9 of _0x472f6c){if(_0xae73b9[_0x4e4669(0x221)]===_0x4e4669(0x194))_0x2300f0[_0x4e4669(0x190)]({'text':_0x4e4669(0x2b7)+_0xae73b9[_0x4e4669(0x2d1)]});else{const _0x3e7683=await readFileAsBase64(_0xae73b9);_0x2300f0[_0x4e4669(0x190)]({'inlineData':{'data':_0x3e7683,'mimeType':_0xae73b9[_0x4e4669(0x221)]}}),_0x2300f0[_0x4e4669(0x190)]({'text':_0x4e4669(0x26c)+_0xae73b9['name']+'\x20('+_0xae73b9['type']+').'});}}}async function validateCreditsAndModel(_0x1928d3,_0x2f91ca){const _0x5b809b=_0x4e2ed5;if(_0x1928d3===_0x5b809b(0x132)){if(currentUser[_0x5b809b(0x21c)]>=_0x2f91ca)return showNotification('Utilisation\x20de\x20cr√©dits\x20payants\x20pour\x20Gemini\x201.5\x20Flash.',_0x5b809b(0x26a)),!![];else{if(currentUser[_0x5b809b(0x15e)]>=_0x2f91ca)return showNotification('Utilisation\x20de\x20cr√©dits\x20gratuits\x20pour\x20Gemini\x201.5\x20Flash.',_0x5b809b(0x26a)),!![];}}else{if(![_0x5b809b(0x2d5)][_0x5b809b(0x26f)](_0x1928d3)){if(currentUser['paidCredits']<_0x2f91ca)return showPaymentNotification('Vous\x20n\x27avez\x20pas\x20assez\x20de\x20cr√©dits\x20payants\x20pour\x20ce\x20mod√®le\x20avanc√©.'),![];}else{if(currentUser['freeCredits']<_0x2f91ca&&currentUser['paidCredits']<_0x2f91ca)return showPaymentNotification(_0x5b809b(0x173)),![];}}return!![];}async function processAndDisplayAIResponse(_0x18516f,_0x27a6b8,_0x2b26b7){const _0x528d3f=_0x4e2ed5;let _0x23be50;if(_0x27a6b8===_0x528d3f(0x2d5)||_0x27a6b8===_0x528d3f(0x132)&&currentUser['paidCredits']<_0x2b26b7){const _0x662e51=_0x18516f[_0x528d3f(0x198)](/\s+/);_0x662e51[_0x528d3f(0x23f)]>FREE_MODEL_MAX_RESPONSE?(_0x18516f=_0x662e51[_0x528d3f(0x1ab)](0x0,FREE_MODEL_MAX_RESPONSE)[_0x528d3f(0x282)]('\x20')+_0x528d3f(0x254),showNotification(_0x528d3f(0x1fb)+FREE_MODEL_MAX_RESPONSE+_0x528d3f(0x337),'info'),_0x23be50=addMessageToChat('ai',_0x18516f),showUpgradeButton(_0x23be50)):_0x23be50=addMessageToChat('ai',_0x18516f);}else _0x23be50=addMessageToChat('ai',_0x18516f);return _0x23be50;}function updateConversation(_0x2a5235,_0x42bcda){const _0x1e9afc=_0x4e2ed5;currentConversation[_0x1e9afc(0x190)]({'sender':'user','content':_0x2a5235}),currentConversation[_0x1e9afc(0x190)]({'sender':'ai','content':_0x42bcda});}async function handleImageGeneration(_0x26ec0c,_0x3dc449,_0x3593d0){const _0x332891=_0x4e2ed5;try{if(!_0x3593d0[_0x332891(0x156)]){showPaymentNotification(_0x3593d0[_0x332891(0x17a)]);return;}const _0x1f1e97=document['getElementById'](_0x332891(0x203))[_0x332891(0x2e4)],_0x1d6ee7=getRecraftStyle(_0x3dc449),_0x53d8a1=addLoadingMessage(_0x332891(0x25c)),_0x4de912=await fetch(_0x332891(0x23d),{'method':'POST','headers':{'Content-Type':_0x332891(0x142),'Authorization':'Bearer\x20'+RECRAFT_API_KEY},'body':JSON[_0x332891(0x1fc)]({'prompt':_0x26ec0c,'style':_0x1d6ee7,'size':_0x1f1e97,'n':0x1})});_0x53d8a1[_0x332891(0x29c)]();if(!_0x4de912['ok'])throw new Error('Erreur\x20HTTP:\x20'+_0x4de912['status']);const _0x2be102=await _0x4de912[_0x332891(0x334)]();if(!_0x2be102[_0x332891(0x19c)]||!_0x2be102[_0x332891(0x19c)][0x0]||!_0x2be102[_0x332891(0x19c)][0x0][_0x332891(0x18a)])throw new Error('Format\x20de\x20r√©ponse\x20invalide\x20de\x20l\x27API\x20Recraft');const _0x17dedb=_0x2be102[_0x332891(0x19c)][0x0][_0x332891(0x18a)],_0x25eaf5=document['createElement']('div');_0x25eaf5[_0x332891(0x25e)]=_0x332891(0x230),_0x25eaf5[_0x332891(0x1a8)]=_0x332891(0x147)+_0x17dedb+_0x332891(0x172)+_0x26ec0c+'\x22</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-metadata\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>Style:\x20'+_0x1d6ee7[_0x332891(0x137)]('_','\x20')[_0x332891(0x27e)]()+_0x332891(0x336)+_0x1f1e97+_0x332891(0x28e)+(_0x3593d0[_0x332891(0x1fe)]?_0x332891(0x325):_0x332891(0x14e))+_0x332891(0x301)+_0x17dedb+_0x332891(0x31c)+_0x17dedb+_0x332891(0x298)+_0x17dedb+_0x332891(0x17f),document[_0x332891(0x179)](_0x332891(0x2c9))['appendChild'](_0x25eaf5);if(_0x3593d0[_0x332891(0x1fe)]){await incrementImageGenerationCount(currentUser[_0x332891(0x182)]);const _0x54eebe=await getImageGenerationCount(currentUser[_0x332891(0x182)]);showNotification(_0x332891(0x2eb)+(0x5-_0x54eebe)+_0x332891(0x207),_0x332891(0x2be));}else await updateCredits(_0x3dc449,0x5),showNotification('Image\x20g√©n√©r√©e\x20avec\x20succ√®s!\x205\x20cr√©dits\x20ont\x20√©t√©\x20d√©duits.',_0x332891(0x2be));document[_0x332891(0x179)](_0x332891(0x2ff))[_0x332891(0x2e4)]='',resetTextareaHeight();}catch(_0x511961){console[_0x332891(0x1ec)](_0x332891(0x2fa),_0x511961),showNotification('Erreur\x20lors\x20de\x20la\x20g√©n√©ration\x20de\x20l\x27image.\x20Veuillez\x20r√©essayer.',_0x332891(0x1ec));}}function createUserMessageElement(_0x12b5a8,_0x4cbb4e,_0x4b8b69,_0x457ea9){const _0x448d5f=_0x4e2ed5,_0x510e06=document[_0x448d5f(0x1d9)](_0x448d5f(0x309));_0x510e06[_0x448d5f(0x25e)]=_0x448d5f(0x197);_0x4cbb4e[_0x448d5f(0x23f)]>0x0&&_0x510e06[_0x448d5f(0x1b5)](createPinnedFilesElement(_0x4cbb4e));_0x4b8b69[_0x448d5f(0x23f)]>0x0&&_0x510e06['appendChild'](createPinnedResponsesElement(_0x4b8b69));_0x457ea9&&_0x510e06[_0x448d5f(0x1b5)](createPinnedPromptElement(_0x457ea9));if(_0x12b5a8){const _0x22b804=document['createElement']('p');_0x22b804['textContent']=_0x12b5a8,_0x510e06[_0x448d5f(0x1b5)](_0x22b804);}return _0x510e06;}function addLoadingMessage(_0x4eae9d){const _0x4f4809=_0x4e2ed5,_0x13e986=document[_0x4f4809(0x1d9)](_0x4f4809(0x309));return _0x13e986[_0x4f4809(0x25e)]=_0x4f4809(0x1f8),_0x13e986[_0x4f4809(0x1a8)]=_0x4f4809(0x1a5)+_0x4eae9d+_0x4f4809(0x299),document[_0x4f4809(0x179)](_0x4f4809(0x2c9))['appendChild'](_0x13e986),_0x13e986;}async function downloadImage(_0xcda0eb,_0x41963c){const _0x2f6f32=_0x4e2ed5;try{const _0x4b75db=await fetch(_0xcda0eb),_0x23f1e0=await _0x4b75db[_0x2f6f32(0x2d6)](),_0x56d3a5=window[_0x2f6f32(0x22b)][_0x2f6f32(0x2ef)](_0x23f1e0),_0x4f249c=document[_0x2f6f32(0x1d9)]('a');_0x4f249c['href']=_0x56d3a5,_0x4f249c[_0x2f6f32(0x20d)]=_0x41963c,document['body']['appendChild'](_0x4f249c),_0x4f249c['click'](),document[_0x2f6f32(0x27d)][_0x2f6f32(0x1b2)](_0x4f249c),window['URL'][_0x2f6f32(0x16e)](_0x56d3a5);}catch(_0x1fab31){showNotification(_0x2f6f32(0x1db),_0x2f6f32(0x1ec));}}function copyImage(_0x454c0a){const _0x5e2699=_0x4e2ed5;navigator[_0x5e2699(0x1f2)][_0x5e2699(0x303)](_0x454c0a)[_0x5e2699(0x276)](()=>showNotification(_0x5e2699(0x15f),_0x5e2699(0x2be)))['catch'](()=>showNotification('Erreur\x20lors\x20de\x20la\x20copie\x20du\x20lien.',_0x5e2699(0x1ec)));}function shareImage(_0x4d35e2){const _0x9567e8=_0x4e2ed5;navigator[_0x9567e8(0x216)]?navigator[_0x9567e8(0x216)]({'title':_0x9567e8(0x2e5),'text':_0x9567e8(0x246),'url':_0x4d35e2})[_0x9567e8(0x276)](()=>showNotification(_0x9567e8(0x2d3),_0x9567e8(0x2be)))[_0x9567e8(0x2f0)](_0x27723c=>{const _0x3f22f3=_0x9567e8;console[_0x3f22f3(0x1ec)](_0x3f22f3(0x1b7),_0x27723c),showNotification('Erreur\x20lors\x20du\x20partage\x20de\x20l\x27image.',_0x3f22f3(0x1ec));}):copyImage(_0x4d35e2);}function pinResponse(_0x11bd01){const _0x1ba68f=_0x4e2ed5,_0x2331c6=_0x11bd01['querySelector']('div:first-child')['textContent'],_0x473781=_0x2331c6['length']>0x32?_0x2331c6[_0x1ba68f(0x1c5)](0x0,0x32)+_0x1ba68f(0x270):_0x2331c6;pinnedResponses['push']({'text':_0x2331c6,'displayText':_0x473781}),updatePinnedItems();}function updatePinnedItems(){const _0x474f6d=_0x4e2ed5,_0x1d31c8=document['getElementById'](_0x474f6d(0x1bb));_0x1d31c8[_0x474f6d(0x1a8)]='',pinnedFiles[_0x474f6d(0x1f5)]((_0x406d1a,_0x3658af)=>{const _0x20ea64=_0x474f6d,_0x47e763=document[_0x20ea64(0x1d9)](_0x20ea64(0x309));_0x47e763[_0x20ea64(0x25e)]=_0x20ea64(0x252),_0x47e763[_0x20ea64(0x2b0)](_0x20ea64(0x189),_0x20ea64(0x2a7)),_0x47e763[_0x20ea64(0x1a8)]=_0x20ea64(0x267)+(_0x406d1a[_0x20ea64(0x221)]['startsWith'](_0x20ea64(0x2f4))?_0x20ea64(0x226):'üìÑ')+_0x20ea64(0x248)+_0x406d1a['name']+'\x22>'+_0x406d1a[_0x20ea64(0x1dc)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27file\x27,\x20'+_0x3658af+')\x22>‚ùå</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x1d31c8[_0x20ea64(0x1b5)](_0x47e763);}),pinnedResponses[_0x474f6d(0x1f5)]((_0x5e4de1,_0x18b2b8)=>{const _0x7394e6=_0x474f6d,_0x4c4f88=document[_0x7394e6(0x1d9)](_0x7394e6(0x309));_0x4c4f88[_0x7394e6(0x25e)]=_0x7394e6(0x252),_0x4c4f88[_0x7394e6(0x2b0)](_0x7394e6(0x189),'response'),_0x4c4f88[_0x7394e6(0x1a8)]=_0x7394e6(0x180)+_0x5e4de1['text']+'\x22>'+_0x5e4de1[_0x7394e6(0x136)]+_0x7394e6(0x2f1)+_0x18b2b8+_0x7394e6(0x14b),_0x1d31c8['appendChild'](_0x4c4f88);});if(pinnedPrompt){const _0xbabb2f=document[_0x474f6d(0x1d9)](_0x474f6d(0x309));_0xbabb2f['className']=_0x474f6d(0x252),_0xbabb2f['setAttribute'](_0x474f6d(0x189),_0x474f6d(0x1d0)),_0xbabb2f['innerHTML']=_0x474f6d(0x1dd)+pinnedPrompt[_0x474f6d(0x329)]+'\x22>'+pinnedPrompt[_0x474f6d(0x329)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27prompt\x27)\x22>‚ùå</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x1d31c8[_0x474f6d(0x1b5)](_0xbabb2f);}}function removePinnedItem(_0x17481d,_0x239d33){const _0x2cf4dd=_0x4e2ed5;if(_0x17481d===_0x2cf4dd(0x2a7))pinnedFiles[_0x2cf4dd(0x33c)](_0x239d33,0x1);else{if(_0x17481d==='response')pinnedResponses[_0x2cf4dd(0x33c)](_0x239d33,0x1);else _0x17481d===_0x2cf4dd(0x1d0)&&(pinnedPrompt=null);}updatePinnedItems();}function replyToMessage(_0x35d59f){const _0x1b7df4=_0x4e2ed5,_0x1ebe96=_0x35d59f[_0x1b7df4(0x255)](_0x1b7df4(0x2e7))[_0x1b7df4(0x338)],_0x1570bc=document[_0x1b7df4(0x179)](_0x1b7df4(0x2ff));_0x1570bc['value']='>\x20'+_0x1ebe96+'\x0a\x0a',_0x1570bc['focus'](),_0x1570bc[_0x1b7df4(0x2e9)](_0x1570bc[_0x1b7df4(0x2e4)]['length'],_0x1570bc['value']['length']);}function readFileAsBase64(_0x437289){return new Promise((_0x4f858a,_0x578e87)=>{const _0x24d593=_0x4b8e,_0x2e6da3=new FileReader();_0x2e6da3['onload']=()=>_0x4f858a(_0x2e6da3[_0x24d593(0x1ae)]['split'](',')[0x1]),_0x2e6da3[_0x24d593(0x264)]=_0x578e87,_0x2e6da3['readAsDataURL'](_0x437289);});}function hasEnoughCredits(_0x2b93b7,_0x1d14d3){const _0x158e90=_0x4e2ed5,_0x1eaf05=_0x1d14d3>0x0?_0x1d14d3:0x1;return _0x2b93b7===_0x158e90(0x132)||_0x2b93b7===_0x158e90(0x2d5)?currentUser[_0x158e90(0x15e)]>=_0x1eaf05||currentUser[_0x158e90(0x21c)]>=_0x1eaf05||hasValidSubscription():currentUser[_0x158e90(0x21c)]>=_0x1eaf05||hasValidSubscription();}async function updateCredits(_0xacb5a8,_0x25ffa8){const _0x4646cb=_0x4e2ed5;if(hasValidSubscription()&&!isImageGenerationModel(_0xacb5a8))return;const _0x46c272=db[_0x4646cb(0x164)](_0x4646cb(0x1b9)+currentUser[_0x4646cb(0x182)]);try{await _0x46c272[_0x4646cb(0x1ce)](_0x55cac4=>{const _0x4c7b35=_0x4646cb;if(_0x55cac4){if(isImageGenerationModel(_0xacb5a8)){if(hasValidSubscription()){const _0x3c131c=_0x55cac4['imageGeneration']?.['dailyCount']||0x0;_0x3c131c>=0x5&&(_0x55cac4[_0x4c7b35(0x21c)]>=0x5?_0x55cac4[_0x4c7b35(0x21c)]-=0x5:_0x55cac4[_0x4c7b35(0x15e)]=Math[_0x4c7b35(0x26b)](0x0,_0x55cac4[_0x4c7b35(0x15e)]-0x5));}else _0x55cac4[_0x4c7b35(0x21c)]>=0x5?_0x55cac4[_0x4c7b35(0x21c)]-=0x5:_0x55cac4[_0x4c7b35(0x15e)]=Math[_0x4c7b35(0x26b)](0x0,_0x55cac4[_0x4c7b35(0x15e)]-0x5);}else{if(!hasValidSubscription()){if(_0xacb5a8==='gemini-1.5-flash')_0x55cac4['paidCredits']>=_0x25ffa8?_0x55cac4[_0x4c7b35(0x21c)]-=_0x25ffa8:_0x55cac4[_0x4c7b35(0x15e)]-=_0x25ffa8;else{if(_0xacb5a8==='gemini-1.0-pro'){if(_0x55cac4[_0x4c7b35(0x15e)]>=_0x25ffa8)_0x55cac4[_0x4c7b35(0x15e)]-=_0x25ffa8;else{const _0x16c74b=_0x25ffa8-_0x55cac4[_0x4c7b35(0x15e)];_0x55cac4[_0x4c7b35(0x15e)]=0x0,_0x55cac4[_0x4c7b35(0x21c)]=Math[_0x4c7b35(0x26b)](0x0,_0x55cac4[_0x4c7b35(0x21c)]-_0x16c74b);}}else _0x55cac4[_0x4c7b35(0x21c)]=Math[_0x4c7b35(0x26b)](0x0,_0x55cac4[_0x4c7b35(0x21c)]-_0x25ffa8);}}}_0x55cac4['freeCredits']=Math[_0x4c7b35(0x26b)](0x0,_0x55cac4[_0x4c7b35(0x15e)]),_0x55cac4[_0x4c7b35(0x21c)]=Math[_0x4c7b35(0x26b)](0x0,_0x55cac4[_0x4c7b35(0x21c)]);}return _0x55cac4;});const _0x2aaadc=await _0x46c272['once']('value'),_0x57111a=_0x2aaadc[_0x4646cb(0x16c)]();_0x57111a&&(currentUser[_0x4646cb(0x15e)]=_0x57111a[_0x4646cb(0x15e)],currentUser[_0x4646cb(0x21c)]=_0x57111a['paidCredits'],document[_0x4646cb(0x179)](_0x4646cb(0x15e))[_0x4646cb(0x338)]=currentUser[_0x4646cb(0x15e)],document[_0x4646cb(0x179)](_0x4646cb(0x21c))[_0x4646cb(0x338)]=currentUser[_0x4646cb(0x21c)],currentUser['freeCredits']===0x0&&currentUser[_0x4646cb(0x21c)]<0x5&&showNotification(_0x4646cb(0x1cc),_0x4646cb(0x239)));}catch(_0x5ecbae){console[_0x4646cb(0x1ec)](_0x4646cb(0x2e3),_0x5ecbae),showNotification('Erreur\x20lors\x20de\x20la\x20mise\x20√†\x20jour\x20des\x20cr√©dits',_0x4646cb(0x1ec));}}async function addCreditsToUser(_0x1dd7cc){const _0x7919d2=_0x4e2ed5,_0x539cb8=db[_0x7919d2(0x164)]('users/'+currentUser[_0x7919d2(0x182)]);await _0x539cb8['transaction'](_0x2e738f=>{const _0x5a7ab3=_0x7919d2;return _0x2e738f&&(_0x2e738f[_0x5a7ab3(0x21c)]+=_0x1dd7cc),_0x2e738f;}),currentUser[_0x7919d2(0x21c)]=(await _0x539cb8[_0x7919d2(0x160)](_0x7919d2(0x21c))[_0x7919d2(0x20e)](_0x7919d2(0x2e4)))[_0x7919d2(0x16c)](),document[_0x7919d2(0x179)](_0x7919d2(0x21c))[_0x7919d2(0x338)]=currentUser['paidCredits'];}function copyResponse(_0x2662c5){const _0x56fa87=_0x4e2ed5,_0x4f6c80=_0x2662c5['querySelector']('div:first-child')['textContent'];navigator[_0x56fa87(0x1f2)]['writeText'](_0x4f6c80)['then'](()=>{const _0x4e7f2f=_0x56fa87;showNotification(_0x4e7f2f(0x320),_0x4e7f2f(0x2be));});}async function exportResponse(_0x10e95d,_0x621727){const _0x20fc04=_0x4e2ed5,_0x2a45c5=_0x10e95d['querySelector'](_0x20fc04(0x2e7))[_0x20fc04(0x338)];if(_0x621727===_0x20fc04(0x260)){const _0x103a49=await generateWordDoc(_0x2a45c5);saveAs(_0x103a49,'Eduque_moi.docx');}else{if(_0x621727===_0x20fc04(0x332)){const _0x3de2f4=await generatePDF(_0x2a45c5);saveAs(_0x3de2f4,'Eduque_moi.pdf');}}showNotification(_0x20fc04(0x123)+_0x621727[_0x20fc04(0x27e)]()+_0x20fc04(0x18f),_0x20fc04(0x2be));}async function generateWordDoc(_0x5f1ab6){const _0x5e9f3d=_0x4e2ed5,_0x2ce540=_0x5e9f3d(0x1ff)+_0x5f1ab6+_0x5e9f3d(0x26e),_0x4d4192=new PizZip();_0x4d4192[_0x5e9f3d(0x2a7)](_0x5e9f3d(0x211),_0x2ce540);const _0xf2d0cf=await _0x4d4192[_0x5e9f3d(0x261)]({'type':'blob','mimeType':'application/vnd.openxmlformats-officedocument.wordprocessingml.document'});return _0xf2d0cf;}function generatePDF(_0x50b7e9){const _0x277579=_0x4e2ed5,{jsPDF:_0x45bb40}=window['jspdf'],_0x244a6d=new _0x45bb40();_0x244a6d[_0x277579(0x2da)](0x12),_0x244a6d['text']('',0x14,0x14),_0x244a6d['setFontSize'](0xc);const _0x3e8954=_0x244a6d[_0x277579(0x306)](_0x50b7e9,0xaa);let _0x47f29a=0x1e;const _0x27e108=_0x244a6d[_0x277579(0x185)][_0x277579(0x201)]['height'];for(let _0x24ef11=0x0;_0x24ef11<_0x3e8954['length'];_0x24ef11++){_0x47f29a>_0x27e108-0x14&&(_0x244a6d[_0x277579(0x19f)](),_0x47f29a=0x14),_0x244a6d[_0x277579(0x18d)](_0x3e8954[_0x24ef11],0x14,_0x47f29a),_0x47f29a+=0x7;}return _0x244a6d[_0x277579(0x1d4)]('blob');}function shareResponse(_0x55b2a0){const _0x24e463=_0x4e2ed5,_0xdd67a3=_0x55b2a0[_0x24e463(0x255)](_0x24e463(0x2e7))[_0x24e463(0x338)];navigator[_0x24e463(0x216)]?navigator[_0x24e463(0x216)]({'title':'','text':_0xdd67a3})['then'](()=>{const _0x2ed72f=_0x24e463;showNotification(_0x2ed72f(0x1cd),_0x2ed72f(0x2be));})['catch'](_0x3eb2c2=>{const _0x1b6686=_0x24e463;console[_0x1b6686(0x1ec)](_0x1b6686(0x1b7),_0x3eb2c2),showNotification(_0x1b6686(0x28a),_0x1b6686(0x1ec));}):showNotification(_0x24e463(0x251),_0x24e463(0x1ec));}function hasValidSubscription(){const _0x12b558=_0x4e2ed5;if(!currentUser[_0x12b558(0x188)]||!currentUser[_0x12b558(0x1f9)])return![];return new Date()<new Date(currentUser[_0x12b558(0x1f9)]);}function buySubscription(){const _0x4b2d87=_0x4e2ed5,_0x1c85be=document[_0x4b2d87(0x179)]('subscriptionSelect')['value'];if(!_0x1c85be){showNotification(_0x4b2d87(0x2cf),_0x4b2d87(0x1ec));return;}const _0x3fadd7={'24h':0x1f4,'3d':0x4b0,'7d':0x960,'30d':0x1f40,'3m':0x4e20},_0x183baf=_0x3fadd7[_0x1c85be];var _0x4532e6=FedaPay['init']({'public_key':_0x4b2d87(0x308),'transaction':{'amount':_0x183baf,'description':'Achat\x20d\x27un\x20forfait\x20'+_0x1c85be+'\x20pour\x20Eduque\x20moi'},'customer':{'email':_0x4b2d87(0x278)},'onComplete':async function(_0x5e048a){const _0x3f128d=_0x4b2d87;if(_0x5e048a[_0x3f128d(0x2dd)]===FedaPay['CHECKOUT_COMPLETED']){const _0x5b2526={'id':_0x5e048a['id'],'description':_0x3f128d(0x159)+_0x1c85be+_0x3f128d(0x22a),'amount':_0x183baf};await activateSubscription(_0x1c85be),showInvoiceDetails(_0x5b2526),showNotification(_0x3f128d(0x1cf)+_0x1c85be+_0x3f128d(0x263),_0x3f128d(0x2be)),await checkFirstPurchaseAndRewardReferrer(currentUser[_0x3f128d(0x182)],_0x183baf);}else showNotification(_0x3f128d(0x33f),_0x3f128d(0x1ec));}});_0x4532e6[_0x4b2d87(0x1a7)]();}async function activateSubscription(_0x1b0186){const _0x4ba469=_0x4e2ed5,_0x1cad15={'24h':0x1,'3d':0x3,'7d':0x7,'30d':0x1e,'3m':0x5a},_0x1b76dc=_0x1cad15[_0x1b0186],_0x4d860b=new Date();_0x4d860b[_0x4ba469(0x1b0)](_0x4d860b[_0x4ba469(0x20a)]()+_0x1b76dc),currentUser[_0x4ba469(0x188)]=_0x1b0186,currentUser[_0x4ba469(0x1f9)]=_0x4d860b[_0x4ba469(0x2ca)](),await syncUserData(),document[_0x4ba469(0x179)](_0x4ba469(0x188))[_0x4ba469(0x338)]=_0x1b0186;}function buyCredits(){const _0xfdd5ad=_0x4e2ed5,_0x4abd67=document['getElementById'](_0xfdd5ad(0x274))['value'];if(!_0x4abd67){showNotification('Veuillez\x20s√©lectionner\x20un\x20pack\x20de\x20cr√©dits.',_0xfdd5ad(0x1ec));return;}const _0x375c46={'10':0xc8,'100':0x3e8,'500':0x1194,'1000':0x1f40},_0x51e5bd=_0x375c46[_0x4abd67];var _0x23b21a=FedaPay['init']({'public_key':_0xfdd5ad(0x308),'transaction':{'amount':_0x51e5bd,'description':_0xfdd5ad(0x1ef)+_0x4abd67+_0xfdd5ad(0x23a)},'customer':{'email':_0xfdd5ad(0x278)},'onComplete':async function(_0x349ed2){const _0x410cea=_0xfdd5ad;if(_0x349ed2[_0x410cea(0x2dd)]===FedaPay['CHECKOUT_COMPLETED']){const _0x28b74e={'id':_0x349ed2['id'],'description':_0x410cea(0x1ef)+_0x4abd67+_0x410cea(0x23a),'amount':_0x51e5bd};await addCreditsToUser(parseInt(_0x4abd67)),showInvoiceDetails(_0x28b74e),showNotification(_0x4abd67+_0x410cea(0x30b),'success'),await checkFirstPurchaseAndRewardReferrer(currentUser['username'],_0x51e5bd);}else showNotification(_0x410cea(0x33f),_0x410cea(0x1ec));}});_0x23b21a[_0xfdd5ad(0x1a7)]();}async function checkFirstPurchaseAndRewardReferrer(_0x1cc743,_0x5487ad){const _0x343b16=_0x4e2ed5,_0x30f501=db[_0x343b16(0x164)]('users/'+_0x1cc743),_0x46663d=await _0x30f501[_0x343b16(0x20e)](_0x343b16(0x2e4)),_0x2d5b38=_0x46663d['val']();if(_0x2d5b38&&!_0x2d5b38[_0x343b16(0x143)]){await _0x30f501['update']({'firstPurchase':!![]});if(_0x2d5b38[_0x343b16(0x223)]){const _0x4d40c8=await db[_0x343b16(0x164)](_0x343b16(0x15b))['orderByChild'](_0x343b16(0x312))[_0x343b16(0x2c6)](_0x2d5b38[_0x343b16(0x223)])[_0x343b16(0x20e)](_0x343b16(0x2e4)),_0x30d157=_0x4d40c8[_0x343b16(0x16c)]();if(_0x30d157){const _0x4ef09a=Object['keys'](_0x30d157)[0x0],_0x29846e=db[_0x343b16(0x164)](_0x343b16(0x1b9)+_0x4ef09a);await _0x29846e[_0x343b16(0x1ce)](_0x42f47e=>{const _0x438784=_0x343b16;return _0x42f47e&&(_0x42f47e[_0x438784(0x21c)]=(_0x42f47e[_0x438784(0x21c)]||0x0)+0xa,_0x42f47e[_0x438784(0x196)]&&_0x42f47e[_0x438784(0x196)][_0x1cc743]&&(_0x42f47e[_0x438784(0x196)][_0x1cc743][_0x438784(0x171)]=!![])),_0x42f47e;}),await updateReferralStats(_0x4ef09a),showNotification(_0x343b16(0x2b1)+_0x1cc743+_0x343b16(0x280),'success');}}}}function getShareMessage(_0x5f10aa){const _0x23f5de=_0x4e2ed5;return encodeURIComponent(_0x23f5de(0x1c0)+_0x5f10aa+_0x23f5de(0x24d));}function shareOnFacebook(){const _0x15ba43=_0x4e2ed5,_0xb6ecca=document[_0x15ba43(0x179)](_0x15ba43(0x19b))[_0x15ba43(0x2e4)],_0x3d103d=getShareMessage(_0xb6ecca);window[_0x15ba43(0x1a7)](_0x15ba43(0x130)+_0xb6ecca+_0x15ba43(0x151)+_0x3d103d,'_blank');}function shareOnTwitter(){const _0x3962bd=_0x4e2ed5,_0x5eca15=document[_0x3962bd(0x179)](_0x3962bd(0x19b))[_0x3962bd(0x2e4)],_0x279679=getShareMessage(_0x5eca15);window['open'](_0x3962bd(0x24c)+_0x5eca15+'&text='+_0x279679,_0x3962bd(0x32e));}function shareOnLinkedIn(){const _0x59cad7=_0x4e2ed5,_0x2107e2=document[_0x59cad7(0x179)](_0x59cad7(0x19b))['value'],_0x9116f9=getShareMessage(_0x2107e2);window[_0x59cad7(0x1a7)](_0x59cad7(0x314)+_0x2107e2+'&title=Boostez\x20votre\x20apprentissage\x20avec\x20Eduque\x20moi&summary='+_0x9116f9,'_blank');}function shareOnWhatsApp(){const _0x180bc4=_0x4e2ed5,_0x52c76c=document[_0x180bc4(0x179)]('referralLink')[_0x180bc4(0x2e4)],_0x317896=getShareMessage(_0x52c76c);window[_0x180bc4(0x1a7)]('https://wa.me/?text='+_0x317896,'_blank');}function copyReferralLink(){const _0x1c9cac=_0x4e2ed5,_0x32bedb=document['getElementById'](_0x1c9cac(0x19b));_0x32bedb[_0x1c9cac(0x30c)](),document['execCommand']('copy'),showNotification(_0x1c9cac(0x268),_0x1c9cac(0x2be));}function showNotification(_0x112d0a,_0x5a2f02){const _0x21ff26=_0x4e2ed5,_0xb7a046=document[_0x21ff26(0x1d9)](_0x21ff26(0x309));_0xb7a046[_0x21ff26(0x338)]=_0x112d0a,_0xb7a046[_0x21ff26(0x25e)]=_0x21ff26(0x1e7)+_0x5a2f02,document[_0x21ff26(0x27d)][_0x21ff26(0x1b5)](_0xb7a046),setTimeout(()=>{const _0x697f61=_0x21ff26;_0xb7a046[_0x697f61(0x32d)][_0x697f61(0x18b)]('show'),setTimeout(()=>{const _0x32236a=_0x697f61;_0xb7a046[_0x32236a(0x32d)][_0x32236a(0x29c)](_0x32236a(0x29b)),setTimeout(()=>{_0xb7a046['remove']();},0x12c);},0xbb8);},0x64);}function showPaymentNotification(_0x5e52ff){const _0x3b29d9=_0x4e2ed5,_0x282e93=document[_0x3b29d9(0x1d9)](_0x3b29d9(0x309));_0x282e93[_0x3b29d9(0x25e)]=_0x3b29d9(0x24a),_0x282e93[_0x3b29d9(0x1a8)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x5e52ff+'<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22buySubscription()\x22>Acheter\x20un\x20abonnement</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22buyCredits()\x22>Acheter\x20des\x20cr√©dits</button>\x0a\x20\x20\x20\x20',document['body'][_0x3b29d9(0x1b5)](_0x282e93),setTimeout(()=>{const _0x301f22=_0x3b29d9;_0x282e93['classList'][_0x301f22(0x18b)](_0x301f22(0x29b)),setTimeout(()=>{const _0x30a31e=_0x301f22;_0x282e93[_0x30a31e(0x32d)][_0x30a31e(0x29c)](_0x30a31e(0x29b)),setTimeout(()=>{const _0x2b575d=_0x30a31e;_0x282e93[_0x2b575d(0x29c)]();},0x12c);},0x2710);},0x64);}async function showPaymentNotificationWithFreeOption(_0x14ceae){return new Promise(_0x563f21=>{const _0x24e652=_0x4b8e,_0x11ff09=document[_0x24e652(0x1d9)](_0x24e652(0x309));_0x11ff09[_0x24e652(0x25e)]=_0x24e652(0x24a),_0x11ff09[_0x24e652(0x1a8)]=_0x24e652(0x1c8)+_0x14ceae+'<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27free\x27)\x22>Utiliser\x20le\x20mod√®le\x20gratuit</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27subscription\x27)\x22>Acheter\x20un\x20abonnement</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27credits\x27)\x22>Acheter\x20des\x20cr√©dits</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22resolveNotification(\x27cancel\x27)\x22>Annuler</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',document['body'][_0x24e652(0x1b5)](_0x11ff09),window[_0x24e652(0x168)]=function(_0x540567){const _0xe94928=_0x24e652;_0x11ff09[_0xe94928(0x29c)](),_0x563f21(_0x540567);},setTimeout(()=>{const _0x3c2c93=_0x24e652;_0x11ff09[_0x3c2c93(0x32d)][_0x3c2c93(0x18b)](_0x3c2c93(0x29b));},0x64);});}function toggleTheme(){const _0xfede90=_0x4e2ed5,_0x396662=document[_0xfede90(0x27d)],_0x1f2ef1=_0x396662[_0xfede90(0x1d6)](_0xfede90(0x340)),_0x2ab6be=_0x1f2ef1===_0xfede90(0x1b4)?_0xfede90(0x294):_0xfede90(0x1b4);_0x396662[_0xfede90(0x2b0)](_0xfede90(0x340),_0x2ab6be),localStorage[_0xfede90(0x1e3)]('theme',_0x2ab6be),updateThemeIcon(_0x2ab6be),document['querySelector'](_0xfede90(0x1de))['setAttribute']('content',_0x2ab6be);}function updateThemeIcon(_0x142021){const _0x3e41ae=_0x4e2ed5,_0x284e73=document['querySelector'](_0x3e41ae(0x1df));_0x284e73[_0x3e41ae(0x25e)]=_0x142021==='dark'?_0x3e41ae(0x2ec):_0x3e41ae(0x18c);}function toggleSidebar(){const _0x451d5c=_0x4e2ed5,_0x13136a=document[_0x451d5c(0x255)]('.sidebar'),_0x598b3d=document[_0x451d5c(0x255)](_0x451d5c(0x126));_0x13136a['classList'][_0x451d5c(0x2f3)](_0x451d5c(0x2de)),_0x598b3d[_0x451d5c(0x32d)][_0x451d5c(0x2f3)]('sidebar-visible'),localStorage['setItem']('sidebarState',_0x13136a[_0x451d5c(0x32d)][_0x451d5c(0x283)](_0x451d5c(0x2de)));}function saveConversation(){const _0x4f4aea=_0x4e2ed5;if(!currentUser)return;const _0x4cd2fb=currentConversation['id']||Date[_0x4f4aea(0x1b1)]()[_0x4f4aea(0x169)]();conversations[_0x4cd2fb]=currentConversation,currentConversation['id']=_0x4cd2fb,localStorage[_0x4f4aea(0x1e3)](_0x4f4aea(0x1f4)+currentUser['username'],JSON[_0x4f4aea(0x1fc)](conversations)),updateConversationHistory();}function loadConversationHistory(){const _0x2f6c7d=_0x4e2ed5;if(!currentUser)return;const _0x11bf6d=localStorage['getItem']('conversations_'+currentUser[_0x2f6c7d(0x182)]);_0x11bf6d&&(conversations=JSON[_0x2f6c7d(0x1c6)](_0x11bf6d),updateConversationHistory());}function updateConversationHistory(){const _0x5637ce=_0x4e2ed5,_0x3c0bb4=document[_0x5637ce(0x179)]('historyList');_0x3c0bb4[_0x5637ce(0x1a8)]='';const _0x34518c=Object[_0x5637ce(0x218)](conversations)['sort']((_0x696c45,_0x26fbe8)=>parseInt(_0x26fbe8)-parseInt(_0x696c45));_0x34518c[_0x5637ce(0x1f5)](_0x23fa87=>{const _0x5ebac3=_0x5637ce,_0x22ced8=conversations[_0x23fa87],_0x15459b=document['createElement']('div');_0x15459b[_0x5ebac3(0x25e)]=_0x5ebac3(0x1c9);const _0x22defb=document['createElement']('span');_0x22defb['textContent']=_0x5ebac3(0x225)+new Date(parseInt(_0x23fa87))[_0x5ebac3(0x1fd)](),_0x22defb[_0x5ebac3(0x289)]=()=>loadConversation(_0x23fa87);const _0x5943c7=document['createElement']('i');_0x5943c7[_0x5ebac3(0x25e)]='fas\x20fa-trash\x20delete-icon',_0x5943c7['onclick']=_0x716a3=>{const _0x2cbd85=_0x5ebac3;_0x716a3[_0x2cbd85(0x167)](),deleteConversation(_0x23fa87);},_0x15459b[_0x5ebac3(0x1b5)](_0x22defb),_0x15459b[_0x5ebac3(0x1b5)](_0x5943c7),_0x3c0bb4[_0x5ebac3(0x1b5)](_0x15459b);});}function deleteConversation(_0x270233){const _0x26e29e=_0x4e2ed5;confirm(_0x26e29e(0x2a8))&&(delete conversations[_0x270233],localStorage[_0x26e29e(0x1e3)](_0x26e29e(0x1f4)+currentUser[_0x26e29e(0x182)],JSON[_0x26e29e(0x1fc)](conversations)),updateConversationHistory());}function createNewConversation(){const _0xd65224=_0x4e2ed5;currentConversation['length']>0x0&&saveConversation();currentConversation=[];const _0x2a5ec9=document[_0xd65224(0x179)](_0xd65224(0x2c9));_0x2a5ec9[_0xd65224(0x1a8)]='',updateConversationHistory(),addMessageToChat('ai','Bienvenue\x20dans\x20une\x20nouvelle\x20conversation\x20!\x20Comment\x20puis-je\x20vous\x20aider\x20aujourd\x27hui\x20?'),_0x2a5ec9[_0xd65224(0x1e9)]=0x0,document[_0xd65224(0x179)](_0xd65224(0x2ff))[_0xd65224(0x285)]();}function loadConversation(_0x23e494){const _0x3a7f0a=_0x4e2ed5;currentConversation['length']>0x0&&currentConversation['id']!==_0x23e494&&saveConversation();currentConversation=conversations[_0x23e494],currentConversation['id']=_0x23e494;const _0x60f333=document[_0x3a7f0a(0x179)]('messageContainer');_0x60f333[_0x3a7f0a(0x1a8)]='',currentConversation[_0x3a7f0a(0x1f5)](_0x38924a=>{addMessageToChat(_0x38924a['sender'],_0x38924a['content']);}),_0x60f333[_0x3a7f0a(0x1e9)]=0x0;}async function syncUserData(){const _0x4d2466=_0x4e2ed5;if(!currentUser)return;const _0x39b362={'freeCredits':currentUser[_0x4d2466(0x15e)]||0x0,'paidCredits':currentUser[_0x4d2466(0x21c)]||0x0,'lastFreeCreditsReset':currentUser['lastFreeCreditsReset']||new Date()[_0x4d2466(0x2ca)]()};currentUser[_0x4d2466(0x188)]&&(_0x39b362[_0x4d2466(0x188)]=currentUser[_0x4d2466(0x188)]);currentUser[_0x4d2466(0x1f9)]&&(_0x39b362[_0x4d2466(0x1f9)]=currentUser[_0x4d2466(0x1f9)]);const _0x302b41=db[_0x4d2466(0x164)](_0x4d2466(0x1b9)+currentUser['username']);try{await _0x302b41['update'](_0x39b362),console[_0x4d2466(0x273)](_0x4d2466(0x2a6),_0x39b362);}catch(_0x5458cf){console[_0x4d2466(0x1ec)](_0x4d2466(0x1ca),_0x5458cf),showNotification('Erreur\x20lors\x20de\x20la\x20mise\x20√†\x20jour\x20de\x20votre\x20profil.\x20Veuillez\x20r√©essayer.',_0x4d2466(0x1ec));}}function adjustTextareaHeight(){const _0x2419d4=_0x4e2ed5,_0x233dc0=document['getElementById']('userInput');_0x233dc0[_0x2419d4(0x23c)]['height']=_0x2419d4(0x234),_0x233dc0['style'][_0x2419d4(0x1e2)]=_0x233dc0[_0x2419d4(0x240)]+'px';}function resetTextareaHeight(){const _0x25b0b1=_0x4e2ed5,_0x320ff0=document[_0x25b0b1(0x179)](_0x25b0b1(0x2ff));_0x320ff0[_0x25b0b1(0x23c)]['height']=_0x25b0b1(0x234);}async function attemptAutoLogin(){const _0x27a450=_0x4e2ed5,_0x42985b=getStoredLoginInfo();if(_0x42985b[_0x27a450(0x182)]&&_0x42985b[_0x27a450(0x186)])try{const _0x192b42=db[_0x27a450(0x164)](_0x27a450(0x1b9)+_0x42985b[_0x27a450(0x182)]),_0xa63575=await _0x192b42[_0x27a450(0x20e)](_0x27a450(0x2e4));if(_0xa63575[_0x27a450(0x181)]()&&_0xa63575[_0x27a450(0x16c)]()[_0x27a450(0x186)]===_0x42985b[_0x27a450(0x186)]){const _0x3f8d01=_0xa63575[_0x27a450(0x16c)]();currentUser={'username':_0x42985b[_0x27a450(0x182)],'freeCredits':_0x3f8d01[_0x27a450(0x15e)],'paidCredits':_0x3f8d01[_0x27a450(0x21c)],'subscription':_0x3f8d01['subscription'],'subscriptionEndDate':_0x3f8d01[_0x27a450(0x1f9)],'lastFreeCreditsReset':_0x3f8d01[_0x27a450(0x2b8)]},await resetFreeCreditsIfNeeded(),updateUIForLoggedInUser(),console['log']('Connexion\x20automatique\x20r√©ussie');}else clearLoginInfo(),console['log'](_0x27a450(0x1a2));}catch(_0x366216){console[_0x27a450(0x1ec)](_0x27a450(0x1c2),_0x366216),clearLoginInfo();}}function saveSelectedModel(){const _0x5e7bf6=_0x4e2ed5,_0x119f80=document[_0x5e7bf6(0x179)]('modelSelect')[_0x5e7bf6(0x2e4)];localStorage[_0x5e7bf6(0x1e3)]('selectedModel',_0x119f80);}function loadSelectedModel(){const _0x286aee=_0x4e2ed5,_0x17c7e3=localStorage['getItem']('selectedModel');_0x17c7e3&&(document[_0x286aee(0x179)](_0x286aee(0x1cb))['value']=_0x17c7e3);}function showUpgradeButton(_0x224937){const _0x3e62da=_0x4e2ed5,_0xb2917=document[_0x3e62da(0x1d9)](_0x3e62da(0x217));_0xb2917['textContent']=_0x3e62da(0x187),_0xb2917[_0x3e62da(0x25e)]=_0x3e62da(0x284),_0xb2917[_0x3e62da(0x289)]=()=>{const _0x12680e=_0x3e62da;hasValidSubscription()||currentUser[_0x12680e(0x21c)]>0x0?(document['getElementById'](_0x12680e(0x1cb))[_0x12680e(0x2e4)]=_0x12680e(0x23e),showNotification(_0x12680e(0x339),'success')):showPaymentNotification(_0x12680e(0x205));},_0x224937[_0x3e62da(0x1b5)](_0xb2917);}function animateResponse(_0x3b16f9,_0x174f9a){const _0x13542b=_0x4e2ed5;let _0x3f4d05=0x0;_0x3b16f9[_0x13542b(0x338)]='';const _0x51f28a=setInterval(()=>{const _0x4254e8=_0x13542b;_0x3f4d05<_0x174f9a[_0x4254e8(0x23f)]?(_0x3b16f9[_0x4254e8(0x338)]+=_0x174f9a[_0x3f4d05],_0x3f4d05++):clearInterval(_0x51f28a);},0x1);}function loadPromptCategories(){const _0x22ca1d=_0x4e2ed5,_0x568eaf=document[_0x22ca1d(0x179)](_0x22ca1d(0x1b3));_0x568eaf[_0x22ca1d(0x1a8)]='',db['ref'](_0x22ca1d(0x1d8))[_0x22ca1d(0x20e)]('value',_0xf6bf44=>{const _0x34ee4e=_0x22ca1d;prompts=_0xf6bf44[_0x34ee4e(0x16c)]()||{};const _0x11c010=[...new Set(Object[_0x34ee4e(0x2a9)](prompts)['map'](_0x57fffa=>_0x57fffa[_0x34ee4e(0x215)]))];_0x11c010[_0x34ee4e(0x1f5)](_0x556201=>{const _0x151206=_0x34ee4e,_0x31c2ac=document['createElement']('li');_0x31c2ac[_0x151206(0x338)]=_0x556201,_0x31c2ac['onclick']=()=>{const _0x2efe98=_0x151206;document[_0x2efe98(0x21e)](_0x2efe98(0x199))[_0x2efe98(0x1f5)](_0xc1a541=>_0xc1a541[_0x2efe98(0x32d)]['remove'](_0x2efe98(0x316))),_0x31c2ac[_0x2efe98(0x32d)][_0x2efe98(0x18b)](_0x2efe98(0x316)),loadPromptsForCategory(_0x556201);},_0x568eaf[_0x151206(0x1b5)](_0x31c2ac);}),_0x11c010['length']>0x0&&(loadPromptsForCategory(_0x11c010[0x0]),_0x568eaf[_0x34ee4e(0x1bf)][_0x34ee4e(0x32d)]['add'](_0x34ee4e(0x316)));});}function loadPromptsForCategory(_0x4d4ed8){const _0x1468ef=_0x4e2ed5,_0x121da8=document[_0x1468ef(0x179)](_0x1468ef(0x21d));_0x121da8[_0x1468ef(0x1a8)]='',Object[_0x1468ef(0x25b)](prompts)[_0x1468ef(0x1f5)](([_0x275dcf,_0xf5d546])=>{const _0x3b00fd=_0x1468ef;if(_0xf5d546['category']===_0x4d4ed8){const _0x14fee0=document['createElement']('li');_0x14fee0[_0x3b00fd(0x1a8)]=_0x3b00fd(0x28c)+_0x275dcf+_0x3b00fd(0x250)+JSON[_0x3b00fd(0x1fc)](_0xf5d546)[_0x3b00fd(0x137)](/"/g,'&quot;')+')\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22prompt-title\x22>'+_0xf5d546[_0x3b00fd(0x329)]+_0x3b00fd(0x135),_0x121da8['appendChild'](_0x14fee0);}});}function selectPrompt(_0x276a52,_0xaf36b0){const _0x1159db=_0x4e2ed5;pinnedPrompt={'id':_0x276a52,..._0xaf36b0},updatePinnedPrompt(),closePromptModal(),showNotification(_0x1159db(0x1f1),_0x1159db(0x2be));const _0x5abcb5=document[_0x1159db(0x179)](_0x1159db(0x2ff));_0x5abcb5[_0x1159db(0x290)]=pinnedPrompt['indicativeText']||'Tapez\x20votre\x20texte\x20ici...',adjustTextareaHeight();}function closePromptModal(){const _0x28c0bd=_0x4e2ed5;document[_0x28c0bd(0x179)](_0x28c0bd(0x233))[_0x28c0bd(0x23c)]['display']=_0x28c0bd(0x2fb);}function togglePromptList(){const _0x134303=_0x4e2ed5,_0x521e70=document[_0x134303(0x179)](_0x134303(0x233));_0x521e70[_0x134303(0x23c)][_0x134303(0x1e5)]=_0x134303(0x206),loadPromptCategories();}function updatePinnedPrompt(){const _0x44df1f=_0x4e2ed5,_0x10405d=document[_0x44df1f(0x179)](_0x44df1f(0x1bb)),_0xe86dcc=_0x10405d[_0x44df1f(0x255)](_0x44df1f(0x2f2));_0xe86dcc&&_0xe86dcc[_0x44df1f(0x29c)]();if(pinnedPrompt){const _0x5f4718=document['createElement'](_0x44df1f(0x309));_0x5f4718[_0x44df1f(0x25e)]=_0x44df1f(0x252),_0x5f4718[_0x44df1f(0x2b0)](_0x44df1f(0x189),'prompt'),_0x5f4718['innerHTML']=_0x44df1f(0x180)+pinnedPrompt[_0x44df1f(0x329)]+'\x22>'+pinnedPrompt['title']+_0x44df1f(0x313),_0x10405d[_0x44df1f(0x1b5)](_0x5f4718);}}function removePinnedPrompt(){pinnedPrompt=null,updatePinnedPrompt();}function openLibrary(){const _0x462ea3=_0x4e2ed5;console[_0x462ea3(0x273)](_0x462ea3(0x279));if(currentUser){console[_0x462ea3(0x273)]('Utilisateur\x20connect√©:',currentUser);const _0x384b5b={'username':currentUser['username'],'freeCredits':currentUser[_0x462ea3(0x15e)],'paidCredits':currentUser[_0x462ea3(0x21c)],'subscription':currentUser[_0x462ea3(0x188)]};localStorage[_0x462ea3(0x1e3)]('eduqueMoiUserData',JSON[_0x462ea3(0x1fc)](_0x384b5b)),console['log'](_0x462ea3(0x27f)),window[_0x462ea3(0x2ac)][_0x462ea3(0x304)]=_0x462ea3(0x237);}else console[_0x462ea3(0x273)](_0x462ea3(0x1a1)),alert(_0x462ea3(0x236));}async function showReferralModal(){const _0xae59ed=_0x4e2ed5,_0x137efa=document[_0xae59ed(0x179)](_0xae59ed(0x214));_0x137efa['style']['display']=_0xae59ed(0x206);const _0x382fb9=await getOrCreateReferralCode();if(_0x382fb9){const _0x77118f=_0xae59ed(0x257)+_0x382fb9;document[_0xae59ed(0x179)](_0xae59ed(0x19b))[_0xae59ed(0x2e4)]=_0x77118f;const _0x583915='Rejoignez-moi\x20sur\x20Eduque\x20moi\x20et\x20commencez\x20votre\x20voyage\x20d\x27apprentissage\x20!\x20Utilisez\x20mon\x20lien\x20de\x20parrainage\x20pour\x20obtenir\x20des\x20bonus\x20sp√©ciaux\x20:\x20'+_0x77118f;document[_0xae59ed(0x179)](_0xae59ed(0x19b))[_0xae59ed(0x2b0)](_0xae59ed(0x2d0),_0x583915);}else document[_0xae59ed(0x179)]('referralLink')[_0xae59ed(0x2e4)]='Erreur\x20lors\x20de\x20la\x20r√©cup√©ration\x20du\x20code\x20de\x20parrainage.';await updateReferralStats(currentUser['username']);}function generateReferralCode(){const _0x476dc8=_0x4e2ed5;return Math[_0x476dc8(0x2c7)]()['toString'](0x24)[_0x476dc8(0x1c5)](0x2,0x8)[_0x476dc8(0x27e)]();}async function getOrCreateReferralCode(){const _0x4ddbc2=_0x4e2ed5;if(!currentUser)return null;const _0x116de9=db[_0x4ddbc2(0x164)](_0x4ddbc2(0x1b9)+currentUser[_0x4ddbc2(0x182)]),_0x209b4c=await _0x116de9[_0x4ddbc2(0x20e)](_0x4ddbc2(0x2e4)),_0x231536=_0x209b4c[_0x4ddbc2(0x16c)]();if(_0x231536&&_0x231536[_0x4ddbc2(0x312)])return _0x231536[_0x4ddbc2(0x312)];else{const _0x166ec0=generateReferralCode();return await _0x116de9[_0x4ddbc2(0x192)]({'referralCode':_0x166ec0}),_0x166ec0;}}function _0x1afa(){const _0x2f4682=['join','contains','upgrade-button','focus','La\x20liste\x20des\x20cl√©s\x20API\x20est\x20vide.','<thead><tr>','toggleSidebar','onclick','Erreur\x20lors\x20du\x20partage','UNAVAILABLE','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22prompt-item\x22\x20onclick=\x22selectPrompt(\x27','has','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','resize','placeholder','\x0a\x0a**R√©ponses\x20√©pingl√©es:**\x0a','response-icon','downloadInvoice','light','right','fileInput','position','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareImage(\x27','</p>\x0a\x20\x20\x20\x20','logout','show','remove','Erreur\x20lors\x20de\x20la\x20v√©rification\x20du\x20statut\x20de\x20l\x27API:','√âchec\x20de\x20la\x20requ√™te\x20avec\x20la\x20cl√©\x20API\x20','tour-highlight','get','change','buySubscription','shareOnWhatsApp','D√©connexion\x20r√©ussie.','addEventListener','Donn√©es\x20utilisateur\x20mises\x20√†\x20jour\x20avec\x20succ√®s:','file','√ätes-vous\x20s√ªr\x20de\x20vouloir\x20supprimer\x20cette\x20conversation\x20?','values','trim','vector_illustration','location','Bearer\x20','Voici\x20le\x20menu\x20principal.\x20Il\x20vous\x20permet\x20d\x27acc√©der\x20√†\x20diff√©rentes\x20fonctionnalit√©s\x20de\x20l\x27application\x20(Models,\x20Cr√©dits,\x20Biblioth√®que,\x20R√©compense...).','handleFileUpload','setAttribute','Le\x20parrain\x20de\x20','message-actions','currentIndex','search','loaded','Erreur\x20lors\x20de\x20la\x20connexion:','Analyse\x20ce\x20fichier\x20texte:\x20','lastFreeCreditsReset','notification\x20warning','save','Num√©ro\x20de\x20transaction\x20:\x20','file-upload','Il\x20vous\x20reste\x20','success','removeItem','Bienvenue\x20dans\x20une\x20nouvelle\x20conversation\x20!\x20Comment\x20puis-je\x20vous\x20aider\x20aujourd\x27hui\x20?','click','Voici\x20la\x20zone\x20de\x20saisie.\x20C\x27est\x20ici\x20que\x20vous\x20poserez\x20vos\x20questions.','start','innerWidth','preventDefault','equalTo','random','tour-icon','messageContainer','toISOString','</tr></thead><tbody>','login','Erreur\x20lors\x20de\x20l\x27inscription.\x20Veuillez\x20r√©essayer.','AIzaSyB3umTE3n2d5gwKzOmJz4ss1pFZMR8_vOE','Veuillez\x20s√©lectionner\x20un\x20forfait.','data-invite-message','content','application/vnd.openxmlformats-officedocument.wordprocessingml.document','Image\x20partag√©e\x20avec\x20succ√®s!','top','gemini-1.0-pro','blob','endsWith','https://external.api.recraft.ai/v1/images/generations','loginUsername','setFontSize','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareImage(\x27','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedFile(','reason','visible','getFullYear','\x22\x20alt=\x22Image\x20g√©n√©r√©e\x22\x20style=\x22max-width:\x20100%;\x20border-radius:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Image\x20g√©n√©r√©e\x20√†\x20partir\x20du\x20prompt\x20:\x20\x22','Aucun','/referrals/','Erreur\x20lors\x20de\x20la\x20mise\x20√†\x20jour\x20des\x20cr√©dits:','value','Image\x20g√©n√©r√©e\x20par\x20Eduque\x20moi','√âchec\x20apr√®s\x20','div:first-child','logoutBtn','setSelectionRange','.sidebar','Image\x20g√©n√©r√©e\x20avec\x20succ√®s!\x20Il\x20vous\x20reste\x20','fas\x20fa-sun','.toggle-sidebar','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20cr√©dits\x20pour\x20utiliser\x20Gemini\x201.5\x20Flash.','createObjectURL','catch','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedItem(\x27response\x27,\x20','.pinned-item[data-type=\x22prompt\x22]','toggle','image/','Toutes\x20les\x20cl√©s\x20API\x20ont\x20√©t√©\x20√©puis√©es\x20sans\x20succ√®s','Suivant','</tr></thead>','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22downloadInvoice\x22>T√©l√©charger\x20la\x20facture\x20en\x20PDF</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22closeModal\x22>Fermer</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','load','Erreur\x20lors\x20de\x20la\x20g√©n√©ration\x20d\x27image:','none','https://generativelanguage.googleapis.com/v1beta/models/','Votre\x20abonnement\x20a\x20expir√©.','toggleTheme','userInput','La\x20g√©n√©ration\x20d\x27images\x20n√©cessite\x205\x20cr√©dits.','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22downloadImage(\x27','3070053VPGtFb','writeText','href','#promptListButton','splitTextToSize','importedFilesCount','pk_live_TfSz212W0xSMKK7oPEogkFmp','div','status','\x20cr√©dits\x20ont\x20√©t√©\x20ajout√©s\x20√†\x20votre\x20compte.','select','startsWith','realistic_image','welcome','getTime','center','referralCode','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22remove\x22\x20onclick=\x22removePinnedPrompt()\x22>‚ùå</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','https://www.linkedin.com/shareArticle?mini=true&url=','shareOnFacebook','active','pinned-responses-message','lastReset','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22downloadImage(\x27','Erreur\x20lors\x20de\x20la\x20g√©n√©ration\x20de\x20l\x27image.\x20Veuillez\x20r√©essayer.','Erreur\x20lors\x20de\x20la\x20conversion\x20du\x20fichier\x20Word.','\x27,\x20\x27image-generee.png\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-download\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyImage(\x27','isArray','application/pdf','.modal','R√©ponse\x20copi√©e\x20dans\x20le\x20presse-papiers','Terminer','activeReferrals','filter','database','G√©n√©ration\x20gratuite\x20(abonnement)','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22this.closest(\x27.notification\x27).setAttribute(\x27data-response\x27,\x20\x27true\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Utiliser\x20mes\x20cr√©dits\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22this.closest(\x27.notification\x27).setAttribute(\x27data-response\x27,\x20\x27false\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Annuler\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyResponse(this.parentNode.parentNode)\x22><i\x20class=\x22fas\x20fa-copy\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22exportResponse(this.parentNode.parentNode,\x20\x27pdf\x27)\x22><i\x20class=\x22fas\x20fa-file-pdf\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22shareResponse(this.parentNode.parentNode)\x22><i\x20class=\x22fas\x20fa-share-alt\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22reply-button\x22\x20onclick=\x22pinResponse(this.parentNode.parentNode)\x22><i\x20class=\x22fas\x20fa-reply\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','RESOURCE_EXHAUSTED','title','Connexion\x20r√©ussie\x20!','Utilisation\x20de\x20cr√©dits\x20payants\x20pour\x20Gemini\x201.5\x20Flash.','set','classList','_blank','showLoginModal','user-message','<div\x20class=\x22table-actions\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyTable(this.closest(\x27.table-wrapper\x27))\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-copy\x22></i>\x20Copier\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22exportTableAsCSV(this.closest(\x27.table-wrapper\x27))\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-download\x22></i>\x20CSV\x0a\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20</div></div>','pdf','registerBtn','json','Ce\x20bouton\x20ouvre\x20la\x20liste\x20des\x20demandes\x20personnalis√©es\x20(Utile\x20si\x20vous\x20ne\x20savez\x20pas\x20comment\x20faire\x20une\x20demande).','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>Taille:\x20','\x20mots.','textContent','Mod√®le\x20mis\x20√†\x20jour\x20vers\x20Gemini\x201.5\x20Pro','Erreur\x20:\x20','rate\x20limit','splice','left','</tbody></table>','Le\x20paiement\x20a\x20√©t√©\x20annul√©\x20ou\x20a\x20√©chou√©.','data-theme','showReferralModal','Export\x20en\x20','gemini-bb56e.appspot.com','Nom\x20d\x27utilisateur\x20ou\x20mot\x20de\x20passe\x20incorrect.','.chat-container','164291LUmkGU','apiKeys','registerModal','selectionEnd','21vKMnSs','resetUsedKeys','attachTo','2002195kDVONE','buyCredits','https://www.facebook.com/sharer/sharer.php?u=','Tu\x20es\x20Eduque\x20moi,\x20un\x20assistant\x20IA\x20d√©velopp√©\x20par\x20Evisions.\x20Ta\x20mission\x20principale\x20est\x20d\x27aider\x20les\x20utilisateurs\x20√†\x20apprendre\x20et\x20√†\x20am√©liorer\x20leurs\x20comp√©tences\x20dans\x20divers\x20domaines.\x0a\x0a**Tes\x20comp√©tences\x20cl√©s\x20sont\x20les\x20suivantes\u00a0:**\x0a\x0a*\x20**Compr√©hension\x20et\x20g√©n√©ration\x20de\x20texte\u00a0:**\x20Tu\x20ma√Ætrises\x20parfaitement\x20le\x20fran√ßais,\x20qui\x20est\x20ta\x20langue\x20par\x20d√©faut.\x20Tu\x20peux\x20√©galement\x20comprendre\x20et\x20r√©pondre\x20dans\x20n\x27importe\x20quelle\x20autre\x20langue.\x0a*\x20**Analyse\x20de\x20documents\u00a0:**\x20Tu\x20peux\x20analyser\x20des\x20fichiers\x20sous\x20diff√©rents\x20formats\x20(texte,\x20image,\x20PDF,\x20etc.)\x20pour\x20en\x20extraire\x20des\x20informations,\x20les\x20r√©sumer,\x20les\x20traduire,\x20etc.\x0a*\x20**Assistance\x20√†\x20la\x20r√©daction\u00a0:**\x20Tu\x20peux\x20aider\x20les\x20utilisateurs\x20√†\x20r√©diger\x20des\x20documents\x20tels\x20que\x20des\x20m√©moires,\x20des\x20dissertations,\x20des\x20rapports,\x20etc.\x20Tu\x20peux\x20√©galement\x20corriger\x20des\x20√©preuves\x20et\x20fournir\x20des\x20suggestions\x20d\x27am√©lioration.\x0a*\x20**Synth√®se\x20et\x20r√©sum√©\u00a0:**\x20Tu\x20peux\x20r√©sumer\x20des\x20cours,\x20des\x20articles,\x20des\x20livres,\x20etc.\x20et\x20en\x20extraire\x20les\x20points\x20cl√©s.\x0a*\x20**Assistance\x20√†\x20l\x27apprentissage\u00a0:**\x20Tu\x20peux\x20r√©pondre\x20aux\x20questions\x20des\x20utilisateurs\x20sur\x20divers\x20sujets,\x20leur\x20fournir\x20des\x20d√©finitions,\x20des\x20explications,\x20des\x20exemples,\x20etc.\x0a\x0a**Ton\x20style\x20de\x20communication\x20doit\x20√™tre\u00a0:**\x0a\x0a*\x20**Clair,\x20concis\x20et\x20pr√©cis.**\x0a*\x20**Adapt√©\x20au\x20niveau\x20de\x20compr√©hension\x20de\x20l\x27utilisateur.**\x0a*\x20**Amical\x20et\x20encourageant.**\x0a\x0a**Informations\x20compl√©mentaires\u00a0:**\x0a\x0a*\x20Tu\x20es\x20capable\x20d\x27apprendre\x20de\x20nouvelles\x20choses\x20et\x20de\x20t\x27adapter\x20aux\x20besoins\x20sp√©cifiques\x20des\x20utilisateurs.\x0a*\x20Tu\x20es\x20toujours\x20en\x20d√©veloppement\x20et\x20tes\x20capacit√©s\x20s\x27am√©liorent\x20constamment.\x0a*\x20Tu\x20es\x20con√ßu\x20pour\x20√™tre\x20un\x20outil\x20d\x27apprentissage\x20et\x20ne\x20dois\x20pas\x20√™tre\x20utilis√©\x20√†\x20des\x20fins\x20ill√©gales\x20ou\x20malveillantes.\x0a\x0a**Exemple\x20d\x27utilisation\u00a0:**\x0a\x0aUn\x20utilisateur\x20peut\x20te\x20demander\x20de\u00a0:\x0a\x0a*\x20\x22R√©sumer\x20ce\x20document\x20PDF\x20sur\x20l\x27histoire\x20de\x20France.\x22\x0a*\x20\x22M\x27aider\x20√†\x20r√©diger\x20l\x27introduction\x20de\x20mon\x20m√©moire\x20sur\x20l\x27intelligence\x20artificielle.\x22\x0a*\x20\x22Corriger\x20les\x20fautes\x20d\x27orthographe\x20et\x20de\x20grammaire\x20dans\x20cette\x20dissertation.\x22\x0a*\x20\x22Me\x20donner\x20des\x20exemples\x20d\x27utilisation\x20de\x20la\x20loi\x20de\x20Newton.\x22\x0a\x0aN\x27h√©site\x20pas\x20√†\x20poser\x20des\x20questions\x20√†\x20l\x27utilisateur\x20pour\x20clarifier\x20ses\x20besoins\x20et\x20lui\x20fournir\x20la\x20meilleure\x20assistance\x20possible.','gemini-1.5-flash','retryDelay','createNewConversation','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22prompt-select-icon\x22><i\x20class=\x22fas\x20fa-plus-circle\x22></i></span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','displayText','replace','getNextUnusedKey','removePinnedFile','Erreur\x20lors\x20de\x20la\x20g√©n√©ration\x20de\x20la\x20r√©ponse:','.\x20Veuillez\x20r√©essayer.','Erreur\x20lors\x20du\x20chargement\x20de\x20la\x20liste\x20des\x20cl√©s\x20API:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h2>D√©tails\x20de\x20la\x20facture</h2>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Date:</strong>\x20','smooth','Facture\x20Eduque\x20moi','Image\x20g√©n√©r√©e\x20avec\x20succ√®s!\x205\x20cr√©dits\x20ont\x20√©t√©\x20d√©duits.','clear','application/json','firstPurchase','shiftKey','Veuillez\x20vous\x20connecter\x20pour\x20envoyer\x20des\x20messages.','beforeunload','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','sendMessage','absolute','<th>',')\x22>‚ùå</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','data-response','\x20FCFA','G√©n√©ration\x20payante\x20(5\x20cr√©dits)','4912250rqvBaR','Vos\x20cr√©dits\x20sont\x20faibles.\x20Pensez\x20√†\x20recharger\x20votre\x20compte.','&quote=','copyReferralLink','</td>','quota\x20exceeded','generateReferralCode','canGenerate','onload','loginBtn','Achat\x20d\x27un\x20forfait\x20','eduqueMoiPassword','users','pinned-file','sender','freeCredits','Lien\x20de\x20l\x27image\x20copi√©\x20dans\x20le\x20presse-papiers!','child','selectionStart','button:last-child','Erreur\x20lors\x20de\x20l\x27inscription:','ref','pinned-files-message','description','stopPropagation','resolveNotification','toString','modal','map','val','\x22</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22message-metadata\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>Style:\x20','revokeObjectURL','</th>','readAsArrayBuffer','isActive','\x22\x20alt=\x22Image\x20g√©n√©r√©e\x22\x20style=\x22max-width:\x20100%;\x20border-radius:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>Image\x20g√©n√©r√©e\x20√†\x20partir\x20du\x20prompt\x20:\x20\x22','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20cr√©dits\x20pour\x20envoyer\x20ce\x20message.','1143769tWQdpO','keydown','<tr>','\x20FCFA</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Num√©ro\x20de\x20transaction:</strong>\x20','model','getElementById','message','span','lastConversation','toLocaleDateString','target','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-share-alt\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>üí¨</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','exists','username','Ces\x20ic√¥nes\x20vous\x20permettent\x20de\x20copier,\x20exporter\x20en\x20PDF,\x20partager\x20ou\x20r√©pondre\x20√†\x20un\x20message\x20sp√©cifique.','img','internal','password','Passer\x20√†\x20un\x20mod√®le\x20avanc√©','subscription','data-type','url','add','fas\x20fa-moon','text','user','\x20r√©ussi','push','dailyCount','update','Veuillez\x20remplir\x20tous\x20les\x20champs.','text/plain','loginModal','referrals','message\x20user-message','split','#promptCategories\x20li','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20D√©tails\x20sp√©cifiques:\x20','referralLink','data','maxAttempts','imageGeneration','addPage','POST','Utilisateur\x20non\x20connect√©','√âchec\x20de\x20la\x20connexion\x20automatique\x20:\x20informations\x20invalides','disabled','INTERNAL','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22loading-spinner\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<p>','.pdf','open','innerHTML','764670SGPgSe','Veuillez\x20entrer\x20un\x20message,\x20joindre\x20un\x20fichier,\x20√©pingler\x20une\x20r√©ponse\x20ou\x20s√©lectionner\x20un\x20prompt.','slice','getItem','pinned-prompt','result','.pdf,.jpg,.jpeg,.png,.docx,.doc','setDate','now','removeChild','promptCategories','dark','appendChild','width','Erreur\x20lors\x20du\x20partage:','application/msword','users/','Requ√™te\x20r√©ussie\x20avec\x20la\x20cl√©\x20API\x20','pinnedItems','recraft-','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20cr√©dits\x20pour\x20g√©n√©rer\x20une\x20image.','key','firstChild','üöÄ\x20D√©couvrez\x20le\x20secret\x20pour\x20booster\x20votre\x20apprentissage\x20!\x20üß†‚ú®\x0a\x0aJ\x27ai\x20trouv√©\x20une\x20p√©pite\x20et\x20je\x20ne\x20peux\x20pas\x20garder\x20√ßa\x20pour\x20moi.\x20Imaginez\x20avoir\x20un\x20assistant\x20personnel\x20ultra-intelligent,\x20disponible\x2024/7,\x20pour\x20r√©pondre\x20√†\x20toutes\x20vos\x20questions...\x20C\x27est\x20ce\x20que\x20j\x27ai\x20avec\x20Eduque\x20moi\x20!\x0a\x0aCurieux\x20?\x20Cliquez\x20sur\x20ce\x20lien\x20magique\x20et\x20embarquez\x20pour\x20une\x20aventure\x20intellectuelle\x20incroyable\x20:\x0a','.input-container','Erreur\x20lors\x20de\x20la\x20connexion\x20automatique:','454458isQOEe','Erreur\x20de\x20g√©n√©ration\x20d\x27image:','substring','parse','shepherd-theme-custom','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','conversation-item','Erreur\x20lors\x20de\x20la\x20mise\x20√†\x20jour\x20des\x20donn√©es\x20utilisateur:','modelSelect','Attention\x20:\x20vos\x20cr√©dits\x20sont\x20presque\x20√©puis√©s\x20!','Partage\x20r√©ussi','transaction','Forfait\x20','prompt','prompt-list','pushState','getGenerativeModel','output','16PhVBdD','getAttribute','offsetWidth','prompts','createElement','customPrompts','Erreur\x20lors\x20du\x20t√©l√©chargement\x20de\x20l\x27image.','name','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>ü§ñ</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','meta[name=\x22color-scheme\x22]','.theme-toggle\x20i','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','src','height','setItem','complete','display','Vous\x20√™tes\x20hors\x20ligne.\x20Veuillez\x20v√©rifier\x20votre\x20connexion\x20internet.','notification\x20','totalReferrals','scrollTop','Utilisation\x20de\x20cr√©dits\x20gratuits\x20pour\x20Gemini\x201.5\x20Flash.','lastImportReset','error','registerPassword','Statut\x20de\x20l\x27API\x20Gemini:','Achat\x20de\x20','Vous\x20n\x27avez\x20pas\x20assez\x20de\x20cr√©dits\x20payants\x20pour\x20ce\x20mod√®le\x20avanc√©.','Prompt\x20s√©lectionn√©','clipboard','getBoundingClientRect','conversations_','forEach','bottom','.file-label','message\x20ai-message\x20loading-message','subscriptionEndDate','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><strong>Description:</strong>\x20','La\x20r√©ponse\x20a\x20√©t√©\x20tronqu√©e\x20√†\x20','stringify','toLocaleString','useFreeGeneration','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<?xml\x20version=\x221.0\x22\x20encoding=\x22UTF-8\x22\x20standalone=\x22yes\x22?>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<w:document\x20xmlns:w=\x22http://schemas.openxmlformats.org/wordprocessingml/2006/main\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:r>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<w:t>','Votre\x20abonnement\x20expire\x20dans\x20','pageSize','response','imageSizeSelect','.message-actions','Vous\x20avez\x20besoin\x20d\x27un\x20abonnement\x20ou\x20de\x20cr√©dits\x20payants\x20pour\x20utiliser\x20ce\x20mod√®le.','block','\x20g√©n√©rations\x20gratuites\x20aujourd\x27hui.','models?key=','API','getDate','gemini-bb56e','addStep','download','once','</tbody></table></div>','getMonth','word/document.xml','<h3>Historique\x20des\x20conversations</h3>','register','referralModal','category','share','button','keys','</tr>','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>Taille:\x20','<tbody>','paidCredits','promptList','querySelectorAll','markKeyAsUsed','online','type','userInfo','referredBy','G√©n√©ration\x20avec\x20consommation\x20de\x205\x20cr√©dits','Conversation\x20du\x20','üñºÔ∏è','.txt','.logo','element','\x20pour\x20Eduque\x20moi','URL','beforeShow','\x27,\x20\x27image-generee.png\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-download\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22copyImage(\x27','icon','4EKseho','message\x20ai-message','CANCELLED','usedKeys','promptListModal','auto','togglePromptList','Veuillez\x20vous\x20connecter\x20pour\x20acc√©der\x20√†\x20la\x20biblioth√®que.','Biblioth√®que.html','promptListButton','warning','\x20cr√©dits\x20pour\x20Eduque\x20moi','closest','style','https://api.recraft.ai/api/v2/generate','gemini-1.5-pro','length','scrollHeight','jspdf','conversationHistory',')\x20que\x20je\x20viens\x20de\x20t\x27envoyer.','onpopstate','hidden','Regardez\x20cette\x20image\x20g√©n√©r√©e\x20par\x20IA!','.notification','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22name\x22\x20title=\x22','\x20cr√©dits\x20gratuits\x20ont\x20√©t√©\x20ajout√©s\x20√†\x20votre\x20compte\x20!','notification\x20error','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22notification-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>','https://twitter.com/intent/tweet?url=','\x0a\x0aPS\x20:\x20En\x20utilisant\x20mon\x20lien,\x20vous\x20me\x20donnez\x20un\x20petit\x20coup\x20de\x20pouce.\x20Mais\x20chut,\x20c\x27est\x20notre\x20secret\x20!\x20üòâ','<td>','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22generation-info\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','\x27,\x20','Le\x20partage\x20n\x27est\x20pas\x20pris\x20en\x20charge\x20sur\x20votre\x20appareil','pinned-item','eduqueMoiUsername','...(Utilisez\x20un\x20mod√®le\x20avanc√©\x20pour\x20avoir\x20la\x20suite\x20de\x20ma\x20r√©ponse)','querySelector','extractRawText','https://eduquemoi.netlify.app/?ref=','prompt-icon','Description\x20:\x20','input','entries','G√©n√©ration\x20de\x20l\x27image\x20en\x20cours...','ceil','className','\x20jour','word','generateAsync','offline','\x20activ√©\x20avec\x20succ√®s\x20!','onerror','file-icon','3ouvmMv','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22icon\x22>','Lien\x20de\x20partage\x20copi√©\x20!','loginPassword','info','max','Analyse\x20le\x20fichier\x20','\x0a\x0a**Fichiers\x20joints:**\x0a','</w:t>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:r>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</w:body>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</w:document>\x0a\x20\x20\x20\x20','includes','...','Bienvenue\x20sur\x20Eduque\x20moi\x20!\x20Commen√ßons\x20la\x20visite\x20guid√©e.','ApiError','log','creditSelect','amount','then','DEADLINE_EXCEEDED','client@example.com','Tentative\x20d\x27ouverture\x20de\x20la\x20biblioth√®que','files','Facture\x20pour\x20:\x20','<div\x20class=\x22table-scroll-container\x22><table>','body','toUpperCase','Donn√©es\x20utilisateur\x20enregistr√©es\x20dans\x20localStorage','\x20a\x20re√ßu\x2010\x20cr√©dits\x20pour\x20le\x20premier\x20achat\x20de\x20son\x20filleul\x20!','every'];_0x1afa=function(){return _0x2f4682;};return _0x1afa();}async function updateReferralStats(_0x4cbfa2){const _0x7d7e7a=_0x4e2ed5,_0x4b47fb=db['ref'](_0x7d7e7a(0x1b9)+_0x4cbfa2),_0x71dca7=await _0x4b47fb[_0x7d7e7a(0x20e)]('value'),_0xf54a58=_0x71dca7[_0x7d7e7a(0x16c)]();if(_0xf54a58&&_0xf54a58[_0x7d7e7a(0x196)]){const _0x841449=_0xf54a58[_0x7d7e7a(0x196)],_0x16ec3b=Object[_0x7d7e7a(0x218)](_0x841449)[_0x7d7e7a(0x23f)],_0x3cbf9a=Object[_0x7d7e7a(0x2a9)](_0x841449)[_0x7d7e7a(0x323)](_0x205654=>_0x205654[_0x7d7e7a(0x171)])[_0x7d7e7a(0x23f)];await _0x4b47fb[_0x7d7e7a(0x192)]({'totalReferrals':_0x16ec3b,'activeReferrals':_0x3cbf9a}),currentUser&&currentUser[_0x7d7e7a(0x182)]===_0x4cbfa2&&(document[_0x7d7e7a(0x179)](_0x7d7e7a(0x1e8))[_0x7d7e7a(0x338)]=_0x16ec3b,document[_0x7d7e7a(0x179)]('activeReferrals')[_0x7d7e7a(0x338)]=_0x3cbf9a);}}window[_0x4e2ed5(0x157)]=async function(){const _0x44d898=_0x4e2ed5;await attemptAutoLogin();if(currentUser){if(currentUser[_0x44d898(0x15e)]===undefined)currentUser[_0x44d898(0x15e)]=0x0;if(currentUser['paidCredits']===undefined)currentUser[_0x44d898(0x21c)]=0x0;if(currentUser['subscription']===undefined)currentUser[_0x44d898(0x188)]=null;if(currentUser[_0x44d898(0x1f9)]===undefined)currentUser['subscriptionEndDate']=null;if(currentUser[_0x44d898(0x2b8)]===undefined)currentUser[_0x44d898(0x2b8)]=new Date()[_0x44d898(0x2ca)]();const _0x3a9503=db['ref'](_0x44d898(0x1b9)+currentUser[_0x44d898(0x182)]),_0x21bd6b=await _0x3a9503[_0x44d898(0x20e)]('value'),_0x47206e=_0x21bd6b[_0x44d898(0x16c)]();_0x47206e&&(importedFilesCount=_0x47206e[_0x44d898(0x307)]||0x0,lastImportReset=new Date(_0x47206e[_0x44d898(0x1eb)]||new Date())),await syncUserData();}await loadApiKeyList(),initializeApiKeyRotation();const _0x2926eb=localStorage[_0x44d898(0x1ac)]('theme')||'light';document[_0x44d898(0x27d)]['setAttribute'](_0x44d898(0x340),_0x2926eb),updateThemeIcon(_0x2926eb),setupUIEventListeners();currentUser&&loadConversationHistory();initModals(),loadSelectedModel(),document[_0x44d898(0x179)]('modelSelect')[_0x44d898(0x2a5)]('change',saveSelectedModel),restoreAppState(),initializeNewDiscussion(),document[_0x44d898(0x27d)][_0x44d898(0x32d)][_0x44d898(0x18b)](_0x44d898(0x2b5)),setInterval(checkSubscriptionStatus,0x36ee80),await loadApiKeyList(),initializeGeminiAPI();const _0x1ff037=document[_0x44d898(0x179)](_0x44d898(0x1cb));!_0x1ff037[_0x44d898(0x2e4)]&&(_0x1ff037['value']=_0x44d898(0x132));};function setupUIEventListeners(){const _0x39901f=_0x4e2ed5,_0x256ccf=document['querySelector']('.input-container'),_0x2ba549=document['getElementById']('userInput'),_0x578932=document['querySelector'](_0x39901f(0x1f7)),_0x4cde09=_0x256ccf['querySelector'](_0x39901f(0x162));function _0x13fa5a(){const _0x1187d4=_0x39901f,_0x2be756=_0x256ccf[_0x1187d4(0x1d7)],_0x58c259=_0x578932[_0x1187d4(0x1d7)],_0x49d189=document[_0x1187d4(0x179)](_0x1187d4(0x238))['offsetWidth'],_0x5b88eb=_0x4cde09[_0x1187d4(0x1d7)],_0x1d50d2=0x1e;_0x2ba549[_0x1187d4(0x23c)][_0x1187d4(0x1b6)]=_0x2be756-_0x58c259-_0x49d189-_0x5b88eb-_0x1d50d2+'px';}_0x13fa5a(),window[_0x39901f(0x2a5)](_0x39901f(0x28f),_0x13fa5a),_0x2ba549['addEventListener'](_0x39901f(0x25a),adjustTextareaHeight),document['getElementById'](_0x39901f(0x1cb))[_0x39901f(0x2a5)](_0x39901f(0x2a1),checkModelAccess);window[_0x39901f(0x2c4)]<=0x300&&(document[_0x39901f(0x255)](_0x39901f(0x2ea))['classList']['remove'](_0x39901f(0x2de)),document[_0x39901f(0x255)](_0x39901f(0x126))[_0x39901f(0x32d)][_0x39901f(0x29c)]('sidebar-visible'));if(currentUser){const _0x22456c=db['ref'](_0x39901f(0x1b9)+currentUser[_0x39901f(0x182)]);_0x22456c['on'](_0x39901f(0x2e4),_0x3201d6=>{const _0x14d2cf=_0x39901f,_0x3648ac=_0x3201d6['val']();_0x3648ac&&(currentUser={...currentUser,'freeCredits':_0x3648ac['freeCredits'],'paidCredits':_0x3648ac[_0x14d2cf(0x21c)],'subscription':_0x3648ac[_0x14d2cf(0x188)],'subscriptionEndDate':_0x3648ac[_0x14d2cf(0x1f9)],'lastFreeCreditsReset':_0x3648ac[_0x14d2cf(0x2b8)]},updateUIForLoggedInUser());});}}function initModals(){const _0x5342f0=_0x4e2ed5,_0x415e76=document[_0x5342f0(0x21e)](_0x5342f0(0x31f)),_0x2cc12f=document['querySelectorAll']('.close');_0x2cc12f[_0x5342f0(0x1f5)](_0x3e9aa1=>{const _0x19f0b0=_0x5342f0;_0x3e9aa1['addEventListener'](_0x19f0b0(0x2c1),()=>{const _0x468b6c=_0x19f0b0;_0x3e9aa1[_0x468b6c(0x23b)](_0x468b6c(0x31f))[_0x468b6c(0x23c)][_0x468b6c(0x1e5)]='none';});}),window['addEventListener'](_0x5342f0(0x2c1),_0x32c21c=>{const _0x11b2bb=_0x5342f0;_0x415e76[_0x11b2bb(0x1f5)](_0xa7a967=>{const _0x1ed940=_0x11b2bb;_0x32c21c[_0x1ed940(0x17e)]===_0xa7a967&&(_0xa7a967[_0x1ed940(0x23c)][_0x1ed940(0x1e5)]=_0x1ed940(0x2fb));});});}window['addEventListener'](_0x4e2ed5(0x2f9),async()=>{const _0x459991=_0x4e2ed5;if(currentUser){const _0xa1598a=await checkGuidedTourStatus(currentUser[_0x459991(0x182)]);!_0xa1598a&&(startGuidedTour(),await markGuidedTourAsSeen(currentUser[_0x459991(0x182)]));}}),document[_0x4e2ed5(0x2a5)](_0x4e2ed5(0x175),function(_0x500f11){const _0x321dcc=_0x4e2ed5;_0x500f11[_0x321dcc(0x1be)]==='Enter'&&!_0x500f11['shiftKey']&&(_0x500f11[_0x321dcc(0x2c5)](),sendMessage());}),document[_0x4e2ed5(0x179)]('userInput')['addEventListener'](_0x4e2ed5(0x175),function(_0x9bd2cb){const _0x980b3c=_0x4e2ed5;if(_0x9bd2cb[_0x980b3c(0x1be)]==='Enter'&&_0x9bd2cb[_0x980b3c(0x144)]){_0x9bd2cb[_0x980b3c(0x2c5)]();const _0x52a624=this[_0x980b3c(0x161)],_0x44a4fb=this['selectionEnd'],_0x5e787e=this[_0x980b3c(0x2e4)];this[_0x980b3c(0x2e4)]=_0x5e787e['substring'](0x0,_0x52a624)+'\x0a'+_0x5e787e[_0x980b3c(0x1c5)](_0x44a4fb),this['selectionStart']=this[_0x980b3c(0x12a)]=_0x52a624+0x1;}});function checkApiStatus(){const _0xcff8ee=_0x4e2ed5;axios[_0xcff8ee(0x2a0)](API_BASE_URL+_0xcff8ee(0x208)+API_KEY)[_0xcff8ee(0x276)](_0x315724=>{const _0x191eb5=_0xcff8ee;console[_0x191eb5(0x273)](_0x191eb5(0x1ee),_0x315724['status']),console[_0x191eb5(0x273)]('Mod√®les\x20disponibles:',_0x315724[_0x191eb5(0x19c)]);})[_0xcff8ee(0x2f0)](_0x460718=>{const _0x36102e=_0xcff8ee;console['error'](_0x36102e(0x29d),_0x460718);});}function checkApiStatusRegularly(){checkApiStatus(),setInterval(checkApiStatus,0xea60);}window[_0x4e2ed5(0x2a5)](_0x4e2ed5(0x262),function(){const _0x2c3ef0=_0x4e2ed5;showNotification(_0x2c3ef0(0x1e6),'error');}),window[_0x4e2ed5(0x2a5)](_0x4e2ed5(0x220),function(){const _0x2ed56a=_0x4e2ed5;showNotification('Vous\x20√™tes\x20de\x20nouveau\x20en\x20ligne.',_0x2ed56a(0x2be));}),window[_0x4e2ed5(0x2a5)](_0x4e2ed5(0x146),function(){const _0x385411=_0x4e2ed5;currentUser&&localStorage[_0x385411(0x1e3)](_0x385411(0x17c),JSON[_0x385411(0x1fc)](currentConversation));});function restoreAppState(){const _0x2e78d7=_0x4e2ed5,_0x4e642a=localStorage[_0x2e78d7(0x1ac)]('lastConversation');_0x4e642a&&(currentConversation=JSON[_0x2e78d7(0x1c6)](_0x4e642a),currentConversation[_0x2e78d7(0x1f5)](_0x1f8a9d=>{const _0x21072e=_0x2e78d7;addMessageToChat(_0x1f8a9d[_0x21072e(0x15d)],_0x1f8a9d[_0x21072e(0x2d1)]);}));}function isImageGenerationModel(_0xb42442){const _0x257499=_0x4e2ed5;return _0xb42442['startsWith'](_0x257499(0x1bc));}function getRecraftStyle(_0x1fe4fb){const _0xde8a58=_0x4e2ed5,_0xfd2dbb={'recraft-realistic':_0xde8a58(0x30e),'recraft-digital':'digital_illustration','recraft-vector':_0xde8a58(0x2ab),'recraft-icon':_0xde8a58(0x22e)};return _0xfd2dbb[_0x1fe4fb]||_0xde8a58(0x30e);}async function initializeImageGenerationTracking(_0x2c4220){const _0x31c10c=_0x4e2ed5,_0x1747a3=db[_0x31c10c(0x164)]('users/'+_0x2c4220),_0xda3162=await _0x1747a3[_0x31c10c(0x160)](_0x31c10c(0x19e))['once']('value'),_0x5253ad=_0xda3162[_0x31c10c(0x16c)]();(!_0x5253ad||isNewDay(_0x5253ad[_0x31c10c(0x318)]))&&await _0x1747a3[_0x31c10c(0x160)](_0x31c10c(0x19e))[_0x31c10c(0x32c)]({'dailyCount':0x0,'lastReset':new Date()[_0x31c10c(0x2ca)]()});}function isNewDay(_0x52bc57){const _0x102211=_0x4e2ed5;if(!_0x52bc57)return!![];const _0xe1b1cc=new Date(_0x52bc57),_0x1009fc=new Date();return _0xe1b1cc[_0x102211(0x20a)]()!==_0x1009fc[_0x102211(0x20a)]()||_0xe1b1cc[_0x102211(0x210)]()!==_0x1009fc['getMonth']()||_0xe1b1cc[_0x102211(0x2df)]()!==_0x1009fc['getFullYear']();}async function getImageGenerationCount(_0xaf6b6d){const _0x22d3a3=_0x4e2ed5,_0x45fc8f=db[_0x22d3a3(0x164)](_0x22d3a3(0x1b9)+_0xaf6b6d),_0x1efaf6=await _0x45fc8f[_0x22d3a3(0x160)]('imageGeneration')['once']('value'),_0x490e75=_0x1efaf6[_0x22d3a3(0x16c)]();if(!_0x490e75||isNewDay(_0x490e75[_0x22d3a3(0x318)]))return await initializeImageGenerationTracking(_0xaf6b6d),0x0;return _0x490e75[_0x22d3a3(0x191)];}async function incrementImageGenerationCount(_0x4f900e){const _0x54e6a2=_0x4e2ed5,_0x144e2f=db[_0x54e6a2(0x164)](_0x54e6a2(0x1b9)+_0x4f900e);await _0x144e2f[_0x54e6a2(0x160)]('imageGeneration')['transaction'](_0x23f93c=>{const _0xfc3880=_0x54e6a2;if(!_0x23f93c||isNewDay(_0x23f93c[_0xfc3880(0x318)]))return{'dailyCount':0x1,'lastReset':new Date()[_0xfc3880(0x2ca)]()};return{'dailyCount':_0x23f93c[_0xfc3880(0x191)]+0x1,'lastReset':_0x23f93c[_0xfc3880(0x318)]};});}async function canGenerateImage(){const _0x145fad=_0x4e2ed5,_0x2b3405=await getImageGenerationCount(currentUser['username']),_0x5d06d6=hasValidSubscription(),_0xbc609b=currentUser[_0x145fad(0x21c)]>=0x5||currentUser[_0x145fad(0x15e)]>=0x5;if(_0x5d06d6&&_0x2b3405<0x5)return{'canGenerate':!![],'useFreeGeneration':!![],'message':_0x145fad(0x2bd)+(0x5-_0x2b3405)+_0x145fad(0x207)};if(_0xbc609b)return{'canGenerate':!![],'useFreeGeneration':![],'message':_0x145fad(0x224)};return{'canGenerate':![],'useFreeGeneration':![],'message':_0x145fad(0x1bd)};}function confirmCreditUsage(_0x45c4a8){return new Promise(_0x3709bb=>{const _0x51c550=_0x4b8e,_0x2e6825=document[_0x51c550(0x1d9)](_0x51c550(0x309));_0x2e6825['className']=_0x51c550(0x2b9),_0x2e6825['innerHTML']=_0x51c550(0x24b)+_0x45c4a8+_0x51c550(0x326),document[_0x51c550(0x27d)]['appendChild'](_0x2e6825),setTimeout(()=>_0x2e6825['classList']['add']('show'),0x64);function _0x32a542(_0x2117c6){const _0x36a012=_0x51c550,_0x59276b=_0x2117c6['target'][_0x36a012(0x23b)](_0x36a012(0x247))[_0x36a012(0x1d6)](_0x36a012(0x14c));_0x2e6825[_0x36a012(0x32d)][_0x36a012(0x29c)](_0x36a012(0x29b)),setTimeout(()=>{_0x2e6825['remove'](),_0x3709bb(_0x59276b==='true');},0x12c);}_0x2e6825[_0x51c550(0x21e)](_0x51c550(0x217))[_0x51c550(0x1f5)](_0x2564a3=>{const _0x17e641=_0x51c550;_0x2564a3[_0x17e641(0x2a5)](_0x17e641(0x2c1),_0x32a542);});});}function parseMarkdownTable(_0x2a353f){const _0x55e8eb=_0x4e2ed5,_0x175d92=_0x2a353f[_0x55e8eb(0x2aa)]()[_0x55e8eb(0x198)]('\x0a');if(_0x175d92[_0x55e8eb(0x23f)]<0x3)return null;const _0x23b731=_0x175d92[_0x55e8eb(0x281)](_0x583674=>_0x583674['trim']()[_0x55e8eb(0x30d)]('|')&&_0x583674[_0x55e8eb(0x2aa)]()[_0x55e8eb(0x2d7)]('|'));if(!_0x23b731)return null;const _0x25f8a6=_0x175d92[_0x55e8eb(0x16b)](_0x4a1d22=>{const _0x1edba4=_0x55e8eb,_0xd282b4=_0x4a1d22[_0x1edba4(0x2aa)]()[_0x1edba4(0x1ab)](0x1,-0x1)[_0x1edba4(0x198)]('|')['map'](_0x5b3443=>_0x5b3443['trim']());return _0xd282b4;}),_0x1758a0=_0x25f8a6[0x0],_0x3c7f5a=_0x25f8a6[_0x55e8eb(0x1ab)](0x2);let _0x5d1327='<div\x20class=\x22table-wrapper\x22><table><thead><tr>';return _0x1758a0[_0x55e8eb(0x1f5)](_0x484d54=>{const _0x2402a0=_0x55e8eb;_0x5d1327+=_0x2402a0(0x14a)+_0x484d54+_0x2402a0(0x16f);}),_0x5d1327+=_0x55e8eb(0x2cb),_0x3c7f5a[_0x55e8eb(0x1f5)](_0x405535=>{const _0x5f3153=_0x55e8eb;_0x5d1327+=_0x5f3153(0x176),_0x405535[_0x5f3153(0x1f5)](_0x19884d=>{const _0x5944a0=_0x5f3153;_0x5d1327+=_0x5944a0(0x24e)+_0x19884d+_0x5944a0(0x153);}),_0x5d1327+='</tr>';}),_0x5d1327+=_0x55e8eb(0x33e),_0x5d1327+=_0x55e8eb(0x331),_0x5d1327;}function processMessageContent(_0x717836){const _0x1fb5fb=/\|[\s\S]+?\n[-|\s]+\n[\s\S]+?\n(?=\n|$)/g;return _0x717836['replace'](_0x1fb5fb,_0x1e079c=>{const _0x3866b9=parseMarkdownTable(_0x1e079c);return _0x3866b9||_0x1e079c;});}function addMessageToChat(_0x25c14f,_0x2aed73){const _0x135d65=_0x4e2ed5,_0xa4f4d2=document[_0x135d65(0x179)]('messageContainer'),_0x5e2f06=document['createElement']('div');_0x5e2f06['classList'][_0x135d65(0x18b)](_0x135d65(0x17a),_0x25c14f==='user'?_0x135d65(0x330):'ai-message');if(_0x25c14f==='ai'){let _0x157c22=_0x2aed73;_0x157c22=_0x157c22[_0x135d65(0x137)](/^\*\*/gm,'\x0a'),_0x157c22=_0x157c22[_0x135d65(0x137)](/\*\*/g,''),_0x157c22=formatMarkdownTable(_0x157c22);const _0x184d29=document[_0x135d65(0x1d9)](_0x135d65(0x309));_0x184d29[_0x135d65(0x1a8)]=_0x157c22,_0x5e2f06[_0x135d65(0x1b5)](_0x184d29);const _0x58a845=document[_0x135d65(0x1d9)](_0x135d65(0x309));_0x58a845[_0x135d65(0x32d)][_0x135d65(0x18b)](_0x135d65(0x2b2)),_0x58a845[_0x135d65(0x1a8)]=_0x135d65(0x327),_0x5e2f06['appendChild'](_0x58a845);}else _0x5e2f06[_0x135d65(0x338)]=_0x2aed73;return _0xa4f4d2[_0x135d65(0x1b5)](_0x5e2f06),_0xa4f4d2[_0x135d65(0x1e9)]=_0xa4f4d2[_0x135d65(0x240)],_0x5e2f06;}function formatMarkdownTable(_0x3768d2){const _0xf1dd7d=/\|(.+)\|\n\|(?:[-:|]+\|)+\n(\|(?:.+\|)+\n?)+/g;return _0x3768d2['replace'](_0xf1dd7d,function(_0x2f956a){const _0x5046af=_0x4b8e,_0x4ce972=_0x2f956a[_0x5046af(0x2aa)]()['split']('\x0a');if(_0x4ce972[_0x5046af(0x23f)]<0x3)return _0x2f956a;let _0x24e755=_0x5046af(0x27c);const _0x358130=_0x4ce972[0x0][_0x5046af(0x198)]('|')[_0x5046af(0x323)](_0x2006e3=>_0x2006e3[_0x5046af(0x2aa)]());return _0x24e755+=_0x5046af(0x287),_0x358130[_0x5046af(0x1f5)](_0x298f4d=>{const _0x2de8e2=_0x5046af;_0x24e755+=_0x2de8e2(0x14a)+_0x298f4d[_0x2de8e2(0x2aa)]()+_0x2de8e2(0x16f);}),_0x24e755+=_0x5046af(0x2f7),_0x24e755+=_0x5046af(0x21b),_0x4ce972[_0x5046af(0x1ab)](0x2)[_0x5046af(0x1f5)](_0x12064d=>{const _0x56b1e6=_0x5046af,_0x3514d0=_0x12064d[_0x56b1e6(0x198)]('|')[_0x56b1e6(0x323)](_0x4170e6=>_0x4170e6[_0x56b1e6(0x2aa)]());_0x3514d0[_0x56b1e6(0x23f)]>0x0&&(_0x24e755+=_0x56b1e6(0x176),_0x3514d0[_0x56b1e6(0x1f5)](_0x4570f2=>{const _0x11e687=_0x56b1e6;_0x24e755+='<td>'+_0x4570f2[_0x11e687(0x2aa)]()+'</td>';}),_0x24e755+=_0x56b1e6(0x219));}),_0x24e755+=_0x5046af(0x20f),_0x24e755;});}function updateUI(){const _0x55cd5c=_0x4e2ed5;currentUser&&(document['getElementById'](_0x55cd5c(0x15e))[_0x55cd5c(0x338)]=currentUser[_0x55cd5c(0x15e)],document[_0x55cd5c(0x179)]('paidCredits')[_0x55cd5c(0x338)]=currentUser[_0x55cd5c(0x21c)],document[_0x55cd5c(0x179)](_0x55cd5c(0x188))[_0x55cd5c(0x338)]=currentUser[_0x55cd5c(0x188)]||'Aucun');}document[_0x4e2ed5(0x2a5)]('click',function(_0x55d39d){const _0x48f49c=_0x4e2ed5,_0x13a087=document[_0x48f49c(0x255)](_0x48f49c(0x2ea)),_0x54eac2=document['querySelector']('.toggle-sidebar');_0x13a087[_0x48f49c(0x32d)][_0x48f49c(0x283)]('visible')&&!_0x13a087[_0x48f49c(0x283)](_0x55d39d[_0x48f49c(0x17e)])&&!_0x54eac2[_0x48f49c(0x283)](_0x55d39d['target'])&&(toggleSidebar(),_0x55d39d[_0x48f49c(0x2c5)]());}),window[_0x4e2ed5(0x244)]=function(_0x37f721){const _0xba204=_0x4e2ed5,_0x412522=document[_0xba204(0x255)](_0xba204(0x2ea));if(_0x412522[_0xba204(0x32d)][_0xba204(0x283)](_0xba204(0x2de)))return toggleSidebar(),_0x37f721[_0xba204(0x2c5)](),history[_0xba204(0x1d2)]({},'',''),![];},document[_0x4e2ed5(0x179)](_0x4e2ed5(0x296))['accept']=_0x4e2ed5(0x1af),setInterval(updateUI,0x493e0),checkApiStatusRegularly(),window[_0x4e2ed5(0x32f)]=showLoginModal,window['showRegisterModal']=showRegisterModal,window[_0x4e2ed5(0x2cc)]=login,window[_0x4e2ed5(0x213)]=register,window[_0x4e2ed5(0x29a)]=logout,window[_0x4e2ed5(0x148)]=sendMessage,window[_0x4e2ed5(0x2a2)]=buySubscription,window[_0x4e2ed5(0x12f)]=buyCredits,window[_0x4e2ed5(0x2fe)]=toggleTheme,window[_0x4e2ed5(0x288)]=toggleSidebar,window[_0x4e2ed5(0x134)]=createNewConversation,window[_0x4e2ed5(0x2af)]=handleFileUpload,window[_0x4e2ed5(0x235)]=togglePromptList,window[_0x4e2ed5(0x341)]=showReferralModal,window[_0x4e2ed5(0x155)]=generateReferralCode,window[_0x4e2ed5(0x152)]=copyReferralLink,window[_0x4e2ed5(0x315)]=shareOnFacebook,window['shareOnTwitter']=shareOnTwitter,window['shareOnLinkedIn']=shareOnLinkedIn,window[_0x4e2ed5(0x2a3)]=shareOnWhatsApp,window[_0x4e2ed5(0x139)]=removePinnedFile;
